<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActionMailerTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            ActionMailerTest 
            
                <span class="parent">&lt; 
                    
                    <a href="Test/Unit/TestCase.html">Test::Unit::TestCase</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/rails/actionmailer/test/old_base/mail_service_test_rb.html">rails/actionmailer/test/old_base/mail_service_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-encode">encode</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-new_mail">new_mail</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup">setup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-teardown">teardown</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attachment_using_content_location">test_attachment_using_content_location</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attachment_with_custom_header">test_attachment_with_custom_header</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attachment_with_text_type">test_attachment_with_text_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cancelled_account">test_cancelled_account</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cc_bcc">test_cc_bcc</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_custom_content_type_attributes">test_custom_content_type_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_custom_template">test_custom_template</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_custom_templating_extension">test_custom_templating_extension</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_attachment_without_charset">test_decode_attachment_without_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_encoded_attachment_filename">test_decode_encoded_attachment_filename</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_message_with_incorrect_charset">test_decode_message_with_incorrect_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_message_with_unknown_charset">test_decode_message_with_unknown_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_message_without_content_type">test_decode_message_without_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_decode_part_without_content_type">test_decode_part_without_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deliveries_array">test_deliveries_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_doesnt_raise_errors_when_raise_delivery_errors_is_false">test_doesnt_raise_errors_when_raise_delivery_errors_is_false</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_header_values_omitted">test_empty_header_values_omitted</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicitly_multipart_messages">test_explicitly_multipart_messages</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicitly_multipart_with_content_type">test_explicitly_multipart_with_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicitly_multipart_with_invalid_content_type">test_explicitly_multipart_with_invalid_content_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_extended_headers">test_extended_headers</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_file_delivery_should_create_a_file">test_file_delivery_should_create_a_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_from_with_name_for_smtp">test_from_with_name_for_smtp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_from_without_name_for_smtp">test_from_without_name_for_smtp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_headers_removed_on_smtp_delivery">test_headers_removed_on_smtp_delivery</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_headers_with_nonalpha_chars">test_headers_with_nonalpha_chars</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_html_mail">test_html_mail</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_html_mail_with_underscores">test_html_mail_with_underscores</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_messages">test_implicitly_multipart_messages</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_messages_with_charset">test_implicitly_multipart_messages_with_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_messages_with_custom_order">test_implicitly_multipart_messages_with_custom_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implicitly_multipart_with_utf8">test_implicitly_multipart_with_utf8</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_iso_charset">test_iso_charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multipart_with_mime_version">test_multipart_with_mime_version</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multipart_with_template_path_with_dots">test_multipart_with_template_path_with_dots</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multipart_with_utf8_subject">test_multipart_with_utf8_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multiple_utf8_recipients">test_multiple_utf8_recipients</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_nested_parts">test_nested_parts</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_nested_parts_with_body">test_nested_parts_with_body</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_perform_deliveries_flag">test_perform_deliveries_flag</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_performs_delivery_via_sendmail">test_performs_delivery_via_sendmail</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_receive_attachments">test_receive_attachments</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_receive_decodes_base64_encoded_mail">test_receive_decodes_base64_encoded_mail</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_recursive_multipart_processing">test_recursive_multipart_processing</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reply_to">test_reply_to</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_return_path_with_create">test_return_path_with_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_return_path_with_deliver">test_return_path_with_deliver</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_up">test_signed_up</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_starttls_is_disabled_if_not_supported">test_starttls_is_disabled_if_not_supported</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_starttls_is_enabled_if_supported">test_starttls_is_enabled_if_supported</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_starttls_is_not_enabled">test_starttls_is_not_enabled</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unencoded_subject">test_unencoded_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_7bit_body">test_unquote_7bit_body</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_7bit_subject">test_unquote_7bit_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_base64_body">test_unquote_base64_body</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_quoted_printable_body">test_unquote_quoted_printable_body</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unquote_quoted_printable_subject">test_unquote_quoted_printable_subject</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_utf8_body_is_not_quoted">test_utf8_body_is_not_quoted</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_various_newlines">test_various_newlines</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_various_newlines_multipart">test_various_newlines_multipart</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_with_mail_object_deliver">test_with_mail_object_deliver</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-encode">
            
              <a name="method-i-encode"></a><b>encode</b>( text, charset=&quot;UTF-8&quot; )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-encode_source')" id="l_method-i-encode_source">show</a>
                
              </p>
              <div id="method-i-encode_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 319</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">encode</span>( <span class="ruby-identifier">text</span>, <span class="ruby-identifier">charset</span>=<span class="ruby-string">&quot;UTF-8&quot;</span> )
  <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Encodings</span>.<span class="ruby-identifier">q_value_encode</span>( <span class="ruby-identifier">text</span>, <span class="ruby-identifier">charset</span> )
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-new_mail">
            
              <a name="method-i-new_mail"></a><b>new_mail</b>( charset=&quot;UTF-8&quot; )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-new_mail_source')" id="l_method-i-new_mail_source">show</a>
                
              </p>
              <div id="method-i-new_mail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 323</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">new_mail</span>( <span class="ruby-identifier">charset</span>=<span class="ruby-string">&quot;UTF-8&quot;</span> )
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">charset</span> = <span class="ruby-identifier">charset</span>
  <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> = <span class="ruby-string">&quot;1.0&quot;</span>
  <span class="ruby-identifier">mail</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <a name="method-i-setup"></a><b>setup</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 330</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>
  <span class="ruby-identifier">set_delivery_method</span> <span class="ruby-value">:test</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">raise_delivery_errors</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">silenced</span> = <span class="ruby-keyword">true</span>

  <span class="ruby-ivar">@recipient</span> = <span class="ruby-string">'test@localhost'</span>

  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:test</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-teardown">
            
              <a name="method-i-teardown"></a><b>teardown</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-teardown_source')" id="l_method-i-teardown_source">show</a>
                
              </p>
              <div id="method-i-teardown_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">teardown</span>
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">silenced</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">restore_delivery_method</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attachment_using_content_location">
            
              <a name="method-i-test_attachment_using_content_location"></a><b>test_attachment_using_content_location</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attachment_using_content_location_source')" id="l_method-i-test_attachment_using_content_location_source">show</a>
                
              </p>
              <div id="method-i-test_attachment_using_content_location_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 826</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attachment_using_content_location</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email12&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Photo25.jpg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">filename</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attachment_with_custom_header">
            
              <a name="method-i-test_attachment_with_custom_header"></a><b>test_attachment_with_custom_header</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attachment_with_custom_header_source')" id="l_method-i-test_attachment_with_custom_header_source">show</a>
                
              </p>
              <div id="method-i-test_attachment_with_custom_header_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 379</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attachment_with_custom_header</span>
  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">attachment_with_custom_header</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">header</span>[<span class="ruby-string">'content-id'</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&lt;test@test.com&gt;&quot;</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attachment_with_text_type">
            
              <a name="method-i-test_attachment_with_text_type"></a><b>test_attachment_with_text_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attachment_with_text_type_source')" id="l_method-i-test_attachment_with_text_type_source">show</a>
                
              </p>
              <div id="method-i-test_attachment_with_text_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 833</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attachment_with_text_type</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email13&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">has_attachments?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;hello.rb&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">filename</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cancelled_account">
            
              <a name="method-i-test_cancelled_account"></a><b>test_cancelled_account</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cancelled_account_source')" id="l_method-i-test_cancelled_account_source">show</a>
                
              </p>
              <div id="method-i-test_cancelled_account_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 453</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cancelled_account</span>
  <span class="ruby-identifier">expected</span>         = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-node">&quot;[Cancelled] Goodbye #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-node">&quot;Goodbye, Mr. #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>)

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">cancelled_account</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">cancelled_account</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span> }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">delivered</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cc_bcc">
            
              <a name="method-i-test_cc_bcc"></a><b>test_cc_bcc</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cc_bcc_source')" id="l_method-i-test_cc_bcc_source">show</a>
                
              </p>
              <div id="method-i-test_cc_bcc_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 477</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cc_bcc</span>
  <span class="ruby-identifier">expected</span>         = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing bcc/cc&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-string">&quot;root@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">cc_bcc</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">cc_bcc</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">delivered</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_custom_content_type_attributes">
            
              <a name="method-i-test_custom_content_type_attributes"></a><b>test_custom_content_type_attributes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_custom_content_type_attributes_source')" id="l_method-i-test_custom_content_type_attributes_source">show</a>
                
              </p>
              <div id="method-i-test_custom_content_type_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1056</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_custom_content_type_attributes</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">custom_content_type_attributes</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{format=flowed}</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">content_type</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{charset=UTF-8}</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">content_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_custom_template">
            
              <a name="method-i-test_custom_template"></a><b>test_custom_template</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_custom_template_source')" id="l_method-i-test_custom_template_source">show</a>
                
              </p>
              <div id="method-i-test_custom_template_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_custom_template</span>
  <span class="ruby-identifier">expected</span>         = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-node">&quot;[Signed up] Welcome #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-node">&quot;Hello there,\n\nMr. #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>)

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">custom_template</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_custom_templating_extension">
            
              <a name="method-i-test_custom_templating_extension"></a><b>test_custom_templating_extension</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_custom_templating_extension_source')" id="l_method-i-test_custom_templating_extension_source">show</a>
                
              </p>
              <div id="method-i-test_custom_templating_extension_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_custom_templating_extension</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">template_handler_extensions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;haml&quot;</span>), <span class="ruby-string">&quot;haml extension was not registered&quot;</span>

  <span class="ruby-comment"># N.b., custom_templating_extension.text.plain.haml is expected to be in fixtures/test_mailer directory</span>
  <span class="ruby-identifier">expected</span>         = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-node">&quot;[Signed up] Welcome #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-node">&quot;Hello there, \n\nMr. #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>)

  <span class="ruby-comment"># Now that the template is registered, there should be one part. The text/plain part.</span>
  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">custom_templating_extension</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'text/plain'</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'text/html'</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">mime_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_attachment_without_charset">
            
              <a name="method-i-test_decode_attachment_without_charset"></a><b>test_decode_attachment_without_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_attachment_without_charset_source')" id="l_method-i-test_decode_attachment_without_charset_source">show</a>
                
              </p>
              <div id="method-i-test_decode_attachment_without_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 819</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_attachment_without_charset</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email3&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">attachment</span> = <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1026</span>, <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">read</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_encoded_attachment_filename">
            
              <a name="method-i-test_decode_encoded_attachment_filename"></a><b>test_decode_encoded_attachment_filename</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_encoded_attachment_filename_source')" id="l_method-i-test_decode_encoded_attachment_filename_source">show</a>
                
              </p>
              <div id="method-i-test_decode_encoded_attachment_filename_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1002</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_encoded_attachment_filename</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email8&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">attachment</span> = <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">last</span>

  <span class="ruby-identifier">expected</span> = <span class="ruby-string">&quot;01 Quien Te Dij\2212at. Pitbull.mp3&quot;</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">filename</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_message_with_incorrect_charset">
            
              <a name="method-i-test_decode_message_with_incorrect_charset"></a><b>test_decode_message_with_incorrect_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_message_with_incorrect_charset_source')" id="l_method-i-test_decode_message_with_incorrect_charset_source">show</a>
                
              </p>
              <div id="method-i-test_decode_message_with_incorrect_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 853</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_message_with_incorrect_charset</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email6&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_message_with_unknown_charset">
            
              <a name="method-i-test_decode_message_with_unknown_charset"></a><b>test_decode_message_with_unknown_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_message_with_unknown_charset_source')" id="l_method-i-test_decode_message_with_unknown_charset_source">show</a>
                
              </p>
              <div id="method-i-test_decode_message_with_unknown_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1019</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_message_with_unknown_charset</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email10&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_message_without_content_type">
            
              <a name="method-i-test_decode_message_without_content_type"></a><b>test_decode_message_without_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_message_without_content_type_source')" id="l_method-i-test_decode_message_without_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_decode_message_without_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 847</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_message_without_content_type</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email5&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_decode_part_without_content_type">
            
              <a name="method-i-test_decode_part_without_content_type"></a><b>test_decode_part_without_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_decode_part_without_content_type_source')" id="l_method-i-test_decode_part_without_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_decode_part_without_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 841</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_decode_part_without_content_type</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email4&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deliveries_array">
            
              <a name="method-i-test_deliveries_array"></a><b>test_deliveries_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deliveries_array_source')" id="l_method-i-test_deliveries_array_source">show</a>
                
              </p>
              <div id="method-i-test_deliveries_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 638</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deliveries_array</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_doesnt_raise_errors_when_raise_delivery_errors_is_false">
            
              <a name="method-i-test_doesnt_raise_errors_when_raise_delivery_errors_is_false"></a><b>test_doesnt_raise_errors_when_raise_delivery_errors_is_false</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_doesnt_raise_errors_when_raise_delivery_errors_is_false_source')" id="l_method-i-test_doesnt_raise_errors_when_raise_delivery_errors_is_false_source">show</a>
                
              </p>
              <div id="method-i-test_doesnt_raise_errors_when_raise_delivery_errors_is_false_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 655</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_doesnt_raise_errors_when_raise_delivery_errors_is_false</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">raise_delivery_errors</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">any_instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:deliver!</span>).<span class="ruby-identifier">raises</span>(<span class="ruby-constant">Exception</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_header_values_omitted">
            
              <a name="method-i-test_empty_header_values_omitted"></a><b>test_empty_header_values_omitted</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_header_values_omitted_source')" id="l_method-i-test_empty_header_values_omitted_source">show</a>
                
              </p>
              <div id="method-i-test_empty_header_values_omitted_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1025</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_header_values_omitted</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">unnamed_attachment</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">encoded</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{Content-Type: application/octet-stream}</span>, <span class="ruby-identifier">result</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{Content-Disposition: attachment}</span>, <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicitly_multipart_messages">
            
              <a name="method-i-test_explicitly_multipart_messages"></a><b>test_explicitly_multipart_messages</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicitly_multipart_messages_source')" id="l_method-i-test_explicitly_multipart_messages_source">show</a>
                
              </p>
              <div id="method-i-test_explicitly_multipart_messages_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 880</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicitly_multipart_messages</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">explicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'multipart/mixed'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">mime_type</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;iso-8859-1&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">charset</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;image/jpeg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">mime_type</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;attachment&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>][<span class="ruby-value">:content_disposition</span>].<span class="ruby-identifier">disposition_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;foo.jpg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>][<span class="ruby-value">:content_disposition</span>].<span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;foo.jpg&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>][<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">charset</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicitly_multipart_with_content_type">
            
              <a name="method-i-test_explicitly_multipart_with_content_type"></a><b>test_explicitly_multipart_with_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicitly_multipart_with_content_type_source')" id="l_method-i-test_explicitly_multipart_with_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_explicitly_multipart_with_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 897</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicitly_multipart_with_content_type</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">explicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;multipart/alternative&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicitly_multipart_with_invalid_content_type">
            
              <a name="method-i-test_explicitly_multipart_with_invalid_content_type"></a><b>test_explicitly_multipart_with_invalid_content_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicitly_multipart_with_invalid_content_type_source')" id="l_method-i-test_explicitly_multipart_with_invalid_content_type_source">show</a>
                
              </p>
              <div id="method-i-test_explicitly_multipart_with_invalid_content_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 903</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicitly_multipart_with_invalid_content_type</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">explicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-string">&quot;text/xml&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'multipart/mixed'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_extended_headers">
            
              <a name="method-i-test_extended_headers"></a><b>test_extended_headers</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_extended_headers_source')" id="l_method-i-test_extended_headers_source">show</a>
                
              </p>
              <div id="method-i-test_extended_headers_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 735</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_extended_headers</span>
  <span class="ruby-ivar">@recipient</span> = <span class="ruby-string">&quot;Grytyr &lt;test@localhost&gt;&quot;</span>

  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span> <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing extended headers&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;Grytyr &lt;stian1@example.net&gt;&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-string">&quot;Grytyr &lt;stian2@example.net&gt;&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-string">&quot;Grytyr &lt;stian3@example.net&gt;&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">extended_headers</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">extended_headers</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">delivered</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">delivered</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_file_delivery_should_create_a_file">
            
              <a name="method-i-test_file_delivery_should_create_a_file"></a><b>test_file_delivery_should_create_a_file</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_file_delivery_should_create_a_file_source')" id="l_method-i-test_file_delivery_should_create_a_file_source">show</a>
                
              </p>
              <div id="method-i-test_file_delivery_should_create_a_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 979</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_file_delivery_should_create_a_file</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:file</span>
  <span class="ruby-identifier">tmp_location</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">file_settings</span>[<span class="ruby-value">:location</span>]

  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">cc_bcc</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">tmp_location</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">tmp_location</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">tmp_location</span>, <span class="ruby-ivar">@recipient</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">tmp_location</span>, <span class="ruby-string">'nobody@loudthinking.com'</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">tmp_location</span>, <span class="ruby-string">'root@loudthinking.com'</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_from_with_name_for_smtp">
            
              <a name="method-i-test_from_with_name_for_smtp"></a><b>test_from_with_name_for_smtp</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_from_with_name_for_smtp_source')" id="l_method-i-test_from_with_name_for_smtp_source">show</a>
                
              </p>
              <div id="method-i-test_from_with_name_for_smtp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 520</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_from_with_name_for_smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">from_with_name</span>.<span class="ruby-identifier">deliver</span>

  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">mail</span>
  <span class="ruby-identifier">mail</span>, <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span> = <span class="ruby-identifier">mail</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">'root@loudthinking.com'</span>], <span class="ruby-identifier">to</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'system@loudthinking.com'</span>, <span class="ruby-identifier">from</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_from_without_name_for_smtp">
            
              <a name="method-i-test_from_without_name_for_smtp"></a><b>test_from_without_name_for_smtp</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_from_without_name_for_smtp_source')" id="l_method-i-test_from_without_name_for_smtp_source">show</a>
                
              </p>
              <div id="method-i-test_from_without_name_for_smtp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 508</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_from_without_name_for_smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">from_without_name</span>.<span class="ruby-identifier">deliver</span>

  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">mail</span>
  <span class="ruby-identifier">mail</span>, <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span> = <span class="ruby-identifier">mail</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">'root@loudthinking.com'</span>], <span class="ruby-identifier">to</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'system@loudthinking.com'</span>, <span class="ruby-identifier">from</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_headers_removed_on_smtp_delivery">
            
              <a name="method-i-test_headers_removed_on_smtp_delivery"></a><b>test_headers_removed_on_smtp_delivery</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_headers_removed_on_smtp_delivery_source')" id="l_method-i-test_headers_removed_on_smtp_delivery_source">show</a>
                
              </p>
              <div id="method-i-test_headers_removed_on_smtp_delivery_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 968</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_headers_removed_on_smtp_delivery</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">cc_bcc</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">2</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;root@loudthinking.com&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">2</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">2</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^Cc: nobody@loudthinking.com}</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_match</span> <span class="ruby-node">%r{^To: #{@recipient}}</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp">%r{^Bcc: root@loudthinking.com}</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">0</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_headers_with_nonalpha_chars">
            
              <a name="method-i-test_headers_with_nonalpha_chars"></a><b>test_headers_with_nonalpha_chars</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_headers_with_nonalpha_chars_source')" id="l_method-i-test_headers_with_nonalpha_chars_source">show</a>
                
              </p>
              <div id="method-i-test_headers_with_nonalpha_chars_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1031</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_headers_with_nonalpha_chars</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">headers_with_nonalpha_chars</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from_addrs</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc_addrs</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc_addrs</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r:/</span>, <span class="ruby-identifier">mail</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">decoded</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r:/</span>, <span class="ruby-identifier">mail</span>[<span class="ruby-value">:cc</span>].<span class="ruby-identifier">decoded</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r:/</span>, <span class="ruby-identifier">mail</span>[<span class="ruby-value">:bcc</span>].<span class="ruby-identifier">decoded</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_html_mail">
            
              <a name="method-i-test_html_mail"></a><b>test_html_mail</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_html_mail_source')" id="l_method-i-test_html_mail_source">show</a>
                
              </p>
              <div id="method-i-test_html_mail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 944</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_html_mail</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">html_mail</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_html_mail_with_underscores">
            
              <a name="method-i-test_html_mail_with_underscores"></a><b>test_html_mail_with_underscores</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_html_mail_with_underscores_source')" id="l_method-i-test_html_mail_with_underscores_source">show</a>
                
              </p>
              <div id="method-i-test_html_mail_with_underscores_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 949</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_html_mail_with_underscores</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">html_mail_with_underscores</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">%Q{&lt;a href=&quot;http://google.com&quot; target=&quot;_blank&quot;&gt;_Google&lt;/a&gt;}</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_messages">
            
              <a name="method-i-test_implicitly_multipart_messages"></a><b>test_implicitly_multipart_messages</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_messages_source')" id="l_method-i-test_implicitly_multipart_messages_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_messages_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 909</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_messages</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">template_handler_extensions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;bak&quot;</span>), <span class="ruby-string">&quot;bak extension was not registered&quot;</span>

  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">implicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;1.0&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;UTF-8&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">charset</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;UTF-8&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">charset</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;application/x-yaml&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;UTF-8&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">charset</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_messages_with_charset">
            
              <a name="method-i-test_implicitly_multipart_messages_with_charset"></a><b>test_implicitly_multipart_messages_with_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_messages_with_charset_source')" id="l_method-i-test_implicitly_multipart_messages_with_charset_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_messages_with_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 934</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_messages_with_charset</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">implicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-string">'iso-8859-1'</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>].<span class="ruby-identifier">content_type</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'iso-8859-1'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">content_type_parameters</span>[<span class="ruby-value">:charset</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'iso-8859-1'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">content_type_parameters</span>[<span class="ruby-value">:charset</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'iso-8859-1'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">content_type_parameters</span>[<span class="ruby-value">:charset</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_messages_with_custom_order">
            
              <a name="method-i-test_implicitly_multipart_messages_with_custom_order"></a><b>test_implicitly_multipart_messages_with_custom_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_messages_with_custom_order_source')" id="l_method-i-test_implicitly_multipart_messages_with_custom_order_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_messages_with_custom_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 924</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_messages_with_custom_order</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">template_handler_extensions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;bak&quot;</span>), <span class="ruby-string">&quot;bak extension was not registered&quot;</span>

  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">implicitly_multipart_example</span>(<span class="ruby-ivar">@recipient</span>, <span class="ruby-keyword">nil</span>, [<span class="ruby-string">&quot;application/x-yaml&quot;</span>, <span class="ruby-string">&quot;text/plain&quot;</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;application/x-yaml&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">mime_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implicitly_multipart_with_utf8">
            
              <a name="method-i-test_implicitly_multipart_with_utf8"></a><b>test_implicitly_multipart_with_utf8</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implicitly_multipart_with_utf8_source')" id="l_method-i-test_implicitly_multipart_with_utf8_source">show</a>
                
              </p>
              <div id="method-i-test_implicitly_multipart_with_utf8_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 872</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implicitly_multipart_with_utf8</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">implicitly_multipart_with_utf8</span>
  <span class="ruby-identifier">regex</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-string">'Subject: =?UTF-8?Q?Foo_=C3=A1=C3=AB=C3=B4_=C3=AE=C3=BC?='</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-node">%r#{regex}/</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">encoded</span>)
  <span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;Foo  &quot;</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_iso_charset">
            
              <a name="method-i-test_iso_charset"></a><b>test_iso_charset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_iso_charset_source')" id="l_method-i-test_iso_charset_source">show</a>
                
              </p>
              <div id="method-i-test_iso_charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 568</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_iso_charset</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:test</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>( <span class="ruby-string">&quot;iso-8859-1&quot;</span> )
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-identifier">encode</span> <span class="ruby-string">&quot;testing is charsets&quot;</span>, <span class="ruby-string">&quot;iso-8859-1&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-string">&quot;root@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">iso_charset</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">iso_charset</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">delivered</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">delivered</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multipart_with_mime_version">
            
              <a name="method-i-test_multipart_with_mime_version"></a><b>test_multipart_with_mime_version</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multipart_with_mime_version_source')" id="l_method-i-test_multipart_with_mime_version_source">show</a>
                
              </p>
              <div id="method-i-test_multipart_with_mime_version_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 859</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multipart_with_mime_version</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">multipart_with_mime_version</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;1.1&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multipart_with_template_path_with_dots">
            
              <a name="method-i-test_multipart_with_template_path_with_dots"></a><b>test_multipart_with_template_path_with_dots</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multipart_with_template_path_with_dots_source')" id="l_method-i-test_multipart_with_template_path_with_dots_source">show</a>
                
              </p>
              <div id="method-i-test_multipart_with_template_path_with_dots_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1048</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multipart_with_template_path_with_dots</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">FunkyPathMailer</span>.<span class="ruby-identifier">multipart_with_template_path_with_dots</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;UTF-8&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">charset</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multipart_with_utf8_subject">
            
              <a name="method-i-test_multipart_with_utf8_subject"></a><b>test_multipart_with_utf8_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multipart_with_utf8_subject_source')" id="l_method-i-test_multipart_with_utf8_subject_source">show</a>
                
              </p>
              <div id="method-i-test_multipart_with_utf8_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 864</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multipart_with_utf8_subject</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">multipart_with_utf8_subject</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">regex</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-string">'Subject: =?UTF-8?Q?Foo_=C3=A1=C3=AB=C3=B4_=C3=AE=C3=BC?='</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-node">%r#{regex}/</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">encoded</span>)
  <span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;Foo  &quot;</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multiple_utf8_recipients">
            
              <a name="method-i-test_multiple_utf8_recipients"></a><b>test_multiple_utf8_recipients</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multiple_utf8_recipients_source')" id="l_method-i-test_multiple_utf8_recipients_source">show</a>
                
              </p>
              <div id="method-i-test_multiple_utf8_recipients_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 786</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multiple_utf8_recipients</span>
  <span class="ruby-ivar">@recipient</span> = [<span class="ruby-string">&quot;\&quot;Foo  \&quot; &lt;extended@example.net&gt;&quot;</span>, <span class="ruby-string">&quot;\&quot;Example Recipient\&quot; &lt;me@example.com&gt;&quot;</span>]
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span> <span class="ruby-string">&quot;UTF-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing UTF-8 body&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot; blah&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-ivar">@recipient</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">utf8_body</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">from_regexp</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-string">'From: Foo =?UTF-8?B?w6HDq8O0?= =?UTF-8?B?IMOuw7w=?='</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-node">%r#{from_regexp}/</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>)

  <span class="ruby-identifier">to_regexp</span>   = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-string">&quot;To: =?UTF-8?B?Rm9vIMOhw6vDtCDDrsO8?= &lt;extended@example.net&gt;&quot;</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-node">%r#{to_regexp}/</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_nested_parts">
            
              <a name="method-i-test_nested_parts"></a><b>test_nested_parts</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_nested_parts_source')" id="l_method-i-test_nested_parts_source">show</a>
                
              </p>
              <div id="method-i-test_nested_parts_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 347</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_nested_parts</span>
  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">nested_multipart</span>(<span class="ruby-ivar">@recipient</span>)}
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/mixed&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">header</span>[<span class="ruby-string">'foo'</span>].<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">charset</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;application/octet-stream&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">mime_type</span>

<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_nested_parts_with_body">
            
              <a name="method-i-test_nested_parts_with_body"></a><b>test_nested_parts_with_body</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_nested_parts_with_body_source')" id="l_method-i-test_nested_parts_with_body_source">show</a>
                
              </p>
              <div id="method-i-test_nested_parts_with_body_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 363</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_nested_parts_with_body</span>
  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">nested_multipart_with_body</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">nested_multipart_with_body</span>(<span class="ruby-ivar">@recipient</span>)}

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>,<span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>,<span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/mixed&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Nothing to see here.&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">second</span>.<span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&lt;b&gt;test&lt;/b&gt; HTML&lt;br/&gt;&quot;</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">second</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_perform_deliveries_flag">
            
              <a name="method-i-test_perform_deliveries_flag"></a><b>test_perform_deliveries_flag</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_perform_deliveries_flag_source')" id="l_method-i-test_perform_deliveries_flag_source">show</a>
                
              </p>
              <div id="method-i-test_perform_deliveries_flag_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 646</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_perform_deliveries_flag</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_performs_delivery_via_sendmail">
            
              <a name="method-i-test_performs_delivery_via_sendmail"></a><b>test_performs_delivery_via_sendmail</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_performs_delivery_via_sendmail_source')" id="l_method-i-test_performs_delivery_via_sendmail_source">show</a>
                
              </p>
              <div id="method-i-test_performs_delivery_via_sendmail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_performs_delivery_via_sendmail</span>
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:popen</span>).<span class="ruby-identifier">once</span>.<span class="ruby-identifier">with</span>(<span class="ruby-string">'/usr/sbin/sendmail -i -t -f &quot;system@loudthinking.com&quot; test@localhost'</span>, <span class="ruby-string">'w+'</span>)
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:sendmail</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_receive_attachments">
            
              <a name="method-i-test_receive_attachments"></a><b>test_receive_attachments</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_receive_attachments_source')" id="l_method-i-test_receive_attachments_source">show</a>
                
              </p>
              <div id="method-i-test_receive_attachments_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 811</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_receive_attachments</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email2&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">attachment</span> = <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;smime.p7s&quot;</span>, <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;application/pkcs7-signature&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">mime_type</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_receive_decodes_base64_encoded_mail">
            
              <a name="method-i-test_receive_decodes_base64_encoded_mail"></a><b>test_receive_decodes_base64_encoded_mail</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_receive_decodes_base64_encoded_mail_source')" id="l_method-i-test_receive_decodes_base64_encoded_mail_source">show</a>
                
              </p>
              <div id="method-i-test_receive_decodes_base64_encoded_mail_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 805</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_receive_decodes_base64_encoded_mail</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email&quot;</span>)
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">receive</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%rJamis/</span>, <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">received_body</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_recursive_multipart_processing">
            
              <a name="method-i-test_recursive_multipart_processing"></a><b>test_recursive_multipart_processing</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_recursive_multipart_processing_source')" id="l_method-i-test_recursive_multipart_processing_source">show</a>
                
              </p>
              <div id="method-i-test_recursive_multipart_processing_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 991</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_recursive_multipart_processing</span>
  <span class="ruby-identifier">fixture</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/../fixtures/raw_email7&quot;</span>)
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fixture</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-number">2</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-number">4</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;This is the first part.&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;test.rb&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">second</span>.<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;flowed&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">fourth</span>.<span class="ruby-identifier">content_type_parameters</span>[<span class="ruby-value">:format</span>])
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">'smime.p7s'</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">second</span>.<span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reply_to">
            
              <a name="method-i-test_reply_to"></a><b>test_reply_to</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reply_to_source')" id="l_method-i-test_reply_to_source">show</a>
                
              </p>
              <div id="method-i-test_reply_to_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 532</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reply_to</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:test</span>

  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>       = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span>  = <span class="ruby-string">&quot;testing reply_to&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>     = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>     = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">reply_to</span> = <span class="ruby-string">&quot;atraver@gmail.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>     = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2008</span>, <span class="ruby-number">5</span>, <span class="ruby-number">23</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">different_reply_to</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">different_reply_to</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">delivered</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">delivered</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_return_path_with_create">
            
              <a name="method-i-test_return_path_with_create"></a><b>test_return_path_with_create</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_return_path_with_create_source')" id="l_method-i-test_return_path_with_create_source">show</a>
                
              </p>
              <div id="method-i-test_return_path_with_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1062</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_return_path_with_create</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">return_path</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;another@somewhere.test&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">return_path</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_return_path_with_deliver">
            
              <a name="method-i-test_return_path_with_deliver"></a><b>test_return_path_with_deliver</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_return_path_with_deliver_source')" id="l_method-i-test_return_path_with_deliver_source">show</a>
                
              </p>
              <div id="method-i-test_return_path_with_deliver_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1067</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_return_path_with_deliver</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">return_path</span>.<span class="ruby-identifier">deliver</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^Return-Path: &lt;another@somewhere.test&gt;}</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;another@somewhere.test&quot;</span>, <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">deliveries</span>[<span class="ruby-number">0</span>][<span class="ruby-number">1</span>].<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_up">
            
              <a name="method-i-test_signed_up"></a><b>test_signed_up</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_up_source')" id="l_method-i-test_signed_up_source">show</a>
                
              </p>
              <div id="method-i-test_signed_up_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 385</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_up</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:test</span>

  <span class="ruby-constant">Time</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-value">:now</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)

  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-node">&quot;[Signed up] Welcome #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-node">&quot;Hello there,\n\nMr. #{@recipient}&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>) }
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span> }

  <span class="ruby-identifier">delivered</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">delivered</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_starttls_is_disabled_if_not_supported">
            
              <a name="method-i-test_starttls_is_disabled_if_not_supported"></a><b>test_starttls_is_disabled_if_not_supported</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_starttls_is_disabled_if_not_supported_source')" id="l_method-i-test_starttls_is_disabled_if_not_supported_source">show</a>
                
              </p>
              <div id="method-i-test_starttls_is_disabled_if_not_supported_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1082</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_starttls_is_disabled_if_not_supported</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">smtp_settings</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:enable_starttls_auto</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">any_instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:respond_to?</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value">:enable_starttls_auto</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword">false</span>)
  <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">any_instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:enable_starttls_auto</span>).<span class="ruby-identifier">never</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_starttls_is_enabled_if_supported">
            
              <a name="method-i-test_starttls_is_enabled_if_supported"></a><b>test_starttls_is_enabled_if_supported</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_starttls_is_enabled_if_supported_source')" id="l_method-i-test_starttls_is_enabled_if_supported_source">show</a>
                
              </p>
              <div id="method-i-test_starttls_is_enabled_if_supported_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1074</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_starttls_is_enabled_if_supported</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">smtp_settings</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:enable_starttls_auto</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">any_instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:respond_to?</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value">:enable_starttls_auto</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword">true</span>)
  <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">any_instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:enable_starttls_auto</span>)
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_starttls_is_not_enabled">
            
              <a name="method-i-test_starttls_is_not_enabled"></a><b>test_starttls_is_not_enabled</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_starttls_is_not_enabled_source')" id="l_method-i-test_starttls_is_not_enabled_source">show</a>
                
              </p>
              <div id="method-i-test_starttls_is_not_enabled_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1090</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_starttls_is_not_enabled</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">smtp_settings</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:enable_starttls_auto</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">MockSMTP</span>.<span class="ruby-identifier">any_instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:respond_to?</span>).<span class="ruby-identifier">never</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:smtp</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">signed_up</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">smtp_settings</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:enable_starttls_auto</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unencoded_subject">
            
              <a name="method-i-test_unencoded_subject"></a><b>test_unencoded_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unencoded_subject_source')" id="l_method-i-test_unencoded_subject_source">show</a>
                
              </p>
              <div id="method-i-test_unencoded_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 603</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unencoded_subject</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:test</span>
  <span class="ruby-identifier">expected</span>         = <span class="ruby-identifier">new_mail</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing unencoded subject&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot;Nothing to see here.&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-string">&quot;system@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-string">&quot;nobody@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-string">&quot;root@loudthinking.com&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">unencoded_subject</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">created</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">created</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">encoded</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">unencoded_subject</span>(<span class="ruby-ivar">@recipient</span>).<span class="ruby-identifier">deliver</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">delivered</span> = <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">delivered</span>

  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>
  <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;123@456&gt;'</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">encoded</span>, <span class="ruby-identifier">delivered</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_7bit_body">
            
              <a name="method-i-test_unquote_7bit_body"></a><b>test_unquote_7bit_body</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_7bit_body_source')" id="l_method-i-test_unquote_7bit_body_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_7bit_body_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 693</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_7bit_body</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: subject
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

The=3Dbody
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=3Dbody&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=3Dbody&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_7bit_subject">
            
              <a name="method-i-test_unquote_7bit_subject"></a><b>test_unquote_7bit_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_7bit_subject_source')" id="l_method-i-test_unquote_7bit_subject_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_7bit_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 680</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_7bit_subject</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: this == working?
Content-Type: text/plain; charset=iso-8859-1

The body
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;this == working?&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Subject: this == working?\r\n&quot;</span>, <span class="ruby-identifier">mail</span>[<span class="ruby-value">:subject</span>].<span class="ruby-identifier">encoded</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_base64_body">
            
              <a name="method-i-test_unquote_base64_body"></a><b>test_unquote_base64_body</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_base64_body_source')" id="l_method-i-test_unquote_base64_body_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_base64_body_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 721</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_base64_body</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: subject
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: base64

VGhlIGJvZHk=
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The body&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;VGhlIGJvZHk=&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_quoted_printable_body">
            
              <a name="method-i-test_unquote_quoted_printable_body"></a><b>test_unquote_quoted_printable_body</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_quoted_printable_body_source')" id="l_method-i-test_unquote_quoted_printable_body_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_quoted_printable_body_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 707</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_quoted_printable_body</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: subject
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

The=3Dbody
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=body&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The=3Dbody=&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span>.<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unquote_quoted_printable_subject">
            
              <a name="method-i-test_unquote_quoted_printable_subject"></a><b>test_unquote_quoted_printable_subject</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unquote_quoted_printable_subject_source')" id="l_method-i-test_unquote_quoted_printable_subject_source">show</a>
                
              </p>
              <div id="method-i-test_unquote_quoted_printable_subject_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 667</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unquote_quoted_printable_subject</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">&quot;From: me@example.com
Subject: =?UTF-8?Q?testing_testing_=D6=A4?=
Content-Type: text/plain; charset=iso-8859-1

The body
&quot;</span>
    <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">msg</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;testing testing \3326\2244&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Subject: =?UTF-8?Q?testing_testing_=D6=A4?=\r\n&quot;</span>, <span class="ruby-identifier">mail</span>[<span class="ruby-value">:subject</span>].<span class="ruby-identifier">encoded</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_utf8_body_is_not_quoted">
            
              <a name="method-i-test_utf8_body_is_not_quoted"></a><b>test_utf8_body_is_not_quoted</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_utf8_body_is_not_quoted_source')" id="l_method-i-test_utf8_body_is_not_quoted_source">show</a>
                
              </p>
              <div id="method-i-test_utf8_body_is_not_quoted_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 771</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_utf8_body_is_not_quoted</span>
  <span class="ruby-ivar">@recipient</span> = <span class="ruby-string">&quot;Foo   &lt;extended@example.net&gt;&quot;</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">new_mail</span> <span class="ruby-string">&quot;UTF-8&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">to</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;testing UTF-8 body&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">&quot; blah&quot;</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">from</span>    = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">cc</span>      = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">bcc</span>     = <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">date</span>    = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span> <span class="ruby-number">2004</span>, <span class="ruby-number">12</span>, <span class="ruby-number">12</span>

  <span class="ruby-identifier">created</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">utf8_body</span> <span class="ruby-ivar">@recipient</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">%r blah/</span>, <span class="ruby-identifier">created</span>.<span class="ruby-identifier">decoded</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_various_newlines">
            
              <a name="method-i-test_various_newlines"></a><b>test_various_newlines</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_various_newlines_source')" id="l_method-i-test_various_newlines_source">show</a>
                
              </p>
              <div id="method-i-test_various_newlines_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 954</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_various_newlines</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">various_newlines</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;line #1\nline #2\nline #3\nline #4\n\n&quot;</span> <span class="ruby-operator">+</span>
               <span class="ruby-node">&quot;line #5\n\nline#6\n\nline #7&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_various_newlines_multipart">
            
              <a name="method-i-test_various_newlines_multipart"></a><b>test_various_newlines_multipart</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_various_newlines_multipart_source')" id="l_method-i-test_various_newlines_multipart_source">show</a>
                
              </p>
              <div id="method-i-test_various_newlines_multipart_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 960</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_various_newlines_multipart</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">various_newlines_multipart</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;line #1\nline #2\nline #3\nline #4\n\n&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;&lt;p&gt;line #1&lt;/p&gt;\n&lt;p&gt;line #2&lt;/p&gt;\n&lt;p&gt;line #3&lt;/p&gt;\n&lt;p&gt;line #4&lt;/p&gt;\n\n&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;line #1\r\nline #2\r\nline #3\r\nline #4\r\n\r\n&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;&lt;p&gt;line #1&lt;/p&gt;\r\n&lt;p&gt;line #2&lt;/p&gt;\r\n&lt;p&gt;line #3&lt;/p&gt;\r\n&lt;p&gt;line #4&lt;/p&gt;\r\n\r\n&quot;</span>, <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_with_mail_object_deliver">
            
              <a name="method-i-test_with_mail_object_deliver"></a><b>test_with_mail_object_deliver</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_with_mail_object_deliver_source')" id="l_method-i-test_with_mail_object_deliver_source">show</a>
                
              </p>
              <div id="method-i-test_with_mail_object_deliver_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionmailer/test/old_base/mail_service_test.rb, line 1041</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_with_mail_object_deliver</span>
  <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">delivery_method</span> = <span class="ruby-value">:test</span>
  <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">headers_with_nonalpha_chars</span>(<span class="ruby-ivar">@recipient</span>)
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">deliver</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">TestMailer</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    