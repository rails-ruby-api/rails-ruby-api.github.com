<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RelationTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            RelationTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activerecord/test/cases/relations_test_rb.html">activerecord/test/cases/relations_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="RelationTest/Mary.html">RelationTest::Mary</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-author">author</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-respond_to-3F">respond_to?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_anonymous_extension">test_anonymous_extension</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_any">test_any</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_bind_values">test_bind_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build">test_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count">test_count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_complex_chained_relations">test_count_complex_chained_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_explicit_columns">test_count_explicit_columns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_with_distinct">test_count_with_distinct</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create">test_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_bang">test_create_bang</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_order_with_scope_order">test_default_scope_order_with_scope_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_hash">test_default_scope_with_conditions_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_string">test_default_scope_with_conditions_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scoping_finder_methods">test_default_scoping_finder_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all">test_delete_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all_loaded">test_delete_all_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_all">test_destroy_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_do_not_double_quote_string_id">test_do_not_double_quote_string_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_do_not_double_quote_string_id_with_array">test_do_not_double_quote_string_id_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_all_by_attributes">test_dynamic_find_all_by_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_by_attributes">test_dynamic_find_by_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_by_attributes_bang">test_dynamic_find_by_attributes_bang</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_or_create_by_attributes">test_dynamic_find_or_create_by_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_or_initialize_by_attributes">test_dynamic_find_or_initialize_by_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_finder">test_dynamic_finder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_eager_association_loading_of_stis_with_multiple_references">test_eager_association_loading_of_stis_with_multiple_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_eager_loading_with_conditions_on_joins">test_eager_loading_with_conditions_on_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty">test_empty</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_complex_chained_relations">test_empty_complex_chained_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_with_zero_limit">test_empty_with_zero_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_except">test_except</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_exists">test_exists</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicit_create_scope">test_explicit_create_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_extensions_with_except">test_extensions_with_except</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_extensions_with_only">test_extensions_with_only</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_twice_should_or_the_relation">test_find_all_using_where_twice_should_or_the_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation">test_find_all_using_where_with_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_and_alternate_primary_key">test_find_all_using_where_with_relation_and_alternate_primary_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_does_not_alter_select_values">test_find_all_using_where_with_relation_does_not_alter_select_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_with_joins">test_find_all_using_where_with_relation_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery">test_find_all_using_where_with_relation_with_select_to_build_subquery</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_with_join">test_find_all_with_join</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_with_multiple_should_use_and">test_find_all_with_multiple_should_use_and</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_by_classname">test_find_by_classname</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_by_id_with_list_of_ar">test_find_by_id_with_list_of_ar</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_id">test_find_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_ids">test_find_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_empty_array">test_find_in_empty_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_on_hash_conditions">test_find_on_hash_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_included_associations">test_find_with_included_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_list_of_ar">test_find_with_list_of_ar</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_preloaded_associations">test_find_with_preloaded_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_readonly_option">test_find_with_readonly_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_last_with_arel_order">test_finding_last_with_arel_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_arel_order">test_finding_with_arel_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_complex_order">test_finding_with_complex_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_complex_order_and_limit">test_finding_with_complex_order_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_conditions">test_finding_with_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_cross_table_order_and_limit">test_finding_with_cross_table_order_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_group">test_finding_with_group</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_hash_conditions_on_joined_table">test_finding_with_hash_conditions_on_joined_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order">test_finding_with_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_and_take">test_finding_with_order_and_take</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_concatenated">test_finding_with_order_concatenated</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_limit_and_offset">test_finding_with_order_limit_and_offset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_reorder">test_finding_with_reorder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_intersection_with_array">test_intersection_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_joins_with_nil_argument">test_joins_with_nil_argument</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_joins_with_string_array">test_joins_with_string_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_last">test_last</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loaded_all">test_loaded_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loaded_first">test_loaded_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loading_with_one_association">test_loading_with_one_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loading_with_one_association_with_non_preload">test_loading_with_one_association_with_non_preload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many">test_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_with_limits">test_many_with_limits</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multi_where_ands_queries">test_multi_where_ands_queries</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multiple_selects">test_multiple_selects</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multivalue_where">test_multivalue_where</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_extension">test_named_extension</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_only">test_only</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_by_relation_attribute">test_order_by_relation_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_using_scoping">test_order_using_scoping</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_with_find_with_order">test_order_with_find_with_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_primary_key">test_primary_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging">test_relation_merging</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_eager_load">test_relation_merging_with_eager_load</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_joins">test_relation_merging_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_locks">test_relation_merging_with_locks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_merging_with_preload">test_relation_merging_with_preload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reload">test_reload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_removing_limit_with_options">test_removing_limit_with_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_class_methods_and_scopes">test_respond_to_class_methods_and_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_delegates_to_relation">test_respond_to_delegates_to_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_dynamic_finders">test_respond_to_dynamic_finders</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped">test_scoped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_all">test_scoped_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_build">test_scoped_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_first">test_scoped_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_responds_to_delegated_methods">test_scoped_responds_to_delegated_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_argument_error">test_select_argument_error</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_with_block">test_select_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size">test_size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_with_limit">test_size_with_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_with_zero_limit">test_size_with_zero_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_json">test_to_json</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_xml">test_to_xml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_yaml">test_to_yaml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_two_scopes_with_includes_should_not_drop_any_include">test_two_scopes_with_includes_should_not_drop_any_include</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unscoped_block_style">test_unscoped_block_style</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins">test_update_all_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_limit">test_update_all_with_joins_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_limit_and_order">test_update_all_with_joins_and_limit_and_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_offset">test_update_all_with_joins_and_offset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_offset_and_order">test_update_all_with_joins_and_offset_and_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_where_with_ar_object">test_where_with_ar_object</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-author">
            
              <a name="method-i-author"></a><b>author</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-author_source')" id="l_method-i-author_source">show</a>
                
              </p>
              <div id="method-i-author_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 897</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">author</span>
  <span class="ruby-string">'lifo'</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-respond_to-3F">
            
              <a name="method-i-respond_to-3F"></a><b>respond_to?</b>(method, access = false)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-respond_to-3F_source')" id="l_method-i-respond_to-3F_source">show</a>
                
              </p>
              <div id="method-i-respond_to-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 262</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">respond_to?</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">responds</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_anonymous_extension">
            
              <a name="method-i-test_anonymous_extension"></a><b>test_anonymous_extension</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_anonymous_extension_source')" id="l_method-i-test_anonymous_extension_source">show</a>
                
              </p>
              <div id="method-i-test_anonymous_extension_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 895</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_anonymous_extension</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>).<span class="ruby-identifier">extending</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">author</span>
      <span class="ruby-string">'lifo'</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">author</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_any">
            
              <a name="method-i-test_any"></a><b>test_any</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_any_source')" id="l_method-i-test_any_source">show</a>
                
              </p>
              <div id="method-i-test_any_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 778</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_any</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-comment"># This test was failing when run on its own (as opposed to running the entire suite).</span>
  <span class="ruby-comment"># The second line in the assert_queries block was causing visit_Arel_Attributes_Attribute</span>
  <span class="ruby-comment"># in Arel::Visitors::ToSql to trigger a SHOW TABLES query. Running that line here causes</span>
  <span class="ruby-comment"># the SHOW TABLES result to be cached so we don't have to do it again in the block.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># This is obviously a rubbish fix but it's the best I can come up with for now...</span>
  <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">any?</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> <span class="ruby-comment"># Uses COUNT()</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">any?</span>

    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span> }
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_bind_values">
            
              <a name="method-i-test_bind_values"></a><b>test_bind_values</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_bind_values_source')" id="l_method-i-test_bind_values_source">show</a>
                
              </p>
              <div id="method-i-test_bind_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_bind_values</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind_values</span>

  <span class="ruby-identifier">relation2</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind</span> <span class="ruby-string">'foo'</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ foo }</span>, <span class="ruby-identifier">relation2</span>.<span class="ruby-identifier">bind_values</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build">
            
              <a name="method-i-test_build"></a><b>test_build</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_source')" id="l_method-i-test_build_source">show</a>
                
              </p>
              <div id="method-i-test_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 819</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Post</span>, <span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count">
            
              <a name="method-i-test_count"></a><b>test_count</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_source')" id="l_method-i-test_count_source">show</a>
                
              </p>
              <div id="method-i-test_count_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 666</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:all</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:id</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">'comments_count &gt; 1'</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>).<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_complex_chained_relations">
            
              <a name="method-i-test_count_complex_chained_relations"></a><b>test_count_complex_chained_relations</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_complex_chained_relations_source')" id="l_method-i-test_count_complex_chained_relations_source">show</a>
                
              </p>
              <div id="method-i-test_count_complex_chained_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 745</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_complex_chained_relations</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">'comments_count'</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'id is not null'</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;author_id&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;comments_count &gt; 0&quot;</span>)

  <span class="ruby-identifier">expected</span> = { <span class="ruby-number">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_explicit_columns">
            
              <a name="method-i-test_count_explicit_columns"></a><b>test_count_explicit_columns</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_explicit_columns_source')" id="l_method-i-test_count_explicit_columns_source">show</a>
                
              </p>
              <div id="method-i-test_count_explicit_columns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 687</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_explicit_columns</span>
  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">0</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">'comments_count'</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'id is not null'</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">'id'</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'id'</span>).<span class="ruby-identifier">count</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">uniq</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">'id is not null'</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">'comments_count'</span>).<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">'comments_count'</span>).<span class="ruby-identifier">count</span>(<span class="ruby-string">'id'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">'comments_count'</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">'comments_count'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_with_distinct">
            
              <a name="method-i-test_count_with_distinct"></a><b>test_count_with_distinct</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_with_distinct_source')" id="l_method-i-test_count_with_distinct_source">show</a>
                
              </p>
              <div id="method-i-test_count_with_distinct_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 677</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_with_distinct</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>, <span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>, <span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:comments_count</span>).<span class="ruby-identifier">count</span>(<span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:comments_count</span>).<span class="ruby-identifier">count</span>(<span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create">
            
              <a name="method-i-test_create"></a><b>test_create</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_source')" id="l_method-i-test_create_source">show</a>
                
              </p>
              <div id="method-i-test_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 834</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create</span>
  <span class="ruby-identifier">birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">sparrow</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">sparrow</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">sparrow</span>.<span class="ruby-identifier">persisted?</span>

  <span class="ruby-identifier">hen</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'hen'</span>).<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'hen'</span>, <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_bang">
            
              <a name="method-i-test_create_bang"></a><b>test_create_bang</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_bang_source')" id="l_method-i-test_create_bang_source">show</a>
                
              </p>
              <div id="method-i-test_create_bang_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 846</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_bang</span>
  <span class="ruby-identifier">birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">create!</span> }

  <span class="ruby-identifier">hen</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'hen'</span>).<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">hen</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'hen'</span>, <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_order_with_scope_order">
            
              <a name="method-i-test_default_scope_order_with_scope_order"></a><b>test_default_scope_order_with_scope_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_order_with_scope_order_source')" id="l_method-i-test_default_scope_order_with_scope_order_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_order_with_scope_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 921</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_order_with_scope_order</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_old_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_old_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_hash">
            
              <a name="method-i-test_default_scope_with_conditions_hash"></a><b>test_default_scope_with_conditions_hash</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_hash_source')" id="l_method-i-test_default_scope_with_conditions_hash_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 363</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-string">'Jamis'</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'Jamis'</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_string">
            
              <a name="method-i-test_default_scope_with_conditions_string"></a><b>test_default_scope_with_conditions_string</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_string_source')" id="l_method-i-test_default_scope_with_conditions_string_source">show</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 358</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_string</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-string">'David'</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scoping_finder_methods">
            
              <a name="method-i-test_default_scoping_finder_methods"></a><b>test_default_scoping_finder_methods</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scoping_finder_methods_source')" id="l_method-i-test_default_scoping_finder_methods_source">show</a>
                
              </p>
              <div id="method-i-test_default_scoping_finder_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 368</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scoping_finder_methods</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id'</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-string">'David'</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all">
            
              <a name="method-i-test_delete_all"></a><b>test_delete_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_source')" id="l_method-i-test_delete_all_source">show</a>
                
              </p>
              <div id="method-i-test_delete_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 605</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>)

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">'Author.count'</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">delete_all</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all_loaded">
            
              <a name="method-i-test_delete_all_loaded"></a><b>test_delete_all_loaded</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_loaded_source')" id="l_method-i-test_delete_all_loaded_source">show</a>
                
              </p>
              <div id="method-i-test_delete_all_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 612</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all_loaded</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>)

  <span class="ruby-comment"># Force load</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">'Author.count'</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">delete_all</span> }

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_all">
            
              <a name="method-i-test_destroy_all"></a><b>test_destroy_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_all_source')" id="l_method-i-test_destroy_all_source">show</a>
                
              </p>
              <div id="method-i-test_destroy_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 592</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_all</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>)

  <span class="ruby-comment"># Force load</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">'Author.count'</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">destroy_all</span> }

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_do_not_double_quote_string_id">
            
              <a name="method-i-test_do_not_double_quote_string_id"></a><b>test_do_not_double_quote_string_id</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_do_not_double_quote_string_id_source')" id="l_method-i-test_do_not_double_quote_string_id_source">show</a>
                
              </p>
              <div id="method-i-test_do_not_double_quote_string_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_do_not_double_quote_string_id</span>
  <span class="ruby-identifier">van</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">van</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">van</span>.<span class="ruby-identifier">id</span>, <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">van</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">minivan_id</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_do_not_double_quote_string_id_with_array">
            
              <a name="method-i-test_do_not_double_quote_string_id_with_array"></a><b>test_do_not_double_quote_string_id_with_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_do_not_double_quote_string_id_with_array_source')" id="l_method-i-test_do_not_double_quote_string_id_with_array_source">show</a>
                
              </p>
              <div id="method-i-test_do_not_double_quote_string_id_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_do_not_double_quote_string_id_with_array</span>
  <span class="ruby-identifier">van</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">van</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">van</span>, <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">van</span>]).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_all_by_attributes">
            
              <a name="method-i-test_dynamic_find_all_by_attributes"></a><b>test_dynamic_find_all_by_attributes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_all_by_attributes_source')" id="l_method-i-test_dynamic_find_all_by_attributes_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_all_by_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 415</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_all_by_attributes</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">davids</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-string">'David'</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">davids</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">davids</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_by_attributes">
            
              <a name="method-i-test_dynamic_find_by_attributes"></a><b>test_dynamic_find_by_attributes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_by_attributes_source')" id="l_method-i-test_dynamic_find_by_attributes_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_by_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 394</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_by_attributes</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">expected_taggings</span> = <span class="ruby-identifier">taggings</span>(<span class="ruby-value">:welcome_general</span>, <span class="ruby-value">:thinking_general</span>)

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected_taggings</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_by_id_and_name</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_by_id_and_name!</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_by_attributes_bang">
            
              <a name="method-i-test_dynamic_find_by_attributes_bang"></a><b>test_dynamic_find_by_attributes_bang</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_by_attributes_bang_source')" id="l_method-i-test_dynamic_find_by_attributes_bang_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_by_attributes_bang_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 408</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_by_attributes_bang</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">find_by_id!</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;David&quot;</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">find_by_id_and_name!</span>(<span class="ruby-number">20</span>, <span class="ruby-string">'invalid'</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_or_create_by_attributes">
            
              <a name="method-i-test_dynamic_find_or_create_by_attributes"></a><b>test_dynamic_find_or_create_by_attributes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_or_create_by_attributes_source')" id="l_method-i-test_dynamic_find_or_create_by_attributes_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_or_create_by_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_or_create_by_attributes</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">lifo</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-string">'Lifo'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Lifo&quot;</span>, <span class="ruby-identifier">lifo</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">lifo</span>.<span class="ruby-identifier">persisted?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_or_initialize_by_attributes">
            
              <a name="method-i-test_dynamic_find_or_initialize_by_attributes"></a><b>test_dynamic_find_or_initialize_by_attributes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_or_initialize_by_attributes_source')" id="l_method-i-test_dynamic_find_or_initialize_by_attributes_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_or_initialize_by_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 423</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_or_initialize_by_attributes</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">lifo</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_or_initialize_by_name</span>(<span class="ruby-string">'Lifo'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Lifo&quot;</span>, <span class="ruby-identifier">lifo</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">lifo</span>.<span class="ruby-identifier">persisted?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_or_initialize_by_name</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_finder">
            
              <a name="method-i-test_dynamic_finder"></a><b>test_dynamic_finder</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_finder_source')" id="l_method-i-test_dynamic_finder_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_finder_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_finder</span>
  <span class="ruby-identifier">x</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">'author_id = ?'</span>, <span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:find_by_id</span>), <span class="ruby-string">'@klass should handle dynamic finders'</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_eager_association_loading_of_stis_with_multiple_references">
            
              <a name="method-i-test_eager_association_loading_of_stis_with_multiple_references"></a><b>test_eager_association_loading_of_stis_with_multiple_references</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_eager_association_loading_of_stis_with_multiple_references_source')" id="l_method-i-test_eager_association_loading_of_stis_with_multiple_references_source">show</a>
                
              </p>
              <div id="method-i-test_eager_association_loading_of_stis_with_multiple_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_eager_association_loading_of_stis_with_multiple_references</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:posts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:special_comments</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:post</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value">:special_comments</span>, <span class="ruby-value">:very_special_comment</span> ] } }).
    <span class="ruby-identifier">order</span>(<span class="ruby-string">'comments.body, very_special_comments_posts.body'</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'posts.id = 4'</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">authors</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">special_comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">special_comments</span>
    <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">special_comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">very_special_comment</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_eager_loading_with_conditions_on_joins">
            
              <a name="method-i-test_eager_loading_with_conditions_on_joins"></a><b>test_eager_loading_with_conditions_on_joins</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_eager_loading_with_conditions_on_joins_source')" id="l_method-i-test_eager_loading_with_conditions_on_joins_source">show</a>
                
              </p>
              <div id="method-i-test_eager_loading_with_conditions_on_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 964</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_eager_loading_with_conditions_on_joins</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>)

  <span class="ruby-comment"># This references the comments table, and so it should cause the comments to be eager</span>
  <span class="ruby-comment"># loaded via a JOIN, rather than by subsequent queries.</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">joins</span>(
    <span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>.<span class="ruby-identifier">create_join</span>(
      <span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>,
      <span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>.<span class="ruby-identifier">create_on</span>(<span class="ruby-constant">Comment</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">eq</span>(<span class="ruby-number">3</span>))
    )
  )

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">eager_loading?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty">
            
              <a name="method-i-test_empty"></a><b>test_empty</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_source')" id="l_method-i-test_empty_source">show</a>
                
              </p>
              <div id="method-i-test_empty_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 752</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">no_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">empty?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_complex_chained_relations">
            
              <a name="method-i-test_empty_complex_chained_relations"></a><b>test_empty_complex_chained_relations</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_complex_chained_relations_source')" id="l_method-i-test_empty_complex_chained_relations_source">show</a>
                
              </p>
              <div id="method-i-test_empty_complex_chained_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 767</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_complex_chained_relations</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;comments_count&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;id is not null&quot;</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;author_id&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;comments_count &gt; 0&quot;</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">no_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_with_zero_limit">
            
              <a name="method-i-test_empty_with_zero_limit"></a><b>test_empty_with_zero_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_with_zero_limit_source')" id="l_method-i-test_empty_with_zero_limit_source">show</a>
                
              </p>
              <div id="method-i-test_empty_with_zero_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 738</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_with_zero_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)

  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_except">
            
              <a name="method-i-test_except"></a><b>test_except</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_except_source')" id="l_method-i-test_except_source">show</a>
                
              </p>
              <div id="method-i-test_except_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 865</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_except</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">author_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:order</span>, <span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">all</span>, <span class="ruby-identifier">author_posts</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">all_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:where</span>, <span class="ruby-value">:order</span>, <span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>, <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_exists">
            
              <a name="method-i-test_exists"></a><b>test_exists</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_exists_source')" id="l_method-i-test_exists_source">show</a>
                
              </p>
              <div id="method-i-test_exists_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 574</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_exists</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-string">&quot;42&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-number">42</span>)

  <span class="ruby-identifier">fake</span>  = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'fake author'</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">fake</span>.<span class="ruby-identifier">exists?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">fake</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicit_create_scope">
            
              <a name="method-i-test_explicit_create_scope"></a><b>test_explicit_create_scope</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicit_create_scope_source')" id="l_method-i-test_explicit_create_scope_source">show</a>
                
              </p>
              <div id="method-i-test_explicit_create_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 857</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicit_create_scope</span>
  <span class="ruby-identifier">hens</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'hen'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'hen'</span>, <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">hens</span> = <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'cock'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'cock'</span>, <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_extensions_with_except">
            
              <a name="method-i-test_extensions_with_except"></a><b>test_extensions_with_except</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_extensions_with_except_source')" id="l_method-i-test_extensions_with_except_source">show</a>
                
              </p>
              <div id="method-i-test_extensions_with_except_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 876</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_extensions_with_except</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">named_extension</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:author_name</span>).<span class="ruby-identifier">except</span>(<span class="ruby-value">:order</span>).<span class="ruby-identifier">two</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_extensions_with_only">
            
              <a name="method-i-test_extensions_with_only"></a><b>test_extensions_with_only</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_extensions_with_only_source')" id="l_method-i-test_extensions_with_only_source">show</a>
                
              </p>
              <div id="method-i-test_extensions_with_only_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 891</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_extensions_with_only</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">named_extension</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:author_name</span>).<span class="ruby-identifier">only</span>(<span class="ruby-value">:order</span>).<span class="ruby-identifier">two</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_twice_should_or_the_relation">
            
              <a name="method-i-test_find_all_using_where_twice_should_or_the_relation"></a><b>test_find_all_using_where_twice_should_or_the_relation</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_twice_should_or_the_relation_source')" id="l_method-i-test_find_all_using_where_twice_should_or_the_relation_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_twice_should_or_the_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 496</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_twice_should_or_the_relation</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Santiago'</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation">
            
              <a name="method-i-test_find_all_using_where_with_relation"></a><b>test_find_all_using_where_with_relation</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_source')" id="l_method-i-test_find_all_using_where_with_relation_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 524</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-comment"># switching the lines below would succeed in current rails</span>
  <span class="ruby-comment"># assert_queries(2) {</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key">
            
              <a name="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key"></a><b>test_find_all_using_where_with_relation_and_alternate_primary_key</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source')" id="l_method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 534</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_and_alternate_primary_key</span>
  <span class="ruby-identifier">cool_first</span> = <span class="ruby-identifier">minivans</span>(<span class="ruby-value">:cool_first</span>)
  <span class="ruby-comment"># switching the lines below would succeed in current rails</span>
  <span class="ruby-comment"># assert_queries(2) {</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cool_first</span>.<span class="ruby-identifier">name</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">cool_first</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values">
            
              <a name="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values"></a><b>test_find_all_using_where_with_relation_does_not_alter_select_values</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source')" id="l_method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 544</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_does_not_alter_select_values</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)

  <span class="ruby-identifier">subquery</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subquery</span>)
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>
  }

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">subquery</span>.<span class="ruby-identifier">select_values</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_with_joins">
            
              <a name="method-i-test_find_all_using_where_with_relation_with_joins"></a><b>test_find_all_using_where_with_relation_with_joins</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_with_joins_source')" id="l_method-i-test_find_all_using_where_with_relation_with_joins_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 557</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_with_joins</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:posts</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery">
            
              <a name="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery"></a><b>test_find_all_using_where_with_relation_with_select_to_build_subquery</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source')" id="l_method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 566</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_with_select_to_build_subquery</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:name</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_with_join">
            
              <a name="method-i-test_find_all_with_join"></a><b>test_find_all_with_join</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_with_join_source')" id="l_method-i-test_find_all_with_join_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_with_join_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 228</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_with_join</span>
  <span class="ruby-identifier">developers_on_project_one</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-string">'LEFT JOIN developers_projects ON developers.id = developers_projects.developer_id'</span>).
    <span class="ruby-identifier">where</span>(<span class="ruby-string">'project_id=1'</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">developer_names</span> = <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'David'</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'Jamis'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_with_multiple_should_use_and">
            
              <a name="method-i-test_find_all_with_multiple_should_use_and"></a><b>test_find_all_with_multiple_should_use_and</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_with_multiple_should_use_and_source')" id="l_method-i-test_find_all_with_multiple_should_use_and_source">show</a>
                
              </p>
              <div id="method-i-test_find_all_with_multiple_should_use_and_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 512</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_with_multiple_should_use_and</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">relation</span> = [
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span> },
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Santiago'</span> },
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'tenderlove'</span> },
  ].<span class="ruby-identifier">inject</span>(<span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">param</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_by_classname">
            
              <a name="method-i-test_find_by_classname"></a><b>test_find_by_classname</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_by_classname_source')" id="l_method-i-test_find_by_classname_source">show</a>
                
              </p>
              <div id="method-i-test_find_by_classname_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 485</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_by_classname</span>
  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Mary</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Mary</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_by_id_with_list_of_ar">
            
              <a name="method-i-test_find_by_id_with_list_of_ar"></a><b>test_find_by_id_with_list_of_ar</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_by_id_with_list_of_ar_source')" id="l_method-i-test_find_by_id_with_list_of_ar_source">show</a>
                
              </p>
              <div id="method-i-test_find_by_id_with_list_of_ar_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 490</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_by_id_with_list_of_ar</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find_by_id</span>([<span class="ruby-identifier">author</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">authors</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_id">
            
              <a name="method-i-test_find_id"></a><b>test_find_id</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_id_source')" id="l_method-i-test_find_id_source">show</a>
                
              </p>
              <div id="method-i-test_find_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 443</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_id</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'David'</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'lifo'</span>).<span class="ruby-identifier">find</span>(<span class="ruby-string">'42'</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_ids">
            
              <a name="method-i-test_find_ids"></a><b>test_find_ids</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_ids_source')" id="l_method-i-test_find_ids_source">show</a>
                
              </p>
              <div id="method-i-test_find_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_ids</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>)

  <span class="ruby-identifier">results</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">results</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">results</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'David'</span>, <span class="ruby-identifier">results</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'Mary'</span>, <span class="ruby-identifier">results</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">results</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>([<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>])

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'lifo'</span>).<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-string">'42'</span>) }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>([<span class="ruby-string">'42'</span>, <span class="ruby-number">43</span>]) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_empty_array">
            
              <a name="method-i-test_find_in_empty_array"></a><b>test_find_in_empty_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_empty_array_source')" id="l_method-i-test_find_in_empty_array_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_empty_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 466</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_empty_array</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> [])
  <span class="ruby-identifier">assert_blank</span> <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_on_hash_conditions">
            
              <a name="method-i-test_find_on_hash_conditions"></a><b>test_find_on_hash_conditions</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_on_hash_conditions_source')" id="l_method-i-test_find_on_hash_conditions_source">show</a>
                
              </p>
              <div id="method-i-test_find_on_hash_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_on_hash_conditions</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>}), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>({ <span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> }).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_included_associations">
            
              <a name="method-i-test_find_with_included_associations"></a><b>test_find_with_included_associations</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_included_associations_source')" id="l_method-i-test_find_with_included_associations_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_included_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 335</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_included_associations</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span> <span class="ruby-operator">?</span> <span class="ruby-number">1</span> <span class="ruby-operator">:</span> <span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span> <span class="ruby-operator">?</span> <span class="ruby-number">1</span> <span class="ruby-operator">:</span> <span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:author</span>, <span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_list_of_ar">
            
              <a name="method-i-test_find_with_list_of_ar"></a><b>test_find_with_list_of_ar</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_list_of_ar_source')" id="l_method-i-test_find_with_list_of_ar_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_list_of_ar_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 477</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_list_of_ar</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>([<span class="ruby-identifier">author</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_preloaded_associations">
            
              <a name="method-i-test_find_with_preloaded_associations"></a><b>test_find_with_preloaded_associations</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_preloaded_associations_source')" id="l_method-i-test_find_with_preloaded_associations_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_preloaded_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_preloaded_associations</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span> <span class="ruby-operator">?</span> <span class="ruby-number">1</span> <span class="ruby-operator">:</span> <span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span> <span class="ruby-operator">?</span> <span class="ruby-number">1</span> <span class="ruby-operator">:</span> <span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span> <span class="ruby-operator">?</span> <span class="ruby-number">1</span> <span class="ruby-operator">:</span> <span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>, <span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_readonly_option">
            
              <a name="method-i-test_find_with_readonly_option"></a><b>test_find_with_readonly_option</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_readonly_option_source')" id="l_method-i-test_find_with_readonly_option_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_readonly_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 291</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_readonly_option</span>
  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">readonly</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_last_with_arel_order">
            
              <a name="method-i-test_finding_last_with_arel_order"></a><b>test_finding_last_with_arel_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_last_with_arel_order_source')" id="l_method-i-test_finding_last_with_arel_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_last_with_arel_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_last_with_arel_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">asc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_arel_order">
            
              <a name="method-i-test_finding_with_arel_order"></a><b>test_finding_with_arel_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_arel_order_source')" id="l_method-i-test_finding_with_arel_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_arel_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_arel_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">asc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_complex_order">
            
              <a name="method-i-test_finding_with_complex_order"></a><b>test_finding_with_complex_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_complex_order_source')" id="l_method-i-test_finding_with_complex_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_complex_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_complex_order</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;REPLACE('abc', taggings.taggable_type, taggings.taggable_type)&quot;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_complex_order_and_limit">
            
              <a name="method-i-test_finding_with_complex_order_and_limit"></a><b>test_finding_with_complex_order_and_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_complex_order_and_limit_source')" id="l_method-i-test_finding_with_complex_order_and_limit_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_complex_order_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_complex_order_and_limit</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;REPLACE('abc', taggings.taggable_type, taggings.taggable_type)&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_conditions">
            
              <a name="method-i-test_finding_with_conditions"></a><b>test_finding_with_conditions</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_conditions_source')" id="l_method-i-test_finding_with_conditions_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_conditions</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;David&quot;</span>], <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">'Mary'</span>],  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>([<span class="ruby-string">&quot;name = ?&quot;</span>, <span class="ruby-string">'Mary'</span>]).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">'Mary'</span>],  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;name = ?&quot;</span>, <span class="ruby-string">'Mary'</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_cross_table_order_and_limit">
            
              <a name="method-i-test_finding_with_cross_table_order_and_limit"></a><b>test_finding_with_cross_table_order_and_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_cross_table_order_and_limit_source')" id="l_method-i-test_finding_with_cross_table_order_and_limit_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_cross_table_order_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_cross_table_order_and_limit</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).
            <span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;tags.name asc&quot;</span>, <span class="ruby-string">&quot;taggings.taggable_id asc&quot;</span>, <span class="ruby-string">&quot;REPLACE('abc', taggings.taggable_type, taggings.taggable_type)&quot;</span>).
            <span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_group">
            
              <a name="method-i-test_finding_with_group"></a><b>test_finding_with_group</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_group_source')" id="l_method-i-test_finding_with_group_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_group_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_group</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;salary&quot;</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;salary&quot;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:salary</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_hash_conditions_on_joined_table">
            
              <a name="method-i-test_finding_with_hash_conditions_on_joined_table"></a><b>test_finding_with_hash_conditions_on_joined_table</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_hash_conditions_on_joined_table_source')" id="l_method-i-test_finding_with_hash_conditions_on_joined_table_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_hash_conditions_on_joined_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_hash_conditions_on_joined_table</span>
  <span class="ruby-identifier">firms</span> = <span class="ruby-constant">DependentFirm</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:account</span>).<span class="ruby-identifier">where</span>({<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'RailsCore'</span>, <span class="ruby-value">:accounts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:credit_limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">55</span><span class="ruby-operator">..</span><span class="ruby-number">60</span> }}).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:rails_core</span>), <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order">
            
              <a name="method-i-test_finding_with_order"></a><b>test_finding_with_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_source')" id="l_method-i-test_finding_with_order_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_and_take">
            
              <a name="method-i-test_finding_with_order_and_take"></a><b>test_finding_with_order_and_take</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_and_take_source')" id="l_method-i-test_finding_with_order_and_take_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_and_take_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 172</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_and_take</span>
  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_concatenated">
            
              <a name="method-i-test_finding_with_order_concatenated"></a><b>test_finding_with_order_concatenated</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_concatenated_source')" id="l_method-i-test_finding_with_order_concatenated_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_concatenated_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_concatenated</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'author_name'</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'title'</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_limit_and_offset">
            
              <a name="method-i-test_finding_with_order_limit_and_offset"></a><b>test_finding_with_order_limit_and_offset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_limit_and_offset_source')" id="l_method-i-test_finding_with_order_limit_and_offset_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_order_limit_and_offset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_limit_and_offset</span>
  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:second</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">offset</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:third</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_reorder">
            
              <a name="method-i-test_finding_with_reorder"></a><b>test_finding_with_reorder</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_reorder_source')" id="l_method-i-test_finding_with_reorder_source">show</a>
                
              </p>
              <div id="method-i-test_finding_with_reorder_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_reorder</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'author_name'</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'title'</span>).<span class="ruby-identifier">reorder</span>(<span class="ruby-string">'id'</span>).<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">topics_titles</span> = <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">'The First Topic'</span>, <span class="ruby-string">'The Second Topic of the day'</span>, <span class="ruby-string">'The Third Topic of the day'</span>, <span class="ruby-string">'The Fourth Topic of the day'</span>], <span class="ruby-identifier">topics_titles</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_intersection_with_array">
            
              <a name="method-i-test_intersection_with_array"></a><b>test_intersection_with_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_intersection_with_array_source')" id="l_method-i-test_intersection_with_array_source">show</a>
                
              </p>
              <div id="method-i-test_intersection_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 948</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_intersection_with_array</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>)
  <span class="ruby-identifier">rails_author</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">rails_author</span>], [<span class="ruby-identifier">rails_author</span>] &amp; <span class="ruby-identifier">relation</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">rails_author</span>], <span class="ruby-identifier">relation</span> &amp; [<span class="ruby-identifier">rails_author</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_joins_with_nil_argument">
            
              <a name="method-i-test_joins_with_nil_argument"></a><b>test_joins_with_nil_argument</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_joins_with_nil_argument_source')" id="l_method-i-test_joins_with_nil_argument_source">show</a>
                
              </p>
              <div id="method-i-test_joins_with_nil_argument_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_joins_with_nil_argument</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">DependentFirm</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-keyword">nil</span>).<span class="ruby-identifier">first</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_joins_with_string_array">
            
              <a name="method-i-test_joins_with_string_array"></a><b>test_joins_with_string_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_joins_with_string_array_source')" id="l_method-i-test_joins_with_string_array_source">show</a>
                
              </p>
              <div id="method-i-test_joins_with_string_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_joins_with_string_array</span>
  <span class="ruby-identifier">person_with_reader_and_post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">joins</span>([
      <span class="ruby-string">&quot;INNER JOIN categorizations ON categorizations.post_id = posts.id&quot;</span>,
      <span class="ruby-string">&quot;INNER JOIN categories ON categories.id = categorizations.category_id AND categories.type = 'SpecialCategory'&quot;</span>
    ]
  ).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">person_with_reader_and_post</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_last">
            
              <a name="method-i-test_last"></a><b>test_last</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_last_source')" id="l_method-i-test_last_source">show</a>
                
              </p>
              <div id="method-i-test_last_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 587</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_last</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:bob</span>), <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loaded_all">
            
              <a name="method-i-test_loaded_all"></a><b>test_loaded_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loaded_all_source')" id="l_method-i-test_loaded_all_source">show</a>
                
              </p>
              <div id="method-i-test_loaded_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loaded_all</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loaded_first">
            
              <a name="method-i-test_loaded_first"></a><b>test_loaded_first</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loaded_first_source')" id="l_method-i-test_loaded_first_source">show</a>
                
              </p>
              <div id="method-i-test_loaded_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 108</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loaded_first</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">all</span> <span class="ruby-comment"># force load</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loading_with_one_association">
            
              <a name="method-i-test_loading_with_one_association"></a><b>test_loading_with_one_association</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loading_with_one_association_source')" id="l_method-i-test_loading_with_one_association_source">show</a>
                
              </p>
              <div id="method-i-test_loading_with_one_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 373</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loading_with_one_association</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>))

  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;posts.title = 'Welcome to the weblog'&quot;</span>).<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>))

  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:last_comment</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loading_with_one_association_with_non_preload">
            
              <a name="method-i-test_loading_with_one_association_with_non_preload"></a><b>test_loading_with_one_association_with_non_preload</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loading_with_one_association_with_non_preload_source')" id="l_method-i-test_loading_with_one_association_with_non_preload_source">show</a>
                
              </p>
              <div id="method-i-test_loading_with_one_association_with_non_preload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 388</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loading_with_one_association_with_non_preload</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'comments.id DESC'</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many">
            
              <a name="method-i-test_many"></a><b>test_many</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_source')" id="l_method-i-test_many_source">show</a>
                
              </p>
              <div id="method-i-test_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 800</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> <span class="ruby-comment"># Uses COUNT()</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span> }
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">2</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_with_limits">
            
              <a name="method-i-test_many_with_limits"></a><b>test_many_with_limits</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_with_limits_source')" id="l_method-i-test_many_with_limits_source">show</a>
                
              </p>
              <div id="method-i-test_many_with_limits_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 812</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_with_limits</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">many?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multi_where_ands_queries">
            
              <a name="method-i-test_multi_where_ands_queries"></a><b>test_multi_where_ands_queries</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multi_where_ands_queries_source')" id="l_method-i-test_multi_where_ands_queries_source">show</a>
                
              </p>
              <div id="method-i-test_multi_where_ands_queries_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 505</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multi_where_ands_queries</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Santiago'</span>).<span class="ruby-identifier">to_sql</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-string">'AND'</span>, <span class="ruby-identifier">sql</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multiple_selects">
            
              <a name="method-i-test_multiple_selects"></a><b>test_multiple_selects</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multiple_selects_source')" id="l_method-i-test_multiple_selects_source">show</a>
                
              </p>
              <div id="method-i-test_multiple_selects_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 700</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multiple_selects</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">'comments_count'</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">'title'</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Welcome to the weblog&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments_count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multivalue_where">
            
              <a name="method-i-test_multivalue_where"></a><b>test_multivalue_where</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multivalue_where_source')" id="l_method-i-test_multivalue_where_source">show</a>
                
              </p>
              <div id="method-i-test_multivalue_where_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multivalue_where</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">'author_id = ? AND id = ?'</span>, <span class="ruby-number">1</span>, <span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_extension">
            
              <a name="method-i-test_named_extension"></a><b>test_named_extension</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_extension_source')" id="l_method-i-test_named_extension_source">show</a>
                
              </p>
              <div id="method-i-test_named_extension_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 906</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_extension</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>).<span class="ruby-identifier">extending</span>(<span class="ruby-constant">Post</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedExtension</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">author</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_only">
            
              <a name="method-i-test_only"></a><b>test_only</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_only_source')" id="l_method-i-test_only_source">show</a>
                
              </p>
              <div id="method-i-test_only_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 880</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_only</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">author_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">only</span>(<span class="ruby-value">:where</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">all</span>, <span class="ruby-identifier">author_posts</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">all_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">only</span>(<span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">all</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_by_relation_attribute">
            
              <a name="method-i-test_order_by_relation_attribute"></a><b>test_order_by_relation_attribute</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_by_relation_attribute_source')" id="l_method-i-test_order_by_relation_attribute_source">show</a>
                
              </p>
              <div id="method-i-test_order_by_relation_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 912</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_by_relation_attribute</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:title</span>]).<span class="ruby-identifier">all</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;title&quot;</span>).<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_using_scoping">
            
              <a name="method-i-test_order_using_scoping"></a><b>test_order_using_scoping</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_using_scoping_source')" id="l_method-i-test_order_using_scoping_source">show</a>
                
              </p>
              <div id="method-i-test_order_using_scoping_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 928</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_using_scoping</span>
  <span class="ruby-identifier">car1</span> = <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id DESC'</span>).<span class="ruby-identifier">scoping</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'id asc'</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-identifier">car1</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">car2</span> = <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id DESC'</span>).<span class="ruby-identifier">scoping</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'id asc'</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-identifier">car2</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_with_find_with_order">
            
              <a name="method-i-test_order_with_find_with_order"></a><b>test_order_with_find_with_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_with_find_with_order_source')" id="l_method-i-test_order_with_find_with_order_source">show</a>
                
              </p>
              <div id="method-i-test_order_with_find_with_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 916</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_with_find_with_order</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'name desc'</span>).<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'id'</span>).<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'zyke'</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'name desc'</span>).<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'id'</span>).<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_primary_key">
            
              <a name="method-i-test_primary_key"></a><b>test_primary_key</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_primary_key_source')" id="l_method-i-test_primary_key_source">show</a>
                
              </p>
              <div id="method-i-test_primary_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 960</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_primary_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;id&quot;</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">primary_key</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging">
            
              <a name="method-i-test_relation_merging"></a><b>test_relation_merging</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_source')" id="l_method-i-test_relation_merging_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 629</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging</span>
  <span class="ruby-identifier">devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;salary &gt;= 80000&quot;</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;id &lt; 3&quot;</span>))
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)], <span class="ruby-identifier">devs</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">dev_with_count</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id DESC'</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">'developers.*'</span>))
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>)], <span class="ruby-identifier">dev_with_count</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_eager_load">
            
              <a name="method-i-test_relation_merging_with_eager_load"></a><b>test_relation_merging_with_eager_load</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_eager_load_source')" id="l_method-i-test_relation_merging_with_eager_load_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_eager_load_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 637</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_eager_load</span>
  <span class="ruby-identifier">relations</span> = []
  <span class="ruby-identifier">relations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'comments.id DESC'</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>)
  <span class="ruby-identifier">relations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'comments.id DESC'</span>)).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>)

  <span class="ruby-identifier">relations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">posts</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_joins">
            
              <a name="method-i-test_relation_merging_with_joins"></a><b>test_relation_merging_with_joins</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_joins_source')" id="l_method-i-test_relation_merging_with_joins_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_joins</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Thank you for the welcome'</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Such a lovely day'</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_locks">
            
              <a name="method-i-test_relation_merging_with_locks"></a><b>test_relation_merging_with_locks</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_locks_source')" id="l_method-i-test_relation_merging_with_locks_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_locks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 648</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_locks</span>
  <span class="ruby-identifier">devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">lock</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;salary &gt;= 80000&quot;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id DESC&quot;</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>))
  <span class="ruby-identifier">assert_present</span> <span class="ruby-identifier">devs</span>.<span class="ruby-identifier">locked</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_merging_with_preload">
            
              <a name="method-i-test_relation_merging_with_preload"></a><b>test_relation_merging_with_preload</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_merging_with_preload_source')" id="l_method-i-test_relation_merging_with_preload_source">show</a>
                
              </p>
              <div id="method-i-test_relation_merging_with_preload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 653</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_merging_with_preload</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">without</span> <span class="ruby-keyword">do</span>
    [<span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>)), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>)].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">posts</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reload">
            
              <a name="method-i-test_reload"></a><b>test_reload</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reload_source')" id="l_method-i-test_reload_source">show</a>
                
              </p>
              <div id="method-i-test_reload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reload</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">original_size</span> = <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create!</span> <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'fake'</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_size</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_removing_limit_with_options">
            
              <a name="method-i-test_removing_limit_with_options"></a><b>test_removing_limit_with_options</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_removing_limit_with_options_source')" id="l_method-i-test_removing_limit_with_options_source">show</a>
                
              </p>
              <div id="method-i-test_removing_limit_with_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 956</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_removing_limit_with_options</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">all</span>(<span class="ruby-value">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_class_methods_and_scopes">
            
              <a name="method-i-test_respond_to_class_methods_and_scopes"></a><b>test_respond_to_class_methods_and_scopes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_class_methods_and_scopes_source')" id="l_method-i-test_respond_to_class_methods_and_scopes_source">show</a>
                
              </p>
              <div id="method-i-test_respond_to_class_methods_and_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_class_methods_and_scopes</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">DeveloperOrderedBySalary</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:all_ordered_by_name</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:by_lifo</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_delegates_to_relation">
            
              <a name="method-i-test_respond_to_delegates_to_relation"></a><b>test_respond_to_delegates_to_relation</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_delegates_to_relation_source')" id="l_method-i-test_respond_to_delegates_to_relation_source">show</a>
                
              </p>
              <div id="method-i-test_respond_to_delegates_to_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_delegates_to_relation</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>
  <span class="ruby-identifier">fake_arel</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:responds</span>) {
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">respond_to?</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">responds</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span>]
    <span class="ruby-keyword">end</span>
  }.<span class="ruby-identifier">new</span> []

  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">attr_accessor</span> <span class="ruby-value">:arel</span> })
  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">arel</span> = <span class="ruby-identifier">fake_arel</span>

  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:matching_attributes</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">false</span>], <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span> = []
  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">true</span>], <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_dynamic_finders">
            
              <a name="method-i-test_respond_to_dynamic_finders"></a><b>test_respond_to_dynamic_finders</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_dynamic_finders_source')" id="l_method-i-test_respond_to_dynamic_finders_source">show</a>
                
              </p>
              <div id="method-i-test_respond_to_dynamic_finders_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_dynamic_finders</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>

  [<span class="ruby-string">&quot;find_by_title&quot;</span>, <span class="ruby-string">&quot;find_by_title_and_author_name&quot;</span>, <span class="ruby-string">&quot;find_or_create_by_title&quot;</span>, <span class="ruby-string">&quot;find_or_initialize_by_title_and_author_name&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">relation</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;Topic.scoped should respond to #{method.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped">
            
              <a name="method-i-test_scoped"></a><b>test_scoped</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_source')" id="l_method-i-test_scoped_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Relation</span>, <span class="ruby-identifier">topics</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_all">
            
              <a name="method-i-test_scoped_all"></a><b>test_scoped_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_all_source')" id="l_method-i-test_scoped_all_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_all</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">topics</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_build">
            
              <a name="method-i-test_scoped_build"></a><b>test_scoped_build</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_build_source')" id="l_method-i-test_scoped_build_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 826</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_build</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'You told a lie'</span>)

  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Post</span>, <span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'You told a lie'</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_first">
            
              <a name="method-i-test_scoped_first"></a><b>test_scoped_first</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_first_source')" id="l_method-i-test_scoped_first_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_first</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'id ASC'</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_responds_to_delegated_methods">
            
              <a name="method-i-test_scoped_responds_to_delegated_methods"></a><b>test_scoped_responds_to_delegated_methods</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_responds_to_delegated_methods_source')" id="l_method-i-test_scoped_responds_to_delegated_methods_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_responds_to_delegated_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_responds_to_delegated_methods</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>

  [<span class="ruby-string">&quot;map&quot;</span>, <span class="ruby-string">&quot;uniq&quot;</span>, <span class="ruby-string">&quot;sort&quot;</span>, <span class="ruby-string">&quot;insert&quot;</span>, <span class="ruby-string">&quot;delete&quot;</span>, <span class="ruby-string">&quot;update&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">relation</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;Topic.scoped should respond to #{method.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_argument_error">
            
              <a name="method-i-test_select_argument_error"></a><b>test_select_argument_error</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_argument_error_source')" id="l_method-i-test_select_argument_error_source">show</a>
                
              </p>
              <div id="method-i-test_select_argument_error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 625</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_argument_error</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">select</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_with_block">
            
              <a name="method-i-test_select_with_block"></a><b>test_select_with_block</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_with_block_source')" id="l_method-i-test_select_with_block_source">show</a>
                
              </p>
              <div id="method-i-test_select_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_with_block</span>
  <span class="ruby-identifier">even_ids</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">%</span> <span class="ruby-number">2</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span> }.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">2</span>, <span class="ruby-number">4</span>, <span class="ruby-number">6</span>, <span class="ruby-number">8</span>, <span class="ruby-number">10</span>], <span class="ruby-identifier">even_ids</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size">
            
              <a name="method-i-test_size"></a><b>test_size</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_source')" id="l_method-i-test_size_source">show</a>
                
              </p>
              <div id="method-i-test_size_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 706</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_with_limit">
            
              <a name="method-i-test_size_with_limit"></a><b>test_size_with_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_with_limit_source')" id="l_method-i-test_size_with_limit_source">show</a>
                
              </p>
              <div id="method-i-test_size_with_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 717</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_with_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">10</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">10</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_with_zero_limit">
            
              <a name="method-i-test_size_with_zero_limit"></a><b>test_size_with_zero_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_with_zero_limit_source')" id="l_method-i-test_size_with_zero_limit_source">show</a>
                
              </p>
              <div id="method-i-test_size_with_zero_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 728</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_with_zero_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)

  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_json">
            
              <a name="method-i-test_to_json"></a><b>test_to_json</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_json_source')" id="l_method-i-test_to_json_source">show</a>
                
              </p>
              <div id="method-i-test_to_json_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_json</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">to_json</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_json</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_xml">
            
              <a name="method-i-test_to_xml"></a><b>test_to_xml</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_xml_source')" id="l_method-i-test_to_xml_source">show</a>
                
              </p>
              <div id="method-i-test_to_xml_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_xml</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">to_xml</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_xml</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_yaml">
            
              <a name="method-i-test_to_yaml"></a><b>test_to_yaml</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_yaml_source')" id="l_method-i-test_to_yaml_source">show</a>
                
              </p>
              <div id="method-i-test_to_yaml_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_yaml</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">to_yaml</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_yaml</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_two_scopes_with_includes_should_not_drop_any_include">
            
              <a name="method-i-test_two_scopes_with_includes_should_not_drop_any_include"></a><b>test_two_scopes_with_includes_should_not_drop_any_include</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_two_scopes_with_includes_should_not_drop_any_include_source')" id="l_method-i-test_two_scopes_with_includes_should_not_drop_any_include_source">show</a>
                
              </p>
              <div id="method-i-test_two_scopes_with_includes_should_not_drop_any_include_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_two_scopes_with_includes_should_not_drop_any_include</span>
  <span class="ruby-identifier">car</span> = <span class="ruby-constant">Car</span>.<span class="ruby-identifier">incl_engines</span>.<span class="ruby-identifier">incl_tyres</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">car</span>.<span class="ruby-identifier">tyres</span>.<span class="ruby-identifier">length</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">car</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">length</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unscoped_block_style">
            
              <a name="method-i-test_unscoped_block_style"></a><b>test_unscoped_block_style</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unscoped_block_style_source')" id="l_method-i-test_unscoped_block_style_source">show</a>
                
              </p>
              <div id="method-i-test_unscoped_block_style_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 940</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unscoped_block_style</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'honda'</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'honda'</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_old_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'honda'</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'honda'</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_old_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins">
            
              <a name="method-i-test_update_all_with_joins"></a><b>test_update_all_with_joins</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_source')" id="l_method-i-test_update_all_with_joins_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 979</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'posts.id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">count</span>    = <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_limit">
            
              <a name="method-i-test_update_all_with_joins_and_limit"></a><b>test_update_all_with_joins_and_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_limit_source')" id="l_method-i-test_update_all_with_joins_and_limit_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 987</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_limit</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'posts.id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_limit_and_order">
            
              <a name="method-i-test_update_all_with_joins_and_limit_and_order"></a><b>test_update_all_with_joins_and_limit_and_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_limit_and_order_source')" id="l_method-i-test_update_all_with_joins_and_limit_and_order_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_limit_and_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 992</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_limit_and_order</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'posts.id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'comments.id'</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>),  <span class="ruby-identifier">comments</span>(<span class="ruby-value">:more_greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_offset">
            
              <a name="method-i-test_update_all_with_joins_and_offset"></a><b>test_update_all_with_joins_and_offset</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_offset_source')" id="l_method-i-test_update_all_with_joins_and_offset_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_offset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 999</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_offset</span>
  <span class="ruby-identifier">all_comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'posts.id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">count</span>        = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">comments</span>     = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_offset_and_order">
            
              <a name="method-i-test_update_all_with_joins_and_offset_and_order"></a><b>test_update_all_with_joins_and_offset_and_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_offset_and_order_source')" id="l_method-i-test_update_all_with_joins_and_offset_and_order_source">show</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_offset_and_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1007</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_offset_and_order</span>
  <span class="ruby-identifier">all_comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">'posts.id'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">'posts.id'</span>, <span class="ruby-string">'comments.id'</span>)
  <span class="ruby-identifier">count</span>        = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">comments</span>     = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:more_greetings</span>).<span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>),  <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_where_with_ar_object">
            
              <a name="method-i-test_where_with_ar_object"></a><b>test_where_with_ar_object</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_where_with_ar_object_source')" id="l_method-i-test_where_with_ar_object_source">show</a>
                
              </p>
              <div id="method-i-test_where_with_ar_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 471</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_where_with_ar_object</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">scoped</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">author</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    