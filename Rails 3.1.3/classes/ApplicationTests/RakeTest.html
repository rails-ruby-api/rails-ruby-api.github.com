<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ApplicationTests::RakeTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            ApplicationTests::RakeTest 
            
                <span class="parent">&lt; 
                    
                    <a href="../Test/Unit/TestCase.html">Test::Unit::TestCase</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/railties/test/application/rake_test_rb.html">railties/test/application/rake_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup">setup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-teardown">teardown</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_code_statistics_sanity">test_code_statistics_sanity</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_environment_is_required_in_rake_tasks">test_environment_is_required_in_rake_tasks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_gems_tasks_are_loaded_first_than_application_ones">test_gems_tasks_are_loaded_first_than_application_ones</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_initializers_are_executed_in_rake_tasks">test_initializers_are_executed_in_rake_tasks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loading_specific_fixtures">test_loading_specific_fixtures</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_logger_is_flushed_when_exiting_production_rake_tasks">test_logger_is_flushed_when_exiting_production_rake_tasks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_migration_status">test_migration_status</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_migration_status_after_rollback_and_redo">test_migration_status_after_rollback_and_redo</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_migration_status_when_schema_migrations_table_is_not_present">test_migration_status_when_schema_migrations_table_is_not_present</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_model_and_migration_generator_with_change_syntax">test_model_and_migration_generator_with_change_syntax</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_rake_routes_output_strips_anchors_from_http_verbs">test_rake_routes_output_strips_anchors_from_http_verbs</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_rake_routes_shows_custom_assets">test_rake_routes_shows_custom_assets</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scaffold_tests_pass_by_default">test_scaffold_tests_pass_by_default</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="../ActiveSupport/Testing/Isolation.html">
              ActiveSupport::Testing::Isolation
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <a name="method-i-setup"></a><b>setup</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>
  <span class="ruby-identifier">build_app</span>
  <span class="ruby-identifier">boot_rails</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span>(<span class="ruby-node">&quot;#{app_path}/config/environments&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-teardown">
            
              <a name="method-i-teardown"></a><b>teardown</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-teardown_source')" id="l_method-i-teardown_source">show</a>
                
              </p>
              <div id="method-i-teardown_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">teardown</span>
  <span class="ruby-identifier">teardown_app</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_code_statistics_sanity">
            
              <a name="method-i-test_code_statistics_sanity"></a><b>test_code_statistics_sanity</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_code_statistics_sanity_source')" id="l_method-i-test_code_statistics_sanity_source">show</a>
                
              </p>
              <div id="method-i-test_code_statistics_sanity_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_code_statistics_sanity</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-string">&quot;Code LOC: 5     Test LOC: 0     Code to Test Ratio: 1:0.0&quot;</span>,
    <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake stats`</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_environment_is_required_in_rake_tasks">
            
              <a name="method-i-test_environment_is_required_in_rake_tasks"></a><b>test_environment_is_required_in_rake_tasks</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_environment_is_required_in_rake_tasks_source')" id="l_method-i-test_environment_is_required_in_rake_tasks_source">show</a>
                
              </p>
              <div id="method-i-test_environment_is_required_in_rake_tasks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 27</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_environment_is_required_in_rake_tasks</span>
      <span class="ruby-identifier">app_file</span> <span class="ruby-string">&quot;config/environment.rb&quot;</span>, <span class="ruby-string">&quot;        SuperMiddleware = Struct.new(:app)

        AppTemplate::Application.configure do
          config.middleware.use SuperMiddleware
        end

        AppTemplate::Application.initialize!
&quot;</span>

      <span class="ruby-identifier">assert_match</span> <span class="ruby-string">&quot;SuperMiddleware&quot;</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake middleware`</span> }
    <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_gems_tasks_are_loaded_first_than_application_ones">
            
              <a name="method-i-test_gems_tasks_are_loaded_first_than_application_ones"></a><b>test_gems_tasks_are_loaded_first_than_application_ones</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_gems_tasks_are_loaded_first_than_application_ones_source')" id="l_method-i-test_gems_tasks_are_loaded_first_than_application_ones_source">show</a>
                
              </p>
              <div id="method-i-test_gems_tasks_are_loaded_first_than_application_ones_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 17</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_gems_tasks_are_loaded_first_than_application_ones</span>
      <span class="ruby-identifier">app_file</span> <span class="ruby-string">&quot;lib/tasks/app.rake&quot;</span>, <span class="ruby-string">&quot;        $task_loaded = Rake::Task.task_defined?(&quot;db:create:all&quot;)
&quot;</span>

      <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;#{app_path}/config/environment&quot;</span>
      <span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">load_tasks</span>
      <span class="ruby-identifier">assert</span> <span class="ruby-identifier">$task_loaded</span>
    <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_initializers_are_executed_in_rake_tasks">
            
              <a name="method-i-test_initializers_are_executed_in_rake_tasks"></a><b>test_initializers_are_executed_in_rake_tasks</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_initializers_are_executed_in_rake_tasks_source')" id="l_method-i-test_initializers_are_executed_in_rake_tasks_source">show</a>
                
              </p>
              <div id="method-i-test_initializers_are_executed_in_rake_tasks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 41</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_initializers_are_executed_in_rake_tasks</span>
      <span class="ruby-identifier">add_to_config</span> <span class="ruby-string">&quot;        initializer &quot;do_something&quot; do
          puts &quot;Doing something...&quot;
        end

        rake_tasks do
          task :do_nothing =&gt; :environment do
          end
        end
&quot;</span>

      <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake do_nothing`</span> }
      <span class="ruby-identifier">assert_match</span> <span class="ruby-string">&quot;Doing something...&quot;</span>, <span class="ruby-identifier">output</span>
    <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loading_specific_fixtures">
            
              <a name="method-i-test_loading_specific_fixtures"></a><b>test_loading_specific_fixtures</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loading_specific_fixtures_source')" id="l_method-i-test_loading_specific_fixtures_source">show</a>
                
              </p>
              <div id="method-i-test_loading_specific_fixtures_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 161</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loading_specific_fixtures</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-value">`rails generate model user username:string password:string`</span>
    <span class="ruby-value">`rails generate model product name:string`</span>
    <span class="ruby-value">`rake db:migrate`</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;#{rails_root}/config/environment&quot;</span>

  <span class="ruby-comment"># loading a specific fixture</span>
  <span class="ruby-identifier">errormsg</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:fixtures:load FIXTURES=products`</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">$?</span>.<span class="ruby-identifier">success?</span>, <span class="ruby-identifier">errormsg</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-operator">::</span><span class="ruby-constant">AppTemplate</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span><span class="ruby-operator">::</span><span class="ruby-constant">Product</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-operator">::</span><span class="ruby-constant">AppTemplate</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span><span class="ruby-operator">::</span><span class="ruby-constant">User</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_logger_is_flushed_when_exiting_production_rake_tasks">
            
              <a name="method-i-test_logger_is_flushed_when_exiting_production_rake_tasks"></a><b>test_logger_is_flushed_when_exiting_production_rake_tasks</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_logger_is_flushed_when_exiting_production_rake_tasks_source')" id="l_method-i-test_logger_is_flushed_when_exiting_production_rake_tasks_source">show</a>
                
              </p>
              <div id="method-i-test_logger_is_flushed_when_exiting_production_rake_tasks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 80</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_logger_is_flushed_when_exiting_production_rake_tasks</span>
      <span class="ruby-identifier">add_to_config</span> <span class="ruby-string">&quot;        rake_tasks do
          task :log_something =&gt; :environment do
            Rails.logger.error(&quot;Sample log message&quot;)
          end
        end
&quot;</span>

      <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake log_something RAILS_ENV=production &amp;&amp; cat log/production.log`</span> }
      <span class="ruby-identifier">assert_match</span> <span class="ruby-string">&quot;Sample log message&quot;</span>, <span class="ruby-identifier">output</span>
    <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_migration_status">
            
              <a name="method-i-test_migration_status"></a><b>test_migration_status</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_migration_status_source')" id="l_method-i-test_migration_status_source">show</a>
                
              </p>
              <div id="method-i-test_migration_status_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_migration_status</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-value">`rails generate model user username:string password:string`</span>
    <span class="ruby-value">`rails generate migration add_email_to_users email:string`</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate`</span>}
  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate:status`</span> }

  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/up\s+\d{14}\s+Create users/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/up\s+\d{14}\s+Add email to users/</span>, <span class="ruby-identifier">output</span>)

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:rollback STEP=1`</span> }
  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate:status`</span> }

  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/up\s+\d{14}\s+Create users/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/down\s+\d{14}\s+Add email to users/</span>, <span class="ruby-identifier">output</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_migration_status_after_rollback_and_redo">
            
              <a name="method-i-test_migration_status_after_rollback_and_redo"></a><b>test_migration_status_after_rollback_and_redo</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_migration_status_after_rollback_and_redo_source')" id="l_method-i-test_migration_status_after_rollback_and_redo_source">show</a>
                
              </p>
              <div id="method-i-test_migration_status_after_rollback_and_redo_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_migration_status_after_rollback_and_redo</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-value">`rails generate model user username:string password:string`</span>
    <span class="ruby-value">`rails generate migration add_email_to_users email:string`</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate`</span>}
  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate:status`</span> }

  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/up\s+\d{14}\s+Create users/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/up\s+\d{14}\s+Add email to users/</span>, <span class="ruby-identifier">output</span>)

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:rollback STEP=2`</span> }
  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate:status`</span> }

  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/down\s+\d{14}\s+Create users/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/down\s+\d{14}\s+Add email to users/</span>, <span class="ruby-identifier">output</span>)

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate:redo`</span> }
  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) { <span class="ruby-value">`rake db:migrate:status`</span> }

  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/up\s+\d{14}\s+Create users/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/up\s+\d{14}\s+Add email to users/</span>, <span class="ruby-identifier">output</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_migration_status_when_schema_migrations_table_is_not_present">
            
              <a name="method-i-test_migration_status_when_schema_migrations_table_is_not_present"></a><b>test_migration_status_when_schema_migrations_table_is_not_present</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_migration_status_when_schema_migrations_table_is_not_present_source')" id="l_method-i-test_migration_status_when_schema_migrations_table_is_not_present_source">show</a>
                
              </p>
              <div id="method-i-test_migration_status_when_schema_migrations_table_is_not_present_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_migration_status_when_schema_migrations_table_is_not_present</span>
  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake db:migrate:status`</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Schema migrations table does not exist yet.\n&quot;</span>, <span class="ruby-identifier">output</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_model_and_migration_generator_with_change_syntax">
            
              <a name="method-i-test_model_and_migration_generator_with_change_syntax"></a><b>test_model_and_migration_generator_with_change_syntax</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_model_and_migration_generator_with_change_syntax_source')" id="l_method-i-test_model_and_migration_generator_with_change_syntax_source">show</a>
                
              </p>
              <div id="method-i-test_model_and_migration_generator_with_change_syntax_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_model_and_migration_generator_with_change_syntax</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-value">`rails generate model user username:string password:string`</span>
    <span class="ruby-value">`rails generate migration add_email_to_users email:string`</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake db:migrate`</span> }
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/create_table\(:users\)/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/CreateUsers: migrated/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/add_column\(:users, :email, :string\)/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/AddEmailToUsers: migrated/</span>, <span class="ruby-identifier">output</span>)

  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake db:rollback STEP=2`</span> }
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/drop_table\(&quot;users&quot;\)/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/CreateUsers: reverted/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/remove_column\(&quot;users&quot;, :email\)/</span>, <span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/AddEmailToUsers: reverted/</span>, <span class="ruby-identifier">output</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_rake_routes_output_strips_anchors_from_http_verbs">
            
              <a name="method-i-test_rake_routes_output_strips_anchors_from_http_verbs"></a><b>test_rake_routes_output_strips_anchors_from_http_verbs</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_rake_routes_output_strips_anchors_from_http_verbs_source')" id="l_method-i-test_rake_routes_output_strips_anchors_from_http_verbs_source">show</a>
                
              </p>
              <div id="method-i-test_rake_routes_output_strips_anchors_from_http_verbs_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 62</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_rake_routes_output_strips_anchors_from_http_verbs</span>
      <span class="ruby-identifier">app_file</span> <span class="ruby-string">&quot;config/routes.rb&quot;</span>, <span class="ruby-string">&quot;        AppTemplate::Application.routes.draw do
          get '/cart', :to =&gt; 'cart#show'
        end
&quot;</span>
      <span class="ruby-identifier">assert_match</span> <span class="ruby-string">'cart GET /cart(.:format)'</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake routes`</span> }
    <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_rake_routes_shows_custom_assets">
            
              <a name="method-i-test_rake_routes_shows_custom_assets"></a><b>test_rake_routes_shows_custom_assets</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_rake_routes_shows_custom_assets_source')" id="l_method-i-test_rake_routes_shows_custom_assets_source">show</a>
                
              </p>
              <div id="method-i-test_rake_routes_shows_custom_assets_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 71</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_rake_routes_shows_custom_assets</span>
      <span class="ruby-identifier">app_file</span> <span class="ruby-string">&quot;config/routes.rb&quot;</span>, <span class="ruby-string">&quot;        AppTemplate::Application.routes.draw do
          get '/custom/assets', :to =&gt; 'custom_assets#show'
        end
&quot;</span>
      <span class="ruby-identifier">assert_match</span> <span class="ruby-string">'custom_assets GET /custom/assets(.:format)'</span>, <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>){ <span class="ruby-value">`rake routes`</span> }
    <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scaffold_tests_pass_by_default">
            
              <a name="method-i-test_scaffold_tests_pass_by_default"></a><b>test_scaffold_tests_pass_by_default</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scaffold_tests_pass_by_default_source')" id="l_method-i-test_scaffold_tests_pass_by_default_source">show</a>
                
              </p>
              <div id="method-i-test_scaffold_tests_pass_by_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/application/rake_test.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scaffold_tests_pass_by_default</span>
  <span class="ruby-identifier">content</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-value">`rails generate scaffold user username:string password:string`</span>
    <span class="ruby-value">`bundle exec rake db:migrate db:test:clone test`</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/7 tests, 10 assertions, 0 failures, 0 errors/</span>, <span class="ruby-identifier">content</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    