<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActionView::Template</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            ActionView::Template 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionpack/lib/action_view/template/error_rb.html">actionpack/lib/action_view/template/error.rb</a></li>
            
            <li><a href="../../files/actionpack/lib/action_view/template/handler_rb.html">actionpack/lib/action_view/template/handler.rb</a></li>
            
            <li><a href="../../files/actionpack/lib/action_view/template/handlers/erb_rb.html">actionpack/lib/action_view/template/handlers/erb.rb</a></li>
            
            <li><a href="../../files/actionpack/lib/action_view/template/handlers_rb.html">actionpack/lib/action_view/template/handlers.rb</a></li>
            
            <li><a href="../../files/actionpack/lib/action_view/template/text_rb.html">actionpack/lib/action_view/template/text.rb</a></li>
            
            <li><a href="../../files/actionpack/lib/action_view/template_rb.html">actionpack/lib/action_view/template.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="label-Action+View+Template+Handlers">Action View <a href="Template.html">Template</a> <a href="Template/Handlers.html">Handlers</a></h1>

<h1 id="label-Action+View+Text+Template">Action View Text <a href="Template.html">Template</a></h1>

<h1 id="label-Action+View+Template">Action View <a href="Template.html">Template</a></h1>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="Template/ActionView.html">ActionView::Template::ActionView</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="Template/Handlers.html">ActionView::Template::Handlers</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-inspect">inspect</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-mime_type">mime_type</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-refresh">refresh</a>,
              </li>
            
              
              <li>
                <a href="#method-i-render">render</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-supports_streaming-3F">supports_streaming?</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">Finalizer</td>
            <td>=</td>
            <td class="attr-value">proc do |method_name, mod|
proc do
mod.module_eval do
remove_possible_method method_name
end
end
end</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>This finalizer is needed (and exactly with a proc inside another proc)
otherwise templates leak in development.</p></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>formats</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>handler</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>identifier</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>locals</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>original_encoding</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>source</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>updated_at</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>virtual_path</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <a name="method-c-new"></a><b>new</b>(source, identifier, handler, details)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/template.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>(<span class="ruby-identifier">source</span>, <span class="ruby-identifier">identifier</span>, <span class="ruby-identifier">handler</span>, <span class="ruby-identifier">details</span>)
  <span class="ruby-identifier">format</span> = <span class="ruby-identifier">details</span>[<span class="ruby-value">:format</span>] <span class="ruby-operator">||</span> (<span class="ruby-identifier">handler</span>.<span class="ruby-identifier">default_format</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">handler</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:default_format</span>))

  <span class="ruby-ivar">@source</span>            = <span class="ruby-identifier">source</span>
  <span class="ruby-ivar">@identifier</span>        = <span class="ruby-identifier">identifier</span>
  <span class="ruby-ivar">@handler</span>           = <span class="ruby-identifier">handler</span>
  <span class="ruby-ivar">@compiled</span>          = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@original_encoding</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@locals</span>            = <span class="ruby-identifier">details</span>[<span class="ruby-value">:locals</span>] <span class="ruby-operator">||</span> []
  <span class="ruby-ivar">@virtual_path</span>      = <span class="ruby-identifier">details</span>[<span class="ruby-value">:virtual_path</span>]
  <span class="ruby-ivar">@updated_at</span>        = <span class="ruby-identifier">details</span>[<span class="ruby-value">:updated_at</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-ivar">@formats</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">format</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">Type</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">ref</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">f</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-inspect">
            
              <a name="method-i-inspect"></a><b>inspect</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-inspect_source')" id="l_method-i-inspect_source">show</a>
                
              </p>
              <div id="method-i-inspect_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/template.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">inspect</span>
  <span class="ruby-ivar">@inspect</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-node">&quot;#{Rails.root}/&quot;</span>, <span class="ruby-string">''</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">identifier</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-mime_type">
            
              <a name="method-i-mime_type"></a><b>mime_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-mime_type_source')" id="l_method-i-mime_type_source">show</a>
                
              </p>
              <div id="method-i-mime_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/template.rb, line 177</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">mime_type</span>
  <span class="ruby-ivar">@mime_type</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">Type</span>.<span class="ruby-identifier">lookup_by_extension</span>(<span class="ruby-ivar">@formats</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@formats</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-refresh">
            
              <a name="method-i-refresh"></a><b>refresh</b>(view)
            
          </div>
          
          
            <div class="description">
              <p>Receives a view object and return a template similar to self by using
@virtual_path.</p>

<p>This method is useful if you have a template object but it does not contain
its source anymore since it was already compiled. In such cases, all you
need to do is to call refresh passing in the view object.</p>

<p>Notice this method raises an error if the template to be refreshed does not
have a virtual path set (true just for inline templates).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-refresh_source')" id="l_method-i-refresh_source">show</a>
                
              </p>
              <div id="method-i-refresh_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/template.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">refresh</span>(<span class="ruby-identifier">view</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;A template needs to have a virtual path in order to be refreshed&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@virtual_path</span>
  <span class="ruby-identifier">lookup</span>  = <span class="ruby-identifier">view</span>.<span class="ruby-identifier">lookup_context</span>
  <span class="ruby-identifier">pieces</span>  = <span class="ruby-ivar">@virtual_path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;/&quot;</span>)
  <span class="ruby-identifier">name</span>    = <span class="ruby-identifier">pieces</span>.<span class="ruby-identifier">pop</span>
  <span class="ruby-identifier">partial</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">name</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp">/^_/</span>, <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">lookup</span>.<span class="ruby-identifier">disable_cache</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">lookup</span>.<span class="ruby-identifier">find_template</span>(<span class="ruby-identifier">name</span>, [ <span class="ruby-identifier">pieces</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">'/'</span>) ], <span class="ruby-identifier">partial</span>, <span class="ruby-ivar">@locals</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-render">
            
              <a name="method-i-render"></a><b>render</b>(view, locals, buffer=nil, &amp;block)
            
          </div>
          
          
            <div class="description">
              <p><a href="../Render.html">Render</a> a template. If the template was not
compiled yet, it is done exactly before rendering.</p>

<p>This method is instrumented as “!render_template.action_view”. Notice that
we use a bang in this instrumentation because you don’t want to consume
this in production. This is only slow if it’s being listened to.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-render_source')" id="l_method-i-render_source">show</a>
                
              </p>
              <div id="method-i-render_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/template.rb, line 168</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">render</span>(<span class="ruby-identifier">view</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-identifier">buffer</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">instrument</span>(<span class="ruby-string">&quot;!render_template.action_view&quot;</span>, <span class="ruby-value">:virtual_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@virtual_path</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">compile!</span>(<span class="ruby-identifier">view</span>)
    <span class="ruby-identifier">view</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-identifier">buffer</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">handle_render_error</span>(<span class="ruby-identifier">view</span>, <span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-supports_streaming-3F">
            
              <a name="method-i-supports_streaming-3F"></a><b>supports_streaming?</b>()
            
          </div>
          
          
            <div class="description">
              <p>Returns if the underlying handler supports streaming. If so, a streaming
buffer <strong>may</strong> be passed when it start rendering.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-supports_streaming-3F_source')" id="l_method-i-supports_streaming-3F_source">show</a>
                
              </p>
              <div id="method-i-supports_streaming-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/template.rb, line 158</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">supports_streaming?</span>
  <span class="ruby-identifier">handler</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:supports_streaming?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">handler</span>.<span class="ruby-identifier">supports_streaming?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    