<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>HasAndBelongsToManyAssociationsTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            HasAndBelongsToManyAssociationsTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test_rb.html">activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup_data_for_habtm_case">setup_data_for_habtm_case</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_adding_a_collection">test_adding_a_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_from_the_project">test_adding_from_the_project</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_from_the_project_fixed_timestamp">test_adding_from_the_project_fixed_timestamp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_multiple">test_adding_multiple</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_single">test_adding_single</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_type_mismatch">test_adding_type_mismatch</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_assign_ids">test_assign_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_assign_ids_ignoring_blanks">test_assign_ids_ignoring_blanks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class">test_association_proxy_transaction_method_starts_transaction_in_association_class</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_associations_with_conditions">test_associations_with_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses">test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause">test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build">test_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build_by_new_record">test_build_by_new_record</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_caching_of_columns">test_caching_of_columns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_consider_type">test_consider_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count">test_count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_with_counter_sql">test_count_with_counter_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_with_finder_sql">test_count_with_finder_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_counting_on_habtm_association_and_not_array">test_counting_on_habtm_association_and_not_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create">test_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_by_new_record">test_create_by_new_record</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_creation_respects_hash_condition">test_creation_respects_hash_condition</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting">test_deleting</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_all">test_deleting_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_array">test_deleting_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_array_with_sql">test_deleting_array_with_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_with_sql">test_deleting_with_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deprecated_push_with_attributes_was_removed">test_deprecated_push_with_attributes_was_removed</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_all">test_destroy_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroying">test_destroying</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroying_many">test_destroying_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_all_order_should_override_association_limit">test_dynamic_find_all_order_should_override_association_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_all_should_respect_association_limit">test_dynamic_find_all_should_respect_association_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_all_should_respect_association_order">test_dynamic_find_all_should_respect_association_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_all_should_respect_readonly_access">test_dynamic_find_all_should_respect_readonly_access</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_should_respect_association_include">test_dynamic_find_should_respect_association_include</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_should_respect_association_order">test_dynamic_find_should_respect_association_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_grouped">test_find_grouped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_association">test_find_in_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_association_with_custom_finder_sql">test_find_in_association_with_custom_finder_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_association_with_custom_finder_sql_and_multiple_interpolations">test_find_in_association_with_custom_finder_sql_and_multiple_interpolations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_association_with_custom_finder_sql_and_string_id">test_find_in_association_with_custom_finder_sql_and_string_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_association_with_options">test_find_in_association_with_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_scoped_grouped">test_find_scoped_grouped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_scoped_grouped_having">test_find_scoped_grouped_having</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_should_append_to_association_order">test_find_should_append_to_association_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_merged_options">test_find_with_merged_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_get_ids">test_get_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_get_ids_for_loaded_associations">test_get_ids_for_loaded_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_get_ids_for_unloaded_associations_does_not_load_them">test_get_ids_for_unloaded_associations_does_not_load_them</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_adding_before_save">test_habtm_adding_before_save</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_respects_select">test_habtm_respects_select</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_respects_select_query_method">test_habtm_respects_select_query_method</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_saving_multiple_relationships">test_habtm_saving_multiple_relationships</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_selects_all_columns_by_default">test_habtm_selects_all_columns_by_default</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_unique_order_preserved">test_habtm_unique_order_preserved</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_and_belongs_to_many">test_has_and_belongs_to_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_many_through_polymorphic_has_manys_works">test_has_many_through_polymorphic_has_manys_works</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_checks_if_record_exists_if_target_not_loaded">test_include_checks_if_record_exists_if_target_not_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build">test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping">test_include_returns_false_for_non_matching_record_to_verify_scoping</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_uses_array_include_after_loaded">test_include_uses_array_include_after_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_join_table_alias">test_join_table_alias</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_join_with_group">test_join_with_group</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_new_aliased_to_build">test_new_aliased_to_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_new_with_values_in_collection">test_new_with_values_in_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_proper_usage_of_primary_keys_and_join_table">test_proper_usage_of_primary_keys_and_join_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_removing_associations_on_destroy">test_removing_associations_on_destroy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_on_new_object">test_replace_on_new_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_with_less">test_replace_with_less</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_with_new">test_replace_with_new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records">test_scoped_find_on_through_association_doesnt_return_read_only_records</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_self_referential_habtm_without_foreign_key_set_should_raise_exception">test_self_referential_habtm_without_foreign_key_set_should_raise_exception</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_property_quote_string_primary_keys">test_should_property_quote_string_primary_keys</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_symbols_as_keys">test_symbols_as_keys</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_triple_equality">test_triple_equality</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq_after_the_fact">test_uniq_after_the_fact</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq_before_the_fact">test_uniq_before_the_fact</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq_option_prevents_duplicate_push">test_uniq_option_prevents_duplicate_push</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_attributes_after_push_without_duplicate_join_table_rows">test_update_attributes_after_push_without_duplicate_join_table_rows</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_updating_attributes_on_non_rich_associations">test_updating_attributes_on_non_rich_associations</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-setup_data_for_habtm_case">
            
              <a name="method-i-setup_data_for_habtm_case"></a><b>setup_data_for_habtm_case</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_data_for_habtm_case_source')" id="l_method-i-setup_data_for_habtm_case_source">show</a>
                
              </p>
              <div id="method-i-setup_data_for_habtm_case_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_data_for_habtm_case</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span>(<span class="ruby-string">'delete from countries_treaties'</span>)

  <span class="ruby-identifier">country</span> = <span class="ruby-constant">Country</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'India'</span>)
  <span class="ruby-identifier">country</span>.<span class="ruby-identifier">country_id</span> = <span class="ruby-string">'c1'</span>
  <span class="ruby-identifier">country</span>.<span class="ruby-identifier">save!</span>

  <span class="ruby-identifier">treaty</span> = <span class="ruby-constant">Treaty</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'peace'</span>)
  <span class="ruby-identifier">treaty</span>.<span class="ruby-identifier">treaty_id</span> = <span class="ruby-string">'t1'</span>
  <span class="ruby-identifier">country</span>.<span class="ruby-identifier">treaties</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">treaty</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_a_collection">
            
              <a name="method-i-test_adding_a_collection"></a><b>test_adding_a_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_a_collection_source')" id="l_method-i-test_adding_a_collection_source">show</a>
                
              </p>
              <div id="method-i-test_adding_a_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 187</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_a_collection</span>
  <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Aredridel&quot;</span>)
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_from_the_project">
            
              <a name="method-i-test_adding_from_the_project"></a><b>test_adding_from_the_project</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_from_the_project_source')" id="l_method-i-test_adding_from_the_project_source">show</a>
                
              </p>
              <div id="method-i-test_adding_from_the_project_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_from_the_project</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_from_the_project_fixed_timestamp">
            
              <a name="method-i-test_adding_from_the_project_fixed_timestamp"></a><b>test_adding_from_the_project_fixed_timestamp</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_from_the_project_fixed_timestamp_source')" id="l_method-i-test_adding_from_the_project_fixed_timestamp_source">show</a>
                
              </p>
              <div id="method-i-test_adding_from_the_project_fixed_timestamp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_from_the_project_fixed_timestamp</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">updated_at</span> = <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">updated_at</span>

  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">updated_at</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">updated_at</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_multiple">
            
              <a name="method-i-test_adding_multiple"></a><b>test_adding_multiple</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_multiple_source')" id="l_method-i-test_adding_multiple_source">show</a>
                
              </p>
              <div id="method-i-test_adding_multiple_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_multiple</span>
  <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Aredridel&quot;</span>)
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_single">
            
              <a name="method-i-test_adding_single"></a><b>test_adding_single</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_single_source')" id="l_method-i-test_adding_single_source">show</a>
                
              </p>
              <div id="method-i-test_adding_single_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 128</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_single</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment"># causing the collection to load</span>
  <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">action_controller</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_type_mismatch">
            
              <a name="method-i-test_adding_type_mismatch"></a><b>test_adding_type_mismatch</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_type_mismatch_source')" id="l_method-i-test_adding_type_mismatch_source">show</a>
                
              </p>
              <div id="method-i-test_adding_type_mismatch_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_type_mismatch</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">nil</span> }
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-number">1</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_assign_ids">
            
              <a name="method-i-test_assign_ids"></a><b>test_assign_ids</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_assign_ids_source')" id="l_method-i-test_assign_ids_source">show</a>
                
              </p>
              <div id="method-i-test_assign_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 710</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_assign_ids</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Joe&quot;</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>)].<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_assign_ids_ignoring_blanks">
            
              <a name="method-i-test_assign_ids_ignoring_blanks"></a><b>test_assign_ids_ignoring_blanks</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_assign_ids_ignoring_blanks_source')" id="l_method-i-test_assign_ids_ignoring_blanks_source">show</a>
                
              </p>
              <div id="method-i-test_assign_ids_ignoring_blanks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 719</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_assign_ids_ignoring_blanks</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Joe&quot;</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">id</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">id</span>, <span class="ruby-string">''</span>]
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>)].<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class">
            
              <a name="method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class"></a><b>test_association_proxy_transaction_method_starts_transaction_in_association_class</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class_source')" id="l_method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class_source">show</a>
                
              </p>
              <div id="method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 793</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_association_proxy_transaction_method_starts_transaction_in_association_class</span>
  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:transaction</span>)
  <span class="ruby-constant">Category</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># nothing</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_associations_with_conditions">
            
              <a name="method-i-test_associations_with_conditions"></a><b>test_associations_with_conditions</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_associations_with_conditions_source')" id="l_method-i-test_associations_with_conditions_source">show</a>
                
              </p>
              <div id="method-i-test_associations_with_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_associations_with_conditions</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david_with_hash_conditions</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david_with_hash_conditions</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)

  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:reload</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses">
            
              <a name="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses"></a><b>test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses_source')" id="l_method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses_source">show</a>
                
              </p>
              <div id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 818</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses</span>
  <span class="ruby-identifier">new_developer</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcelo&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">90_000</span>).<span class="ruby-identifier">build</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;Marcelo&quot;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">salary</span>, <span class="ruby-number">90_000</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause">
            
              <a name="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause"></a><b>test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause_source')" id="l_method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause_source">show</a>
                
              </p>
              <div id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 813</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause</span>
  <span class="ruby-identifier">new_developer</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcelo&quot;</span>).<span class="ruby-identifier">build</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;Marcelo&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build">
            
              <a name="method-i-test_build"></a><b>test_build</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_source')" id="l_method-i-test_build_source">show</a>
                
              </p>
              <div id="method-i-test_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 230</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>) }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build_by_new_record">
            
              <a name="method-i-test_build_by_new_record"></a><b>test_build_by_new_record</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_by_new_record_source')" id="l_method-i-test_build_by_new_record_source">show</a>
                
              </p>
              <div id="method-i-test_build_by_new_record_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 260</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build_by_new_record</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcel&quot;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">75000</span>)
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Make bed&quot;</span>)
  <span class="ruby-identifier">proj2</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Lie in it&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;Marcel&quot;</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_caching_of_columns">
            
              <a name="method-i-test_caching_of_columns"></a><b>test_caching_of_columns</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_caching_of_columns_source')" id="l_method-i-test_caching_of_columns_source">show</a>
                
              </p>
              <div id="method-i-test_caching_of_columns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 800</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_caching_of_columns</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-comment"># clear cache possibly created by other tests</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reset_column_information</span>

  <span class="ruby-comment"># One query for columns, one for primary key</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span>; <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }

  <span class="ruby-comment">## and again to verify that reset_column_information clears the cache correctly</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reset_column_information</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span>; <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_consider_type">
            
              <a name="method-i-test_consider_type"></a><b>test_consider_type</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_consider_type_source')" id="l_method-i-test_consider_type_source">show</a>
                
              </p>
              <div id="method-i-test_consider_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 611</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_consider_type</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
  <span class="ruby-identifier">special_project</span> = <span class="ruby-constant">SpecialProject</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Special Project&quot;</span>)

  <span class="ruby-identifier">other_project</span> = <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">special_project</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">special_project</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">special_project</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">other_project</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count">
            
              <a name="method-i-test_count"></a><b>test_count</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_source')" id="l_method-i-test_count_source">show</a>
                
              </p>
              <div id="method-i-test_count_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 773</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_with_counter_sql">
            
              <a name="method-i-test_count_with_counter_sql"></a><b>test_count_with_counter_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_with_counter_sql_source')" id="l_method-i-test_count_with_counter_sql_source">show</a>
                
              </p>
              <div id="method-i-test_count_with_counter_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 778</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_with_counter_sql</span>
  <span class="ruby-identifier">developer</span>  = <span class="ruby-constant">DeveloperWithCounterSQL</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'tekin'</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">id</span>]
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_with_finder_sql">
            
              <a name="method-i-test_count_with_finder_sql"></a><b>test_count_with_finder_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_with_finder_sql_source')" id="l_method-i-test_count_with_finder_sql_source">show</a>
                
              </p>
              <div id="method-i-test_count_with_finder_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 787</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_with_finder_sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_with_multiline_finder_sql</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_counting_on_habtm_association_and_not_array">
            
              <a name="method-i-test_counting_on_habtm_association_and_not_array"></a><b>test_counting_on_habtm_association_and_not_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_counting_on_habtm_association_and_not_array_source')" id="l_method-i-test_counting_on_habtm_association_and_not_array_source">show</a>
                
              </p>
              <div id="method-i-test_counting_on_habtm_association_and_not_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 766</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_counting_on_habtm_association_and_not_array</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-comment"># Extra parameter just to make sure we aren't falling back to</span>
  <span class="ruby-comment"># Array#count in Ruby &gt;=1.8.7, which would raise an ArgumentError</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1=1'</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create">
            
              <a name="method-i-test_create"></a><b>test_create</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_source')" id="l_method-i-test_create_source">show</a>
                
              </p>
              <div id="method-i-test_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 273</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_by_new_record">
            
              <a name="method-i-test_create_by_new_record"></a><b>test_create_by_new_record</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_by_new_record_source')" id="l_method-i-test_create_by_new_record_source">show</a>
                
              </p>
              <div id="method-i-test_create_by_new_record_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_by_new_record</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcel&quot;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">75000</span>)
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Make bed&quot;</span>)
  <span class="ruby-identifier">proj2</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Lie in it&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;Marcel&quot;</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_creation_respects_hash_condition">
            
              <a name="method-i-test_creation_respects_hash_condition"></a><b>test_creation_respects_hash_condition</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_creation_respects_hash_condition_source')" id="l_method-i-test_creation_respects_hash_condition_source">show</a>
                
              </p>
              <div id="method-i-test_creation_respects_hash_condition_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 298</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_creation_respects_hash_condition</span>
  <span class="ruby-comment"># in Oracle '' is saved as null therefore need to save ' ' in not null column</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-value">:general</span>).<span class="ruby-identifier">post_with_conditions</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">' '</span>)

  <span class="ruby-identifier">assert</span>        <span class="ruby-identifier">post</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span>  <span class="ruby-string">'Yet Another Testing Title'</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>

  <span class="ruby-comment"># in Oracle '' is saved as null therefore need to save ' ' in not null column</span>
  <span class="ruby-identifier">another_post</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-value">:general</span>).<span class="ruby-identifier">post_with_conditions</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">' '</span>)

  <span class="ruby-identifier">assert</span>        <span class="ruby-identifier">another_post</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span>  <span class="ruby-string">'Yet Another Testing Title'</span>, <span class="ruby-identifier">another_post</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting">
            
              <a name="method-i-test_deleting"></a><b>test_deleting</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_source')" id="l_method-i-test_deleting_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 338</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">active_record</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_all">
            
              <a name="method-i-test_deleting_all"></a><b>test_deleting_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_all_source')" id="l_method-i-test_deleting_all_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 379</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_all</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_array">
            
              <a name="method-i-test_deleting_array"></a><b>test_deleting_array</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_array_source')" id="l_method-i-test_deleting_array_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 352</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_array</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_array_with_sql">
            
              <a name="method-i-test_deleting_array_with_sql"></a><b>test_deleting_array_with_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_array_with_sql_source')" id="l_method-i-test_deleting_array_with_sql_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_array_with_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 370</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_array_with_sql</span>
  <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_with_sql">
            
              <a name="method-i-test_deleting_with_sql"></a><b>test_deleting_with_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_with_sql_source')" id="l_method-i-test_deleting_with_sql_source">show</a>
                
              </p>
              <div id="method-i-test_deleting_with_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 360</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_with_sql</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">david</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deprecated_push_with_attributes_was_removed">
            
              <a name="method-i-test_deprecated_push_with_attributes_was_removed"></a><b>test_deprecated_push_with_attributes_was_removed</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deprecated_push_with_attributes_was_removed_source')" id="l_method-i-test_deprecated_push_with_attributes_was_removed_source">show</a>
                
              </p>
              <div id="method-i-test_deprecated_push_with_attributes_was_removed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 445</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deprecated_push_with_attributes_was_removed</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">push_with_attributes</span>(<span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>), <span class="ruby-value">:joined_on</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_all">
            
              <a name="method-i-test_destroy_all"></a><b>test_destroy_all</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_all_source')" id="l_method-i-test_destroy_all_source">show</a>
                
              </p>
              <div id="method-i-test_destroy_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 429</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_all</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Project.count&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy_all</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM developers_projects WHERE developer_id = #{david.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroying">
            
              <a name="method-i-test_destroying"></a><b>test_destroying</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroying_source')" id="l_method-i-test_destroying_source">show</a>
                
              </p>
              <div id="method-i-test_destroying_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroying</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Project.count&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">project</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM developers_projects WHERE developer_id = #{david.id} AND project_id = #{project.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroying_many">
            
              <a name="method-i-test_destroying_many"></a><b>test_destroying_many</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroying_many_source')" id="l_method-i-test_destroying_many_source">show</a>
                
              </p>
              <div id="method-i-test_destroying_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 413</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroying_many</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">projects</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Project.count&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy</span>(*<span class="ruby-identifier">projects</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM developers_projects WHERE developer_id = #{david.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_all_order_should_override_association_limit">
            
              <a name="method-i-test_dynamic_find_all_order_should_override_association_limit"></a><b>test_dynamic_find_all_order_should_override_association_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_all_order_should_override_association_limit_source')" id="l_method-i-test_dynamic_find_all_order_should_override_association_limit_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_all_order_should_override_association_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 560</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_all_order_should_override_association_limit</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name = 'Jamis'&quot;</span>, <span class="ruby-value">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">9_000</span>).<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-string">'Jamis'</span>, <span class="ruby-value">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">9_000</span>).<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_all_should_respect_association_limit">
            
              <a name="method-i-test_dynamic_find_all_should_respect_association_limit"></a><b>test_dynamic_find_all_should_respect_association_limit</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_all_should_respect_association_limit_source')" id="l_method-i-test_dynamic_find_all_should_respect_association_limit_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_all_should_respect_association_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 555</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_all_should_respect_association_limit</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name = 'Jamis'&quot;</span>).<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-string">'Jamis'</span>).<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_all_should_respect_association_order">
            
              <a name="method-i-test_dynamic_find_all_should_respect_association_order"></a><b>test_dynamic_find_all_should_respect_association_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_all_should_respect_association_order_source')" id="l_method-i-test_dynamic_find_all_should_respect_association_order_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_all_should_respect_association_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 540</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_all_should_respect_association_order</span>
  <span class="ruby-comment"># Developers are ordered 'name DESC, id DESC'</span>
  <span class="ruby-identifier">low_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">middle_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>)
  <span class="ruby-identifier">high_id_jamis</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Jamis'</span>)

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">middle_id_jamis</span>, <span class="ruby-identifier">low_id_jamis</span>], <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name = 'Jamis'&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">middle_id_jamis</span>, <span class="ruby-identifier">low_id_jamis</span>], <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-string">'Jamis'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_all_should_respect_readonly_access">
            
              <a name="method-i-test_dynamic_find_all_should_respect_readonly_access"></a><b>test_dynamic_find_all_should_respect_readonly_access</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_all_should_respect_readonly_access_source')" id="l_method-i-test_dynamic_find_all_should_respect_readonly_access_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_all_should_respect_readonly_access_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 565</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_all_should_respect_readonly_access</span>
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">readonly_developers</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ReadOnlyRecord</span>) { <span class="ruby-identifier">d</span>.<span class="ruby-identifier">save!</span>  } <span class="ruby-keyword">if</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">valid?</span>}
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">readonly_developers</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_should_respect_association_include">
            
              <a name="method-i-test_dynamic_find_should_respect_association_include"></a><b>test_dynamic_find_should_respect_association_include</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_should_respect_association_include_source')" id="l_method-i-test_dynamic_find_should_respect_association_include_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_should_respect_association_include_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 760</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_should_respect_association_include</span>
  <span class="ruby-comment"># SQL error in sort clause if :include is not included</span>
  <span class="ruby-comment"># due to Unknown column 'authors.id'</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Category</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">posts_with_authors_sorted_by_author_id</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-string">'Welcome to the weblog'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_should_respect_association_order">
            
              <a name="method-i-test_dynamic_find_should_respect_association_order"></a><b>test_dynamic_find_should_respect_association_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_should_respect_association_order_source')" id="l_method-i-test_dynamic_find_should_respect_association_order_source">show</a>
                
              </p>
              <div id="method-i-test_dynamic_find_should_respect_association_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 532</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_should_respect_association_order</span>
  <span class="ruby-comment"># Developers are ordered 'name DESC, id DESC'</span>
  <span class="ruby-identifier">high_id_jamis</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Jamis'</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name = 'Jamis'&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">'Jamis'</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_grouped">
            
              <a name="method-i-test_find_grouped"></a><b>test_find_grouped</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_grouped_source')" id="l_method-i-test_find_grouped_source">show</a>
                
              </p>
              <div id="method-i-test_find_grouped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 672</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_grouped</span>
  <span class="ruby-identifier">all_posts_from_category1</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;category_id = 1&quot;</span>, <span class="ruby-value">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:categories</span>)
  <span class="ruby-identifier">grouped_posts_of_category1</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;category_id = 1&quot;</span>, <span class="ruby-value">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;author_id&quot;</span>, <span class="ruby-value">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'count(posts.id) as posts_count'</span>, <span class="ruby-value">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:categories</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">all_posts_from_category1</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">grouped_posts_of_category1</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_association">
            
              <a name="method-i-test_find_in_association"></a><b>test_find_in_association</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_association_source')" id="l_method-i-test_find_in_association_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 465</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_association</span>
  <span class="ruby-comment"># Using sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-string">&quot;SQL find&quot;</span>

  <span class="ruby-comment"># Using ruby</span>
  <span class="ruby-identifier">active_record</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-string">&quot;Ruby find&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_association_with_custom_finder_sql">
            
              <a name="method-i-test_find_in_association_with_custom_finder_sql"></a><b>test_find_in_association_with_custom_finder_sql</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_association_with_custom_finder_sql_source')" id="l_method-i-test_find_in_association_with_custom_finder_sql_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_association_with_custom_finder_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 507</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_association_with_custom_finder_sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-string">&quot;SQL find&quot;</span>

  <span class="ruby-identifier">active_record</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-string">&quot;Ruby find&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_association_with_custom_finder_sql_and_multiple_interpolations">
            
              <a name="method-i-test_find_in_association_with_custom_finder_sql_and_multiple_interpolations"></a><b>test_find_in_association_with_custom_finder_sql_and_multiple_interpolations</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_association_with_custom_finder_sql_and_multiple_interpolations_source')" id="l_method-i-test_find_in_association_with_custom_finder_sql_and_multiple_interpolations_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_association_with_custom_finder_sql_and_multiple_interpolations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 515</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_association_with_custom_finder_sql_and_multiple_interpolations</span>
  <span class="ruby-comment"># interpolate once:</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>)], <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_with_finder_sql</span>, <span class="ruby-string">&quot;first interpolation&quot;</span>
  <span class="ruby-comment"># interpolate again, for a different project id</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">developers_with_finder_sql</span>, <span class="ruby-string">&quot;second interpolation&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_association_with_custom_finder_sql_and_string_id">
            
              <a name="method-i-test_find_in_association_with_custom_finder_sql_and_string_id"></a><b>test_find_in_association_with_custom_finder_sql_and_string_id</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_association_with_custom_finder_sql_and_string_id_source')" id="l_method-i-test_find_in_association_with_custom_finder_sql_and_string_id_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_association_with_custom_finder_sql_and_string_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 522</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_association_with_custom_finder_sql_and_string_id</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>), <span class="ruby-string">&quot;SQL find&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_association_with_options">
            
              <a name="method-i-test_find_in_association_with_options"></a><b>test_find_in_association_with_options</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_association_with_options_source')" id="l_method-i-test_find_in_association_with_options_source">show</a>
                
              </p>
              <div id="method-i-test_find_in_association_with_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 582</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_association_with_options</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;salary &lt; 10000&quot;</span>).<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_scoped_grouped">
            
              <a name="method-i-test_find_scoped_grouped"></a><b>test_find_scoped_grouped</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_scoped_grouped_source')" id="l_method-i-test_find_scoped_grouped_source">show</a>
                
              </p>
              <div id="method-i-test_find_scoped_grouped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 679</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_scoped_grouped</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">categories</span>(<span class="ruby-value">:general</span>).<span class="ruby-identifier">posts_grouped_by_title</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">posts_grouped_by_title</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_scoped_grouped_having">
            
              <a name="method-i-test_find_scoped_grouped_having"></a><b>test_find_scoped_grouped_having</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_scoped_grouped_having_source')" id="l_method-i-test_find_scoped_grouped_having_source">show</a>
                
              </p>
              <div id="method-i-test_find_scoped_grouped_having_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 684</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_scoped_grouped_having</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">well_payed_salary_groups</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">well_payed_salary_groups</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">salary</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">10000</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_should_append_to_association_order">
            
              <a name="method-i-test_find_should_append_to_association_order"></a><b>test_find_should_append_to_association_order</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_should_append_to_association_order_source')" id="l_method-i-test_find_should_append_to_association_order_source">show</a>
                
              </p>
              <div id="method-i-test_find_should_append_to_association_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 550</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_should_append_to_association_order</span>
  <span class="ruby-identifier">ordered_developers</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">'projects.id'</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">'developers.name desc, developers.id desc'</span>, <span class="ruby-string">'projects.id'</span>], <span class="ruby-identifier">ordered_developers</span>.<span class="ruby-identifier">order_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_merged_options">
            
              <a name="method-i-test_find_with_merged_options"></a><b>test_find_with_merged_options</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_merged_options_source')" id="l_method-i-test_find_with_merged_options_source">show</a>
                
              </p>
              <div id="method-i-test_find_with_merged_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 526</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_merged_options</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_get_ids">
            
              <a name="method-i-test_get_ids"></a><b>test_get_ids</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_get_ids_source')" id="l_method-i-test_get_ids_source">show</a>
                
              </p>
              <div id="method-i-test_get_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 689</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_get_ids</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">id</span>], <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>).<span class="ruby-identifier">project_ids</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_get_ids_for_loaded_associations">
            
              <a name="method-i-test_get_ids_for_loaded_associations"></a><b>test_get_ids_for_loaded_associations</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_get_ids_for_loaded_associations_source')" id="l_method-i-test_get_ids_for_loaded_associations_source">show</a>
                
              </p>
              <div id="method-i-test_get_ids_for_loaded_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 694</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_get_ids_for_loaded_associations</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">0</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_get_ids_for_unloaded_associations_does_not_load_them">
            
              <a name="method-i-test_get_ids_for_unloaded_associations_does_not_load_them"></a><b>test_get_ids_for_unloaded_associations_does_not_load_them</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_get_ids_for_unloaded_associations_does_not_load_them_source')" id="l_method-i-test_get_ids_for_unloaded_associations_does_not_load_them_source">show</a>
                
              </p>
              <div id="method-i-test_get_ids_for_unloaded_associations_does_not_load_them_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 703</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_get_ids_for_unloaded_associations_does_not_load_them</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_adding_before_save">
            
              <a name="method-i-test_habtm_adding_before_save"></a><b>test_habtm_adding_before_save</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_adding_before_save_source')" id="l_method-i-test_habtm_adding_before_save_source">show</a>
                
              </p>
              <div id="method-i-test_habtm_adding_before_save_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_adding_before_save</span>
  <span class="ruby-identifier">no_of_devels</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">no_of_projects</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Aredridel&quot;</span>)
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>), <span class="ruby-identifier">p</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>)])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">p</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_devels</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_projects</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>, <span class="ruby-constant">Project</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_respects_select">
            
              <a name="method-i-test_habtm_respects_select"></a><b>test_habtm_respects_select</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_respects_select_source')" id="l_method-i-test_habtm_respects_select_source">show</a>
                
              </p>
              <div id="method-i-test_habtm_respects_select_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 643</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_respects_select</span>
  <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">select_testing_posts</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">o</span>, <span class="ruby-value">:correctness_marker</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">select_testing_posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>), <span class="ruby-value">:correctness_marker</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_respects_select_query_method">
            
              <a name="method-i-test_habtm_respects_select_query_method"></a><b>test_habtm_respects_select_query_method</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_respects_select_query_method_source')" id="l_method-i-test_habtm_respects_select_query_method_source">show</a>
                
              </p>
              <div id="method-i-test_habtm_respects_select_query_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 654</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_respects_select_query_method</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">'id'</span>], <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_saving_multiple_relationships">
            
              <a name="method-i-test_habtm_saving_multiple_relationships"></a><b>test_habtm_saving_multiple_relationships</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_saving_multiple_relationships_source')" id="l_method-i-test_habtm_saving_multiple_relationships_source">show</a>
                
              </p>
              <div id="method-i-test_habtm_saving_multiple_relationships_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_saving_multiple_relationships</span>
  <span class="ruby-identifier">new_project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Grimetime&quot;</span>)
  <span class="ruby-identifier">amount_of_developers</span> = <span class="ruby-number">4</span>
  <span class="ruby-identifier">developers</span> = (<span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">amount_of_developers</span>).<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;JME #{i}&quot;</span>) }.<span class="ruby-identifier">reverse</span>

  <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developer_ids</span> = [<span class="ruby-identifier">developers</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">id</span>, <span class="ruby-identifier">developers</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">id</span>]
  <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers_with_callback_ids</span> = [<span class="ruby-identifier">developers</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">id</span>, <span class="ruby-identifier">developers</span>[<span class="ruby-number">3</span>].<span class="ruby-identifier">id</span>]
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">save</span>

  <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">amount_of_developers</span>, <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>, <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_selects_all_columns_by_default">
            
              <a name="method-i-test_habtm_selects_all_columns_by_default"></a><b>test_habtm_selects_all_columns_by_default</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_selects_all_columns_by_default_source')" id="l_method-i-test_habtm_selects_all_columns_by_default_source">show</a>
                
              </p>
              <div id="method-i-test_habtm_selects_all_columns_by_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 650</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_selects_all_columns_by_default</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Project</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_unique_order_preserved">
            
              <a name="method-i-test_habtm_unique_order_preserved"></a><b>test_habtm_unique_order_preserved</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_unique_order_preserved_source')" id="l_method-i-test_habtm_unique_order_preserved_source">show</a>
                
              </p>
              <div id="method-i-test_habtm_unique_order_preserved_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_unique_order_preserved</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>, <span class="ruby-value">:jamis</span>, <span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">non_unique_developers</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>, <span class="ruby-value">:jamis</span>, <span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_and_belongs_to_many">
            
              <a name="method-i-test_has_and_belongs_to_many"></a><b>test_has_and_belongs_to_many</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_and_belongs_to_many_source')" id="l_method-i-test_has_and_belongs_to_many_source">show</a>
                
              </p>
              <div id="method-i-test_has_and_belongs_to_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_and_belongs_to_many</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">david</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_many_through_polymorphic_has_manys_works">
            
              <a name="method-i-test_has_many_through_polymorphic_has_manys_works"></a><b>test_has_many_through_polymorphic_has_manys_works</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_many_through_polymorphic_has_manys_works_source')" id="l_method-i-test_has_many_through_polymorphic_has_manys_works_source">show</a>
                
              </p>
              <div id="method-i-test_has_many_through_polymorphic_has_manys_works_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 736</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_many_through_polymorphic_has_manys_works</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">10</span>, <span class="ruby-number">20</span>].<span class="ruby-identifier">to_set</span>, <span class="ruby-identifier">pirates</span>(<span class="ruby-value">:redbeard</span>).<span class="ruby-identifier">treasure_estimates</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:price</span>).<span class="ruby-identifier">to_set</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_checks_if_record_exists_if_target_not_loaded">
            
              <a name="method-i-test_include_checks_if_record_exists_if_target_not_loaded"></a><b>test_include_checks_if_record_exists_if_target_not_loaded</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_checks_if_record_exists_if_target_not_loaded_source')" id="l_method-i-test_include_checks_if_record_exists_if_target_not_loaded_source">show</a>
                
              </p>
              <div id="method-i-test_include_checks_if_record_exists_if_target_not_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 487</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_checks_if_record_exists_if_target_not_loaded</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build">
            
              <a name="method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build"></a><b>test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build_source')" id="l_method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build_source">show</a>
                
              </p>
              <div id="method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 824</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">build</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping">
            
              <a name="method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping"></a><b>test_include_returns_false_for_non_matching_record_to_verify_scoping</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping_source')" id="l_method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping_source">show</a>
                
              </p>
              <div id="method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 499</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_returns_false_for_non_matching_record_to_verify_scoping</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">create</span> <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Bryan&quot;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">50_000</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_uses_array_include_after_loaded">
            
              <a name="method-i-test_include_uses_array_include_after_loaded"></a><b>test_include_uses_array_include_after_loaded</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_uses_array_include_after_loaded_source')" id="l_method-i-test_include_uses_array_include_after_loaded_source">show</a>
                
              </p>
              <div id="method-i-test_include_uses_array_include_after_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 475</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_uses_array_include_after_loaded</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">class</span> <span class="ruby-comment"># force load target</span>

  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_join_table_alias">
            
              <a name="method-i-test_join_table_alias"></a><b>test_join_table_alias</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_join_table_alias_source')" id="l_method-i-test_join_table_alias_source">show</a>
                
              </p>
              <div id="method-i-test_join_table_alias_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 658</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_join_table_alias</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:projects</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:developers</span>}, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'developers_projects_join.joined_on IS NOT NULL'</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_join_with_group">
            
              <a name="method-i-test_join_with_group"></a><b>test_join_with_group</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_join_with_group_source')" id="l_method-i-test_join_with_group_source">show</a>
                
              </p>
              <div id="method-i-test_join_with_group_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 662</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_join_with_group</span>
  <span class="ruby-identifier">group</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span>, <span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;developers.#{c.name}&quot;</span>
    <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;developers_projects_2.#{c.name}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Project</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">group</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;projects.#{c.name}&quot;</span> }

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:projects</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:developers</span>}, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'developers_projects_join.joined_on IS NOT NULL'</span>, <span class="ruby-value">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;,&quot;</span>)).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_new_aliased_to_build">
            
              <a name="method-i-test_new_aliased_to_build"></a><b>test_new_aliased_to_build</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_new_aliased_to_build_source')" id="l_method-i-test_new_aliased_to_build_source">show</a>
                
              </p>
              <div id="method-i-test_new_aliased_to_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 245</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_new_aliased_to_build</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>) }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(&amp;<span class="ruby-value">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_new_with_values_in_collection">
            
              <a name="method-i-test_new_with_values_in_collection"></a><b>test_new_with_values_in_collection</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_new_with_values_in_collection_source')" id="l_method-i-test_new_with_values_in_collection_source">show</a>
                
              </p>
              <div id="method-i-test_new_with_values_in_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 570</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_new_with_values_in_collection</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">DeveloperForProjectWithAfterCreateHook</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">'Jamis'</span>)
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">DeveloperForProjectWithAfterCreateHook</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">'David'</span>)
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">ProjectWithAfterCreateHook</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Cooking with Bertie&quot;</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">save!</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">reload</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">jamis</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">david</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_proper_usage_of_primary_keys_and_join_table">
            
              <a name="method-i-test_proper_usage_of_primary_keys_and_join_table"></a><b>test_proper_usage_of_primary_keys_and_join_table</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_proper_usage_of_primary_keys_and_join_table_source')" id="l_method-i-test_proper_usage_of_primary_keys_and_join_table_source">show</a>
                
              </p>
              <div id="method-i-test_proper_usage_of_primary_keys_and_join_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_proper_usage_of_primary_keys_and_join_table</span>
  <span class="ruby-identifier">setup_data_for_habtm_case</span>

  <span class="ruby-identifier">country</span> = <span class="ruby-constant">Country</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">country</span>.<span class="ruby-identifier">treaties</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_removing_associations_on_destroy">
            
              <a name="method-i-test_removing_associations_on_destroy"></a><b>test_removing_associations_on_destroy</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_removing_associations_on_destroy_source')" id="l_method-i-test_removing_associations_on_destroy_source">show</a>
                
              </p>
              <div id="method-i-test_removing_associations_on_destroy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 387</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_removing_associations_on_destroy</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">DeveloperWithBeforeDestroyRaise</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">destroy</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">DeveloperWithBeforeDestroyRaise</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-string">&quot;SELECT * FROM developers_projects WHERE developer_id = 1&quot;</span>).<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_on_new_object">
            
              <a name="method-i-test_replace_on_new_object"></a><b>test_replace_on_new_object</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_on_new_object_source')" id="l_method-i-test_replace_on_new_object_source">show</a>
                
              </p>
              <div id="method-i-test_replace_on_new_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 604</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_on_new_object</span>
  <span class="ruby-identifier">new_developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Matz&quot;</span>)
  <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ActionWebSearch&quot;</span>)]
  <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_with_less">
            
              <a name="method-i-test_replace_with_less"></a><b>test_replace_with_less</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_with_less_source')" id="l_method-i-test_replace_with_less_source">show</a>
                
              </p>
              <div id="method-i-test_replace_with_less_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 589</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_with_less</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>)]
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_with_new">
            
              <a name="method-i-test_replace_with_new"></a><b>test_replace_with_new</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_with_new_source')" id="l_method-i-test_replace_with_new_source">show</a>
                
              </p>
              <div id="method-i-test_replace_with_new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 596</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_with_new</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ActionWebSearch&quot;</span>)]
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records">
            
              <a name="method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records"></a><b>test_scoped_find_on_through_association_doesnt_return_read_only_records</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records_source')" id="l_method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records_source">show</a>
                
              </p>
              <div id="method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 728</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_find_on_through_association_doesnt_return_read_only_records</span>
  <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;General&quot;</span>)

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">save!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_self_referential_habtm_without_foreign_key_set_should_raise_exception">
            
              <a name="method-i-test_self_referential_habtm_without_foreign_key_set_should_raise_exception"></a><b>test_self_referential_habtm_without_foreign_key_set_should_raise_exception</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_self_referential_habtm_without_foreign_key_set_should_raise_exception_source')" id="l_method-i-test_self_referential_habtm_without_foreign_key_set_should_raise_exception_source">show</a>
                
              </p>
              <div id="method-i-test_self_referential_habtm_without_foreign_key_set_should_raise_exception_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 752</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_self_referential_habtm_without_foreign_key_set_should_raise_exception</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">HasAndBelongsToManyAssociationForeignKeyNeeded</span>) {
    <span class="ruby-constant">Member</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">has_and_belongs_to_many</span> <span class="ruby-value">:friends</span>, <span class="ruby-value">:class_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Member&quot;</span>, <span class="ruby-value">:join_table</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;member_friends&quot;</span>
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_property_quote_string_primary_keys">
            
              <a name="method-i-test_should_property_quote_string_primary_keys"></a><b>test_should_property_quote_string_primary_keys</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_property_quote_string_primary_keys_source')" id="l_method-i-test_should_property_quote_string_primary_keys_source">show</a>
                
              </p>
              <div id="method-i-test_should_property_quote_string_primary_keys_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_property_quote_string_primary_keys</span>
  <span class="ruby-identifier">setup_data_for_habtm_case</span>

  <span class="ruby-identifier">con</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>
  <span class="ruby-identifier">sql</span> = <span class="ruby-string">'select * from countries_treaties'</span>
  <span class="ruby-identifier">record</span> = <span class="ruby-identifier">con</span>.<span class="ruby-identifier">select_rows</span>(<span class="ruby-identifier">sql</span>).<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'c1'</span>, <span class="ruby-identifier">record</span>[<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">'t1'</span>, <span class="ruby-identifier">record</span>[<span class="ruby-number">1</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_symbols_as_keys">
            
              <a name="method-i-test_symbols_as_keys"></a><b>test_symbols_as_keys</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_symbols_as_keys_source')" id="l_method-i-test_symbols_as_keys_source">show</a>
                
              </p>
              <div id="method-i-test_symbols_as_keys_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 740</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_symbols_as_keys</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">DeveloperWithSymbolsForKeys</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'David'</span>)
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">ProjectWithSymbolsForKeys</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Rails Testing'</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developer</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">save!</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developer</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">project</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_triple_equality">
            
              <a name="method-i-test_triple_equality"></a><b>test_triple_equality</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_triple_equality_source')" id="l_method-i-test_triple_equality_source">show</a>
                
              </p>
              <div id="method-i-test_triple_equality_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_triple_equality</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span> <span class="ruby-operator">===</span> <span class="ruby-constant">Array</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq_after_the_fact">
            
              <a name="method-i-test_uniq_after_the_fact"></a><b>test_uniq_after_the_fact</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_after_the_fact_source')" id="l_method-i-test_uniq_after_the_fact_source">show</a>
                
              </p>
              <div id="method-i-test_uniq_after_the_fact_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 312</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq_after_the_fact</span>
  <span class="ruby-identifier">dev</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq_before_the_fact">
            
              <a name="method-i-test_uniq_before_the_fact"></a><b>test_uniq_before_the_fact</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_before_the_fact_source')" id="l_method-i-test_uniq_before_the_fact_source">show</a>
                
              </p>
              <div id="method-i-test_uniq_before_the_fact_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq_before_the_fact</span>
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:reload</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq_option_prevents_duplicate_push">
            
              <a name="method-i-test_uniq_option_prevents_duplicate_push"></a><b>test_uniq_option_prevents_duplicate_push</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_option_prevents_duplicate_push_source')" id="l_method-i-test_uniq_option_prevents_duplicate_push_source">show</a>
                
              </p>
              <div id="method-i-test_uniq_option_prevents_duplicate_push_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 327</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq_option_prevents_duplicate_push</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_attributes_after_push_without_duplicate_join_table_rows">
            
              <a name="method-i-test_update_attributes_after_push_without_duplicate_join_table_rows"></a><b>test_update_attributes_after_push_without_duplicate_join_table_rows</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_attributes_after_push_without_duplicate_join_table_rows_source')" id="l_method-i-test_update_attributes_after_push_without_duplicate_join_table_rows_source">show</a>
                
              </p>
              <div id="method-i-test_update_attributes_after_push_without_duplicate_join_table_rows_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 624</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_attributes_after_push_without_duplicate_join_table_rows</span>
    <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Kano&quot;</span>)
    <span class="ruby-identifier">project</span> = <span class="ruby-constant">SpecialProject</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Special Project&quot;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">project</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">update_column</span>(<span class="ruby-string">&quot;name&quot;</span>, <span class="ruby-string">&quot;Bruza&quot;</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-string">&quot;      SELECT count(*) FROM developers_projects
      WHERE project_id = #{project.id}
      AND developer_id = #{developer.id}
&quot;</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_updating_attributes_on_non_rich_associations">
            
              <a name="method-i-test_updating_attributes_on_non_rich_associations"></a><b>test_updating_attributes_on_non_rich_associations</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_updating_attributes_on_non_rich_associations_source')" id="l_method-i-test_updating_attributes_on_non_rich_associations_source">show</a>
                
              </p>
              <div id="method-i-test_updating_attributes_on_non_rich_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 637</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_updating_attributes_on_non_rich_associations</span>
  <span class="ruby-identifier">welcome</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">welcome</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;Something else&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">welcome</span>.<span class="ruby-identifier">save!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    