<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Readline</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Module</span> 
            Readline 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/Users/fschumac/_rvm/src/ruby-1_9_3-p0/ext/readline/readline_c.html">/Users/fschumac/.rvm/src/ruby-1.9.3-p0/ext/readline/readline.c</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>The <a href="Readline.html">Readline</a> module provides interface for GNU
<a href="Readline.html">Readline</a>. This module defines a number of
methods to facilitate completion and accesses input history from the Ruby
interpreter. This module supported Edit Line(libedit) too. libedit is
compatible with GNU <a href="Readline.html">Readline</a>.</p>
<dl class="rdoc-list note-list"><dt>GNU <a href="Readline.html">Readline</a>
<dd>
<p><a
href="http://www.gnu.org/directory/readline.html">www.gnu.org/directory/readline.html</a></p>
</dd><dt>libedit
<dd>
<p><a href="http://www.thrysoee.dk/editline/">www.thrysoee.dk/editline/</a></p>
</dd></dl>

<p>Reads one inputted line with line edit by <a
href="Readline.html#method-c-readline">::readline</a> method. At this time,
the facilitatation completion and the key bind like Emacs can be operated
like GNU <a href="Readline.html">Readline</a>.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>
<span class="ruby-keyword">while</span> <span class="ruby-identifier">buf</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>(<span class="ruby-string">&quot;&gt; &quot;</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">buf</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The content that the user input can be recorded to the history. The history
can be accessed by Readline::HISTORY constant.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>
<span class="ruby-keyword">while</span> <span class="ruby-identifier">buf</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>(<span class="ruby-string">&quot;&gt; &quot;</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">p</span> <span class="ruby-constant">Readline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">print</span>(<span class="ruby-string">&quot;-&gt; &quot;</span>, <span class="ruby-identifier">buf</span>, <span class="ruby-string">&quot;\n&quot;</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>Most of methods raise <a href="SecurityError.html">SecurityError</a>
exception if $SAFE is 4.</p>

<p>Documented by TAKAO Kouji &lt;kouji at takao7 dot net&gt;.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-basic_quote_characters">basic_quote_characters</a>,
              </li>
            
              
              <li>
                <a href="#method-c-basic_quote_characters-3D">basic_quote_characters=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-basic_word_break_characters">basic_word_break_characters</a>,
              </li>
            
              
              <li>
                <a href="#method-c-basic_word_break_characters-3D">basic_word_break_characters=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-completer_quote_characters">completer_quote_characters</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completer_quote_characters-3D">completer_quote_characters=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completer_word_break_characters">completer_word_break_characters</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completer_word_break_characters-3D">completer_word_break_characters=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completion_append_character">completion_append_character</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completion_append_character-3D">completion_append_character=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completion_case_fold">completion_case_fold</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completion_case_fold-3D">completion_case_fold=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completion_proc">completion_proc</a>,
              </li>
            
              
              <li>
                <a href="#method-c-completion_proc-3D">completion_proc=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-emacs_editing_mode">emacs_editing_mode</a>,
              </li>
            
              
              <li>
                <a href="#method-c-emacs_editing_mode-3F">emacs_editing_mode?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-filename_quote_characters">filename_quote_characters</a>,
              </li>
            
              
              <li>
                <a href="#method-c-filename_quote_characters-3D">filename_quote_characters=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-get_screen_size">get_screen_size</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-input-3D">input=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-line_buffer">line_buffer</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-output-3D">output=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-point">point</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-readline">readline</a>,
              </li>
            
              
              <li>
                <a href="#method-c-refresh_line">refresh_line</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-set_screen_size">set_screen_size</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-vi_editing_mode">vi_editing_mode</a>,
              </li>
            
              
              <li>
                <a href="#method-c-vi_editing_mode-3F">vi_editing_mode?</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">HISTORY</td>
            <td>=</td>
            <td class="attr-value">history</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>The history buffer. It extends <a href="Enumerable.html">Enumerable</a>
module, so it behaves just like an array. For example, gets the fifth
content that the user input by <a href="http://4">HISTORY</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">FILENAME_COMPLETION_PROC</td>
            <td>=</td>
            <td class="attr-value">fcomp</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>The <a href="Object.html">Object</a> with the call method that is a
completion for filename. This is sets by <a
href="Readline.html#method-c-completion_proc-3D">::completion_proc=</a>
method.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">USERNAME_COMPLETION_PROC</td>
            <td>=</td>
            <td class="attr-value">ucomp</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>The <a href="Object.html">Object</a> with the call method that is a
completion for usernames. This is sets by <a
href="Readline.html#method-c-completion_proc-3D">::completion_proc=</a>
method.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">VERSION</td>
            <td>=</td>
            <td class="attr-value">version</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Version string of GNU <a href="Readline.html">Readline</a> or libedit.</p></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-basic_quote_characters">
            
              <a name="method-c-basic_quote_characters"></a><b>Readline.basic_quote_characters &rarr; string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Gets a list of quote characters which can cause a word break.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-basic_quote_characters_source')" id="l_method-c-basic_quote_characters_source">show</a>
                
              </p>
              <div id="method-c-basic_quote_characters_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_basic_quote_characters(VALUE self, VALUE str)
{
    rb_secure(4);
    if (rl_basic_quote_characters == NULL)
        return Qnil;
    return rb_locale_str_new_cstr(rl_basic_quote_characters);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-basic_quote_characters-3D">
            
              <a name="method-c-basic_quote_characters-3D"></a><b>Readline.basic_quote_characters = string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Sets a list of quote characters which can cause a word break.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-basic_quote_characters-3D_source')" id="l_method-c-basic_quote_characters-3D_source">show</a>
                
              </p>
              <div id="method-c-basic_quote_characters-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_basic_quote_characters(VALUE self, VALUE str)
{
    static char *basic_quote_characters = NULL;

    rb_secure(4);
    OutputStringValue(str);
    if (basic_quote_characters == NULL) {
        basic_quote_characters =
            ALLOC_N(char, RSTRING_LEN(str) + 1);
    }
    else {
        REALLOC_N(basic_quote_characters, char, RSTRING_LEN(str) + 1);
    }
    strncpy(basic_quote_characters,
            RSTRING_PTR(str), RSTRING_LEN(str));
    basic_quote_characters[RSTRING_LEN(str)] = '\0';
    rl_basic_quote_characters = basic_quote_characters;

    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-basic_word_break_characters">
            
              <a name="method-c-basic_word_break_characters"></a><b>Readline.basic_word_break_characters &rarr; string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Gets the basic list of characters that signal a break between words for the
completer routine.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-basic_word_break_characters_source')" id="l_method-c-basic_word_break_characters_source">show</a>
                
              </p>
              <div id="method-c-basic_word_break_characters_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_basic_word_break_characters(VALUE self, VALUE str)
{
    rb_secure(4);
    if (rl_basic_word_break_characters == NULL)
        return Qnil;
    return rb_locale_str_new_cstr(rl_basic_word_break_characters);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-basic_word_break_characters-3D">
            
              <a name="method-c-basic_word_break_characters-3D"></a><b>Readline.basic_word_break_characters = string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Sets the basic list of characters that signal a break between words for the
completer routine. The default is the characters which break words for
completion in Bash: “tn"\‘`@$&gt;&lt;=;|&amp;{(”.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-basic_word_break_characters-3D_source')" id="l_method-c-basic_word_break_characters-3D_source">show</a>
                
              </p>
              <div id="method-c-basic_word_break_characters-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_basic_word_break_characters(VALUE self, VALUE str)
{
    static char *basic_word_break_characters = NULL;

    rb_secure(4);
    OutputStringValue(str);
    if (basic_word_break_characters == NULL) {
        basic_word_break_characters =
            ALLOC_N(char, RSTRING_LEN(str) + 1);
    }
    else {
        REALLOC_N(basic_word_break_characters, char, RSTRING_LEN(str) + 1);
    }
    strncpy(basic_word_break_characters,
            RSTRING_PTR(str), RSTRING_LEN(str));
    basic_word_break_characters[RSTRING_LEN(str)] = '\0';
    rl_basic_word_break_characters = basic_word_break_characters;
    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completer_quote_characters">
            
              <a name="method-c-completer_quote_characters"></a><b>Readline.completer_quote_characters &rarr; string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Gets a list of characters which can be used to quote a substring of the
line.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completer_quote_characters_source')" id="l_method-c-completer_quote_characters_source">show</a>
                
              </p>
              <div id="method-c-completer_quote_characters_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_completer_quote_characters(VALUE self, VALUE str)
{
    rb_secure(4);
    if (rl_completer_quote_characters == NULL)
        return Qnil;
    return rb_locale_str_new_cstr(rl_completer_quote_characters);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completer_quote_characters-3D">
            
              <a name="method-c-completer_quote_characters-3D"></a><b>Readline.completer_quote_characters = string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Sets a list of characters which can be used to quote a substring of the
line. Completion occurs on the entire substring, and within the substring
<a
href="Readline.html#method-c-completer_word_break_characters">::completer_word_break_characters</a>
are treated as any other character, unless they also appear within this
list.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completer_quote_characters-3D_source')" id="l_method-c-completer_quote_characters-3D_source">show</a>
                
              </p>
              <div id="method-c-completer_quote_characters-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_completer_quote_characters(VALUE self, VALUE str)
{
    static char *completer_quote_characters = NULL;

    rb_secure(4);
    OutputStringValue(str);
    if (completer_quote_characters == NULL) {
        completer_quote_characters =
            ALLOC_N(char, RSTRING_LEN(str) + 1);
    }
    else {
        REALLOC_N(completer_quote_characters, char, RSTRING_LEN(str) + 1);
    }
    strncpy(completer_quote_characters, RSTRING_PTR(str), RSTRING_LEN(str));
    completer_quote_characters[RSTRING_LEN(str)] = '\0';
    rl_completer_quote_characters = completer_quote_characters;

    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completer_word_break_characters">
            
              <a name="method-c-completer_word_break_characters"></a><b>Readline.completer_word_break_characters &rarr; string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Gets the basic list of characters that signal a break between words for
rl_complete_internal().</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completer_word_break_characters_source')" id="l_method-c-completer_word_break_characters_source">show</a>
                
              </p>
              <div id="method-c-completer_word_break_characters_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_completer_word_break_characters(VALUE self, VALUE str)
{
    rb_secure(4);
    if (rl_completer_word_break_characters == NULL)
        return Qnil;
    return rb_locale_str_new_cstr(rl_completer_word_break_characters);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completer_word_break_characters-3D">
            
              <a name="method-c-completer_word_break_characters-3D"></a><b>Readline.completer_word_break_characters = string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Sets the basic list of characters that signal a break between words for
rl_complete_internal(). The default is the value of <a
href="Readline.html#method-c-basic_word_break_characters">::basic_word_break_characters</a>.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completer_word_break_characters-3D_source')" id="l_method-c-completer_word_break_characters-3D_source">show</a>
                
              </p>
              <div id="method-c-completer_word_break_characters-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_completer_word_break_characters(VALUE self, VALUE str)
{
    static char *completer_word_break_characters = NULL;

    rb_secure(4);
    OutputStringValue(str);
    if (completer_word_break_characters == NULL) {
        completer_word_break_characters =
            ALLOC_N(char, RSTRING_LEN(str) + 1);
    }
    else {
        REALLOC_N(completer_word_break_characters, char, RSTRING_LEN(str) + 1);
    }
    strncpy(completer_word_break_characters,
            RSTRING_PTR(str), RSTRING_LEN(str));
    completer_word_break_characters[RSTRING_LEN(str)] = '\0';
    rl_completer_word_break_characters = completer_word_break_characters;
    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completion_append_character">
            
              <a name="method-c-completion_append_character"></a><b>Readline.completion_append_character &rarr; char
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns a string containing a character to be appended on completion. The
default is a space (“ ”).</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completion_append_character_source')" id="l_method-c-completion_append_character_source">show</a>
                
              </p>
              <div id="method-c-completion_append_character_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_completion_append_character(VALUE self)
{
    char buf[1];

    rb_secure(4);
    if (rl_completion_append_character == '\0')
        return Qnil;

    buf[0] = (char) rl_completion_append_character;
    return rb_locale_str_new(buf, 1);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completion_append_character-3D">
            
              <a name="method-c-completion_append_character-3D"></a><b>Readline.completion_append_character = char
</b>
            
          </div>
          
          
            <div class="description">
              <p>Specifies a character to be appended on completion. Nothing will be
appended if an empty string (“”) or nil is specified.</p>

<p>For example:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>

<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>(<span class="ruby-string">&quot;&gt; &quot;</span>, <span class="ruby-keyword">true</span>)
<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_append_character</span> = <span class="ruby-string">&quot; &quot;</span>
</pre>

<p>Result:</p>

<pre>&gt;
Input &quot;/var/li&quot;.

&gt; /var/li
Press TAB key.

&gt; /var/lib
Completes &quot;b&quot; and appends &quot; &quot;. So, you can continuously input &quot;/usr&quot;.

&gt; /var/lib /usr</pre>

<p>NOTE: Only one character can be specified. When “string” is specified, sets
only “s” that is the first.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>

<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_append_character</span> = <span class="ruby-string">&quot;string&quot;</span>
<span class="ruby-identifier">p</span> <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_append_character</span> <span class="ruby-comment"># =&gt; &quot;s&quot;</span>
</pre>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completion_append_character-3D_source')" id="l_method-c-completion_append_character-3D_source">show</a>
                
              </p>
              <div id="method-c-completion_append_character-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_completion_append_character(VALUE self, VALUE str)
{
    rb_secure(4);
    if (NIL_P(str)) {
        rl_completion_append_character = '\0';
    }
    else {
        OutputStringValue(str);
        if (RSTRING_LEN(str) == 0) {
            rl_completion_append_character = '\0';
        } else {
            rl_completion_append_character = RSTRING_PTR(str)[0];
        }
    }
    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completion_case_fold">
            
              <a name="method-c-completion_case_fold"></a><b>Readline.completion_case_fold &rarr; bool
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns true if completion ignores case. If no, returns false.</p>

<p>NOTE: Returns the same object that is specified by <a
href="Readline.html#method-c-completion_case_fold-3D">::completion_case_fold=</a>
method.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>

<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_case_fold</span> = <span class="ruby-string">&quot;This is a String.&quot;</span>
<span class="ruby-identifier">p</span> <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_case_fold</span> <span class="ruby-comment"># =&gt; &quot;This is a String.&quot;</span>
</pre>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completion_case_fold_source')" id="l_method-c-completion_case_fold_source">show</a>
                
              </p>
              <div id="method-c-completion_case_fold_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_completion_case_fold(VALUE self)
{
    rb_secure(4);
    return rb_attr_get(mReadline, completion_case_fold);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completion_case_fold-3D">
            
              <a name="method-c-completion_case_fold-3D"></a><b>Readline.completion_case_fold = bool
</b>
            
          </div>
          
          
            <div class="description">
              <p>Sets whether or not to ignore case on completion.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completion_case_fold-3D_source')" id="l_method-c-completion_case_fold-3D_source">show</a>
                
              </p>
              <div id="method-c-completion_case_fold-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_completion_case_fold(VALUE self, VALUE val)
{
    rb_secure(4);
    return rb_ivar_set(mReadline, completion_case_fold, val);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completion_proc">
            
              <a name="method-c-completion_proc"></a><b>Readline.completion_proc &rarr; proc
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the completion <a href="Proc.html">Proc</a> object.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completion_proc_source')" id="l_method-c-completion_proc_source">show</a>
                
              </p>
              <div id="method-c-completion_proc_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_completion_proc(VALUE self)
{
    rb_secure(4);
    return rb_attr_get(mReadline, completion_proc);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-completion_proc-3D">
            
              <a name="method-c-completion_proc-3D"></a><b>Readline.completion_proc = proc
</b>
            
          </div>
          
          
            <div class="description">
              <p>Specifies a <a href="Proc.html">Proc</a> object <code>proc</code> to
determine completion behavior.  It should take input string and return an
array of completion candidates.</p>

<p>The default completion is used if <code>proc</code> is nil.</p>

<p>The String that is passed to the <a href="Proc.html">Proc</a> depends on
the <a
href="Readline.html#method-c-completer_word_break_characters">::completer_word_break_characters</a>
property.  By default the word under the cursor is passed to the <a
href="Proc.html">Proc</a>.  For example, if the input is “foo bar” then
only “bar” would be passed to the completion <a href="Proc.html">Proc</a>.</p>

<p>Upon successful completion the <a
href="Readline.html#method-c-completion_append_character">::completion_append_character</a>
will be appended to the input so the user can start working on their next
argument.</p>

<h1 id="method-c-completion_proc-3D-label-Examples">Examples</h1>

<h2 id="method-c-completion_proc-3D-label-Completion+for+a+Static+List">Completion for a Static List</h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'readline'</span>

<span class="ruby-constant">LIST</span> = [
  <span class="ruby-string">'search'</span>, <span class="ruby-string">'download'</span>, <span class="ruby-string">'open'</span>,
  <span class="ruby-string">'help'</span>, <span class="ruby-string">'history'</span>, <span class="ruby-string">'quit'</span>,
  <span class="ruby-string">'url'</span>, <span class="ruby-string">'next'</span>, <span class="ruby-string">'clear'</span>,
  <span class="ruby-string">'prev'</span>, <span class="ruby-string">'past'</span>
].<span class="ruby-identifier">sort</span>

<span class="ruby-identifier">comp</span> = <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-constant">LIST</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-node">%r^#{Regexp.escape(s)}/</span>) }

<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_append_character</span> = <span class="ruby-string">&quot; &quot;</span>
<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_proc</span> = <span class="ruby-identifier">comp</span>

<span class="ruby-keyword">while</span> <span class="ruby-identifier">line</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>(<span class="ruby-string">'&gt; '</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">line</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="method-c-completion_proc-3D-label-Completion+For+Directory+Contents">Completion For Directory Contents</h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'readline'</span>

<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_append_character</span> = <span class="ruby-string">&quot; &quot;</span>
<span class="ruby-constant">Readline</span>.<span class="ruby-identifier">completion_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">str</span><span class="ruby-operator">|</span>
  <span class="ruby-constant">Dir</span>[<span class="ruby-identifier">str</span><span class="ruby-operator">+</span><span class="ruby-string">'*'</span>].<span class="ruby-identifier">grep</span>(<span class="ruby-node">%r^#{Regexp.escape(str)}/</span>)
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">while</span> <span class="ruby-identifier">line</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>(<span class="ruby-string">'&gt; '</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">line</span>
<span class="ruby-keyword">end</span>
</pre>

<h1 id="method-c-completion_proc-3D-label-Autocomplete+strategies">Autocomplete strategies</h1>

<p>When working with auto-complete there are some strategies that work well.
To get some ideas you can take a look at the <a
href="http://svn.ruby-lang.org/repos/ruby/trunk/lib/irb/completion.rb">completion.rb</a>
file for irb.</p>

<p>The common strategy is to take a list of possible completions and filter it
down to those completions that start with the user input.  In the above
examples <a href="Enumerable.html#method-i-grep">Enumerable#grep</a> is
used.  The input is escaped to prevent <a href="Regexp.html">Regexp</a>
special characters from interfering with the matching.</p>

<p>It may also be helpful to use the <a href="Abbrev.html">Abbrev</a> library
to generate completions.</p>

<p>Raises <a href="ArgumentError.html">ArgumentError</a> if <code>proc</code>
does not respond to the call method.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> if $SAFE is 4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-completion_proc-3D_source')" id="l_method-c-completion_proc-3D_source">show</a>
                
              </p>
              <div id="method-c-completion_proc-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_completion_proc(VALUE self, VALUE proc)
{
    rb_secure(4);
    if (!NIL_P(proc) &amp;&amp; !rb_respond_to(proc, rb_intern(&quot;call&quot;)))
        rb_raise(rb_eArgError, &quot;argument must respond to `call'&quot;);
    return rb_ivar_set(mReadline, completion_proc, proc);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-emacs_editing_mode">
            
              <a name="method-c-emacs_editing_mode"></a><b>Readline.emacs_editing_mode &rarr; nil
</b>
            
          </div>
          
          
            <div class="description">
              <p>Specifies Emacs editing mode. The default is this mode. See the manual of
GNU <a href="Readline.html">Readline</a> for details of Emacs editing mode.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-emacs_editing_mode_source')" id="l_method-c-emacs_editing_mode_source">show</a>
                
              </p>
              <div id="method-c-emacs_editing_mode_source" class="dyn-source">
                <pre>static VALUE
readline_s_emacs_editing_mode(VALUE self)
{
    rb_secure(4);
    rl_emacs_editing_mode(1,0);
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-emacs_editing_mode-3F">
            
              <a name="method-c-emacs_editing_mode-3F"></a><b>Readline.emacs_editing_mode? &rarr; bool
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns true if emacs mode is active. Returns false if not.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-emacs_editing_mode-3F_source')" id="l_method-c-emacs_editing_mode-3F_source">show</a>
                
              </p>
              <div id="method-c-emacs_editing_mode-3F_source" class="dyn-source">
                <pre>static VALUE
readline_s_emacs_editing_mode_p(VALUE self)
{
    rb_secure(4);
    return rl_editing_mode == 1 ? Qtrue : Qfalse;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-filename_quote_characters">
            
              <a name="method-c-filename_quote_characters"></a><b>Readline.filename_quote_characters &rarr; string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Gets a list of characters that cause a filename to be quoted by the
completer when they appear in a completed filename.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-filename_quote_characters_source')" id="l_method-c-filename_quote_characters_source">show</a>
                
              </p>
              <div id="method-c-filename_quote_characters_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_filename_quote_characters(VALUE self, VALUE str)
{
    rb_secure(4);
    if (rl_filename_quote_characters == NULL)
        return Qnil;
    return rb_locale_str_new_cstr(rl_filename_quote_characters);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-filename_quote_characters-3D">
            
              <a name="method-c-filename_quote_characters-3D"></a><b>Readline.filename_quote_characters = string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Sets a list of characters that cause a filename to be quoted by the
completer when they appear in a completed filename. The default is nil.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-filename_quote_characters-3D_source')" id="l_method-c-filename_quote_characters-3D_source">show</a>
                
              </p>
              <div id="method-c-filename_quote_characters-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_filename_quote_characters(VALUE self, VALUE str)
{
    static char *filename_quote_characters = NULL;

    rb_secure(4);
    OutputStringValue(str);
    if (filename_quote_characters == NULL) {
        filename_quote_characters =
            ALLOC_N(char, RSTRING_LEN(str) + 1);
    }
    else {
        REALLOC_N(filename_quote_characters, char, RSTRING_LEN(str) + 1);
    }
    strncpy(filename_quote_characters, RSTRING_PTR(str), RSTRING_LEN(str));
    filename_quote_characters[RSTRING_LEN(str)] = '\0';
    rl_filename_quote_characters = filename_quote_characters;

    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-get_screen_size">
            
              <a name="method-c-get_screen_size"></a><b>Readline.get_screen_size &rarr; [rows, columns]
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the terminal’s rows and columns.</p>

<p>See GNU Readline’s rl_get_screen_size function.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-get_screen_size_source')" id="l_method-c-get_screen_size_source">show</a>
                
              </p>
              <div id="method-c-get_screen_size_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_screen_size(VALUE self)
{
    int rows, columns;
    VALUE res;

    rb_secure(4);
    rl_get_screen_size(&amp;rows, &amp;columns);
    res = rb_ary_new();
    rb_ary_push(res, INT2NUM(rows));
    rb_ary_push(res, INT2NUM(columns));
    return res;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-input-3D">
            
              <a name="method-c-input-3D"></a><b>Readline.input = input
</b>
            
          </div>
          
          
            <div class="description">
              <p>Specifies a <a href="File.html">File</a> object <code>input</code> that is
input stream for <a href="Readline.html#method-c-readline">::readline</a>
method.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-input-3D_source')" id="l_method-c-input-3D_source">show</a>
                
              </p>
              <div id="method-c-input-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_input(VALUE self, VALUE input)
{
    rb_io_t *ifp;

    rb_secure(4);
    Check_Type(input, T_FILE);
    GetOpenFile(input, ifp);
    rl_instream = rb_io_stdio_file(ifp);
#ifdef HAVE_RL_GETC_FUNCTION
    readline_instream = input;
#endif
    return input;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-line_buffer">
            
              <a name="method-c-line_buffer"></a><b>Readline.line_buffer &rarr; string
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the full line that is being edited. This is useful from within the
complete_proc for determining the context of the completion request.</p>

<p>The length of <code>Readline.line_buffer</code> and GNU Readline’s rl_end
are same.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-line_buffer_source')" id="l_method-c-line_buffer_source">show</a>
                
              </p>
              <div id="method-c-line_buffer_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_line_buffer(VALUE self)
{
    rb_secure(4);
    if (rl_line_buffer == NULL)
        return Qnil;
    return rb_locale_str_new_cstr(rl_line_buffer);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-output-3D">
            
              <a name="method-c-output-3D"></a><b>Readline.output = output
</b>
            
          </div>
          
          
            <div class="description">
              <p>Specifies a <a href="File.html">File</a> object <code>output</code> that is
output stream for <a href="Readline.html#method-c-readline">::readline</a>
method.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-output-3D_source')" id="l_method-c-output-3D_source">show</a>
                
              </p>
              <div id="method-c-output-3D_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_output(VALUE self, VALUE output)
{
    rb_io_t *ofp;

    rb_secure(4);
    Check_Type(output, T_FILE);
    GetOpenFile(output, ofp);
    rl_outstream = rb_io_stdio_file(ofp);
    return output;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-point">
            
              <a name="method-c-point"></a><b>Readline.point &rarr; int
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the index of the current cursor position in
<code>Readline.line_buffer</code>.</p>

<p>The index in <code>Readline.line_buffer</code> which matches the start of
input-string passed to <a
href="Readline.html#method-c-completion_proc">::completion_proc</a> is
computed by subtracting the length of input-string from
<code>Readline.point</code>.</p>

<pre>start = (the length of input-string) - Readline.point</pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-point_source')" id="l_method-c-point_source">show</a>
                
              </p>
              <div id="method-c-point_source" class="dyn-source">
                <pre>static VALUE
readline_s_get_point(VALUE self)
{
    rb_secure(4);
    return INT2NUM(rl_point);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-readline">
            
              <a name="method-c-readline"></a><b>Readline.readline(prompt = "", add_hist = false) &rarr; string or nil
</b>
            
          </div>
          
          
            <div class="description">
              <p>Shows the <code>prompt</code> and reads the inputted line with line
editing. The inputted line is added to the history if <code>add_hist</code>
is true.</p>

<p>Returns nil when the inputted line is empty and user inputs EOF (Presses ^D
on UNIX).</p>

<p>Raises <a href="IOError.html">IOError</a> exception if below conditions are
satisfied.</p>
<ol><li>
<p>stdin is not tty.</p>
</li><li>
<p>stdin was closed. (errno is EBADF after called isatty(2).)</p>
</li></ol>

<p>This method supports thread. Switchs the thread context when waits
inputting line.</p>

<p>Supports line edit when inputs line. Provides VI and Emacs editing mode.
Default is Emacs editing mode.</p>

<p>NOTE: Terminates ruby interpreter and does not return the terminal status
after user pressed ‘^C’ when wait inputting line. Give 3 examples that
avoid it.</p>
<ul><li>
<p>Catches the <a href="Interrupt.html">Interrupt</a> exception by pressed ^C
after returns terminal status:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>

<span class="ruby-identifier">stty_save</span> = <span class="ruby-value">%xstty -g`</span>.<span class="ruby-identifier">chomp</span>
<span class="ruby-keyword">begin</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">buf</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>
      <span class="ruby-identifier">p</span> <span class="ruby-identifier">buf</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Interrupt</span>
      <span class="ruby-identifier">system</span>(<span class="ruby-string">&quot;stty&quot;</span>, <span class="ruby-identifier">stty_save</span>)
      <span class="ruby-identifier">exit</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>Catches the INT signal by pressed ^C after returns terminal status:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>

<span class="ruby-identifier">stty_save</span> = <span class="ruby-value">%xstty -g`</span>.<span class="ruby-identifier">chomp</span>
<span class="ruby-identifier">trap</span>(<span class="ruby-string">&quot;INT&quot;</span>) { <span class="ruby-identifier">system</span> <span class="ruby-string">&quot;stty&quot;</span>, <span class="ruby-identifier">stty_save</span>; <span class="ruby-identifier">exit</span> }

<span class="ruby-keyword">while</span> <span class="ruby-identifier">buf</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">buf</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>Ignores pressing ^C:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>

<span class="ruby-identifier">trap</span>(<span class="ruby-string">&quot;INT&quot;</span>, <span class="ruby-string">&quot;SIG_IGN&quot;</span>)

<span class="ruby-keyword">while</span> <span class="ruby-identifier">buf</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">buf</span>
<span class="ruby-keyword">end</span>
</pre>
</li></ul>

<p>Can make as follows with Readline::HISTORY constant. It does not record to
the history if the inputted line is empty or the same it as last one.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;readline&quot;</span>

<span class="ruby-keyword">while</span> <span class="ruby-identifier">buf</span> = <span class="ruby-constant">Readline</span>.<span class="ruby-identifier">readline</span>(<span class="ruby-string">&quot;&gt; &quot;</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-comment"># p Readline::HISTORY.to_a</span>
  <span class="ruby-constant">Readline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">pop</span> <span class="ruby-keyword">if</span> <span class="ruby-regexp">%r^\s*$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">buf</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">Readline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-constant">Readline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">-</span><span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">buf</span>
      <span class="ruby-constant">Readline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">pop</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">IndexError</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># p Readline::HISTORY.to_a</span>
  <span class="ruby-identifier">print</span> <span class="ruby-string">&quot;-&gt; &quot;</span>, <span class="ruby-identifier">buf</span>, <span class="ruby-string">&quot;\n&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-readline_source')" id="l_method-c-readline_source">show</a>
                
              </p>
              <div id="method-c-readline_source" class="dyn-source">
                <pre>static VALUE
readline_readline(int argc, VALUE *argv, VALUE self)
{
    VALUE tmp, add_hist, result;
    char *prompt = NULL;
    char *buff;
    int status;

    rb_secure(4);
    if (rb_scan_args(argc, argv, &quot;02&quot;, &amp;tmp, &amp;add_hist) &gt; 0) {
        OutputStringValue(tmp);
#if USE_INSERT_IGNORE_ESCAPE
        tmp = insert_ignore_escape(self, tmp);
        rb_str_locktmp(tmp);
#endif
        prompt = RSTRING_PTR(tmp);
    }

    if (!isatty(fileno(rl_instream)) &amp;&amp; errno == EBADF) rb_raise(rb_eIOError, &quot;closed stdin&quot;);

#ifdef _WIN32
    rl_prep_terminal(1);
#endif
    buff = (char*)rb_protect(readline_get, (VALUE)prompt, &amp;status);
#if USE_INSERT_IGNORE_ESCAPE
    if (prompt) {
        rb_str_unlocktmp(tmp);
    }
#endif
    if (status) {
#if defined HAVE_RL_CLEANUP_AFTER_SIGNAL
        /* restore terminal mode and signal handler*/
#if defined HAVE_RL_FREE_LINE_STATE
        rl_free_line_state();
#endif
        rl_cleanup_after_signal();
#elif defined HAVE_RL_DEPREP_TERM_FUNCTION
        /* restore terminal mode */
        if (rl_deprep_term_function != NULL) /* NULL in libedit. [ruby-dev:29116] */
            (*rl_deprep_term_function)();
        else
#else
        rl_deprep_terminal();
#endif
        rb_jump_tag(status);
    }

    if (RTEST(add_hist) &amp;&amp; buff) {
        add_history(buff);
    }
    if (buff) {
        result = rb_locale_str_new_cstr(buff);
    }
    else
        result = Qnil;
    if (buff) free(buff);
    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-refresh_line">
            
              <a name="method-c-refresh_line"></a><b>Readline.refresh_line &rarr; nil
</b>
            
          </div>
          
          
            <div class="description">
              <p>Clear the current input line.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-refresh_line_source')" id="l_method-c-refresh_line_source">show</a>
                
              </p>
              <div id="method-c-refresh_line_source" class="dyn-source">
                <pre>static VALUE
readline_s_refresh_line(VALUE self)
{
    rb_secure(4);
    rl_refresh_line(0, 0);
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-set_screen_size">
            
              <a name="method-c-set_screen_size"></a><b>Readline.set_screen_size(rows, columns) &rarr; self
</b>
            
          </div>
          
          
            <div class="description">
              <p><a href="Set.html">Set</a> terminal size to <code>rows</code> and
<code>columns</code>.</p>

<p>See GNU Readline’s rl_set_screen_size function.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-set_screen_size_source')" id="l_method-c-set_screen_size_source">show</a>
                
              </p>
              <div id="method-c-set_screen_size_source" class="dyn-source">
                <pre>static VALUE
readline_s_set_screen_size(VALUE self, VALUE rows, VALUE columns)
{
    rb_secure(4);
    rl_set_screen_size(NUM2INT(rows), NUM2INT(columns));
    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-vi_editing_mode">
            
              <a name="method-c-vi_editing_mode"></a><b>Readline.vi_editing_mode &rarr; nil
</b>
            
          </div>
          
          
            <div class="description">
              <p>Specifies VI editing mode. See the manual of GNU <a
href="Readline.html">Readline</a> for details of VI editing mode.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-vi_editing_mode_source')" id="l_method-c-vi_editing_mode_source">show</a>
                
              </p>
              <div id="method-c-vi_editing_mode_source" class="dyn-source">
                <pre>static VALUE
readline_s_vi_editing_mode(VALUE self)
{
    rb_secure(4);
    rl_vi_editing_mode(1,0);
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-vi_editing_mode-3F">
            
              <a name="method-c-vi_editing_mode-3F"></a><b>Readline.vi_editing_mode? &rarr; bool
</b>
            
          </div>
          
          
            <div class="description">
              <p>Returns true if vi mode is active. Returns false if not.</p>

<p>Raises <a href="NotImplementedError.html">NotImplementedError</a> if the
using readline library does not support.</p>

<p>Raises <a href="SecurityError.html">SecurityError</a> exception if $SAFE is
4.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-vi_editing_mode-3F_source')" id="l_method-c-vi_editing_mode-3F_source">show</a>
                
              </p>
              <div id="method-c-vi_editing_mode-3F_source" class="dyn-source">
                <pre>static VALUE
readline_s_vi_editing_mode_p(VALUE self)
{
    rb_secure(4);
    return rl_editing_mode == 0 ? Qtrue : Qfalse;
}</pre>
              </div>
            </div>
            
          </div>
                        </div>
    </div>
  </body>
</html>    