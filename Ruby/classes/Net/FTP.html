<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Net::FTP</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Net::FTP 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/Users/fschumac/_rvm/src/ruby-1_9_3-p0/lib/net/ftp_rb.html">/Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>This class implements the <a href="../File.html">File</a> Transfer
Protocol.  If you have used a command-line <a href="FTP.html">FTP</a>
program, and are familiar with the commands, you will be able to use this
class easily.  Some extra features are included to take advantage of Ruby’s
style and strengths.</p>

<h2 id="label-Example">Example</h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'net/ftp'</span>
</pre>

<h3 id="label-Example+1">Example 1</h3>

<pre>ftp = Net::FTP.new('ftp.netlab.co.jp')
ftp.login
files = ftp.chdir('pub/lang/ruby/contrib')
files = ftp.list('n*')
ftp.getbinaryfile('nif.rb-0.91.gz', 'nif.gz', 1024)
ftp.close</pre>

<h3 id="label-Example+2">Example 2</h3>

<pre class="ruby"><span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">FTP</span>.<span class="ruby-identifier">open</span>(<span class="ruby-string">'ftp.netlab.co.jp'</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ftp</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">login</span>
  <span class="ruby-identifier">files</span> = <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-string">'pub/lang/ruby/contrib'</span>)
  <span class="ruby-identifier">files</span> = <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">list</span>(<span class="ruby-string">'n*'</span>)
  <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-string">'nif.rb-0.91.gz'</span>, <span class="ruby-string">'nif.gz'</span>, <span class="ruby-value">1024</span>)
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Major+Methods">Major Methods</h2>

<p>The following are the methods most likely to be useful to users:</p>
<ul><li>
<p><a href="FTP.html#method-c-open">::open</a></p>
</li><li>
<p><a href="FTP.html#method-i-getbinaryfile">getbinaryfile</a></p>
</li><li>
<p><a href="FTP.html#method-i-gettextfile">gettextfile</a></p>
</li><li>
<p><a href="FTP.html#method-i-putbinaryfile">putbinaryfile</a></p>
</li><li>
<p><a href="FTP.html#method-i-puttextfile">puttextfile</a></p>
</li><li>
<p><a href="FTP.html#method-i-chdir">chdir</a></p>
</li><li>
<p><a href="FTP.html#method-i-nlst">nlst</a></p>
</li><li>
<p><a href="FTP.html#method-i-size">size</a></p>
</li><li>
<p><a href="FTP.html#method-i-rename">rename</a></p>
</li><li>
<p><a href="FTP.html#method-i-delete">delete</a></p>
</li></ul>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="FTP/NullSocket.html">Net::FTP::NullSocket</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-abort">abort</a>,
              </li>
            
              
              <li>
                <a href="#method-i-acct">acct</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-binary-3D">binary=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-chdir">chdir</a>,
              </li>
            
              
              <li>
                <a href="#method-i-close">close</a>,
              </li>
            
              
              <li>
                <a href="#method-i-closed-3F">closed?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-connect">connect</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-delete">delete</a>,
              </li>
            
              
              <li>
                <a href="#method-i-dir">dir</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-get">get</a>,
              </li>
            
              
              <li>
                <a href="#method-i-getbinaryfile">getbinaryfile</a>,
              </li>
            
              
              <li>
                <a href="#method-i-getdir">getdir</a>,
              </li>
            
              
              <li>
                <a href="#method-i-gettextfile">gettextfile</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-help">help</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-list">list</a>,
              </li>
            
              
              <li>
                <a href="#method-i-login">login</a>,
              </li>
            
              
              <li>
                <a href="#method-i-ls">ls</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-mdtm">mdtm</a>,
              </li>
            
              
              <li>
                <a href="#method-i-mkdir">mkdir</a>,
              </li>
            
              
              <li>
                <a href="#method-i-mtime">mtime</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-nlst">nlst</a>,
              </li>
            
              
              <li>
                <a href="#method-i-noop">noop</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-open">open</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-put">put</a>,
              </li>
            
              
              <li>
                <a href="#method-i-putbinaryfile">putbinaryfile</a>,
              </li>
            
              
              <li>
                <a href="#method-i-puttextfile">puttextfile</a>,
              </li>
            
              
              <li>
                <a href="#method-i-pwd">pwd</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>Q</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-quit">quit</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-rename">rename</a>,
              </li>
            
              
              <li>
                <a href="#method-i-retrbinary">retrbinary</a>,
              </li>
            
              
              <li>
                <a href="#method-i-retrlines">retrlines</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rmdir">rmdir</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-sendcmd">sendcmd</a>,
              </li>
            
              
              <li>
                <a href="#method-i-set_socket">set_socket</a>,
              </li>
            
              
              <li>
                <a href="#method-i-site">site</a>,
              </li>
            
              
              <li>
                <a href="#method-i-size">size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-status">status</a>,
              </li>
            
              
              <li>
                <a href="#method-i-storbinary">storbinary</a>,
              </li>
            
              
              <li>
                <a href="#method-i-storlines">storlines</a>,
              </li>
            
              
              <li>
                <a href="#method-i-system">system</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-voidcmd">voidcmd</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="../MonitorMixin.html">
              MonitorMixin
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">MDTM_REGEXP</td>
            <td>=</td>
            <td class="attr-value">/^(\d\d\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)/</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>binary</td>
            <td class='attr-desc'><p>When <code>true</code>, transfers are performed in binary mode.  Default:
<code>true</code>.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>debug_mode</td>
            <td class='attr-desc'><p>When <code>true</code>, all traffic to and from the server is written to
+$stdout+.  Default: <code>false</code>.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>last_response</td>
            <td class='attr-desc'><p>The server’s last response.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>last_response_code</td>
            <td class='attr-desc'><p>The server’s last response code.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>lastresp</td>
            <td class='attr-desc'><p>The server’s last response code.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>passive</td>
            <td class='attr-desc'><p>When <code>true</code>, the connection is in passive mode.  Default:
<code>false</code>.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>resume</td>
            <td class='attr-desc'><p>Sets or retrieves the <code>resume</code> status, which decides whether
incomplete transfers are resumed or restarted.  Default:
<code>false</code>.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>welcome</td>
            <td class='attr-desc'><p>The server’s welcome message.</p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <a name="method-c-new"></a><b>new</b>(host = nil, user = nil, passwd = nil, acct = nil)
            
          </div>
          
          
            <div class="description">
              <p>Creates and returns a new <code>FTP</code> object. If a <code>host</code>
is given, a connection is made. Additionally, if the <code>user</code> is
given, the given user name, password, and (optionally) account are used to
log in.  See <a href="FTP.html#method-i-login">login</a>.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>(<span class="ruby-identifier">host</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">super</span>()
  <span class="ruby-ivar">@binary</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@passive</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@debug_mode</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@resume</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@sock</span> = <span class="ruby-constant">NullSocket</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@logged_in</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">host</span>
    <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">host</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">user</span>
      <span class="ruby-identifier">login</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-open">
            
              <a name="method-c-open"></a><b>open</b>(host, user = nil, passwd = nil, acct = nil)
            
          </div>
          
          
            <div class="description">
              <p>A synonym for <code>FTP.new</code>, but with a mandatory host parameter.</p>

<p>If a block is given, it is passed the <code>FTP</code> object, which will
be closed when the block finishes, or when an exception is raised.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-open_source')" id="l_method-c-open_source">show</a>
                
              </p>
              <div id="method-c-open_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">FTP</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">ftp</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">ftp</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-abort">
            
              <a name="method-i-abort"></a><b>abort</b>()
            
          </div>
          
          
            <div class="description">
              <p>Aborts the previous command (ABOR command).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-abort_source')" id="l_method-i-abort_source">show</a>
                
              </p>
              <div id="method-i-abort_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 837</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">abort</span>
  <span class="ruby-identifier">line</span> = <span class="ruby-string">&quot;ABOR&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
  <span class="ruby-identifier">print</span> <span class="ruby-string">&quot;put: ABOR\n&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@debug_mode</span>
  <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">getmultiline</span>
  <span class="ruby-keyword">unless</span> [<span class="ruby-string">&quot;426&quot;</span>, <span class="ruby-string">&quot;226&quot;</span>, <span class="ruby-string">&quot;225&quot;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>, <span class="ruby-number">3</span>])
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">resp</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-acct">
            
              <a name="method-i-acct"></a><b>acct</b>(account)
            
          </div>
          
          
            <div class="description">
              <p>Sends the ACCT command.</p>

<p>This is a less common <a href="FTP.html">FTP</a> command, to send account
information if the destination host requires it.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-acct_source')" id="l_method-i-acct_source">show</a>
                
              </p>
              <div id="method-i-acct_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 689</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">acct</span>(<span class="ruby-identifier">account</span>)
  <span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;ACCT &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">account</span>
  <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-binary-3D">
            
              <a name="method-i-binary-3D"></a><b>binary=</b>(newmode)
            
          </div>
          
          
            <div class="description">
              <p>A setter to toggle transfers in binary mode. <code>newmode</code> is either
<code>true</code> or <code>false</code></p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-binary-3D_source')" id="l_method-i-binary-3D_source">show</a>
                
              </p>
              <div id="method-i-binary-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">binary=</span>(<span class="ruby-identifier">newmode</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">newmode</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@binary</span>
    <span class="ruby-ivar">@binary</span> = <span class="ruby-identifier">newmode</span>
    <span class="ruby-identifier">send_type_command</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@logged_in</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-chdir">
            
              <a name="method-i-chdir"></a><b>chdir</b>(dirname)
            
          </div>
          
          
            <div class="description">
              <p>Changes the (remote) directory.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-chdir_source')" id="l_method-i-chdir_source">show</a>
                
              </p>
              <div id="method-i-chdir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 759</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">chdir</span>(<span class="ruby-identifier">dirname</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dirname</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;..&quot;</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">voidcmd</span>(<span class="ruby-string">&quot;CDUP&quot;</span>)
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">FTPPermError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>[<span class="ruby-number">0</span>, <span class="ruby-number">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;500&quot;</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;CWD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>
  <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-close">
            
              <a name="method-i-close"></a><b>close</b>()
            
          </div>
          
          
            <div class="description">
              <p>Closes the connection.  Further operations are impossible until you open a
new connection with <a href="FTP.html#method-i-connect">connect</a>.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-close_source')" id="l_method-i-close_source">show</a>
                
              </p>
              <div id="method-i-close_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 907</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">close</span>
  <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@sock</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-closed-3F">
            
              <a name="method-i-closed-3F"></a><b>closed?</b>()
            
          </div>
          
          
            <div class="description">
              <p>Returns <code>true</code> iff the connection is closed.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-closed-3F_source')" id="l_method-i-closed-3F_source">show</a>
                
              </p>
              <div id="method-i-closed-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 914</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">closed?</span>
  <span class="ruby-ivar">@sock</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">or</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-connect">
            
              <a name="method-i-connect"></a><b>connect</b>(host, port = FTP_PORT)
            
          </div>
          
          
            <div class="description">
              <p>Establishes an <a href="FTP.html">FTP</a> connection to host, optionally
overriding the default port. If the environment variable
<code>SOCKS_SERVER</code> is set, sets up the connection through a SOCKS
proxy. Raises an exception (typically <code>Errno::ECONNREFUSED</code>) if
the connection cannot be established.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-connect_source')" id="l_method-i-connect_source">show</a>
                
              </p>
              <div id="method-i-connect_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">connect</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span> = <span class="ruby-constant">FTP_PORT</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@debug_mode</span>
    <span class="ruby-identifier">print</span> <span class="ruby-string">&quot;connect: &quot;</span>, <span class="ruby-identifier">host</span>, <span class="ruby-string">&quot;, &quot;</span>, <span class="ruby-identifier">port</span>, <span class="ruby-string">&quot;\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">open_socket</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
    <span class="ruby-identifier">voidresp</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-delete">
            
              <a name="method-i-delete"></a><b>delete</b>(filename)
            
          </div>
          
          
            <div class="description">
              <p>Deletes a file on the server.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-delete_source')" id="l_method-i-delete_source">show</a>
                
              </p>
              <div id="method-i-delete_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 745</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">delete</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">&quot;DELE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>, <span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;250&quot;</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">55</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPPermError</span>, <span class="ruby-identifier">resp</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-dir">
            
              <a name="method-i-dir"></a><b>dir</b>(*args)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-get">
            
              <a name="method-i-get"></a><b>get</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE)
            
          </div>
          
          
            <div class="description">
              <p>Retrieves <code>remotefile</code> in whatever mode the session is set (text
or binary).  See <a href="FTP.html#method-i-gettextfile">gettextfile</a>
and <a href="FTP.html#method-i-getbinaryfile">getbinaryfile</a>.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-get_source')" id="l_method-i-get_source">show</a>
                
              </p>
              <div id="method-i-get_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 618</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">get</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
        <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: data</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@binary</span>
    <span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">blocksize</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-getbinaryfile">
            
              <a name="method-i-getbinaryfile"></a><b>getbinaryfile</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE)
            
          </div>
          
          
            <div class="description">
              <p>Retrieves <code>remotefile</code> in binary mode, storing the result in
<code>localfile</code>. If <code>localfile</code> is nil, returns retrieved
data. If a block is supplied, it is passed the retrieved data in
<code>blocksize</code> chunks.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-getbinaryfile_source')" id="l_method-i-getbinaryfile_source">show</a>
                
              </p>
              <div id="method-i-getbinaryfile_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 560</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
                  <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>) <span class="ruby-comment"># :yield: data</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">localfile</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@resume</span>
      <span class="ruby-identifier">rest_offset</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">size?</span>(<span class="ruby-identifier">localfile</span>)
      <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-string">&quot;a&quot;</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-string">&quot;w&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">localfile</span>
    <span class="ruby-identifier">retrbinary</span>(<span class="ruby-string">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">localfile</span>
      <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">localfile</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-getdir">
            
              <a name="method-i-getdir"></a><b>getdir</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-gettextfile">
            
              <a name="method-i-gettextfile"></a><b>gettextfile</b>(remotefile, localfile = File.basename(remotefile))
            
          </div>
          
          
            <div class="description">
              <p>Retrieves <code>remotefile</code> in ASCII (text) mode, storing the result
in <code>localfile</code>. If <code>localfile</code> is nil, returns
retrieved data. If a block is supplied, it is passed the retrieved data one
line at a time.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-gettextfile_source')" id="l_method-i-gettextfile_source">show</a>
                
              </p>
              <div id="method-i-gettextfile_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 594</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>)) <span class="ruby-comment"># :yield: line</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">localfile</span>
    <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-string">&quot;w&quot;</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">retrlines</span>(<span class="ruby-string">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">newline</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">l</span> = <span class="ruby-identifier">newline</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">localfile</span>
      <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">newline</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">localfile</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-help">
            
              <a name="method-i-help"></a><b>help</b>(arg = nil)
            
          </div>
          
          
            <div class="description">
              <p>Issues the HELP command.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-help_source')" id="l_method-i-help_source">show</a>
                
              </p>
              <div id="method-i-help_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 871</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">help</span>(<span class="ruby-identifier">arg</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;HELP&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span>
    <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-list">
            
              <a name="method-i-list"></a><b>list</b>(*args)
            
          </div>
          
          
            <div class="description">
              <p>Returns an array of file information in the directory (the output is like
`ls -l`).  If a block is given, it iterates through the listing.</p>
            </div>
          
          
          
            <div class="aka">
              Also aliased as: <a href="FTP.html#method-i-ls">ls</a>, <a href="FTP.html#method-i-dir">dir</a>
            </div>
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-list_source')" id="l_method-i-list_source">show</a>
                
              </p>
              <div id="method-i-list_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 713</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">list</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: line</span>
  <span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;LIST&quot;</span>
  <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
    <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">lines</span> = []
    <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">lines</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-login">
            
              <a name="method-i-login"></a><b>login</b>(user = &quot;anonymous&quot;, passwd = nil, acct = nil)
            
          </div>
          
          
            <div class="description">
              <p>Logs in to the remote host. The session must have been previously
connected.  If <code>user</code> is the string “anonymous” and the
<code>password</code> is <code>nil</code>, a password of
<code>user@host</code> is synthesized. If the <code>acct</code> parameter
is not <code>nil</code>, an <a href="FTP.html">FTP</a> ACCT command is sent
following the successful login.  Raises an exception on error (typically
<code>Net::FTPPermError</code>).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-login_source')" id="l_method-i-login_source">show</a>
                
              </p>
              <div id="method-i-login_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 423</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">login</span>(<span class="ruby-identifier">user</span> = <span class="ruby-string">&quot;anonymous&quot;</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;anonymous&quot;</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">passwd</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">passwd</span> = <span class="ruby-string">&quot;anonymous@&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">resp</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">'USER '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">33</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">passwd</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">'PASS '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">passwd</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">33</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">acct</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">'ACCT '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">acct</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-number">22</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@welcome</span> = <span class="ruby-identifier">resp</span>
  <span class="ruby-identifier">send_type_command</span>
  <span class="ruby-ivar">@logged_in</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-ls">
            
              <a name="method-i-ls"></a><b>ls</b>(*args)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-mdtm">
            
              <a name="method-i-mdtm"></a><b>mdtm</b>(filename)
            
          </div>
          
          
            <div class="description">
              <p>Issues the MDTM command.  TODO: more info.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-mdtm_source')" id="l_method-i-mdtm_source">show</a>
                
              </p>
              <div id="method-i-mdtm_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 861</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">mdtm</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">&quot;MDTM &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>, <span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;213&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">3</span> <span class="ruby-operator">..</span> <span class="ruby-number">-1</span>].<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-mkdir">
            
              <a name="method-i-mkdir"></a><b>mkdir</b>(dirname)
            
          </div>
          
          
            <div class="description">
              <p>Creates a remote directory.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-mkdir_source')" id="l_method-i-mkdir_source">show</a>
                
              </p>
              <div id="method-i-mkdir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 802</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">mkdir</span>(<span class="ruby-identifier">dirname</span>)
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">&quot;MKD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-mtime">
            
              <a name="method-i-mtime"></a><b>mtime</b>(filename, local = false)
            
          </div>
          
          
            <div class="description">
              <p>Returns the last modification time of the (remote) file.  If
<code>local</code> is <code>true</code>, it is returned as a local time,
otherwise it’s a UTC time.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-mtime_source')" id="l_method-i-mtime_source">show</a>
                
              </p>
              <div id="method-i-mtime_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 793</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">mtime</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">local</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">str</span> = <span class="ruby-identifier">mdtm</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">ary</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">MDTM_REGEXP</span>)[<span class="ruby-number">0</span>].<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>}
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">local</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(*<span class="ruby-identifier">ary</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">gm</span>(*<span class="ruby-identifier">ary</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-nlst">
            
              <a name="method-i-nlst"></a><b>nlst</b>(dir = nil)
            
          </div>
          
          
            <div class="description">
              <p>Returns an array of filenames in the remote directory.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-nlst_source')" id="l_method-i-nlst_source">show</a>
                
              </p>
              <div id="method-i-nlst_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 697</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">nlst</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;NLST&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dir</span>
    <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dir</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">files</span> = []
  <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">files</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">files</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-noop">
            
              <a name="method-i-noop"></a><b>noop</b>()
            
          </div>
          
          
            <div class="description">
              <p>Issues a NOOP command.</p>

<p>Does nothing except return a response.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-noop_source')" id="l_method-i-noop_source">show</a>
                
              </p>
              <div id="method-i-noop_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 891</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">noop</span>
  <span class="ruby-identifier">voidcmd</span>(<span class="ruby-string">&quot;NOOP&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-put">
            
              <a name="method-i-put"></a><b>put</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block)
            
          </div>
          
          
            <div class="description">
              <p>Transfers <code>localfile</code> to the server in whatever mode the session
is set (text or binary).  See <a
href="FTP.html#method-i-puttextfile">puttextfile</a> and <a
href="FTP.html#method-i-putbinaryfile">putbinaryfile</a>.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-put_source')" id="l_method-i-put_source">show</a>
                
              </p>
              <div id="method-i-put_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 674</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">put</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
        <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@binary</span>
    <span class="ruby-identifier">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">blocksize</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-putbinaryfile">
            
              <a name="method-i-putbinaryfile"></a><b>putbinaryfile</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE)
            
          </div>
          
          
            <div class="description">
              <p>Transfers <code>localfile</code> to the server in binary mode, storing the
result in <code>remotefile</code>. If a block is supplied, calls it,
passing in the transmitted data in <code>blocksize</code> chunks.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-putbinaryfile_source')" id="l_method-i-putbinaryfile_source">show</a>
                
              </p>
              <div id="method-i-putbinaryfile_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 632</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
                  <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: data</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@resume</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">rest_offset</span> = <span class="ruby-identifier">size</span>(<span class="ruby-identifier">remotefile</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">FTPPermError</span>
      <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">rest_offset</span>
      <span class="ruby-identifier">storbinary</span>(<span class="ruby-string">&quot;APPE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>, &amp;<span class="ruby-identifier">block</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">storbinary</span>(<span class="ruby-string">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>, &amp;<span class="ruby-identifier">block</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-puttextfile">
            
              <a name="method-i-puttextfile"></a><b>puttextfile</b>(localfile, remotefile = File.basename(localfile))
            
          </div>
          
          
            <div class="description">
              <p>Transfers <code>localfile</code> to the server in ASCII (text) mode,
storing the result in <code>remotefile</code>. If callback or an associated
block is supplied, calls it, passing in the transmitted data one line at a
time.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-puttextfile_source')" id="l_method-i-puttextfile_source">show</a>
                
              </p>
              <div id="method-i-puttextfile_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>), &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: line</span>
  <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">storlines</span>(<span class="ruby-string">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-pwd">
            
              <a name="method-i-pwd"></a><b>pwd</b>()
            
          </div>
          
          
            <div class="description">
              <p>Returns the current remote directory.</p>
            </div>
          
          
          
            <div class="aka">
              Also aliased as: <a href="FTP.html#method-i-getdir">getdir</a>
            </div>
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-pwd_source')" id="l_method-i-pwd_source">show</a>
                
              </p>
              <div id="method-i-pwd_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 817</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">pwd</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">&quot;PWD&quot;</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-quit">
            
              <a name="method-i-quit"></a><b>quit</b>()
            
          </div>
          
          
            <div class="description">
              <p>Exits the <a href="FTP.html">FTP</a> session.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-quit_source')" id="l_method-i-quit_source">show</a>
                
              </p>
              <div id="method-i-quit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 882</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">quit</span>
  <span class="ruby-identifier">voidcmd</span>(<span class="ruby-string">&quot;QUIT&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-rename">
            
              <a name="method-i-rename"></a><b>rename</b>(fromname, toname)
            
          </div>
          
          
            <div class="description">
              <p>Renames a file on the server.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-rename_source')" id="l_method-i-rename_source">show</a>
                
              </p>
              <div id="method-i-rename_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 734</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">rename</span>(<span class="ruby-identifier">fromname</span>, <span class="ruby-identifier">toname</span>)
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">&quot;RNFR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">fromname</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-number">33</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">voidcmd</span>(<span class="ruby-string">&quot;RNTO &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">toname</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-retrbinary">
            
              <a name="method-i-retrbinary"></a><b>retrbinary</b>(cmd, blocksize, rest_offset = nil)
            
          </div>
          
          
            <div class="description">
              <p>Puts the connection into binary (image) mode, issues the given command, and
fetches the data returned, passing it to the associated block in chunks of
<code>blocksize</code> characters. Note that <code>cmd</code> is a server
command (such as “RETR myfile”).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-retrbinary_source')" id="l_method-i-retrbinary_source">show</a>
                
              </p>
              <div id="method-i-retrbinary_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 454</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">retrbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword">nil</span>) <span class="ruby-comment"># :yield: data</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword">true</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">rest_offset</span>)
      <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">data</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
        <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">data</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">data</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
      <span class="ruby-identifier">voidresp</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-retrlines">
            
              <a name="method-i-retrlines"></a><b>retrlines</b>(cmd)
            
          </div>
          
          
            <div class="description">
              <p>Puts the connection into ASCII (text) mode, issues the given command, and
passes the resulting data, one line at a time, to the associated block. If
no block is given, prints the lines. Note that <code>cmd</code> is a server
command (such as “RETR myfile”).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-retrlines_source')" id="l_method-i-retrlines_source">show</a>
                
              </p>
              <div id="method-i-retrlines_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 475</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-comment"># :yield: line</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
      <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">gets</span>
        <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">%r\r?\n\z/</span>, <span class="ruby-string">&quot;&quot;</span>), <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">%r\n\z/</span>).<span class="ruby-identifier">nil?</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
      <span class="ruby-identifier">voidresp</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-rmdir">
            
              <a name="method-i-rmdir"></a><b>rmdir</b>(dirname)
            
          </div>
          
          
            <div class="description">
              <p>Removes a remote directory.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-rmdir_source')" id="l_method-i-rmdir_source">show</a>
                
              </p>
              <div id="method-i-rmdir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 810</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">rmdir</span>(<span class="ruby-identifier">dirname</span>)
  <span class="ruby-identifier">voidcmd</span>(<span class="ruby-string">&quot;RMD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-sendcmd">
            
              <a name="method-i-sendcmd"></a><b>sendcmd</b>(cmd)
            
          </div>
          
          
            <div class="description">
              <p>Sends a command and returns the response.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-sendcmd_source')" id="l_method-i-sendcmd_source">show</a>
                
              </p>
              <div id="method-i-sendcmd_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 322</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">getresp</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-set_socket">
            
              <a name="method-i-set_socket"></a><b>set_socket</b>(sock, get_greeting = true)
            
          </div>
          
          
            <div class="description">
              <p>WRITEME or make private</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-set_socket_source')" id="l_method-i-set_socket_source">show</a>
                
              </p>
              <div id="method-i-set_socket_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 230</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">set_socket</span>(<span class="ruby-identifier">sock</span>, <span class="ruby-identifier">get_greeting</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">sock</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">get_greeting</span>
      <span class="ruby-identifier">voidresp</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-site">
            
              <a name="method-i-site"></a><b>site</b>(arg)
            
          </div>
          
          
            <div class="description">
              <p>Issues a SITE command.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-site_source')" id="l_method-i-site_source">show</a>
                
              </p>
              <div id="method-i-site_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 898</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">site</span>(<span class="ruby-identifier">arg</span>)
  <span class="ruby-identifier">cmd</span> = <span class="ruby-string">&quot;SITE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
  <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-size">
            
              <a name="method-i-size"></a><b>size</b>(filename)
            
          </div>
          
          
            <div class="description">
              <p>Returns the size of the given (remote) filename.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-size_source')" id="l_method-i-size_source">show</a>
                
              </p>
              <div id="method-i-size_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 777</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">size</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword">true</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">&quot;SIZE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>, <span class="ruby-number">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;213&quot;</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">3</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>].<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-status">
            
              <a name="method-i-status"></a><b>status</b>()
            
          </div>
          
          
            <div class="description">
              <p>Returns the status (STAT command).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-status_source')" id="l_method-i-status_source">show</a>
                
              </p>
              <div id="method-i-status_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 851</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">status</span>
  <span class="ruby-identifier">line</span> = <span class="ruby-string">&quot;STAT&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
  <span class="ruby-identifier">print</span> <span class="ruby-string">&quot;put: STAT\n&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@debug_mode</span>
  <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">getresp</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-storbinary">
            
              <a name="method-i-storbinary"></a><b>storbinary</b>(cmd, file, blocksize, rest_offset = nil)
            
          </div>
          
          
            <div class="description">
              <p>Puts the connection into binary (image) mode, issues the given server-side
command (such as “STOR myfile”), and sends the contents of the file named
<code>file</code> to the server. If the optional block is given, it also
passes it the data, in chunks of <code>blocksize</code> characters.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-storbinary_source')" id="l_method-i-storbinary_source">show</a>
                
              </p>
              <div id="method-i-storbinary_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 496</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">storbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: data</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rest_offset</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">seek</span>(<span class="ruby-identifier">rest_offset</span>, <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">SEEK_SET</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword">true</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
      <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
        <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
        <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
      <span class="ruby-identifier">voidresp</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPIPE</span>
  <span class="ruby-comment"># EPIPE, in this case, means that the data connection was unexpectedly</span>
  <span class="ruby-comment"># terminated.  Rather than just raising EPIPE to the caller, check the</span>
  <span class="ruby-comment"># response on the control connection.  If getresp doesn't raise a more</span>
  <span class="ruby-comment"># appropriate exception, re-raise the original exception.</span>
  <span class="ruby-identifier">getresp</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-storlines">
            
              <a name="method-i-storlines"></a><b>storlines</b>(cmd, file)
            
          </div>
          
          
            <div class="description">
              <p>Puts the connection into ASCII (text) mode, issues the given server-side
command (such as “STOR myfile”), and sends the contents of the file named
<code>file</code> to the server, one line at a time. If the optional block
is given, it also passes it the lines.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-storlines_source')" id="l_method-i-storlines_source">show</a>
                
              </p>
              <div id="method-i-storlines_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 528</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">storlines</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: line</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
      <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gets</span>
        <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">buf</span>[<span class="ruby-number">-2</span>, <span class="ruby-number">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">CRLF</span>
          <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
        <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
      <span class="ruby-identifier">voidresp</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPIPE</span>
  <span class="ruby-comment"># EPIPE, in this case, means that the data connection was unexpectedly</span>
  <span class="ruby-comment"># terminated.  Rather than just raising EPIPE to the caller, check the</span>
  <span class="ruby-comment"># response on the control connection.  If getresp doesn't raise a more</span>
  <span class="ruby-comment"># appropriate exception, re-raise the original exception.</span>
  <span class="ruby-identifier">getresp</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-system">
            
              <a name="method-i-system"></a><b>system</b>()
            
          </div>
          
          
            <div class="description">
              <p>Returns system information.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-system_source')" id="l_method-i-system_source">show</a>
                
              </p>
              <div id="method-i-system_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 826</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">system</span>
  <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-string">&quot;SYST&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">0</span>, <span class="ruby-number">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;215&quot;</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-number">4</span> <span class="ruby-operator">..</span> <span class="ruby-number">-1</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-voidcmd">
            
              <a name="method-i-voidcmd"></a><b>voidcmd</b>(cmd)
            
          </div>
          
          
            <div class="description">
              <p>Sends a command and expect a response beginning with ‘2’.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-voidcmd_source')" id="l_method-i-voidcmd_source">show</a>
                
              </p>
              <div id="method-i-voidcmd_source" class="dyn-source">
                <pre><span class="ruby-comment"># File /Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/net/ftp.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
    <span class="ruby-identifier">voidresp</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    