<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>MiniTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Module</span> 
            MiniTest 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/Users/fschumac/_rvm/src/ruby-1_9_3-p0/lib/minitest/mock_rb.html">/Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/minitest/mock.rb</a></li>
            
            <li><a href="../files/Users/fschumac/_rvm/src/ruby-1_9_3-p0/lib/minitest/unit_rb.html">/Users/fschumac/.rvm/src/ruby-1.9.3-p0/lib/minitest/unit.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>A simple and clean mock object framework.</p>

<p>Minimal (mostly drop-in) replacement for test-unit.</p>

<h1 id="label-minitest%2F%2A">minitest/*</h1>
<ul><li>
<p><a
href="http://rubyforge.org/projects/bfts">rubyforge.org/projects/bfts</a></p>
</li></ul>

<h2 id="label-DESCRIPTION%3A">DESCRIPTION:</h2>

<p>minitest provides a complete suite of testing facilities supporting TDD,
BDD, mocking, and benchmarking.</p>

<p>minitest/unit is a small and incredibly fast unit testing framework. It
provides a rich set of assertions to make your tests clean and readable.</p>

<p>minitest/spec is a functionally complete spec engine. It hooks onto
minitest/unit and seamlessly bridges test assertions over to spec
expectations.</p>

<p>minitest/benchmark is an awesome way to assert the performance of your
algorithms in a repeatable manner. Now you can assert that your newb
co-worker doesn’t replace your linear algorithm with an exponential one!</p>

<p>minitest/mock by Steven Baker, is a beautifully tiny mock object framework.</p>

<p>minitest/pride shows pride in testing and adds coloring to your test
output.</p>

<p>minitest/unit is meant to have a clean implementation for language
implementors that need a minimal set of methods to bootstrap a working test
suite. For example, there is no magic involved for test-case discovery.</p>

<h2 id="label-FEATURES%2FPROBLEMS%3A">FEATURES/PROBLEMS:</h2>
<ul><li>
<p>minitest/autorun - the easy and explicit way to run all your tests.</p>
</li><li>
<p>minitest/unit - a very fast, simple, and clean test system.</p>
</li><li>
<p>minitest/spec - a very fast, simple, and clean spec system.</p>
</li><li>
<p>minitest/mock - a simple and clean mock system.</p>
</li><li>
<p>minitest/benchmark - an awesome way to assert your algorithm’s performance.</p>
</li><li>
<p>minitest/pride - show your pride in testing!</p>
</li><li>
<p>Incredibly small and fast runner, but no bells and whistles.</p>
</li></ul>

<h2 id="label-RATIONALE%3A">RATIONALE:</h2>

<p>See design_rationale.rb to see how specs and tests work in minitest.</p>

<h2 id="label-SYNOPSIS%3A">SYNOPSIS:</h2>

<p>Given that you’d like to test the following class:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Meme</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">i_can_has_cheezburger?</span>
    <span class="ruby-string">&quot;OHAI!&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">will_it_blend?</span>
    <span class="ruby-string">&quot;YES!&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Unit+tests"><a href="MiniTest/Unit.html">Unit</a> tests</h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'minitest/autorun'</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">TestMeme</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span><span class="ruby-operator">::</span><span class="ruby-constant">TestCase</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">setup</span>
    <span class="ruby-ivar">@meme</span> = <span class="ruby-constant">Meme</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_that_kitty_can_eat</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;OHAI!&quot;</span>, <span class="ruby-ivar">@meme</span>.<span class="ruby-identifier">i_can_has_cheezburger?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_that_it_will_not_blend</span>
    <span class="ruby-identifier">refute_match</span> <span class="ruby-regexp">%r^no/</span>, <span class="ruby-ivar">@meme</span>.<span class="ruby-identifier">will_it_blend?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Specs">Specs</h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'minitest/autorun'</span>

<span class="ruby-identifier">describe</span> <span class="ruby-constant">Meme</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">before</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@meme</span> = <span class="ruby-constant">Meme</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">describe</span> <span class="ruby-string">&quot;when asked about cheeseburgers&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">it</span> <span class="ruby-string">&quot;must respond positively&quot;</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@meme</span>.<span class="ruby-identifier">i_can_has_cheezburger?</span>.<span class="ruby-identifier">must_equal</span> <span class="ruby-string">&quot;OHAI!&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">describe</span> <span class="ruby-string">&quot;when asked about blending possibilities&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">it</span> <span class="ruby-string">&quot;won't say no&quot;</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@meme</span>.<span class="ruby-identifier">will_it_blend?</span>.<span class="ruby-identifier">wont_match</span> <span class="ruby-regexp">%r^no/</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Benchmarks">Benchmarks</h3>

<p>Add benchmarks to your regular unit tests. If the unit tests fail, the
benchmarks won’t run.</p>

<pre class="ruby"><span class="ruby-comment"># optionally run benchmarks, good for CI-only work!</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'minitest/benchmark'</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;BENCH&quot;</span>]

<span class="ruby-keyword">class</span> <span class="ruby-constant">TestMeme</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span><span class="ruby-operator">::</span><span class="ruby-constant">TestCase</span>
  <span class="ruby-comment"># Override self.bench_range or default range is [1, 10, 100, 1_000, 10_000]</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">bench_my_algorithm</span>
    <span class="ruby-identifier">assert_performance_linear</span> <span class="ruby-value">0.9999</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-comment"># n is a range value</span>
      <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
        <span class="ruby-ivar">@obj</span>.<span class="ruby-identifier">my_algorithm</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Or add them to your specs. If you make benchmarks optional, you’ll need to
wrap your benchmarks in a conditional since the methods won’t be defined.</p>

<pre class="ruby"><span class="ruby-identifier">describe</span> <span class="ruby-constant">Meme</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;BENCH&quot;</span>] <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">bench_performance_linear</span> <span class="ruby-string">&quot;my_algorithm&quot;</span>, <span class="ruby-value">0.9999</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
      <span class="ruby-value">100</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
        <span class="ruby-ivar">@obj</span>.<span class="ruby-identifier">my_algorithm</span>(<span class="ruby-identifier">n</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>outputs something like:</p>

<pre># Running benchmarks:

TestBlah    100     1000    10000
bench_my_algorithm   0.006167        0.079279        0.786993
bench_other_algorithm        0.061679        0.792797        7.869932</pre>

<p>Output is tab-delimited to make it easy to paste into a spreadsheet.</p>

<h3 id="label-Mocks">Mocks</h3>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">MemeAsker</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">meme</span>)
    <span class="ruby-ivar">@meme</span> = <span class="ruby-identifier">meme</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">ask</span>(<span class="ruby-identifier">question</span>)
    <span class="ruby-identifier">method</span> = <span class="ruby-identifier">question</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&quot; &quot;</span>,<span class="ruby-string">&quot;_&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;?&quot;</span>
    <span class="ruby-ivar">@meme</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">require</span> <span class="ruby-string">'minitest/autorun'</span>

<span class="ruby-identifier">describe</span> <span class="ruby-constant">MemeAsker</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">before</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@meme</span> = <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Mock</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-ivar">@meme_asker</span> = <span class="ruby-constant">MemeAsker</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@meme</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">describe</span> <span class="ruby-node">&quot;#ask&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">describe</span> <span class="ruby-string">&quot;when passed an unpunctuated question&quot;</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">it</span> <span class="ruby-string">&quot;should invoke the appropriate predicate method on the meme&quot;</span> <span class="ruby-keyword">do</span>
        <span class="ruby-ivar">@meme</span>.<span class="ruby-identifier">expect</span> :<span class="ruby-identifier">will_it_blend?</span>, :<span class="ruby-identifier">return_value</span>
        <span class="ruby-ivar">@meme_asker</span>.<span class="ruby-identifier">ask</span> <span class="ruby-string">&quot;will it blend&quot;</span>
        <span class="ruby-ivar">@meme</span>.<span class="ruby-identifier">verify</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Customizable+Test+Runner+Types%3A">Customizable <a href="Test.html">Test</a> Runner Types:</h3>

<p><a href="MiniTest/Unit.html#method-c-runner-3D">MiniTest::Unit.runner=</a>
provides an easy way of creating custom test runners for specialized needs.
Justin Weiss provides the following real-world example to create an
alternative to regular fixture loading:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">MiniTestWithHooks</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">before_suites</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">after_suites</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">_run_suites</span>(<span class="ruby-identifier">suites</span>, <span class="ruby-identifier">type</span>)
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">before_suites</span>
      <span class="ruby-keyword">super</span>(<span class="ruby-identifier">suites</span>, <span class="ruby-identifier">type</span>)
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">after_suites</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">_run_suite</span>(<span class="ruby-identifier">suite</span>, <span class="ruby-identifier">type</span>)
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">suite</span>.<span class="ruby-identifier">before_suite</span>
      <span class="ruby-keyword">super</span>(<span class="ruby-identifier">suite</span>, <span class="ruby-identifier">type</span>)
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">suite</span>.<span class="ruby-identifier">after_suite</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">module</span> <span class="ruby-constant">MiniTestWithTransactions</span>
  <span class="ruby-keyword">class</span> <span class="ruby-constant">Unit</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">MiniTestWithHooks</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span>
    <span class="ruby-identifier">include</span> <span class="ruby-constant">TestSetupHelper</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">before_suites</span>
      <span class="ruby-keyword">super</span>
      <span class="ruby-identifier">setup_nested_transactions</span>
      <span class="ruby-comment"># load any data we want available for all tests</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">after_suites</span>
      <span class="ruby-identifier">teardown_nested_transactions</span>
      <span class="ruby-keyword">super</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span>.<span class="ruby-identifier">runner</span> = <span class="ruby-constant">MiniTestWithTransactions</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span>.<span class="ruby-identifier">new</span>
</pre>

<h2 id="label-REQUIREMENTS%3A">REQUIREMENTS:</h2>
<ul><li>
<p>Ruby 1.8, maybe even 1.6 or lower. No magic is involved.</p>
</li></ul>

<h2 id="label-INSTALL%3A">INSTALL:</h2>

<pre>sudo gem install minitest</pre>

<p>On 1.9, you already have it. To get newer candy you can still install the
gem, but you’ll need to activate the gem explicitly to use it:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'rubygems'</span>
<span class="ruby-identifier">gem</span> <span class="ruby-string">'minitest'</span> <span class="ruby-comment"># ensures you're using the gem, and not the built in MT</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'minitest/autorun'</span>

<span class="ruby-comment"># ... usual testing stuffs ...</span>
</pre>

<h2 id="label-LICENSE%3A">LICENSE:</h2>

<p>(The MIT License)</p>

<p>Copyright © Ryan Davis, Seattle.rb</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the ‘Software’),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED ‘AS IS’, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.</p>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="MiniTest/Assertions.html">MiniTest::Assertions</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="MiniTest/Expectations.html">MiniTest::Expectations</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="MiniTest/Assertion.html">MiniTest::Assertion</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="MiniTest/Mock.html">MiniTest::Mock</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="MiniTest/Skip.html">MiniTest::Skip</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="MiniTest/Spec.html">MiniTest::Spec</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="MiniTest/Unit.html">MiniTest::Unit</a>
        </li>
      
    </ul>
  


  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">MINI_DIR</td>
            <td>=</td>
            <td class="attr-value">File.dirname(File.dirname(file))</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>‘./lib’ in project dir, or ‘/usr/local/blahblah’ if installed</p></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
              </div>
    </div>
  </body>
</html>    