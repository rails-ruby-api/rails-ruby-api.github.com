<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RDoc::RDoc</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            RDoc::RDoc 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/rdoc/rdoc_rb.html">lib/rdoc/rdoc.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Encapsulate the production of rdoc documentation. Basically you can use
this as you would invoke rdoc from the command line:</p>

<pre>rdoc = RDoc::RDoc.new
rdoc.document(args)</pre>

<p>Where <code>args</code> is an array of strings, each corresponding to an
argument you’d give rdoc on the command line.  See &lt;tt&gt;rdoc
–help&lt;tt&gt; for details.</p>

<h1 id="label-Plugins">Plugins</h1>

<p>When you <code>require 'rdoc/rdoc'</code> <a href="RDoc.html">RDoc</a>
looks for ‘rdoc/discover’ files in your installed gems.  This can be used
to load alternate generators or add additional preprocessor directives.</p>

<p>You will want to wrap your plugin loading in an <a
href="RDoc.html">RDoc</a> version check. Something like:</p>

<pre class="ruby"><span class="ruby-keyword">begin</span>
  <span class="ruby-identifier">gem</span> <span class="ruby-string">'rdoc'</span>, <span class="ruby-string">'~&gt; 3'</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">'path/to/my/awesome/rdoc/plugin'</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">LoadError</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The most obvious plugin type is a new output generator.  See <a
href="Generator.html">RDoc::Generator</a> for details.</p>

<p>You can also hook into <a href="Markup.html">RDoc::Markup</a> to add new
directives (:nodoc: is a directive).  See <a
href="Markup/PreProcess.html#method-c-register">RDoc::Markup::PreProcess.register</a>
for details.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-add_generator">add_generator</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-current">current</a>,
              </li>
            
              
              <li>
                <a href="#method-c-current-3D">current=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-document">document</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-error">error</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-gather_files">gather_files</a>,
              </li>
            
              
              <li>
                <a href="#method-i-generate">generate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-handle_pipe">handle_pipe</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-install_siginfo_handler">install_siginfo_handler</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-list_files_in_directory">list_files_in_directory</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-normalized_file_list">normalized_file_list</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-output_flag_file">output_flag_file</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-parse_dot_doc_file">parse_dot_doc_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-parse_file">parse_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-parse_files">parse_files</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-remove_siginfo_handler">remove_siginfo_handler</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_unparseable">remove_unparseable</a>,
              </li>
            
              
              <li>
                <a href="#method-c-reset">reset</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup_output_dir">setup_output_dir</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-update_output_dir">update_output_dir</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">GENERATORS</td>
            <td>=</td>
            <td class="attr-value">{}</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>This is the list of supported output generators</p></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>exclude</td>
            <td class='attr-desc'><p><a href="../File.html">File</a> pattern to exclude</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>generator</td>
            <td class='attr-desc'><p><a href="Generator.html">Generator</a> instance used for creating output</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>last_modified</td>
            <td class='attr-desc'><p><a href="../Hash.html">Hash</a> of files and their last modified times.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>options</td>
            <td class='attr-desc'><p><a href="RDoc.html">RDoc</a> options</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>stats</td>
            <td class='attr-desc'><p>Accessor for statistics.  Available after each call to <a
href="RDoc.html#method-i-parse_files">#parse_files</a></p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-add_generator">
            
              <a name="method-c-add_generator"></a><b>add_generator</b>(klass)
            
          </div>
          
          
            <div class="description">
              <p>Add <code>klass</code> that can generate output after parsing</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-add_generator_source')" id="l_method-c-add_generator_source">show</a>
                
              </p>
              <div id="method-c-add_generator_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">add_generator</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^RDoc::Generator::/</span>, <span class="ruby-string">''</span>).<span class="ruby-identifier">downcase</span>
  <span class="ruby-constant">GENERATORS</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">klass</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-current">
            
              <a name="method-c-current"></a><b>current</b>()
            
          </div>
          
          
            <div class="description">
              <p>Active <a href="RDoc.html">RDoc::RDoc</a> instance</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-current_source')" id="l_method-c-current_source">show</a>
                
              </p>
              <div id="method-c-current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">current</span>
  <span class="ruby-ivar">@current</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-current-3D">
            
              <a name="method-c-current-3D"></a><b>current=</b>(rdoc)
            
          </div>
          
          
            <div class="description">
              <p>Sets the active <a href="RDoc.html">RDoc::RDoc</a> instance</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-current-3D_source')" id="l_method-c-current-3D_source">show</a>
                
              </p>
              <div id="method-c-current-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">current=</span>(<span class="ruby-identifier">rdoc</span>)
  <span class="ruby-ivar">@current</span> = <span class="ruby-identifier">rdoc</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <a name="method-c-new"></a><b>new</b>()
            
          </div>
          
          
            <div class="description">
              <p>Creates a new <a href="RDoc.html">RDoc::RDoc</a> instance.  Call <a
href="RDoc.html#method-i-document">#document</a> to parse files and
generate documentation.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>
  <span class="ruby-ivar">@current</span>       = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@exclude</span>       = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@generator</span>     = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@last_modified</span> = {}
  <span class="ruby-ivar">@old_siginfo</span>   = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@options</span>       = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@stats</span>         = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-reset">
            
              <a name="method-c-reset"></a><b>reset</b>()
            
          </div>
          
          
            <div class="description">
              <p>Resets all internal state</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-reset_source')" id="l_method-c-reset_source">show</a>
                
              </p>
              <div id="method-c-reset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">reset</span>
  <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">reset</span>
  <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>.<span class="ruby-identifier">reset</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-document">
            
              <a name="method-i-document"></a><b>document</b>(options)
            
          </div>
          
          
            <div class="description">
              <p>Generates documentation or a coverage report depending upon the settings in
<code>options</code>.</p>

<p><code>options</code> can be either an <a
href="Options.html">RDoc::Options</a> instance or an array of strings
equivalent to the strings that would be passed on the command line like
<code>%w[-q -o doc -t My\ Doc\ Title]</code>.  <a
href="RDoc.html#method-i-document">#document</a> will automatically call <a
href="Options.html#method-i-finish">RDoc::Options#finish</a> if an options
instance was given.</p>

<p>For a list of options, see either <a href="Options.html">RDoc::Options</a>
or <code>rdoc --help</code>.</p>

<p>By default, output will be stored in a directory called “doc” below the
current directory, so make sure you’re somewhere writable before invoking.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-document_source')" id="l_method-i-document_source">show</a>
                
              </p>
              <div id="method-i-document_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 410</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">document</span> <span class="ruby-identifier">options</span>
  <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span>.<span class="ruby-identifier">reset</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">options</span> <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
    <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">finish</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@options</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">pipe</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">handle_pipe</span>
    <span class="ruby-identifier">exit</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@exclude</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">exclude</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span> <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@last_modified</span> = <span class="ruby-identifier">setup_output_dir</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">force_update</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@start_time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>

  <span class="ruby-identifier">file_info</span> = <span class="ruby-identifier">parse_files</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">files</span>

  <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">default_title</span> = <span class="ruby-string">&quot;RDoc Documentation&quot;</span>

  <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">complete</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">visibility</span>

  <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">coverage_level</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">puts</span>

    <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">report</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">file_info</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;\nNo newer files.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">gen_klass</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">generator</span>

    <span class="ruby-ivar">@generator</span> = <span class="ruby-identifier">gen_klass</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@options</span>

    <span class="ruby-identifier">generate</span> <span class="ruby-identifier">file_info</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@stats</span> <span class="ruby-keyword">and</span> (<span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span> <span class="ruby-keyword">or</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">puts</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">summary</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">exit</span> <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">fully_documented?</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-error">
            
              <a name="method-i-error"></a><b>error</b>(msg)
            
          </div>
          
          
            <div class="description">
              <p>Report an error message and exit</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-error_source')" id="l_method-i-error_source">show</a>
                
              </p>
              <div id="method-i-error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 128</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">error</span>(<span class="ruby-identifier">msg</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-gather_files">
            
              <a name="method-i-gather_files"></a><b>gather_files</b>(files)
            
          </div>
          
          
            <div class="description">
              <p>Gathers a set of parseable files from the files and directories listed in
<code>files</code>.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-gather_files_source')" id="l_method-i-gather_files_source">show</a>
                
              </p>
              <div id="method-i-gather_files_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">gather_files</span> <span class="ruby-identifier">files</span>
  <span class="ruby-identifier">files</span> = [<span class="ruby-string">&quot;.&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">normalized_file_list</span> <span class="ruby-identifier">files</span>, <span class="ruby-keyword">true</span>, <span class="ruby-ivar">@exclude</span>

  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">uniq</span>

  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">remove_unparseable</span> <span class="ruby-identifier">file_list</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-generate">
            
              <a name="method-i-generate"></a><b>generate</b>(file_info)
            
          </div>
          
          
            <div class="description">
              <p>Generates documentation for <code>file_info</code> (from <a
href="RDoc.html#method-i-parse_files">#parse_files</a>) into the output dir
using the generator selected by the <a href="RDoc.html">RDoc</a> options</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-generate_source')" id="l_method-i-generate_source">show</a>
                
              </p>
              <div id="method-i-generate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 469</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">generate</span> <span class="ruby-identifier">file_info</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">current</span> = <span class="ruby-keyword">self</span>

      <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\nGenerating #{@generator.class.name.sub(/^.*::/, '')} format into #{Dir.pwd}...&quot;</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-ivar">@generator</span>.<span class="ruby-identifier">generate</span> <span class="ruby-identifier">file_info</span>
      <span class="ruby-identifier">update_output_dir</span> <span class="ruby-string">'.'</span>, <span class="ruby-ivar">@start_time</span>, <span class="ruby-ivar">@last_modified</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">current</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-handle_pipe">
            
              <a name="method-i-handle_pipe"></a><b>handle_pipe</b>()
            
          </div>
          
          
            <div class="description">
              <p>Turns <a href="RDoc.html">RDoc</a> from stdin into HTML</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-handle_pipe_source')" id="l_method-i-handle_pipe_source">show</a>
                
              </p>
              <div id="method-i-handle_pipe_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">handle_pipe</span>
  <span class="ruby-ivar">@html</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">ToHtml</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-identifier">out</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">convert</span> <span class="ruby-identifier">$stdin</span>.<span class="ruby-identifier">read</span>

  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">out</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-install_siginfo_handler">
            
              <a name="method-i-install_siginfo_handler"></a><b>install_siginfo_handler</b>()
            
          </div>
          
          
            <div class="description">
              <p>Installs a siginfo handler that prints the current filename.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-install_siginfo_handler_source')" id="l_method-i-install_siginfo_handler_source">show</a>
                
              </p>
              <div id="method-i-install_siginfo_handler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">install_siginfo_handler</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">'INFO'</span>

  <span class="ruby-ivar">@old_siginfo</span> = <span class="ruby-identifier">trap</span> <span class="ruby-string">'INFO'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@current</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@current</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-list_files_in_directory">
            
              <a name="method-i-list_files_in_directory"></a><b>list_files_in_directory</b>(dir)
            
          </div>
          
          
            <div class="description">
              <p>Return a list of the files to be processed in a directory. We know that
this directory doesn’t have a .document file, so we’re looking for real
files. However we may well contain subdirectories which must be tested for
.document files.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-list_files_in_directory_source')" id="l_method-i-list_files_in_directory_source">show</a>
                
              </p>
              <div id="method-i-list_files_in_directory_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">list_files_in_directory</span> <span class="ruby-identifier">dir</span>
  <span class="ruby-identifier">files</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-string">&quot;*&quot;</span>)

  <span class="ruby-identifier">normalized_file_list</span> <span class="ruby-identifier">files</span>, <span class="ruby-keyword">false</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">exclude</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-normalized_file_list">
            
              <a name="method-i-normalized_file_list"></a><b>normalized_file_list</b>(relative_files, force_doc = false, exclude_pattern = nil)
            
          </div>
          
          
            <div class="description">
              <p>Given a list of files and directories, create a list of all the Ruby files
they contain.</p>

<p>If <code>force_doc</code> is true we always add the given files, if false,
only add files that we guarantee we can parse.  It is true when looking at
files given on the command line, false when recursing through
subdirectories.</p>

<p>The effect of this is that if you want a file with a non-standard extension
parsed, you must name it explicitly.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-normalized_file_list_source')" id="l_method-i-normalized_file_list_source">show</a>
                
              </p>
              <div id="method-i-normalized_file_list_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 266</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">normalized_file_list</span>(<span class="ruby-identifier">relative_files</span>, <span class="ruby-identifier">force_doc</span> = <span class="ruby-keyword">false</span>,
                         <span class="ruby-identifier">exclude_pattern</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">file_list</span> = []

  <span class="ruby-identifier">relative_files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rel_file_name</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">exclude_pattern</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">exclude_pattern</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">rel_file_name</span>
    <span class="ruby-identifier">stat</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">next</span>

    <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span> = <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">ftype</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;file&quot;</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">last_modified</span> = <span class="ruby-ivar">@last_modified</span>[<span class="ruby-identifier">rel_file_name</span>] <span class="ruby-keyword">and</span>
              <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">mtime</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">last_modified</span>.<span class="ruby-identifier">to_i</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">force_doc</span> <span class="ruby-keyword">or</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">can_parse</span>(<span class="ruby-identifier">rel_file_name</span>) <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">file_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">rel_file_name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^\.\//</span>, <span class="ruby-string">''</span>)
        <span class="ruby-ivar">@last_modified</span>[<span class="ruby-identifier">rel_file_name</span>] = <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">mtime</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;directory&quot;</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;CVS&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;.svn&quot;</span>

      <span class="ruby-identifier">dot_doc</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">rel_file_name</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">DOT_DOC_FILENAME</span>

      <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span> <span class="ruby-identifier">dot_doc</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">file_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">parse_dot_doc_file</span>(<span class="ruby-identifier">rel_file_name</span>, <span class="ruby-identifier">dot_doc</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">file_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">list_files_in_directory</span>(<span class="ruby-identifier">rel_file_name</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;I can't deal with a #{type} #{rel_file_name}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-output_flag_file">
            
              <a name="method-i-output_flag_file"></a><b>output_flag_file</b>(op_dir)
            
          </div>
          
          
            <div class="description">
              <p>Return the path name of the flag file in an output directory.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-output_flag_file_source')" id="l_method-i-output_flag_file_source">show</a>
                
              </p>
              <div id="method-i-output_flag_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">output_flag_file</span>(<span class="ruby-identifier">op_dir</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">op_dir</span>, <span class="ruby-string">&quot;created.rid&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-parse_dot_doc_file">
            
              <a name="method-i-parse_dot_doc_file"></a><b>parse_dot_doc_file</b>(in_dir, filename)
            
          </div>
          
          
            <div class="description">
              <p>The .document file contains a list of file and directory name patterns,
representing candidates for documentation. It may also contain comments
(starting with ‘#’)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-parse_dot_doc_file_source')" id="l_method-i-parse_dot_doc_file_source">show</a>
                
              </p>
              <div id="method-i-parse_dot_doc_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 240</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">parse_dot_doc_file</span> <span class="ruby-identifier">in_dir</span>, <span class="ruby-identifier">filename</span>
  <span class="ruby-comment"># read and strip comments</span>
  <span class="ruby-identifier">patterns</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/#.*/</span>, <span class="ruby-string">''</span>)

  <span class="ruby-identifier">result</span> = []

  <span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">patt</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">candidates</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">in_dir</span>, <span class="ruby-identifier">patt</span>))
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">normalized_file_list</span>(<span class="ruby-identifier">candidates</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-parse_file">
            
              <a name="method-i-parse_file"></a><b>parse_file</b>(filename)
            
          </div>
          
          
            <div class="description">
              <p>Parses <code>filename</code> and returns an <a
href="TopLevel.html">RDoc::TopLevel</a></p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-parse_file_source')" id="l_method-i-parse_file_source">show</a>
                
              </p>
              <div id="method-i-parse_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 316</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">parse_file</span> <span class="ruby-identifier">filename</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Encoding</span>) <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">encoding</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">encoding</span>
      <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">encode</span> <span class="ruby-identifier">encoding</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_file</span> <span class="ruby-identifier">filename</span>

    <span class="ruby-identifier">content</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">read_file</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">encoding</span>

    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">content</span>

    <span class="ruby-identifier">top_level</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">filename</span>

    <span class="ruby-identifier">parser</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">for</span> <span class="ruby-identifier">top_level</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">content</span>, <span class="ruby-ivar">@options</span>, <span class="ruby-ivar">@stats</span>

    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parser</span>

    <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">scan</span>

    <span class="ruby-comment"># restart documentation for the classes &amp; modules found</span>
    <span class="ruby-identifier">top_level</span>.<span class="ruby-identifier">classes_or_modules</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cm</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">cm</span>.<span class="ruby-identifier">done_documenting</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">top_level</span>

  <span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Before reporting this, could you check that the file you're documenting
has proper syntax:

  #{Gem.ruby} -c #{filename}

RDoc is not a full Ruby parser and will fail when fed invalid ruby programs.

The internal error was:

\t(#{e.class}) #{e.message}

&quot;</span>

    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n\t&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>

    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-parse_files">
            
              <a name="method-i-parse_files"></a><b>parse_files</b>(files)
            
          </div>
          
          
            <div class="description">
              <p>Parse each file on the command line, recursively entering directories.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-parse_files_source')" id="l_method-i-parse_files_source">show</a>
                
              </p>
              <div id="method-i-parse_files_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">parse_files</span> <span class="ruby-identifier">files</span>
  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">gather_files</span> <span class="ruby-identifier">files</span>
  <span class="ruby-ivar">@stats</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Stats</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">verbosity</span>

  <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">file_info</span> = []

  <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">begin_adding</span>

  <span class="ruby-identifier">file_info</span> = <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filename</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@current</span> = <span class="ruby-identifier">filename</span>
    <span class="ruby-identifier">parse_file</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">compact</span>

  <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">done_adding</span>

  <span class="ruby-identifier">file_info</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_siginfo_handler">
            
              <a name="method-i-remove_siginfo_handler"></a><b>remove_siginfo_handler</b>()
            
          </div>
          
          
            <div class="description">
              <p>Removes a siginfo handler and replaces the previous</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_siginfo_handler_source')" id="l_method-i-remove_siginfo_handler_source">show</a>
                
              </p>
              <div id="method-i-remove_siginfo_handler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_siginfo_handler</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">key?</span> <span class="ruby-string">'INFO'</span>

  <span class="ruby-identifier">handler</span> = <span class="ruby-ivar">@old_siginfo</span> <span class="ruby-operator">||</span> <span class="ruby-string">'DEFAULT'</span>

  <span class="ruby-identifier">trap</span> <span class="ruby-string">'INFO'</span>, <span class="ruby-identifier">handler</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_unparseable">
            
              <a name="method-i-remove_unparseable"></a><b>remove_unparseable</b>(files)
            
          </div>
          
          
            <div class="description">
              <p>Removes file extensions known to be unparseable from <code>files</code></p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_unparseable_source')" id="l_method-i-remove_unparseable_source">show</a>
                
              </p>
              <div id="method-i-remove_unparseable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_unparseable</span> <span class="ruby-identifier">files</span>
  <span class="ruby-identifier">files</span>.<span class="ruby-identifier">reject</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\.(?:class|eps|erb|scpt\.txt|ttf|yml)$/</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup_output_dir">
            
              <a name="method-i-setup_output_dir"></a><b>setup_output_dir</b>(dir, force)
            
          </div>
          
          
            <div class="description">
              <p>Create an output dir if it doesn’t exist. If it does exist, but doesn’t
contain the flag file <code>created.rid</code> then we refuse to use it, as
we may clobber some manually generated documentation</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_output_dir_source')" id="l_method-i-setup_output_dir_source">show</a>
                
              </p>
              <div id="method-i-setup_output_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 173</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_output_dir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">force</span>)
    <span class="ruby-identifier">flag_file</span> = <span class="ruby-identifier">output_flag_file</span> <span class="ruby-identifier">dir</span>

    <span class="ruby-identifier">last</span> = {}

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">dry_run</span> <span class="ruby-keyword">then</span>
      <span class="ruby-comment"># do nothing</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">error</span> <span class="ruby-node">&quot;#{dir} exists and is not a directory&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">dir</span>

      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">open</span> <span class="ruby-identifier">flag_file</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span> <span class="ruby-keyword">then</span>
            <span class="ruby-constant">Time</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">io</span>.<span class="ruby-identifier">gets</span>

            <span class="ruby-identifier">io</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">file</span>, <span class="ruby-identifier">time</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span> <span class="ruby-string">&quot;\t&quot;</span>, <span class="ruby-number">2</span>
              <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">time</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">next</span>
              <span class="ruby-identifier">last</span>[<span class="ruby-identifier">file</span>] = <span class="ruby-identifier">time</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>, <span class="ruby-constant">TypeError</span>
        <span class="ruby-identifier">error</span> <span class="ruby-string">&quot;
Directory #{dir} already exists, but it looks like it isn't an RDoc directory.

Because RDoc doesn't want to risk destroying any of your existing files,
you'll need to specify a different output directory name (using the --op &lt;dir&gt;
option)

&quot;</span>
      <span class="ruby-keyword">end</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">force_output</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">dir</span>
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span> <span class="ruby-identifier">output_flag_file</span> <span class="ruby-identifier">dir</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">last</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_output_dir">
            
              <a name="method-i-update_output_dir"></a><b>update_output_dir</b>(op_dir, time, last = {})
            
          </div>
          
          
            <div class="description">
              <p>Update the flag file in an output directory.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_output_dir_source')" id="l_method-i-update_output_dir_source">show</a>
                
              </p>
              <div id="method-i-update_output_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rdoc/rdoc.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_output_dir</span>(<span class="ruby-identifier">op_dir</span>, <span class="ruby-identifier">time</span>, <span class="ruby-identifier">last</span> = {})
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">dry_run</span> <span class="ruby-keyword">or</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">update_output_dir</span>

  <span class="ruby-identifier">open</span> <span class="ruby-identifier">output_flag_file</span>(<span class="ruby-identifier">op_dir</span>), <span class="ruby-string">&quot;w&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">time</span>.<span class="ruby-identifier">rfc2822</span>
    <span class="ruby-identifier">last</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>, <span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{n}\t#{t.rfc2822}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    