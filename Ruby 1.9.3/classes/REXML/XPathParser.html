<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>REXML::XPathParser</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            REXML::XPathParser 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/rexml/xpath_parser_rb.html">lib/rexml/xpath_parser.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>You don’t want to use this class.  Really.  Use <a
href="XPath.html">XPath</a>, which is a wrapper for this class.  Believe
me.  You don’t want to poke around in here. There is strange, dark magic at
work in this code.  Beware.  Go back!  Go back while you still can!</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-5B-5D-3D">[]=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-first">first</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-get_first">get_first</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-match">match</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-namespaces-3D">namespaces=</a>,
              </li>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-parse">parse</a>,
              </li>
            
              
              <li>
                <a href="#method-i-predicate">predicate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-variables-3D">variables=</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="XMLTokens.html">
              REXML::XMLTokens
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">LITERAL</td>
            <td>=</td>
            <td class="attr-value">/^'([^']*)'|^&quot;([^&quot;]*)&quot;/u</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ALL</td>
            <td>=</td>
            <td class="attr-value">[ :attribute, :element, :text, :processing_instruction, :comment ]</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Expr takes a stack of path elements and a set of nodes (either a <a
href="Parent.html">Parent</a> or an Array and returns an Array of matching
nodes</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ELEMENTS</td>
            <td>=</td>
            <td class="attr-value">[ :element ]</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <a name="method-c-new"></a><b>new</b>( )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>( )
  <span class="ruby-ivar">@parser</span> = <span class="ruby-constant">REXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parsers</span><span class="ruby-operator">::</span><span class="ruby-constant">XPathParser</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@namespaces</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@variables</span> = {}
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-5B-5D-3D">
            
              <a name="method-i-5B-5D-3D"></a><b>[]=</b>( variable_name, value )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-5B-5D-3D_source')" id="l_method-i-5B-5D-3D_source">show</a>
                
              </p>
              <div id="method-i-5B-5D-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>( <span class="ruby-keyword ruby-title">variable_name</span>, <span class="ruby-identifier">value</span> )
  <span class="ruby-ivar">@variables</span>[ <span class="ruby-identifier">variable_name</span> ] = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-first">
            
              <a name="method-i-first"></a><b>first</b>( path_stack, node )
            
          </div>
          
          
            <div class="description">
              <p>Performs a depth-first (document order) <a href="XPath.html">XPath</a>
search, and returns the first match.  This is the fastest, lightest way to
return a single result.</p>

<p>FIXME: This method is incomplete!</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-first_source')" id="l_method-i-first_source">show</a>
                
              </p>
              <div id="method-i-first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">first</span>( <span class="ruby-identifier">path_stack</span>, <span class="ruby-identifier">node</span> )
  <span class="ruby-comment">#puts &quot;#{depth}) Entering match( #{path.inspect}, #{tree.inspect} )&quot;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">path</span>[<span class="ruby-number">0</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:document</span>
    <span class="ruby-comment"># do nothing</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path</span>[<span class="ruby-number">1</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>], <span class="ruby-identifier">node</span> )
  <span class="ruby-keyword">when</span> <span class="ruby-value">:child</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>
      <span class="ruby-comment">#puts &quot;#{depth}) CHILD checking #{name(c)}&quot;</span>
      <span class="ruby-identifier">r</span> = <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path</span>[<span class="ruby-number">1</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>], <span class="ruby-identifier">c</span> )
      <span class="ruby-comment">#puts &quot;#{depth}) RETURNING #{r.inspect}&quot; if r</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">r</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:qname</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>[<span class="ruby-number">2</span>]
    <span class="ruby-comment">#puts &quot;#{depth}) QNAME #{name(tree)} == #{name} (path =&gt; #{path.size})&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span>
      <span class="ruby-comment">#puts &quot;#{depth}) RETURNING #{tree.inspect}&quot; if path.size == 3</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">node</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-number">3</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path</span>[<span class="ruby-number">3</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>], <span class="ruby-identifier">node</span> )
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:descendant_or_self</span>
    <span class="ruby-identifier">r</span> = <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path</span>[<span class="ruby-number">1</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>], <span class="ruby-identifier">node</span> )
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">r</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>
      <span class="ruby-identifier">r</span> = <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">c</span> )
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">r</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:node</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path</span>[<span class="ruby-number">1</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>], <span class="ruby-identifier">node</span> )
  <span class="ruby-keyword">when</span> <span class="ruby-value">:any</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path</span>[<span class="ruby-number">1</span><span class="ruby-operator">..</span><span class="ruby-number">-1</span>], <span class="ruby-identifier">node</span> )
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-get_first">
            
              <a name="method-i-get_first"></a><b>get_first</b>(path, nodeset)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-get_first_source')" id="l_method-i-get_first_source">show</a>
                
              </p>
              <div id="method-i-get_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">get_first</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">nodeset</span>
 <span class="ruby-comment">#puts &quot;#&quot;*40</span>
 <span class="ruby-identifier">path_stack</span> = <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>( <span class="ruby-identifier">path</span> )
 <span class="ruby-comment">#puts &quot;PARSE: #{path} =&gt; #{path_stack.inspect}&quot;</span>
 <span class="ruby-comment">#puts &quot;PARSE: nodeset = #{nodeset.inspect}&quot;</span>
 <span class="ruby-identifier">first</span>( <span class="ruby-identifier">path_stack</span>, <span class="ruby-identifier">nodeset</span> )
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-match">
            
              <a name="method-i-match"></a><b>match</b>( path_stack, nodeset )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-match_source')" id="l_method-i-match_source">show</a>
                
              </p>
              <div id="method-i-match_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">match</span>( <span class="ruby-identifier">path_stack</span>, <span class="ruby-identifier">nodeset</span> )
  <span class="ruby-comment">#puts &quot;MATCH: path_stack = #{path_stack.inspect}&quot;</span>
  <span class="ruby-comment">#puts &quot;MATCH: nodeset = #{nodeset.inspect}&quot;</span>
  <span class="ruby-identifier">r</span> = <span class="ruby-identifier">expr</span>( <span class="ruby-identifier">path_stack</span>, <span class="ruby-identifier">nodeset</span> )
  <span class="ruby-comment">#puts &quot;MAIN EXPR =&gt; #{r.inspect}&quot;</span>
  <span class="ruby-identifier">r</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-namespaces-3D">
            
              <a name="method-i-namespaces-3D"></a><b>namespaces=</b>( namespaces={} )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-namespaces-3D_source')" id="l_method-i-namespaces-3D_source">show</a>
                
              </p>
              <div id="method-i-namespaces-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">namespaces=</span>( <span class="ruby-identifier">namespaces</span>={} )
  <span class="ruby-constant">Functions</span><span class="ruby-operator">::</span><span class="ruby-identifier">namespace_context</span> = <span class="ruby-identifier">namespaces</span>
  <span class="ruby-ivar">@namespaces</span> = <span class="ruby-identifier">namespaces</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-parse">
            
              <a name="method-i-parse"></a><b>parse</b>(path, nodeset)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-parse_source')" id="l_method-i-parse_source">show</a>
                
              </p>
              <div id="method-i-parse_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">parse</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">nodeset</span>
 <span class="ruby-comment">#puts &quot;#&quot;*40</span>
 <span class="ruby-identifier">path_stack</span> = <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>( <span class="ruby-identifier">path</span> )
 <span class="ruby-comment">#puts &quot;PARSE: #{path} =&gt; #{path_stack.inspect}&quot;</span>
 <span class="ruby-comment">#puts &quot;PARSE: nodeset = #{nodeset.inspect}&quot;</span>
 <span class="ruby-identifier">match</span>( <span class="ruby-identifier">path_stack</span>, <span class="ruby-identifier">nodeset</span> )
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-predicate">
            
              <a name="method-i-predicate"></a><b>predicate</b>(path, nodeset)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-predicate_source')" id="l_method-i-predicate_source">show</a>
                
              </p>
              <div id="method-i-predicate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">predicate</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">nodeset</span>
  <span class="ruby-identifier">path_stack</span> = <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>( <span class="ruby-identifier">path</span> )
  <span class="ruby-identifier">expr</span>( <span class="ruby-identifier">path_stack</span>, <span class="ruby-identifier">nodeset</span> )
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-variables-3D">
            
              <a name="method-i-variables-3D"></a><b>variables=</b>( vars={} )
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-variables-3D_source')" id="l_method-i-variables-3D_source">show</a>
                
              </p>
              <div id="method-i-variables-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rexml/xpath_parser.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">variables=</span>( <span class="ruby-identifier">vars</span>={} )
  <span class="ruby-constant">Functions</span><span class="ruby-operator">::</span><span class="ruby-identifier">variables</span> = <span class="ruby-identifier">vars</span>
  <span class="ruby-ivar">@variables</span> = <span class="ruby-identifier">vars</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    