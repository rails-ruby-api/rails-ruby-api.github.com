<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            CHANGELOG.md
        </h1>
        <ul class="files">
            
            <li>
                actionpack/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/a0e0b67b5afbb02d9ea9e48d71ae80b3efb8c0ac/actionpack/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2016-05-19 14:28:33 +0200</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+4.2.6+-28March+07-2C+2016-29">Rails 4.2.6 (March 07, 2016)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+4.2.5.2+-28February+26-2C+2016-29">Rails 4.2.5.2 (February 26, 2016)</h2>
<ul><li>
<p>Do not allow render with unpermitted parameter.</p>

<p>Fixes CVE-2016-2098.</p>

<p><em>Arthur Neves</em></p>
</li></ul>

<h2 id="label-Rails+4.2.5.1+-28January+25-2C+2015-29">Rails 4.2.5.1 (January 25, 2015)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+4.2.5+-28November+12-2C+2015-29">Rails 4.2.5 (November 12, 2015)</h2>
<ul><li>
<p><code>ActionController::TestCase</code> can teardown gracefully if an error
is raised early in the <code>setup</code> chain.</p>

<p><em>Yves Senn</em></p>
</li><li>
<p>Parse RSS/ATOM responses as XML, not <a
href="../../classes/HTML.html">HTML</a>.</p>

<p><em>Alexander Kaupanin</em></p>
</li><li>
<p>Fix regression in mounted engine named routes generation for app deployed
to a subdirectory. <code>relative_url_root</code> was prepended to the path
twice (e.g. "/subdir/subdir/engine_path" instead of "/subdir/engine_path")</p>

<p>Fixes #20920. Fixes #21459.</p>

<p><em>Matthew Erhard</em></p>
</li><li>
<p><code>url_for</code> does not modify its arguments when generating
polymorphic URLs.</p>

<p><em>Bernerd Schaefer</em></p>
</li><li>
<p>Update <code>ActionController::TestSession#fetch</code> to behave more like
<code>ActionDispatch::Request::Session#fetch</code> when using non-string
keys.</p>

<p><em>Jeremy Friesen</em></p>
</li></ul>

<h2 id="label-Rails+4.2.4+-28August+24-2C+2015-29">Rails 4.2.4 (August 24, 2015)</h2>
<ul><li>
<p>ActionController::TestSession now accepts a default value as well as a
block for generating a default value based off the key provided.</p>

<p>This fixes calls to session#fetch in <a
href="../../classes/ApplicationController.html">ApplicationController</a>
instances that take more two arguments or a block from raising
<code>ArgumentError: wrong number of arguments (2 for 1)</code> when
performing controller tests.</p>

<p><em>Matthew Gerrior</em></p>
</li><li>
<p>Fix to keep original header instance in <code>ActionDispatch::SSL</code></p>

<p><code>ActionDispatch::SSL</code> changes headers to <code>Hash</code>. So
some headers will be broken if there are some middlewares on
<code>ActionDispatch::SSL</code> and if it uses
<code>Rack::Utils::HeaderHash</code>.</p>

<p><em>Fumiaki Matsushima</em></p>
</li></ul>

<h2 id="label-Rails+4.2.3+-28June+25-2C+2015-29">Rails 4.2.3 (June 25, 2015)</h2>
<ul><li>
<p>Fix rake routes not showing the right format when nesting multiple routes.</p>

<p>See #18373.</p>

<p><em>Ravil Bayramgalin</em></p>
</li><li>
<p>Fix regression where a gzip file response would have a Content-type, even
when it was a 304 status code.</p>

<p>See #19271.</p>

<p><em>Kohei Suzuki</em></p>
</li><li>
<p>Fix handling of empty X_FORWARDED_HOST header in raw_host_with_port</p>

<p>Previously, an empty X_FORWARDED_HOST header would cause
Actiondispatch::Http:URL.raw_host_with_port to return nil, causing
Actiondispatch::Http:URL.host to raise a NoMethodError.</p>

<p><em>Adam Forsyth</em></p>
</li><li>
<p>Fallback to <code>ENV['RAILS_RELATIVE_URL_ROOT']</code> in
<code>url_for</code>.</p>

<p>Fixed an issue where the <code>RAILS_RELATIVE_URL_ROOT</code> environment
variable is not prepended to the path when <code>url_for</code> is called.
If <code>SCRIPT_NAME</code> (used by <a
href="../../classes/Rack.html">Rack</a>) is set, it takes precedence.</p>

<p>Fixes #5122.</p>

<p><em>Yasyf Mohamedali</em></p>
</li><li>
<p>Fix regression in functional tests. Responses should have default headers
assigned.</p>

<p>See #18423.</p>

<p><em>Jeremy Kemper</em>, <em>Yves Senn</em></p>
</li></ul>

<h2 id="label-Rails+4.2.2+-28June+16-2C+2015-29">Rails 4.2.2 (June 16, 2015)</h2>
<ul><li>
<p>No Changes *</p>
</li></ul>

<h2 id="label-Rails+4.2.1+-28March+19-2C+2015-29">Rails 4.2.1 (March 19, 2015)</h2>
<ul><li>
<p>Non-string authenticity tokens do not raise NoMethodError when decoding the
masked token.</p>

<p><em>Ville Lautanala</em></p>
</li><li>
<p>Explicitly ignored wildcard verbs when searching for HEAD routes before
fallback</p>

<p>Fixes an issue where a mounted rack app at root would intercept the HEAD
request causing an incorrect behavior during the fall back to GET requests.</p>

<p>Example: <code>ruby draw do     get &#39;/home&#39; =&gt;
&#39;test#index&#39;     mount rack_app, at: &#39;/&#39; end head
&#39;/home&#39; assert_response :success </code> In this case, a HEAD
request runs through the routes the first time and fails to match anything.
Then, it runs through the list with the fallback and matches <code>get
&#39;/home&#39;</code>. The original behavior would match the rack app in
the first pass.</p>

<p><em>Terence Sun</em></p>
</li><li>
<p>Preserve default format when generating URLs</p>

<p>Fixes an issue that would cause the format set in default_url_options to be
lost when generating URLs with fewer positional arguments than parameters
in the route definition.</p>

<p>Backport of #18627</p>

<p><em>Tekin Suleyman</em>, <em>Dominic Baggott</em></p>
</li><li>
<p><a href="../../classes/Default.html">Default</a> headers, removed in
controller actions, are no longer reapplied on the test response.</p>

<p><em>Jonas Baumann</em></p>
</li><li>
<p>Ensure <code>append_info_to_payload</code> is called even if an exception
is raised.</p>

<p>Fixes an issue where when an exception is raised in the request the
additonal payload data is not available.</p>

<p>See: * #14903 * <a
href="https://github.com/roidrage/lograge/issues/37">github.com/roidrage/lograge/issues/37</a></p>

<p><em>Dieter Komendera</em>, <em>Margus Pärt</em></p>
</li><li>
<p>Correctly rely on the response&#39;s status code to handle calls to
<code>head</code>.</p>

<p><em>Robin Dupret</em></p>
</li><li>
<p>Using <code>head</code> method returns empty response_body instead of
returning a single space " ".</p>

<p>The old behavior was added as a workaround for a bug in an early version of
Safari, where the HTTP headers are not returned correctly if the response
body has a 0-length. This is been fixed since and the workaround is no
longer necessary.</p>

<p>Fixes #18253.</p>

<p><em>Prathamesh Sonpatki</em></p>
</li><li>
<p>Fix how polymorphic routes works with objects that implement
<code>to_model</code>.</p>

<p><em>Travis Grathwell</em></p>
</li><li>
<p>Fixed handling of positional url helper arguments when <code>format:
false</code>.</p>

<p>Fixes #17819.</p>

<p><em>Andrew White</em>, <em>Tatiana Soukiassian</em></p>
</li><li>
<p>Fixed usage of optional scopes in URL helpers.</p>

<p><em>Alex Robbin</em></p>
</li></ul>

<h2 id="label-Rails+4.2.0+-28December+20-2C+2014-29">Rails 4.2.0 (December 20, 2014)</h2>
<ul><li>
<p>Add <code>ActionController::Parameters#to_unsafe_h</code> to return an
unfiltered <code>Hash</code> representation of Parameters object. This is
now a preferred way to retrieve unfiltered parameters as we will stop
inheriting <code>AC::Parameters</code> object in Rails 5.0.</p>

<p><em>Prem Sichanugrist</em></p>
</li><li>
<p>Restore handling of a bare <code>Authorization</code> header, without
<code>token=</code> prefix.</p>

<p>Fixes #17108.</p>

<p><em>Guo Xiang Tan</em></p>
</li><li>
<p>Deprecate use of string keys in URL helpers.</p>

<p>Use symbols instead. Fixes #16958.</p>

<p><em>Byron Bischoff</em>, <em>Melanie Gilman</em></p>
</li><li>
<p>Deprecate the <code>only_path</code> option on <code>*_path</code> helpers.</p>

<p>In cases where this option is set to <code>true</code>, the option is
redundant and can be safely removed; otherwise, the corresponding
<code>*_url</code> helper should be used instead.</p>

<p>Fixes #17294.</p>

<p><em>Dan Olson</em>, <em>Godfrey Chan</em></p>
</li><li>
<p>Improve Journey compliance to RFC 3986.</p>

<p>The scanner in Journey failed to recognize routes that use literals from
the sub-delims section of RFC 3986. It&#39;s now able to parse those
authorized delimiters and route as expected.</p>

<p>Fixes #17212.</p>

<p><em>Nicolas Cavigneaux</em></p>
</li><li>
<p>Deprecate implicit <a href="../../classes/Array.html">Array</a> conversion
for Response objects. It was added (using <code>#to_ary</code>) so we could
conveniently use implicit splatting:</p>

<pre><code>status, headers, body = response
</code></pre>

<p>But it also means <code>response + response</code> works and
<code>[response].flatten</code> cascades down to the <a
href="../../classes/Rack.html">Rack</a> body. Nonsense behavior. Instead,
rely on explicit conversion and splatting with <code>#to_a</code>:</p>

<pre><code>status, header, body = *response
</code></pre>

<p><em>Jeremy Kemper</em></p>
</li><li>
<p>Don&#39;t rescue <code>IPAddr::InvalidAddressError</code>.</p>

<p><code>IPAddr::InvalidAddressError</code> does not exist in Ruby 1.9.3 and
fails for JRuby in 1.9 mode.</p>

<p><em>Peter Suschlik</em></p>
</li><li>
<p>Fix bug where the router would ignore any constraints added to redirect
routes.</p>

<p>Fixes #16605.</p>

<p><em>Agis Anastasopoulos</em></p>
</li><li>
<p>Allow <code>config.action_dispatch.trusted_proxies</code> to accept an
IPAddr object.</p>

<p>Example:</p>

<pre><code># config/environments/production.rb
config.action_dispatch.trusted_proxies = IPAddr.new(&#39;4.8.15.0/16&#39;)
</code></pre>

<p><em>Sam Aarons</em></p>
</li><li>
<p>Avoid duplicating routes for HEAD requests.</p>

<p>Instead of duplicating the routes, we will first match the HEAD request to
HEAD routes. If no match is found, we will then map the HEAD request to GET
routes.</p>

<p><em>Guo Xiang Tan</em>, <em>Andrew White</em></p>
</li><li>
<p>Requests that hit <code>ActionDispatch::Static</code> can now take
advantage of gzipped assets on disk. By default a gzip asset will be served
if the client supports gzip and a compressed file is on disk.</p>

<p><em>Richard Schneeman</em></p>
</li><li>
<p><code>ActionController::Parameters</code> will stop inheriting from
<code>Hash</code> and <code>HashWithIndifferentAccess</code> in the next
major release. If you use any method that is not available on
<code>ActionController::Parameters</code> you should consider calling
<code>#to_h</code> to convert it to a <code>Hash</code> first before
calling that method.</p>

<p><em>Prem Sichanugrist</em></p>
</li><li>
<p><code>ActionController::Parameters#to_h</code> now returns a
<code>Hash</code> with unpermitted keys removed. This change is to reflect
on a security concern where some method performed on an
<code>ActionController::Parameters</code> may yield a <code>Hash</code>
object which does not maintain <code>permitted?</code> status. If you would
like to get a <code>Hash</code> with all the keys intact, duplicate and
mark it as permitted before calling <code>#to_h</code>.</p>

<pre><code>params = ActionController::Parameters.new({
  name: &#39;Senjougahara Hitagi&#39;,
  oddity: &#39;Heavy stone crab&#39;
})
params.to_h
# =&gt; {}

unsafe_params = params.dup.permit!
unsafe_params.to_h
# =&gt; {&quot;name&quot;=&gt;&quot;Senjougahara Hitagi&quot;, &quot;oddity&quot;=&gt;&quot;Heavy stone crab&quot;}

safe_params = params.permit(:name)
safe_params.to_h
# =&gt; {&quot;name&quot;=&gt;&quot;Senjougahara Hitagi&quot;}
</code></pre>

<p>This change is consider a stopgap as we cannot change the code to stop
<code>ActionController::Parameters</code> to inherit from
<code>HashWithIndifferentAccess</code> in the next minor release.</p>

<p><em>Prem Sichanugrist</em></p>
</li><li>
<p>Deprecated <code>TagAssertions</code>.</p>

<p><em>Kasper Timm Hansen</em></p>
</li><li>
<p>Use the Active Support JSON encoder for cookie jars using the
<code>:json</code> or <code>:hybrid</code> serializer. This allows you to
serialize custom Ruby objects into cookies by defining the
<code>#as_json</code> hook on such objects.</p>

<p>Fixes #16520.</p>

<p><em>Godfrey Chan</em></p>
</li><li>
<p>Add <code>config.action_dispatch.cookies_digest</code> option for setting
custom digest. The default remains the same - &#39;SHA1&#39;.</p>

<p><em>Łukasz Strzałkowski</em></p>
</li><li>
<p>Move <code>respond_with</code> (and the class-level
<code>respond_to</code>) to the <code>responders</code> gem.</p>

<p><em>José Valim</em></p>
</li><li>
<p>When your templates change, browser caches bust automatically.</p>

<p>New default: the template digest is automatically included in your ETags.
When you call <code>fresh_when @post</code>, the digest for
<code>posts/show.html.erb</code> is mixed in so future changes to the <a
href="../../classes/HTML.html">HTML</a> will blow HTTP caches for you. This
makes it easy to HTTP-cache many more of your actions.</p>

<p>If you render a different template, you can now pass the
<code>:template</code> option to include its digest instead:</p>

<pre><code>fresh_when @post, template: &#39;widgets/show&#39;
</code></pre>

<p>Pass <code>template: false</code> to skip the lookup. To turn this off
entirely, set:</p>

<pre><code>config.action_controller.etag_with_template_digest = false
</code></pre>

<p><em>Jeremy Kemper</em></p>
</li><li>
<p>Remove deprecated
<code>AbstractController::Helpers::ClassMethods::MissingHelperError</code>
in favor of <code>AbstractController::Helpers::MissingHelperError</code>.</p>

<p><em>Yves Senn</em></p>
</li><li>
<p>Fix <code>assert_template</code> not being able to assert that no files
were rendered.</p>

<p><em>Guo Xiang Tan</em></p>
</li><li>
<p>Extract source code for the entire exception stack trace for better
debugging and diagnosis.</p>

<p><em>Ryan Dao</em></p>
</li><li>
<p>Allows ActionDispatch::Request::LOCALHOST to match any IPv4 127.0.0.0/8
loopback address.</p>

<p><em>Earl St Sauver</em>, <em>Sven Riedel</em></p>
</li><li>
<p>Preserve original path in <code>ShowExceptions</code> middleware by
stashing it as <code>env["action_dispatch.original_path"]</code></p>

<p><code>ActionDispatch::ShowExceptions</code> overwrites
<code>PATH_INFO</code> with the status code for the exception defined in
<code>ExceptionWrapper</code>, so the path the user was visiting when an
exception occurred was not previously available to any custom
exceptions_app. The original <code>PATH_INFO</code> is now stashed in
<code>env["action_dispatch.original_path"]</code>.</p>

<p><em>Grey Baker</em></p>
</li><li>
<p>Use <code>String#bytesize</code> instead of <code>String#size</code> when
checking for cookie overflow.</p>

<p><em>Agis Anastasopoulos</em></p>
</li><li>
<p><code>render nothing: true</code> or rendering a <code>nil</code> body no
longer add a single space to the response body.</p>

<p>The old behavior was added as a workaround for a bug in an early version of
Safari, where the HTTP headers are not returned correctly if the response
body has a 0-length. This is been fixed since and the workaround is no
longer necessary.</p>

<p>Use <code>render body: &#39; &#39;</code> if the old behavior is desired.</p>

<p>See #14883 for details.</p>

<p><em>Godfrey Chan</em></p>
</li><li>
<p>Prepend a JS comment to JSONP callbacks. Addresses CVE-2014-4671 ("Rosetta
Flash").</p>

<p><em>Greg Campbell</em></p>
</li><li>
<p>Because <a href="../../classes/URI.html">URI</a> paths may contain non
US-ASCII characters we need to force the encoding of any unescaped URIs to
UTF-8 if they are US-ASCII. This essentially replicates the functionality
of the monkey patch to <a
href="../../classes/URI.html#method-c-parser">URI.parser</a>.unescape in
active_support/core_ext/uri.rb.</p>

<p>Fixes #16104.</p>

<p><em>Karl Entwistle</em></p>
</li><li>
<p>Generate shallow paths for all children of shallow resources.</p>

<p>Fixes #15783.</p>

<p><em>Seb Jacobs</em></p>
</li><li>
<p>JSONP responses are now rendered with the <code>text/javascript</code>
content type when rendering through a <code>respond_to</code> block.</p>

<p>Fixes #15081.</p>

<p><em>Lucas Mazza</em></p>
</li><li>
<p>Add <code>config.action_controller.always_permitted_parameters</code> to
configure which parameters are permitted globally. The default value of
this configuration is <code>[&#39;controller&#39;,
&#39;action&#39;]</code>.</p>

<p><em>Gary S. Weaver</em>, <em>Rafael Chacon</em></p>
</li><li>
<p>Fix <a href="'PATH_INFO'">env</a> missing leading slash when a rack app
mounted at &#39;/&#39;.</p>

<p>Fixes #15511.</p>

<p><em>Larry Lv</em></p>
</li><li>
<p><a
href="../../classes/ActionController/Parameters.html#method-i-require">ActionController::Parameters#require</a>
now accepts <code>false</code> values.</p>

<p>Fixes #15685.</p>

<p><em>Sergio Romano</em></p>
</li><li>
<p>With authorization header <code>Authorization: Token token=</code>,
<code>authenticate</code> now recognize token as nil, instead of "token".</p>

<p>Fixes #14846.</p>

<p><em>Larry Lv</em></p>
</li><li>
<p>Ensure the controller is always notified as soon as the client disconnects
during live streaming, even when the controller is blocked on a write.</p>

<p><em>Nicholas Jakobsen</em>, <em>Matthew Draper</em></p>
</li><li>
<p>Routes specifying &#39;to:&#39; must be a string that contains a "#" or a
rack application. Use of a symbol should be replaced with <code>action:
symbol</code>. Use of a string without a "#" should be replaced with
<code>controller: string</code>.</p>

<p><em>Aaron Patterson</em></p>
</li><li>
<p>Fix URL generation with <code>:trailing_slash</code> such that it does not
add a trailing slash after <code>.:format</code></p>

<p><em>Dan Langevin</em></p>
</li><li>
<p><a href="../../classes/Build.html">Build</a> full <a
href="../../classes/URI.html">URI</a> as string when processing path in
integration tests for performance reasons. <a
href="../../classes/One.html">One</a> consequence of this is that the
leading slash is now required in integration test <code>process</code>
helpers, whereas previously it could be omitted. The fact that this worked
was a unintended consequence of the implementation and was never an
intentional feature.</p>

<p><em>Guo Xiang Tan</em></p>
</li><li>
<p>Fix <code>&#39;Stack level too deep&#39;</code> when rendering <code>head
:ok</code> in an action method called &#39;status&#39; in a controller.</p>

<p>Fixes #13905.</p>

<p><em>Christiaan Van den Poel</em></p>
</li><li>
<p>Add MKCALENDAR HTTP method (RFC 4791).</p>

<p><em>Sergey Karpesh</em></p>
</li><li>
<p>Instrument fragment cache metrics.</p>

<p>Adds <code>:controller</code>: and <code>:action</code> keys to the
instrumentation payload for the <code>*_fragment.action_controller</code>
notifications. This allows tracking e.g. the fragment cache hit rates for
each controller action.</p>

<p><em>Daniel Schierbeck</em></p>
</li><li>
<p>Always use the provided port if the protocol is relative.</p>

<p>Fixes #15043.</p>

<p><em>Guilherme Cavalcanti</em>, <em>Andrew White</em></p>
</li><li>
<p>Moved <code>params[request_forgery_protection_token]</code> into its own
method and improved tests.</p>

<p>Fixes #11316.</p>

<p><em>Tom Kadwill</em></p>
</li><li>
<p>Added verification of route constraints given as a Proc or an object
responding to <code>:matches?</code>. Previously, when given an
non-complying object, it would just silently fail to enforce the
constraint. It will now raise an <code>ArgumentError</code> when setting up
the routes.</p>

<p><em>Xavier Defrang</em></p>
</li><li>
<p>Properly treat the entire IPv6 <a href="../../classes/User.html">User</a>
Local <a href="../../classes/Address.html">Address</a> space as private for
purposes of remote IP detection. Also handle uppercase private IPv6
addresses.</p>

<p>Fixes #12638.</p>

<p><em>Caleb Spare</em></p>
</li><li>
<p>Fixed an issue with migrating legacy json cookies.</p>

<p>Previously, the <code>VerifyAndUpgradeLegacySignedMessage</code> assumes
all incoming cookies are marshal-encoded. This is not the case when
<code>secret_token</code> is used in conjunction with the
<code>:json</code> or <code>:hybrid</code> serializer.</p>

<p>In those case, when upgrading to use <code>secret_key_base</code>, this
would cause a <code>TypeError: incompatible marshal file format</code> and
a 500 error for the user.</p>

<p>Fixes #14774.</p>

<p><em>Godfrey Chan</em></p>
</li><li>
<p>Make URL escaping more consistent:</p>
<ol><li>
<p>Escape &#39;%&#39; characters in URLs - only unescaped data should be
passed to URL helpers</p>
</li><li>
<p>Add an <code>escape_segment</code> helper to <code>Router::Utils</code>
that escapes &#39;/&#39; characters</p>
</li><li>
<p>Use <code>escape_segment</code> rather than <code>escape_fragment</code> in
optimized URL generation</p>
</li><li>
<p>Use <code>escape_segment</code> rather than <code>escape_path</code> in URL
generation</p>
</li></ol>

<p>For point 4 there are two exceptions. Firstly, when a route uses wildcard
segments (e.g. <code>*foo</code>) then we use <code>escape_path</code> as
the value may contain &#39;/&#39; characters. This means that wildcard
routes can&#39;t be optimized. Secondly, if a <code>:controller</code>
segment is used in the path then this uses <code>escape_path</code> as the
controller may be namespaced.</p>

<p>Fixes #14629, #14636 and #14070.</p>

<p><em>Andrew White</em>, <em>Edho Arief</em></p>
</li><li>
<p>Add alias <code>ActionDispatch::Http::UploadedFile#to_io</code> to
<code>ActionDispatch::Http::UploadedFile#tempfile</code>.</p>

<p><em>Tim Linquist</em></p>
</li><li>
<p>Returns null type format when format is not know and controller is using
<code>any</code> format block.</p>

<p>Fixes #14462.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Improve routing error page with fuzzy matching search.</p>

<p><em>Winston</em></p>
</li><li>
<p>Only make deeply nested routes shallow when parent is shallow.</p>

<p>Fixes #14684.</p>

<p><em>Andrew White</em>, <em>James Coglan</em></p>
</li><li>
<p>Append link to bad code to backtrace when exception is
<code>SyntaxError</code>.</p>

<p><em>Boris Kuznetsov</em></p>
</li><li>
<p>Swapped the parameters of assert_equal in <code>assert_select</code> so
that the proper values were printed correctly.</p>

<p>Fixes #14422.</p>

<p><em>Vishal Lal</em></p>
</li><li>
<p>The method <code>shallow?</code> returns false if the parent resource is a
singleton so we need to check if we&#39;re not inside a nested scope before
copying the :path and :as options to their shallow equivalents.</p>

<p>Fixes #14388.</p>

<p><em>Andrew White</em></p>
</li><li>
<p>Make logging of CSRF failures optional (but on by default) with the
<code>log_warning_on_csrf_failure</code> configuration setting in
<code>ActionController::RequestForgeryProtection</code>.</p>

<p><em>John Barton</em></p>
</li><li>
<p>Fix URL generation in controller tests with request-dependent
<code>default_url_options</code> methods.</p>

<p><em>Tony Wooster</em></p>
</li></ul>

<p>Please check <a
href="https://github.com/rails/rails/blob/4-1-stable/actionpack/CHANGELOG.md">4-1-stable</a>
for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
              </div>

    </div>
  </body>
</html>