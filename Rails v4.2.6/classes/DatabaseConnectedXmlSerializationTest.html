<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>DatabaseConnectedXmlSerializationTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            DatabaseConnectedXmlSerializationTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activerecord/test/cases/xml_serialization_test_rb.html">activerecord/test/cases/xml_serialization_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_array_to_xml_including_belongs_to_association">test_array_to_xml_including_belongs_to_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_array_to_xml_including_has_many_association">test_array_to_xml_including_has_many_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_array_to_xml_including_has_one_association">test_array_to_xml_including_has_one_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_array_to_xml_including_methods">test_array_to_xml_including_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dual_arity_procs_are_called_on_object">test_dual_arity_procs_are_called_on_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_except_option">test_except_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_uses_association_name">test_include_uses_association_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_included_associations_should_skip_types">test_included_associations_should_skip_types</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_including_association_with_options">test_including_association_with_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_including_belongs_to_association">test_including_belongs_to_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_including_has_many_association">test_including_has_many_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_including_multiple_associations">test_including_multiple_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_methods_are_called_on_object">test_methods_are_called_on_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_modules">test_modules</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_passing_hash_shouldnt_reuse_builder">test_passing_hash_shouldnt_reuse_builder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_procs_are_called_on_object">test_procs_are_called_on_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_procs_on_included_associations_are_called">test_procs_on_included_associations_are_called</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value">test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_include_empty_has_many_as_empty_array">test_should_include_empty_has_many_as_empty_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_not_call_methods_on_associations_that_dont_respond">test_should_not_call_methods_on_associations_that_dont_respond</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_produce_xml_for_methods_returning_array">test_should_produce_xml_for_methods_returning_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_support_aliased_attributes">test_should_support_aliased_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_xml">test_to_xml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_top_level_procs_arent_applied_to_associations">test_top_level_procs_arent_applied_to_associations</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-test_array_to_xml_including_belongs_to_association">
            
              <b>test_array_to_xml_including_belongs_to_association</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_array_to_xml_including_belongs_to_association" name="method-i-test_array_to_xml_including_belongs_to_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_array_to_xml_including_belongs_to_association_source')" id="l_method-i-test_array_to_xml_including_belongs_to_association_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L441" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_array_to_xml_including_belongs_to_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 441</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_array_to_xml_including_belongs_to_association</span>
  <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_client</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-value">:another_client</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:firm</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>).<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:another_client</span>).<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_array_to_xml_including_has_many_association">
            
              <b>test_array_to_xml_including_has_many_association</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_array_to_xml_including_has_many_association" name="method-i-test_array_to_xml_including_has_many_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_array_to_xml_including_has_many_association_source')" id="l_method-i-test_array_to_xml_including_has_many_association_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L424" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_array_to_xml_including_has_many_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 424</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_array_to_xml_including_has_many_association</span>
  <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:second</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:replies</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;replies type=&quot;array&quot;&gt;&lt;reply&gt;)</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_array_to_xml_including_has_one_association">
            
              <b>test_array_to_xml_including_has_one_association</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_array_to_xml_including_has_one_association" name="method-i-test_array_to_xml_including_has_one_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_array_to_xml_including_has_one_association_source')" id="l_method-i-test_array_to_xml_including_has_one_association_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L435" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_array_to_xml_including_has_one_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 435</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_array_to_xml_including_has_one_association</span>
  <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-value">:rails_core</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:account</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">account</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-value">:rails_core</span>).<span class="ruby-identifier">account</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_array_to_xml_including_methods">
            
              <b>test_array_to_xml_including_methods</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_array_to_xml_including_methods" name="method-i-test_array_to_xml_including_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_array_to_xml_including_methods_source')" id="l_method-i-test_array_to_xml_including_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L429" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_array_to_xml_including_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 429</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_array_to_xml_including_methods</span>
  <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:second</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:methods</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value">:topic_id</span> ])
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%Q(&lt;topic-id type=&quot;integer&quot;&gt;#{topics(:first).topic_id}&lt;/topic-id&gt;)</span>), <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%Q(&lt;topic-id type=&quot;integer&quot;&gt;#{topics(:second).topic_id}&lt;/topic-id&gt;)</span>), <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dual_arity_procs_are_called_on_object">
            
              <b>test_dual_arity_procs_are_called_on_object</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_dual_arity_procs_are_called_on_object" name="method-i-test_dual_arity_procs_are_called_on_object" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dual_arity_procs_are_called_on_object_source')" id="l_method-i-test_dual_arity_procs_are_called_on_object_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L360" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dual_arity_procs_are_called_on_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 360</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dual_arity_procs_are_called_on_object</span>
  <span class="ruby-identifier">proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">options</span>, <span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:builder</span>].<span class="ruby-identifier">tag!</span>(<span class="ruby-string">&#39;name-reverse&#39;</span>, <span class="ruby-identifier">record</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">reverse</span>) }
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:procs</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">proc</span> ])
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;name-reverse&gt;divaD&lt;/name-reverse&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_except_option">
            
              <b>test_except_option</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_except_option" name="method-i-test_except_option" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_except_option_source')" id="l_method-i-test_except_option_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L264" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_except_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_except_option</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">:title</span>, <span class="ruby-value">:replies_count</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&lt;topic&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-number">7</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;title&gt;The First Topic&lt;/title&gt;)</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;author-name&gt;David&lt;/author-name&gt;)</span>)

  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">:title</span>, <span class="ruby-value">:author_name</span>, <span class="ruby-value">:replies_count</span>])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;title&gt;The First Topic&lt;/title&gt;)</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;author-name&gt;David&lt;/author-name&gt;)</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_uses_association_name">
            
              <b>test_include_uses_association_name</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_include_uses_association_name" name="method-i-test_include_uses_association_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_uses_association_name_source')" id="l_method-i-test_include_uses_association_name_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L295" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_include_uses_association_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_uses_association_name</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span> <span class="ruby-value">:include=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:hello_posts</span>, <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;hello-posts type=&quot;array&quot;&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;hello-post type=&quot;Post&quot;&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;hello-post type=&quot;StiPost&quot;&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_included_associations_should_skip_types">
            
              <b>test_included_associations_should_skip_types</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_included_associations_should_skip_types" name="method-i-test_included_associations_should_skip_types" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_included_associations_should_skip_types_source')" id="l_method-i-test_included_associations_should_skip_types_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L302" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_included_associations_should_skip_types_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_included_associations_should_skip_types</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span> <span class="ruby-value">:include=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:hello_posts</span>, <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_types</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;hello-posts&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;hello-post&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;hello-post&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_including_association_with_options">
            
              <b>test_including_association_with_options</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_including_association_with_options" name="method-i-test_including_association_with_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_including_association_with_options_source')" id="l_method-i-test_including_association_with_options_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L331" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_including_association_with_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 331</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_including_association_with_options</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">to_xml</span>(
    <span class="ruby-value">:indent</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
    <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:clients</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:name</span> } }
  )

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&lt;firm&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-number">6</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;client&gt;&lt;name&gt;Summit&lt;/name&gt;&lt;/client&gt;)</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;clients type=&quot;array&quot;&gt;&lt;client&gt;)</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_including_belongs_to_association">
            
              <b>test_including_belongs_to_association</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_including_belongs_to_association" name="method-i-test_including_belongs_to_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_including_belongs_to_association_source')" id="l_method-i-test_including_belongs_to_association_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L316" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_including_belongs_to_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 316</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_including_belongs_to_association</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:firm</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;&lt;firm&gt;&quot;</span>)

  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:second_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:firm</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;&lt;firm&gt;&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_including_has_many_association">
            
              <b>test_including_has_many_association</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_including_has_many_association" name="method-i-test_including_has_many_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_including_has_many_association_source')" id="l_method-i-test_including_has_many_association_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L309" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_including_has_many_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_including_has_many_association</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:replies</span>, <span class="ruby-value">:except</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:replies_count</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&lt;topic&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-number">7</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;replies type=&quot;array&quot;&gt;&lt;reply&gt;)</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;title&gt;The Second Topic of the day&lt;/title&gt;)</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_including_multiple_associations">
            
              <b>test_including_multiple_associations</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_including_multiple_associations" name="method-i-test_including_multiple_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_including_multiple_associations_source')" id="l_method-i-test_including_multiple_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L324" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_including_multiple_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 324</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_including_multiple_associations</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-value">:first_firm</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>, <span class="ruby-value">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value">:clients</span>, <span class="ruby-value">:account</span> ])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&lt;firm&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-number">6</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;account&gt;)</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">%Q(&lt;clients type=&quot;array&quot;&gt;&lt;client&gt;)</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_methods_are_called_on_object">
            
              <b>test_methods_are_called_on_object</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_methods_are_called_on_object" name="method-i-test_methods_are_called_on_object" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_methods_are_called_on_object_source')" id="l_method-i-test_methods_are_called_on_object_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L342" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_methods_are_called_on_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_methods_are_called_on_object</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span> <span class="ruby-value">:methods</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:label</span>, <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;label&gt;.*&lt;/label&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_modules">
            
              <b>test_modules</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_modules" name="method-i-test_modules" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>to_xml used to mess with the hash the user provided which caused the
builder to be reused.  This meant the document kept getting appended to.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_modules_source')" id="l_method-i-test_modules_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L279" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_modules_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_modules</span>
  <span class="ruby-identifier">projects</span> = <span class="ruby-constant">MyApplication</span><span class="ruby-operator">::</span><span class="ruby-constant">Business</span><span class="ruby-operator">::</span><span class="ruby-constant">Project</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">projects</span>.<span class="ruby-identifier">to_xml</span>
  <span class="ruby-identifier">root</span> = <span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>.<span class="ruby-identifier">pluralize</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">&#39;/&#39;</span>,<span class="ruby-string">&#39;_&#39;</span>).<span class="ruby-identifier">dasherize</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-node">&quot;&lt;#{root} type=\&quot;array\&quot;&gt;&quot;</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-node">&quot;&lt;/#{root}&gt;&quot;</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_passing_hash_shouldnt_reuse_builder">
            
              <b>test_passing_hash_shouldnt_reuse_builder</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_passing_hash_shouldnt_reuse_builder" name="method-i-test_passing_hash_shouldnt_reuse_builder" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_passing_hash_shouldnt_reuse_builder_source')" id="l_method-i-test_passing_hash_shouldnt_reuse_builder_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L287" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_passing_hash_shouldnt_reuse_builder_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_passing_hash_shouldnt_reuse_builder</span>
  <span class="ruby-identifier">options</span> = {<span class="ruby-value">:include=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:posts</span>}
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">first_xml_size</span> = <span class="ruby-identifier">david</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">second_xml_size</span> = <span class="ruby-identifier">david</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">first_xml_size</span>, <span class="ruby-identifier">second_xml_size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_procs_are_called_on_object">
            
              <b>test_procs_are_called_on_object</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_procs_are_called_on_object" name="method-i-test_procs_are_called_on_object" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_procs_are_called_on_object_source')" id="l_method-i-test_procs_are_called_on_object_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L354" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_procs_are_called_on_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 354</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_procs_are_called_on_object</span>
  <span class="ruby-identifier">proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">options</span><span class="ruby-operator">|</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:builder</span>].<span class="ruby-identifier">tag!</span>(<span class="ruby-string">&#39;nationality&#39;</span>, <span class="ruby-string">&#39;Danish&#39;</span>) }
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:procs</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">proc</span> ])
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{&lt;nationality&gt;Danish&lt;/nationality&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_procs_on_included_associations_are_called">
            
              <b>test_procs_on_included_associations_are_called</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_procs_on_included_associations_are_called" name="method-i-test_procs_on_included_associations_are_called" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_procs_on_included_associations_are_called_source')" id="l_method-i-test_procs_on_included_associations_are_called_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L374" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_procs_on_included_associations_are_called_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 374</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_procs_on_included_associations_are_called</span>
  <span class="ruby-identifier">posts_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">options</span><span class="ruby-operator">|</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:builder</span>].<span class="ruby-identifier">tag!</span>(<span class="ruby-string">&#39;copyright&#39;</span>, <span class="ruby-string">&#39;DHH&#39;</span>) }
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span>(
    <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span>,
    <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> {
      <span class="ruby-value">:posts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:procs</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">posts_proc</span> ] }
    }
  )

  <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp">%r{^  &lt;copyright&gt;DHH&lt;/copyright&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^ {6}&lt;copyright&gt;DHH&lt;/copyright&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value">
            
              <b>test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value" name="method-i-test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value_source')" id="l_method-i-test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L395" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_has_many_array_elements_should_include_type_when_different_from_guessed_value</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span> <span class="ruby-value">:include=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:posts_with_comments</span>, <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">xml</span>)
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^  &lt;posts-with-comments type=&quot;array&quot;&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^    &lt;posts-with-comment type=&quot;Post&quot;&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^    &lt;posts-with-comment type=&quot;StiPost&quot;&gt;}</span>, <span class="ruby-identifier">xml</span>

  <span class="ruby-identifier">types</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">xml</span>)[<span class="ruby-string">&#39;author&#39;</span>][<span class="ruby-string">&#39;posts_with_comments&#39;</span>].<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>[<span class="ruby-string">&#39;type&#39;</span>] }
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">types</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;SpecialPost&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">types</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;Post&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">types</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;StiPost&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_include_empty_has_many_as_empty_array">
            
              <b>test_should_include_empty_has_many_as_empty_array</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_should_include_empty_has_many_as_empty_array" name="method-i-test_should_include_empty_has_many_as_empty_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_include_empty_has_many_as_empty_array_source')" id="l_method-i-test_should_include_empty_has_many_as_empty_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L387" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_include_empty_has_many_as_empty_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 387</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_include_empty_has_many_as_empty_array</span>
  <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">delete_all</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span> <span class="ruby-value">:include=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:posts</span>, <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span>

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">xml</span>)[<span class="ruby-string">&#39;author&#39;</span>][<span class="ruby-string">&#39;posts&#39;</span>]
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^  &lt;posts type=&quot;array&quot;/&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_not_call_methods_on_associations_that_dont_respond">
            
              <b>test_should_not_call_methods_on_associations_that_dont_respond</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_should_not_call_methods_on_associations_that_dont_respond" name="method-i-test_should_not_call_methods_on_associations_that_dont_respond" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_not_call_methods_on_associations_that_dont_respond_source')" id="l_method-i-test_should_not_call_methods_on_associations_that_dont_respond_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L347" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_not_call_methods_on_associations_that_dont_respond_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 347</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_not_call_methods_on_associations_that_dont_respond</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span> <span class="ruby-value">:include=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:hello_posts</span>, <span class="ruby-value">:methods</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:label</span>, <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">hello_posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:label</span>)
  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^  &lt;label&gt;.*&lt;/label&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp">%r{^      &lt;label&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_produce_xml_for_methods_returning_array">
            
              <b>test_should_produce_xml_for_methods_returning_array</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_should_produce_xml_for_methods_returning_array" name="method-i-test_should_produce_xml_for_methods_returning_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_produce_xml_for_methods_returning_array_source')" id="l_method-i-test_should_produce_xml_for_methods_returning_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L409" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_produce_xml_for_methods_returning_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_produce_xml_for_methods_returning_array</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:methods</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:social</span>)
  <span class="ruby-identifier">array</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">xml</span>)[<span class="ruby-string">&#39;author&#39;</span>][<span class="ruby-string">&#39;social&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">array</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">array</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&#39;twitter&#39;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">array</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&#39;github&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_support_aliased_attributes">
            
              <b>test_should_support_aliased_attributes</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_should_support_aliased_attributes" name="method-i-test_should_support_aliased_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_support_aliased_attributes_source')" id="l_method-i-test_should_support_aliased_attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L417" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_support_aliased_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_support_aliased_attributes</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;name as firstname&quot;</span>).<span class="ruby-identifier">to_xml</span>
  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">author</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%Q(&lt;firstname&gt;#{author.name}&lt;/firstname&gt;)</span>), <span class="ruby-identifier">xml</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_xml">
            
              <b>test_to_xml</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_to_xml" name="method-i-test_to_xml" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_xml_source')" id="l_method-i-test_to_xml_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L225" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_to_xml_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_xml</span>
  <span class="ruby-identifier">xml</span> = <span class="ruby-constant">REXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>))
  <span class="ruby-identifier">bonus_time_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">bonus_time</span>.<span class="ruby-identifier">xmlschema</span>
  <span class="ruby-identifier">written_on_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">xmlschema</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;topic&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The First Topic&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//title&quot;</span>].<span class="ruby-identifier">text</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;David&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//author-name&quot;</span>].<span class="ruby-identifier">text</span>
  <span class="ruby-identifier">assert_match</span> <span class="ruby-string">&quot;Have a nice day&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//content&quot;</span>].<span class="ruby-identifier">text</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;1&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//id&quot;</span>].<span class="ruby-identifier">text</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;integer&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;type&#39;</span>]

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;1&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//replies-count&quot;</span>].<span class="ruby-identifier">text</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;integer&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//replies-count&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;type&#39;</span>]

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">written_on_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//written-on&quot;</span>].<span class="ruby-identifier">text</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;dateTime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//written-on&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;type&#39;</span>]

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david@loudthinking.com&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//author-email-address&quot;</span>].<span class="ruby-identifier">text</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">text</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;integer&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;type&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;true&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;nil&#39;</span>]

  <span class="ruby-comment"># Oracle enhanced adapter allows to define Date attributes in model class (see topic.rb)</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;2004-04-15&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//last-read&quot;</span>].<span class="ruby-identifier">text</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;date&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//last-read&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;type&#39;</span>]

  <span class="ruby-comment"># Oracle and DB2 don&#39;t have true boolean or time-only fields</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-value">:OracleAdapter</span>, <span class="ruby-value">:DB2Adapter</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;false&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//approved&quot;</span>].<span class="ruby-identifier">text</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;boolean&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//approved&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;type&#39;</span>]

    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bonus_time_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//bonus-time&quot;</span>].<span class="ruby-identifier">text</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;dateTime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-string">&quot;//bonus-time&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;type&#39;</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_top_level_procs_arent_applied_to_associations">
            
              <b>test_top_level_procs_arent_applied_to_associations</b>()
            
            <a href="../classes/DatabaseConnectedXmlSerializationTest.html#method-i-test_top_level_procs_arent_applied_to_associations" name="method-i-test_top_level_procs_arent_applied_to_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_top_level_procs_arent_applied_to_associations_source')" id="l_method-i-test_top_level_procs_arent_applied_to_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/29cbfa2f33b2d0e2d16a203941998687af7831db/activerecord/test/cases/xml_serialization_test.rb#L366" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_top_level_procs_arent_applied_to_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/xml_serialization_test.rb, line 366</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_top_level_procs_arent_applied_to_associations</span>
  <span class="ruby-identifier">author_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">options</span><span class="ruby-operator">|</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:builder</span>].<span class="ruby-identifier">tag!</span>(<span class="ruby-string">&#39;nationality&#39;</span>, <span class="ruby-string">&#39;Danish&#39;</span>) }
  <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-value">:procs</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">author_proc</span> ], <span class="ruby-value">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:posts</span>, <span class="ruby-value">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span>)

  <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp">%r{^  &lt;nationality&gt;Danish&lt;/nationality&gt;}</span>, <span class="ruby-identifier">xml</span>
  <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp">%r{^ {6}&lt;nationality&gt;Danish&lt;/nationality&gt;}</span>, <span class="ruby-identifier">xml</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    