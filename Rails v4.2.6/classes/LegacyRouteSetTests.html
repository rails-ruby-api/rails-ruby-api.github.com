<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>LegacyRouteSetTests</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            LegacyRouteSetTests 
            
                <span class="parent">&lt; 
                    
                    <a href="ActiveSupport/TestCase.html">ActiveSupport::TestCase</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/actionpack/test/controller/routing_test_rb.html">actionpack/test/controller/routing_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-matches-3F">matches?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup">setup</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setup_for_named_route">setup_for_named_route</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setup_request_method_routes_for">setup_request_method_routes_for</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_action_expiry">test_action_expiry</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_backwards">test_backwards</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_basic_named_route">test_basic_named_route</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_both_requirement_and_optional">test_both_requirement_and_optional</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_changing_controller">test_changing_controller</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_class_and_lambda_constraints">test_class_and_lambda_constraints</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dash_with_custom_regexp">test_dash_with_custom_regexp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_setup">test_default_setup</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_draw_with_block_arity_one_raises">test_draw_with_block_arity_one_raises</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_path_allowed">test_dynamic_path_allowed</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_recall_paths_allowed">test_dynamic_recall_paths_allowed</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_string_match">test_empty_string_match</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_failed_constraints_raises_exception_with_violated_constraints">test_failed_constraints_raises_exception_with_violated_constraints</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_id_with_dash">test_id_with_dash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_ignores_leading_slash">test_ignores_leading_slash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_lambda_constraints">test_lambda_constraints</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_root_url_generation_with_controller_and_action">test_named_root_url_generation_with_controller_and_action</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_method">test_named_route_method</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_root">test_named_route_root</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_root_with_hash">test_named_route_root_with_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_root_with_trailing_slash">test_named_route_root_with_trailing_slash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_root_without_hash">test_named_route_root_without_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_with_blank_path_prefix">test_named_route_with_blank_path_prefix</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_with_default">test_named_route_with_default</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_with_nested_controller">test_named_route_with_nested_controller</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_with_option">test_named_route_with_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_with_path_prefix">test_named_route_with_path_prefix</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_with_regexps">test_named_route_with_regexps</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_route_without_hash">test_named_route_without_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_routes_array">test_named_routes_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_nil_defaults">test_nil_defaults</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_non_controllers_cannot_be_matched">test_non_controllers_cannot_be_matched</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_non_greedy_glob_regexp">test_non_greedy_glob_regexp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_optimised_named_route_with_host">test_optimised_named_route_with_host</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_optional_star_paths_are_greedy">test_optional_star_paths_are_greedy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_optional_star_paths_are_greedy_but_not_too_much">test_optional_star_paths_are_greedy_but_not_too_much</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_paths_escaped">test_paths_escaped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_paths_slashes_unescaped_with_ordered_parameters">test_paths_slashes_unescaped_with_ordered_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_pre_dash">test_pre_dash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_pre_dash_with_custom_regexp">test_pre_dash_with_custom_regexp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_recognize_array_of_methods">test_recognize_array_of_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_regexp_precidence">test_regexp_precidence</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_requirement_should_prevent_optional_id">test_requirement_should_prevent_optional_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_root_url_generation_with_controller_and_action">test_root_url_generation_with_controller_and_action</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_root_without_path_raises_argument_error">test_root_without_path_raises_argument_error</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_route_with_colon_first">test_route_with_colon_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_route_with_fixnum_default">test_route_with_fixnum_default</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_route_with_regexp_and_captures_for_controller">test_route_with_regexp_and_captures_for_controller</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_route_with_regexp_and_dot">test_route_with_regexp_and_dot</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_route_with_regexp_for_controller">test_route_with_regexp_for_controller</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_route_with_text_default">test_route_with_text_default</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_routes_changed_correctly_after_clear">test_routes_changed_correctly_after_clear</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_lambda">test_scoped_lambda</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_lambda_with_get_lambda">test_scoped_lambda_with_get_lambda</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_set_to_nil_forgets">test_set_to_nil_forgets</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_list_options_diff_when_routing_constraints_dont_match">test_should_list_options_diff_when_routing_constraints_dont_match</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_specific_controller_action_failure">test_specific_controller_action_failure</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_star_paths_are_greedy">test_star_paths_are_greedy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_star_paths_are_greedy_but_not_too_much">test_star_paths_are_greedy_but_not_too_much</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_subpath_generated">test_subpath_generated</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_subpath_recognized">test_subpath_recognized</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_symbols_with_dashes">test_symbols_with_dashes</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="RoutingTestHelpers.html">
              RoutingTestHelpers
            </a>
          
        </li>
      
        <li>
          
            <a href="ActionDispatch/RoutingVerbs.html">
              ActionDispatch::RoutingVerbs
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>controller</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>routes</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>rs</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-matches-3F">
            
              <b>matches?</b>(request)
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-matches-3F" name="method-i-matches-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-matches-3F_source')" id="l_method-i-matches-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L215" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-matches-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 215</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">matches?</span> <span class="ruby-identifier">request</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">subdomain</span>.<span class="ruby-identifier">present?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">subdomain</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&#39;clients&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <b>setup</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-setup" name="method-i-setup" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L82" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>
  <span class="ruby-ivar">@rs</span> = <span class="ruby-identifier">make_set</span>
  <span class="ruby-ivar">@response</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup_for_named_route">
            
              <b>setup_for_named_route</b>(options = {})
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-setup_for_named_route" name="method-i-setup_for_named_route" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_for_named_route_source')" id="l_method-i-setup_for_named_route_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L456" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-setup_for_named_route_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 456</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_for_named_route</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">MockController</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">rs</span>.<span class="ruby-identifier">url_helpers</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup_request_method_routes_for">
            
              <b>setup_request_method_routes_for</b>(method)
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-setup_request_method_routes_for" name="method-i-setup_request_method_routes_for" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_request_method_routes_for_source')" id="l_method-i-setup_request_method_routes_for_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L752" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-setup_request_method_routes_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 752</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_request_method_routes_for</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">match</span> <span class="ruby-string">&#39;/match&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;books##{method}&quot;</span>, <span class="ruby-value">:via</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">to_sym</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_action_expiry">
            
              <b>test_action_expiry</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_action_expiry" name="method-i-test_action_expiry" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_action_expiry_source')" id="l_method-i-test_action_expiry_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L642" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_action_expiry_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 642</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_action_expiry</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller(/:action(/:id))&#39;</span> }
  <span class="ruby-identifier">get</span> <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://test.host/content/show&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/content&#39;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_backwards">
            
              <b>test_backwards</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_backwards" name="method-i-test_backwards" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_backwards_source')" id="l_method-i-test_backwards_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L596" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_backwards_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 596</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_backwards</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page/:id(/:action)&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;pages#show&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller(/:action(/:id))&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">get</span> <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://test.host/pages/show&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page/20&#39;</span>,   <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({ <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">20</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page/20&#39;</span>,   <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;pages&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">20</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/boo&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;pages&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;boo&#39;</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_basic_named_route">
            
              <b>test_basic_named_route</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_basic_named_route" name="method-i-test_basic_named_route" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_basic_named_route_source')" id="l_method-i-test_basic_named_route_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L392" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_basic_named_route_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_basic_named_route</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">root</span> <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#list&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;home&#39;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:home_url</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_both_requirement_and_optional">
            
              <b>test_both_requirement_and_optional</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_both_requirement_and_optional" name="method-i-test_both_requirement_and_optional" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_both_requirement_and_optional_source')" id="l_method-i-test_both_requirement_and_optional_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L660" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_both_requirement_and_optional_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 660</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_both_requirement_and_optional</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;test(/:year)&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post#show&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;blog&#39;</span>,
      <span class="ruby-value">:defaults</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span> },
      <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d{4}/</span> }
    )
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/test&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/test&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span> })

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/test&quot;</span>, <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:blog_url</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_changing_controller">
            
              <b>test_changing_controller</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_changing_controller" name="method-i-test_changing_controller" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_changing_controller_source')" id="l_method-i-test_changing_controller_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L523" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_changing_controller_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 523</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_changing_controller</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span> }

  <span class="ruby-identifier">get</span> <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://test.host/admin/user/index/10&#39;</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/admin/stuff/show/10&#39;</span>,
      <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;stuff&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">10</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>})
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_class_and_lambda_constraints">
            
              <b>test_class_and_lambda_constraints</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_class_and_lambda_constraints" name="method-i-test_class_and_lambda_constraints" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_class_and_lambda_constraints_source')" id="l_method-i-test_class_and_lambda_constraints_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L213" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_class_and_lambda_constraints_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_class_and_lambda_constraints</span>
  <span class="ruby-identifier">subdomain</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> {
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">matches?</span> <span class="ruby-identifier">request</span>
      <span class="ruby-identifier">request</span>.<span class="ruby-identifier">subdomain</span>.<span class="ruby-identifier">present?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">subdomain</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&#39;clients&#39;</span>
    <span class="ruby-keyword">end</span>
  }

  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subdomain</span>.<span class="ruby-identifier">new</span>,
               <span class="ruby-value">:to</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{default}</span>] }
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:subdomain</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;clients&#39;</span> },
               <span class="ruby-value">:to</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{clients}</span>] }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;default&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://www.example.org/&#39;</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;clients&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://clients.example.org/&#39;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dash_with_custom_regexp">
            
              <b>test_dash_with_custom_regexp</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_dash_with_custom_regexp" name="method-i-test_dash_with_custom_regexp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dash_with_custom_regexp_source')" id="l_method-i-test_dash_with_custom_regexp_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L111" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dash_with_custom_regexp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dash_with_custom_regexp</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:artist/:song-omg&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:song</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span> }, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">resp</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">env</span>).<span class="ruby-identifier">path_parameters</span>
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">resp</span>]]
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">decode</span> <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/journey/123-omg&#39;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;artist&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;journey&quot;</span>, <span class="ruby-string">&quot;song&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;123&quot;</span>}, <span class="ruby-identifier">hash</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Not Found&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/journey/faithfully-omg&#39;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_setup">
            
              <b>test_default_setup</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_default_setup" name="method-i-test_default_setup" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_setup_source')" id="l_method-i-test_default_setup_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L310" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_default_setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 310</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_setup</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:controller(/:action(/:id))&#39;</span> }
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;index&#39;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/content&quot;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;list&#39;</span>},  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/content/list&quot;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;10&#39;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/content/show/10&quot;</span>))

  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;admin/user&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;10&#39;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/admin/user/show/10&quot;</span>))

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/admin/user/show/10&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;admin/user&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">10</span> })

  <span class="ruby-identifier">get</span> <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://test.host/admin/user/list/10&#39;</span>)

  <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;admin/user&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;list&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;10&#39;</span> },
               <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_parameters</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/admin/user/show&#39;</span>,    <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({ <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/admin/user/list/10&#39;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({<span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>})

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/admin/stuff&#39;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({ <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;stuff&#39;</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/stuff&#39;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({ <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;/stuff&#39;</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_draw_with_block_arity_one_raises">
            
              <b>test_draw_with_block_arity_one_raises</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_draw_with_block_arity_one_raises" name="method-i-test_draw_with_block_arity_one_raises" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_draw_with_block_arity_one_raises_source')" id="l_method-i-test_draw_with_block_arity_one_raises_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L294" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_draw_with_block_arity_one_raises_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_draw_with_block_arity_one_raises</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span> <span class="ruby-identifier">map</span>.<span class="ruby-identifier">match</span> <span class="ruby-string">&#39;/:controller(/:action(/:id))&#39;</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_path_allowed">
            
              <b>test_dynamic_path_allowed</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_dynamic_path_allowed" name="method-i-test_dynamic_path_allowed" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_path_allowed_source')" id="l_method-i-test_dynamic_path_allowed_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L574" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_path_allowed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 574</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_path_allowed</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;*path&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_file&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/boo&#39;</span>,
      <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_file&#39;</span>, <span class="ruby-value">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">%w(pages boo)</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_recall_paths_allowed">
            
              <b>test_dynamic_recall_paths_allowed</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_dynamic_recall_paths_allowed" name="method-i-test_dynamic_recall_paths_allowed" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_recall_paths_allowed_source')" id="l_method-i-test_dynamic_recall_paths_allowed_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L583" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_recall_paths_allowed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 583</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_recall_paths_allowed</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;*path&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_file&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">get</span> <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://test.host/pages/boo&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;show_file&quot;</span>, <span class="ruby-value">:path=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;pages/boo&quot;</span>},
               <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_parameters</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/boo&#39;</span>,
    <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_string_match">
            
              <b>test_empty_string_match</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_empty_string_match" name="method-i-test_empty_string_match" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_string_match_source')" id="l_method-i-test_empty_string_match_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L272" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_empty_string_match_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 272</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_string_match</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:username&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:username</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/[^\/]+/</span> },
                     <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, [<span class="ruby-string">&#39;foo&#39;</span>]] }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Not Found&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/&#39;</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/hello&#39;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_failed_constraints_raises_exception_with_violated_constraints">
            
              <b>test_failed_constraints_raises_exception_with_violated_constraints</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_failed_constraints_raises_exception_with_violated_constraints" name="method-i-test_failed_constraints_raises_exception_with_violated_constraints" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_failed_constraints_raises_exception_with_violated_constraints_source')" id="l_method-i-test_failed_constraints_raises_exception_with_violated_constraints_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L816" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_failed_constraints_raises_exception_with_violated_constraints_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 816</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_failed_constraints_raises_exception_with_violated_constraints</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;foos/:id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foos#show&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo_with_requirement&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlGenerationError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:foo_with_requirement_url</span>, <span class="ruby-string">&quot;I am Against the constraints&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_id_with_dash">
            
              <b>test_id_with_dash</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_id_with_dash" name="method-i-test_id_with_dash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_id_with_dash_source')" id="l_method-i-test_id_with_dash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L99" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_id_with_dash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_id_with_dash</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/journey/:id&#39;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">resp</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">env</span>).<span class="ruby-identifier">path_parameters</span>
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">resp</span>]]
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">decode</span> <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/journey/faithfully-omg&#39;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;id&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;faithfully-omg&quot;</span>}, <span class="ruby-identifier">hash</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_ignores_leading_slash">
            
              <b>test_ignores_leading_slash</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_ignores_leading_slash" name="method-i-test_ignores_leading_slash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_ignores_leading_slash_source')" id="l_method-i-test_ignores_leading_slash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L332" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_ignores_leading_slash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_ignores_leading_slash</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">clear!</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:controller(/:action(/:id))&#39;</span>}
  <span class="ruby-identifier">test_default_setup</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_lambda_constraints">
            
              <b>test_lambda_constraints</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_lambda_constraints" name="method-i-test_lambda_constraints" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_lambda_constraints_source')" id="l_method-i-test_lambda_constraints_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L231" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_lambda_constraints_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_lambda_constraints</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">req</span>.<span class="ruby-identifier">subdomain</span>.<span class="ruby-identifier">present?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">subdomain</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;clients&quot;</span> },
               <span class="ruby-value">:to</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{default}</span>] }

    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">req</span>.<span class="ruby-identifier">subdomain</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">subdomain</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;clients&quot;</span> },
               <span class="ruby-value">:to</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{clients}</span>] }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;default&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://www.example.org/&#39;</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;clients&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://clients.example.org/&#39;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_root_url_generation_with_controller_and_action">
            
              <b>test_named_root_url_generation_with_controller_and_action</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_root_url_generation_with_controller_and_action" name="method-i-test_named_root_url_generation_with_controller_and_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_root_url_generation_with_controller_and_action_source')" id="l_method-i-test_named_root_url_generation_with_controller_and_action_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L711" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_root_url_generation_with_controller_and_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 711</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_root_url_generation_with_controller_and_action</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
     <span class="ruby-identifier">root</span> <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;content#index&quot;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;home&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;index&#39;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span> })

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:home_url</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_method">
            
              <b>test_named_route_method</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_method" name="method-i-test_named_route_method" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_method_source')" id="l_method-i-test_named_route_method_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L722" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 722</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_method</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;categories&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#categories&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;categories&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller(/:action(/:id))&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/categories&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;categories&#39;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/content/hi&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hi&#39;</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_root">
            
              <b>test_named_route_root</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_root" name="method-i-test_named_route_root" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_root_source')" id="l_method-i-test_named_route_root_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L466" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_root_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 466</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_root</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">root</span> <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;hello#index&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">routes</span> = <span class="ruby-identifier">setup_for_named_route</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:root_url</span>))
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;/&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:root_path</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_root_with_hash">
            
              <b>test_named_route_root_with_hash</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_root_with_hash" name="method-i-test_named_route_root_with_hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_root_with_hash_source')" id="l_method-i-test_named_route_root_with_hash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L484" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_root_with_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 484</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_root_with_hash</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">root</span> <span class="ruby-node">&quot;hello#index&quot;</span>, <span class="ruby-identifier">as</span><span class="ruby-operator">:</span> <span class="ruby-value">:index</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">routes</span> = <span class="ruby-identifier">setup_for_named_route</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:index_url</span>))
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;/&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:index_path</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_root_with_trailing_slash">
            
              <b>test_named_route_root_with_trailing_slash</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_root_with_trailing_slash" name="method-i-test_named_route_root_with_trailing_slash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_root_with_trailing_slash_source')" id="l_method-i-test_named_route_root_with_trailing_slash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L500" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_root_with_trailing_slash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 500</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_root_with_trailing_slash</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">root</span> <span class="ruby-node">&quot;hello#index&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">routes</span> = <span class="ruby-identifier">setup_for_named_route</span>(<span class="ruby-identifier">trailing_slash</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:root_url</span>))
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/?foo=bar&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:root_url</span>, <span class="ruby-identifier">foo</span><span class="ruby-operator">:</span> <span class="ruby-value">:bar</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_root_without_hash">
            
              <b>test_named_route_root_without_hash</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_root_without_hash" name="method-i-test_named_route_root_without_hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_root_without_hash_source')" id="l_method-i-test_named_route_root_without_hash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L475" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_root_without_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 475</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_root_without_hash</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">root</span> <span class="ruby-node">&quot;hello#index&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">routes</span> = <span class="ruby-identifier">setup_for_named_route</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:root_url</span>))
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;/&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:root_path</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_with_blank_path_prefix">
            
              <b>test_named_route_with_blank_path_prefix</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_with_blank_path_prefix" name="method-i-test_named_route_with_blank_path_prefix" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_with_blank_path_prefix_source')" id="l_method-i-test_named_route_with_blank_path_prefix_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L428" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_with_blank_path_prefix_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 428</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_with_blank_path_prefix</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">scope</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_page&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;page&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/page&quot;</span>,
      <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:page_url</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_with_default">
            
              <b>test_named_route_with_default</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_with_default" name="method-i-test_named_route_with_default" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_with_default_source')" id="l_method-i-test_named_route_with_default_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L408" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_with_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 408</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_with_default</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page/:title&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_page&#39;</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;AboutPage&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;page&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/page/AboutRails&quot;</span>,
      <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:page_url</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;AboutRails&quot;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_with_nested_controller">
            
              <b>test_named_route_with_nested_controller</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_with_nested_controller" name="method-i-test_named_route_with_nested_controller" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_with_nested_controller_source')" id="l_method-i-test_named_route_with_nested_controller_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L439" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_with_nested_controller_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 439</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_with_nested_controller</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;admin/user&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;admin/user#index&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;users&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/admin/user&quot;</span>,
      <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:users_url</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_with_option">
            
              <b>test_named_route_with_option</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_with_option" name="method-i-test_named_route_with_option" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_with_option_source')" id="l_method-i-test_named_route_with_option_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L399" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_with_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 399</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_with_option</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page/:title&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_page&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;page&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/page/new%20stuff&quot;</span>,
      <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:page_url</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;new stuff&#39;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_with_path_prefix">
            
              <b>test_named_route_with_path_prefix</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_with_path_prefix" name="method-i-test_named_route_with_path_prefix" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_with_path_prefix_source')" id="l_method-i-test_named_route_with_path_prefix_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L417" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_with_path_prefix_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_with_path_prefix</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">scope</span> <span class="ruby-string">&quot;my&quot;</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_page&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;page&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;http://test.host/my/page&quot;</span>,
      <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:page_url</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_with_regexps">
            
              <b>test_named_route_with_regexps</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_with_regexps" name="method-i-test_named_route_with_regexps" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_with_regexps_source')" id="l_method-i-test_named_route_with_regexps_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L510" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_with_regexps_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 510</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_with_regexps</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page/:year/:month/:day/:title&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;page#show&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;article&#39;</span>,
      <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span>, <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span>, <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">routes</span> = <span class="ruby-identifier">setup_for_named_route</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;http://test.host/page/2005/6/10/hi&quot;</span>,
    <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:article_url</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hi&#39;</span>, <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">10</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2005</span>, <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">6</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_route_without_hash">
            
              <b>test_named_route_without_hash</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_route_without_hash" name="method-i-test_named_route_without_hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_route_without_hash_source')" id="l_method-i-test_named_route_without_hash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L460" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_route_without_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 460</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_route_without_hash</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;normal&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_routes_array">
            
              <b>test_named_routes_array</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_named_routes_array" name="method-i-test_named_routes_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_routes_array_source')" id="l_method-i-test_named_routes_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L732" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_routes_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 732</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_routes_array</span>
  <span class="ruby-identifier">test_named_route_method</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:categories</span>], <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">named_routes</span>.<span class="ruby-identifier">names</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_nil_defaults">
            
              <b>test_nil_defaults</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_nil_defaults" name="method-i-test_nil_defaults" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_nil_defaults_source')" id="l_method-i-test_nil_defaults_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L737" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_nil_defaults_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 737</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_nil_defaults</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;journal&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#list_journal&#39;</span>,
      <span class="ruby-value">:date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/journal&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, {
    <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>,
    <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;list_journal&#39;</span>,
    <span class="ruby-value">:date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,
    <span class="ruby-value">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>
  })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_non_controllers_cannot_be_matched">
            
              <b>test_non_controllers_cannot_be_matched</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_non_controllers_cannot_be_matched" name="method-i-test_non_controllers_cannot_be_matched" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_non_controllers_cannot_be_matched_source')" id="l_method-i-test_non_controllers_cannot_be_matched_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L558" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_non_controllers_cannot_be_matched_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 558</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_non_controllers_cannot_be_matched</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/not_a/show/10&quot;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_non_greedy_glob_regexp">
            
              <b>test_non_greedy_glob_regexp</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_non_greedy_glob_regexp" name="method-i-test_non_greedy_glob_regexp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_non_greedy_glob_regexp_source')" id="l_method-i-test_non_greedy_glob_regexp_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L281" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_non_greedy_glob_regexp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 281</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_non_greedy_glob_regexp</span>
  <span class="ruby-identifier">params</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/posts/:id(/*filters)&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:filters</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/.+?/</span> },
      <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">params</span> = <span class="ruby-identifier">e</span>[<span class="ruby-string">&quot;action_dispatch.request.path_parameters&quot;</span>]
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-string">&#39;foo&#39;</span>]]
    }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/posts/1/foo.js&#39;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:id=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;1&quot;</span>, <span class="ruby-value">:filters=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-value">:format=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;js&quot;</span>}, <span class="ruby-identifier">params</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_optimised_named_route_with_host">
            
              <b>test_optimised_named_route_with_host</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_optimised_named_route_with_host" name="method-i-test_optimised_named_route_with_host" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_optimised_named_route_with_host_source')" id="l_method-i-test_optimised_named_route_with_host_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L448" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_optimised_named_route_with_host_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 448</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_optimised_named_route_with_host</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_page&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;pages&#39;</span>, <span class="ruby-value">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo.com&#39;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">routes</span> = <span class="ruby-identifier">setup_for_named_route</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;http://foo.com/page&quot;</span>, <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">pages_url</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_optional_star_paths_are_greedy">
            
              <b>test_optional_star_paths_are_greedy</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_optional_star_paths_are_greedy" name="method-i-test_optional_star_paths_are_greedy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_optional_star_paths_are_greedy_source')" id="l_method-i-test_optional_star_paths_are_greedy_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L174" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_optional_star_paths_are_greedy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_optional_star_paths_are_greedy</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/(*filters)&quot;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.request.path_parameters&quot;</span>][<span class="ruby-value">:filters</span>]
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">x</span>]]
    }, <span class="ruby-value">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">u</span> = <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/ne_27.065938,-80.6092/sw_25.489856,-82.542794&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^\//</span>, <span class="ruby-string">&#39;&#39;</span>), <span class="ruby-identifier">get</span>(<span class="ruby-identifier">u</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_optional_star_paths_are_greedy_but_not_too_much">
            
              <b>test_optional_star_paths_are_greedy_but_not_too_much</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_optional_star_paths_are_greedy_but_not_too_much" name="method-i-test_optional_star_paths_are_greedy_but_not_too_much" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_optional_star_paths_are_greedy_but_not_too_much_source')" id="l_method-i-test_optional_star_paths_are_greedy_but_not_too_much_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L186" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_optional_star_paths_are_greedy_but_not_too_much_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_optional_star_paths_are_greedy_but_not_too_much</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/(*filters)&quot;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span> <span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.request.path_parameters&quot;</span>]
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">x</span>]]
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">expected</span> = { <span class="ruby-string">&quot;filters&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ne_27.065938,-80.6092/sw_25.489856,-82&quot;</span>,
               <span class="ruby-string">&quot;format&quot;</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;542794&quot;</span> }
  <span class="ruby-identifier">u</span> = <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/ne_27.065938,-80.6092/sw_25.489856,-82.542794&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">get</span>(<span class="ruby-identifier">u</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_paths_escaped">
            
              <b>test_paths_escaped</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_paths_escaped" name="method-i-test_paths_escaped" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_paths_escaped_source')" id="l_method-i-test_paths_escaped_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L532" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_paths_escaped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 532</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_paths_escaped</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;file/*path&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_file&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;path&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># No + to space in URI escaping, only for query params.</span>
  <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/file/hello+world/how+are+you%3F&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-string">&quot;Recognition should have succeeded&quot;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hello+world/how+are+you?&#39;</span>, <span class="ruby-identifier">results</span>[<span class="ruby-value">:path</span>]

  <span class="ruby-comment"># Use %20 for space instead.</span>
  <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/file/hello%20world/how%20are%20you%3F&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-string">&quot;Recognition should have succeeded&quot;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hello world/how are you?&#39;</span>, <span class="ruby-identifier">results</span>[<span class="ruby-value">:path</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_paths_slashes_unescaped_with_ordered_parameters">
            
              <b>test_paths_slashes_unescaped_with_ordered_parameters</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_paths_slashes_unescaped_with_ordered_parameters" name="method-i-test_paths_slashes_unescaped_with_ordered_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_paths_slashes_unescaped_with_ordered_parameters_source')" id="l_method-i-test_paths_slashes_unescaped_with_ordered_parameters_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L549" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_paths_slashes_unescaped_with_ordered_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 549</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_paths_slashes_unescaped_with_ordered_parameters</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/file/*path&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#index&#39;</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;path&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># No / to %2F in URI, only for query params.</span>
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-string">&quot;/file/hello/world&quot;</span>, <span class="ruby-identifier">setup_for_named_route</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:path_path</span>, [<span class="ruby-string">&#39;hello&#39;</span>, <span class="ruby-string">&#39;world&#39;</span>]))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_pre_dash">
            
              <b>test_pre_dash</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_pre_dash" name="method-i-test_pre_dash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_pre_dash_source')" id="l_method-i-test_pre_dash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L124" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_pre_dash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_pre_dash</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:artist/omg-:song&#39;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">resp</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">env</span>).<span class="ruby-identifier">path_parameters</span>
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">resp</span>]]
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">decode</span> <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/journey/omg-faithfully&#39;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;artist&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;journey&quot;</span>, <span class="ruby-string">&quot;song&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;faithfully&quot;</span>}, <span class="ruby-identifier">hash</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_pre_dash_with_custom_regexp">
            
              <b>test_pre_dash_with_custom_regexp</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_pre_dash_with_custom_regexp" name="method-i-test_pre_dash_with_custom_regexp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_pre_dash_with_custom_regexp_source')" id="l_method-i-test_pre_dash_with_custom_regexp_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L136" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_pre_dash_with_custom_regexp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_pre_dash_with_custom_regexp</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:artist/omg-:song&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:song</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span> }, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">resp</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">env</span>).<span class="ruby-identifier">path_parameters</span>
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">resp</span>]]
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">decode</span> <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/journey/omg-123&#39;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;artist&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;journey&quot;</span>, <span class="ruby-string">&quot;song&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;123&quot;</span>}, <span class="ruby-identifier">hash</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Not Found&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/journey/omg-faithfully&#39;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_recognize_array_of_methods">
            
              <b>test_recognize_array_of_methods</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_recognize_array_of_methods" name="method-i-test_recognize_array_of_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_recognize_array_of_methods_source')" id="l_method-i-test_recognize_array_of_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L766" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_recognize_array_of_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 766</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_recognize_array_of_methods</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">match</span> <span class="ruby-string">&#39;/match&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;books#get_or_post&#39;</span>, <span class="ruby-value">:via</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">:get</span>, <span class="ruby-value">:post</span>]
    <span class="ruby-identifier">put</span> <span class="ruby-string">&#39;/match&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;books#not_get_or_post&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">params</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/match&quot;</span>, <span class="ruby-value">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:post</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;get_or_post&#39;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-value">:action</span>]

  <span class="ruby-identifier">params</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/match&quot;</span>, <span class="ruby-value">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:put</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;not_get_or_post&#39;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-value">:action</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_regexp_precidence">
            
              <b>test_regexp_precidence</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_regexp_precidence" name="method-i-test_regexp_precidence" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_regexp_precidence_source')" id="l_method-i-test_regexp_precidence_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L200" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_regexp_precidence_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_regexp_precidence</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/whois/:domain&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> {
      <span class="ruby-value">:domain</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\w+\.[\w\.]+/</span> },
      <span class="ruby-value">:to</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{regexp}</span>] }

    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/whois/:id&#39;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{id}</span>] }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;regexp&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/whois/example.org&#39;</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;id&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/whois/123&#39;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_requirement_should_prevent_optional_id">
            
              <b>test_requirement_should_prevent_optional_id</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_requirement_should_prevent_optional_id" name="method-i-test_requirement_should_prevent_optional_id" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_requirement_should_prevent_optional_id_source')" id="l_method-i-test_requirement_should_prevent_optional_id_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L648" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_requirement_should_prevent_optional_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 648</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_requirement_should_prevent_optional_id</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;post/:id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post#show&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span>}, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/post/10&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">10</span> })

  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlGenerationError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span> })
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_root_url_generation_with_controller_and_action">
            
              <b>test_root_url_generation_with_controller_and_action</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_root_url_generation_with_controller_and_action" name="method-i-test_root_url_generation_with_controller_and_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_root_url_generation_with_controller_and_action_source')" id="l_method-i-test_root_url_generation_with_controller_and_action_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L702" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_root_url_generation_with_controller_and_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 702</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_root_url_generation_with_controller_and_action</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">root</span> <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;content#index&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;index&#39;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_root_without_path_raises_argument_error">
            
              <b>test_root_without_path_raises_argument_error</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_root_without_path_raises_argument_error" name="method-i-test_root_without_path_raises_argument_error" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_root_without_path_raises_argument_error_source')" id="l_method-i-test_root_without_path_raises_argument_error_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L494" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_root_without_path_raises_argument_error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 494</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_root_without_path_raises_argument_error</span>
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-identifier">root</span> <span class="ruby-keyword">nil</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_route_with_colon_first">
            
              <b>test_route_with_colon_first</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_route_with_colon_first" name="method-i-test_route_with_colon_first" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_route_with_colon_first_source')" id="l_method-i-test_route_with_colon_first_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L338" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_route_with_colon_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 338</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_route_with_colon_first</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:controller/:action/:id&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;index&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:url&#39;</span>, <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;tiny_url&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;translate&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_route_with_fixnum_default">
            
              <b>test_route_with_fixnum_default</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_route_with_fixnum_default" name="method-i-test_route_with_fixnum_default" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_route_with_fixnum_default_source')" id="l_method-i-test_route_with_fixnum_default_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L608" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_route_with_fixnum_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 608</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_route_with_fixnum_default</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page(/:id)&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page&#39;</span>,    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page&#39;</span>,    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page&#39;</span>,    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;1&#39;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page/10&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">10</span> })

  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span> }, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/page&quot;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;1&#39;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/page/1&quot;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;10&#39;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/page/10&quot;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_route_with_regexp_and_captures_for_controller">
            
              <b>test_route_with_regexp_and_captures_for_controller</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_route_with_regexp_and_captures_for_controller" name="method-i-test_route_with_regexp_and_captures_for_controller" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_route_with_regexp_and_captures_for_controller_source')" id="l_method-i-test_route_with_regexp_and_captures_for_controller_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L360" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_route_with_regexp_and_captures_for_controller_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 360</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_route_with_regexp_and_captures_for_controller</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:controller(/:action(/:id))&#39;</span>, <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/admin\/(accounts|users)/</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;admin/accounts&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;index&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/admin/accounts&quot;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;admin/users&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;index&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/admin/users&quot;</span>))
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/admin/products&quot;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_route_with_regexp_and_dot">
            
              <b>test_route_with_regexp_and_dot</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_route_with_regexp_and_dot" name="method-i-test_route_with_regexp_and_dot" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_route_with_regexp_and_dot_source')" id="l_method-i-test_route_with_regexp_and_dot_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L369" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_route_with_regexp_and_dot_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 369</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_route_with_regexp_and_dot</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:file&#39;</span>,
              <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/admin|user/</span>,
              <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/upload|download/</span>,
              <span class="ruby-value">:defaults</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>},
              <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">%r{[^/]+(\.[^/]+)?}</span>}
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># Without a file extension</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/user/download/file&#39;</span>,
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;user&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;download&quot;</span>, <span class="ruby-value">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;file&quot;</span> })

  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;user&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;download&quot;</span>, <span class="ruby-value">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;file&quot;</span>},
    <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/user/download/file&quot;</span>))

  <span class="ruby-comment"># Now, let&#39;s try a file with an extension, really a dot (.)</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/user/download/file.jpg&#39;</span>,
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;user&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;download&quot;</span>, <span class="ruby-value">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;file.jpg&quot;</span> })

  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;user&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;download&quot;</span>, <span class="ruby-value">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;file.jpg&quot;</span>},
    <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/user/download/file.jpg&quot;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_route_with_regexp_for_controller">
            
              <b>test_route_with_regexp_for_controller</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_route_with_regexp_for_controller" name="method-i-test_route_with_regexp_for_controller" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_route_with_regexp_for_controller_source')" id="l_method-i-test_route_with_regexp_for_controller_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L345" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_route_with_regexp_for_controller_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 345</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_route_with_regexp_for_controller</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:admintoken(/:action(/:id))&#39;</span>, <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/admin\/.+/</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:controller(/:action(/:id))&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;admin/user&quot;</span>, <span class="ruby-value">:admintoken</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;index&quot;</span>},
      <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/admin/user/foo&quot;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;foo&quot;</span>},
      <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/content/foo&quot;</span>))

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/admin/user/foo&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;admin/user&quot;</span>, <span class="ruby-value">:admintoken</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;index&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/content/foo&#39;</span>,    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;foo&quot;</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_route_with_text_default">
            
              <b>test_route_with_text_default</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_route_with_text_default" name="method-i-test_route_with_text_default" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>For newer revision</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_route_with_text_default_source')" id="l_method-i-test_route_with_text_default_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L625" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_route_with_text_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 625</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_route_with_text_default</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;page/:id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page/foo&#39;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo&#39;</span> })
  <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo&#39;</span> }, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-string">&quot;/page/foo&quot;</span>))

  <span class="ruby-identifier">token</span> = <span class="ruby-string">&quot;\321\202\320\265\320\272\321\201\321\202&quot;</span> <span class="ruby-comment"># &#39;text&#39; in Russian</span>
  <span class="ruby-identifier">token</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)
  <span class="ruby-identifier">escaped_token</span> = <span class="ruby-constant">CGI</span><span class="ruby-operator">::</span><span class="ruby-identifier">escape</span>(<span class="ruby-identifier">token</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/page/&#39;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">escaped_token</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span> })
  <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;content&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show_page&#39;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span> }, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-node">&quot;/page/#{escaped_token}&quot;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_routes_changed_correctly_after_clear">
            
              <b>test_routes_changed_correctly_after_clear</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_routes_changed_correctly_after_clear" name="method-i-test_routes_changed_correctly_after_clear" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_routes_changed_correctly_after_clear_source')" id="l_method-i-test_routes_changed_correctly_after_clear_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L826" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_routes_changed_correctly_after_clear_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 826</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_routes_changed_correctly_after_clear</span>
  <span class="ruby-identifier">rs</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteSet</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;ca&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;ca#aa&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;cb&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;cb#ab&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;cc&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;cc#ac&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id.:format&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/cc&quot;</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(cc ac)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-value">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:action</span>]]

  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;cb&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;cb#ab&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;cc&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;cc#ac&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id.:format&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/cc&quot;</span>

  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(cc ac)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-value">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:action</span>]]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_lambda">
            
              <b>test_scoped_lambda</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_scoped_lambda" name="method-i-test_scoped_lambda" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_lambda_source')" id="l_method-i-test_scoped_lambda_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L246" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_lambda_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_lambda</span>
  <span class="ruby-identifier">scope_called</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">scope</span> <span class="ruby-string">&#39;/foo&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span> <span class="ruby-identifier">scope_called</span> = <span class="ruby-keyword">true</span> } <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{default}</span>] }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;default&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://www.example.org/foo/&#39;</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scope_called</span>, <span class="ruby-string">&quot;scope constraint should be called&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_lambda_with_get_lambda">
            
              <b>test_scoped_lambda_with_get_lambda</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_scoped_lambda_with_get_lambda" name="method-i-test_scoped_lambda_with_get_lambda" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_lambda_with_get_lambda_source')" id="l_method-i-test_scoped_lambda_with_get_lambda_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L258" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_lambda_with_get_lambda_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_lambda_with_get_lambda</span>
  <span class="ruby-identifier">inner_called</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">scope</span> <span class="ruby-string">&#39;/foo&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span> <span class="ruby-identifier">flunk</span> <span class="ruby-string">&quot;should not be called&quot;</span> } <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">:constraints</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span> <span class="ruby-identifier">inner_called</span> = <span class="ruby-keyword">true</span> },
               <span class="ruby-value">:to</span>             =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span> [<span class="ruby-number">200</span>, {}, <span class="ruby-node">%w{default}</span>] }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;default&#39;</span>, <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://www.example.org/foo/&#39;</span>))
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">inner_called</span>, <span class="ruby-string">&quot;inner constraint should be called&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_set_to_nil_forgets">
            
              <b>test_set_to_nil_forgets</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_set_to_nil_forgets" name="method-i-test_set_to_nil_forgets" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_set_to_nil_forgets_source')" id="l_method-i-test_set_to_nil_forgets_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L675" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_set_to_nil_forgets_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 675</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_set_to_nil_forgets</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;pages(/:year(/:month(/:day)))&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content#list_pages&#39;</span>, <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;:controller/:action/:id&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/2005&#39;</span>,
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;list_pages&#39;</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2005</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/2005/6&#39;</span>,
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;list_pages&#39;</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2005</span>, <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">6</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/2005/6/12&#39;</span>,
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;list_pages&#39;</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2005</span>, <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">6</span>, <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">12</span> })

  <span class="ruby-identifier">get</span> <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://test.host/pages/2005/6/12&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;content&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;list_pages&#39;</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;2005&#39;</span>, <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;6&#39;</span>, <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;12&#39;</span> },
              <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_parameters</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/2005/6/4&#39;</span>,
    <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({ <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">4</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/2005/6&#39;</span>,
    <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({ <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;/pages/2005&#39;</span>,
    <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">url_for</span>({ <span class="ruby-value">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_list_options_diff_when_routing_constraints_dont_match">
            
              <b>test_should_list_options_diff_when_routing_constraints_dont_match</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_should_list_options_diff_when_routing_constraints_dont_match" name="method-i-test_should_list_options_diff_when_routing_constraints_dont_match" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_list_options_diff_when_routing_constraints_dont_match_source')" id="l_method-i-test_should_list_options_diff_when_routing_constraints_dont_match_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L565" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_list_options_diff_when_routing_constraints_dont_match_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 565</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_list_options_diff_when_routing_constraints_dont_match</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;post/:id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post#show&#39;</span>, <span class="ruby-value">:constraints</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/\d+/</span> }, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post&#39;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlGenerationError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;post&#39;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>, <span class="ruby-value">:bad_param</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-value">:use_route</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;post&quot;</span> })
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_specific_controller_action_failure">
            
              <b>test_specific_controller_action_failure</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_specific_controller_action_failure" name="method-i-test_specific_controller_action_failure" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_specific_controller_action_failure_source')" id="l_method-i-test_specific_controller_action_failure_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L300" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_specific_controller_action_failure_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 300</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_specific_controller_action_failure</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">mount</span> <span class="ruby-identifier">lambda</span> {} =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;/foo&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlGenerationError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;omg&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;lol&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_star_paths_are_greedy">
            
              <b>test_star_paths_are_greedy</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_star_paths_are_greedy" name="method-i-test_star_paths_are_greedy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_star_paths_are_greedy_source')" id="l_method-i-test_star_paths_are_greedy_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L149" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_star_paths_are_greedy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_star_paths_are_greedy</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/*path&quot;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.request.path_parameters&quot;</span>][<span class="ruby-value">:path</span>]
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">x</span>]]
    }, <span class="ruby-value">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">u</span> = <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/foo/bar.html&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^\//</span>, <span class="ruby-string">&#39;&#39;</span>), <span class="ruby-identifier">get</span>(<span class="ruby-identifier">u</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_star_paths_are_greedy_but_not_too_much">
            
              <b>test_star_paths_are_greedy_but_not_too_much</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_star_paths_are_greedy_but_not_too_much" name="method-i-test_star_paths_are_greedy_but_not_too_much" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_star_paths_are_greedy_but_not_too_much_source')" id="l_method-i-test_star_paths_are_greedy_but_not_too_much_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L161" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_star_paths_are_greedy_but_not_too_much_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 161</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_star_paths_are_greedy_but_not_too_much</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/*path&quot;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span> <span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.request.path_parameters&quot;</span>]
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">x</span>]]
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">expected</span> = { <span class="ruby-string">&quot;path&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;foo/bar&quot;</span>, <span class="ruby-string">&quot;format&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;html&quot;</span> }
  <span class="ruby-identifier">u</span> = <span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/foo/bar.html&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">get</span>(<span class="ruby-identifier">u</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_subpath_generated">
            
              <b>test_subpath_generated</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_subpath_generated" name="method-i-test_subpath_generated" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_subpath_generated_source')" id="l_method-i-test_subpath_generated_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L804" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_subpath_generated_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 804</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_subpath_generated</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/books/:id/edit&#39;</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subpath_books#edit&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/items/:id/:action&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subpath_books&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/posts/new/:action&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subpath_books&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;/books/7/edit&quot;</span>,      <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;subpath_books&quot;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">7</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;edit&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;/items/15/complete&quot;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;subpath_books&quot;</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">15</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;complete&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;/posts/new/preview&quot;</span>, <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">rs</span>, { <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;subpath_books&quot;</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;preview&quot;</span> })
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_subpath_recognized">
            
              <b>test_subpath_recognized</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_subpath_recognized" name="method-i-test_subpath_recognized" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_subpath_recognized_source')" id="l_method-i-test_subpath_recognized_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L779" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_subpath_recognized_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 779</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_subpath_recognized</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/books/:id/edit&#39;</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subpath_books#edit&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/items/:id/:action&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subpath_books&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/posts/new/:action&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subpath_books&#39;</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/posts/:id&#39;</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subpath_books#show&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/books/17/edit&quot;</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books 17 edit)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-value">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:id</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:action</span>]]

  <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/items/3/complete&quot;</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books 3 complete)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-value">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:id</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:action</span>]]

  <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/posts/new/preview&quot;</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books preview)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-value">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:action</span>]]

  <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-string">&quot;/posts/7&quot;</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books show 7)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-value">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:action</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-value">:id</span>]]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_symbols_with_dashes">
            
              <b>test_symbols_with_dashes</b>()
            
            <a href="../classes/LegacyRouteSetTests.html#method-i-test_symbols_with_dashes" name="method-i-test_symbols_with_dashes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_symbols_with_dashes_source')" id="l_method-i-test_symbols_with_dashes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/938d130c62b530d3445c9f06933cb113ff477fed/actionpack/test/controller/routing_test.rb#L87" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_symbols_with_dashes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/controller/routing_test.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_symbols_with_dashes</span>
  <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:artist/:song-omg&#39;</span>, <span class="ruby-value">:to</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">resp</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">env</span>).<span class="ruby-identifier">path_parameters</span>
      [<span class="ruby-number">200</span>, {}, [<span class="ruby-identifier">resp</span>]]
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">decode</span> <span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>(<span class="ruby-string">&#39;http://example.org/journey/faithfully-omg&#39;</span>))
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;artist&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;journey&quot;</span>, <span class="ruby-string">&quot;song&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;faithfully&quot;</span>}, <span class="ruby-identifier">hash</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    