<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>MultibyteCharsExtrasTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            MultibyteCharsExtrasTest 
            
                <span class="parent">&lt; 
                    
                    <a href="ActiveSupport/TestCase.html">ActiveSupport::TestCase</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activesupport/test/multibyte_chars_test_rb.html">activesupport/test/multibyte_chars_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>The default Multibyte Chars proxy has more features than the normal string
implementation. Tests for the implementation of these features should run
on all Ruby versions and shouldn&#39;t be tested through the proxy methods.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_capitalize_should_be_unicode_aware">test_capitalize_should_be_unicode_aware</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_class_is_not_forwarded">test_class_is_not_forwarded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_composition_exclusion_is_set_up_properly">test_composition_exclusion_is_set_up_properly</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_downcase_should_be_unicode_aware">test_downcase_should_be_unicode_aware</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_limit_should_keep_under_the_specified_byte_limit">test_limit_should_keep_under_the_specified_byte_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_limit_should_not_break_on_blank_strings">test_limit_should_not_break_on_blank_strings</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_limit_should_work_on_a_multibyte_string">test_limit_should_work_on_a_multibyte_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_limit_should_work_on_an_ascii_string">test_limit_should_work_on_an_ascii_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_normalization_C_pri_29">test_normalization_C_pri_29</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_normalization_shouldnt_strip_null_bytes">test_normalization_shouldnt_strip_null_bytes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_compute_grapheme_length">test_should_compute_grapheme_length</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_simple_normalization">test_simple_normalization</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_swapcase_should_be_unicode_aware">test_swapcase_should_be_unicode_aware</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_tidy_bytes_should_forcibly_tidy_bytes_if_specified">test_tidy_bytes_should_forcibly_tidy_bytes_if_specified</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_tidy_bytes_should_tidy_bytes">test_tidy_bytes_should_tidy_bytes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_titleize_should_be_unicode_aware">test_titleize_should_be_unicode_aware</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_titleize_should_not_affect_characters_that_do_not_case_fold">test_titleize_should_not_affect_characters_that_do_not_case_fold</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_upcase_should_be_unicode_aware">test_upcase_should_be_unicode_aware</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="MultibyteTestHelpers.html">
              MultibyteTestHelpers
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-test_capitalize_should_be_unicode_aware">
            
              <b>test_capitalize_should_be_unicode_aware</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_capitalize_should_be_unicode_aware" name="method-i-test_capitalize_should_be_unicode_aware" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_capitalize_should_be_unicode_aware_source')" id="l_method-i-test_capitalize_should_be_unicode_aware_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L499" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_capitalize_should_be_unicode_aware_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 499</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_capitalize_should_be_unicode_aware</span>
  { <span class="ruby-string">&#39;аБвг аБвг&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Абвг абвг&#39;</span>,
    <span class="ruby-string">&#39;аБвг АБВГ&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Абвг абвг&#39;</span>,
    <span class="ruby-string">&#39;АБВГ АБВГ&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Абвг абвг&#39;</span>,
    <span class="ruby-string">&#39;&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;&#39;</span> }.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span>,<span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">t</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">f</span>).<span class="ruby-identifier">capitalize</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_class_is_not_forwarded">
            
              <b>test_class_is_not_forwarded</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_class_is_not_forwarded" name="method-i-test_class_is_not_forwarded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_class_is_not_forwarded_source')" id="l_method-i-test_class_is_not_forwarded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L679" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_class_is_not_forwarded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 679</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_class_is_not_forwarded</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">BYTE_STRING</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">mb_chars</span>.<span class="ruby-identifier">class</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Multibyte</span><span class="ruby-operator">::</span><span class="ruby-constant">Chars</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_composition_exclusion_is_set_up_properly">
            
              <b>test_composition_exclusion_is_set_up_properly</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_composition_exclusion_is_set_up_properly" name="method-i-test_composition_exclusion_is_set_up_properly" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_composition_exclusion_is_set_up_properly_source')" id="l_method-i-test_composition_exclusion_is_set_up_properly_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L554" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_composition_exclusion_is_set_up_properly_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 554</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_composition_exclusion_is_set_up_properly</span>
  <span class="ruby-comment"># Normalization of DEVANAGARI LETTER QA breaks when composition exclusion isn&#39;t used correctly</span>
  <span class="ruby-identifier">qa</span> = [<span class="ruby-number">0x915</span>, <span class="ruby-number">0x93c</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&#39;U*&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">qa</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">qa</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:c</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_downcase_should_be_unicode_aware">
            
              <b>test_downcase_should_be_unicode_aware</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_downcase_should_be_unicode_aware" name="method-i-test_downcase_should_be_unicode_aware" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_downcase_should_be_unicode_aware_source')" id="l_method-i-test_downcase_should_be_unicode_aware_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L489" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_downcase_should_be_unicode_aware_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 489</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_downcase_should_be_unicode_aware</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;абвгд\0f&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&quot;аБвгд\0F&quot;</span>).<span class="ruby-identifier">downcase</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こにちわ&#39;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&#39;こにちわ&#39;</span>).<span class="ruby-identifier">downcase</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_limit_should_keep_under_the_specified_byte_limit">
            
              <b>test_limit_should_keep_under_the_specified_byte_limit</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_limit_should_keep_under_the_specified_byte_limit" name="method-i-test_limit_should_keep_under_the_specified_byte_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_limit_should_keep_under_the_specified_byte_limit_source')" id="l_method-i-test_limit_should_keep_under_the_specified_byte_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L547" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_limit_should_keep_under_the_specified_byte_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 547</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_limit_should_keep_under_the_specified_byte_limit</span>
  <span class="ruby-identifier">example</span> = <span class="ruby-identifier">chars</span>(<span class="ruby-constant">UNICODE_STRING</span>)
  (<span class="ruby-number">1</span><span class="ruby-operator">..</span><span class="ruby-constant">UNICODE_STRING</span>.<span class="ruby-identifier">length</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">limit</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">limit</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">limit</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_limit_should_not_break_on_blank_strings">
            
              <b>test_limit_should_not_break_on_blank_strings</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_limit_should_not_break_on_blank_strings" name="method-i-test_limit_should_not_break_on_blank_strings" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_limit_should_not_break_on_blank_strings_source')" id="l_method-i-test_limit_should_not_break_on_blank_strings_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L517" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_limit_should_not_break_on_blank_strings_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 517</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_limit_should_not_break_on_blank_strings</span>
  <span class="ruby-identifier">example</span> = <span class="ruby-identifier">chars</span>(<span class="ruby-string">&#39;&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">example</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">example</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_limit_should_work_on_a_multibyte_string">
            
              <b>test_limit_should_work_on_a_multibyte_string</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_limit_should_work_on_a_multibyte_string" name="method-i-test_limit_should_work_on_a_multibyte_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_limit_should_work_on_a_multibyte_string_source')" id="l_method-i-test_limit_should_work_on_a_multibyte_string_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L523" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_limit_should_work_on_a_multibyte_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 523</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_limit_should_work_on_a_multibyte_string</span>
  <span class="ruby-identifier">example</span> = <span class="ruby-identifier">chars</span>(<span class="ruby-constant">UNICODE_STRING</span>)
  <span class="ruby-identifier">bytesize</span> = <span class="ruby-constant">UNICODE_STRING</span>.<span class="ruby-identifier">bytesize</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">UNICODE_STRING</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こ&#39;</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">3</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こに&#39;</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">6</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こに&#39;</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">8</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こにち&#39;</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">9</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こにちわ&#39;</span>, <span class="ruby-identifier">example</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">50</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_limit_should_work_on_an_ascii_string">
            
              <b>test_limit_should_work_on_an_ascii_string</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_limit_should_work_on_an_ascii_string" name="method-i-test_limit_should_work_on_an_ascii_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_limit_should_work_on_an_ascii_string_source')" id="l_method-i-test_limit_should_work_on_an_ascii_string_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L537" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_limit_should_work_on_an_ascii_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 537</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_limit_should_work_on_an_ascii_string</span>
  <span class="ruby-identifier">ascii</span> = <span class="ruby-identifier">chars</span>(<span class="ruby-constant">ASCII_STRING</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ASCII_STRING</span>, <span class="ruby-identifier">ascii</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-constant">ASCII_STRING</span>.<span class="ruby-identifier">length</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">ascii</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;o&#39;</span>, <span class="ruby-identifier">ascii</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;oh&#39;</span>, <span class="ruby-identifier">ascii</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;ohay&#39;</span>, <span class="ruby-identifier">ascii</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">4</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;ohayo&#39;</span>, <span class="ruby-identifier">ascii</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">50</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_normalization_C_pri_29">
            
              <b>test_normalization_C_pri_29</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_normalization_C_pri_29" name="method-i-test_normalization_C_pri_29" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Test for the Public Review Issue #29, bad explanation of composition might
lead to a bad implementation: <a
href="http://www.unicode.org/review/pr-29.html">www.unicode.org/review/pr-29.html</a></p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_normalization_C_pri_29_source')" id="l_method-i-test_normalization_C_pri_29_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L562" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_normalization_C_pri_29_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 562</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_normalization_C_pri_29</span>
  [
    [<span class="ruby-number">0x0B47</span>, <span class="ruby-number">0x0300</span>, <span class="ruby-number">0x0B3E</span>],
    [<span class="ruby-number">0x1100</span>, <span class="ruby-number">0x0300</span>, <span class="ruby-number">0x1161</span>]
  ].<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-string">&#39;U*&#39;</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_equal_codepoints</span> <span class="ruby-identifier">c</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">c</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:c</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_normalization_shouldnt_strip_null_bytes">
            
              <b>test_normalization_shouldnt_strip_null_bytes</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_normalization_shouldnt_strip_null_bytes" name="method-i-test_normalization_shouldnt_strip_null_bytes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_normalization_shouldnt_strip_null_bytes_source')" id="l_method-i-test_normalization_shouldnt_strip_null_bytes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L571" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_normalization_shouldnt_strip_null_bytes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 571</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_normalization_shouldnt_strip_null_bytes</span>
  <span class="ruby-identifier">null_byte_str</span> = <span class="ruby-string">&quot;Test\0test&quot;</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">null_byte_str</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">null_byte_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:kc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">null_byte_str</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">null_byte_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:c</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">null_byte_str</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">null_byte_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:d</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">null_byte_str</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">null_byte_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:kd</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">null_byte_str</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">null_byte_str</span>).<span class="ruby-identifier">decompose</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">null_byte_str</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">null_byte_str</span>).<span class="ruby-identifier">compose</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_compute_grapheme_length">
            
              <b>test_should_compute_grapheme_length</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_should_compute_grapheme_length" name="method-i-test_should_compute_grapheme_length" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_compute_grapheme_length_source')" id="l_method-i-test_should_compute_grapheme_length_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L597" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_compute_grapheme_length_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 597</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_compute_grapheme_length</span>
  [
    [<span class="ruby-string">&#39;&#39;</span>, <span class="ruby-number">0</span>],
    [<span class="ruby-string">&#39;abc&#39;</span>, <span class="ruby-number">3</span>],
    [<span class="ruby-string">&#39;こにちわ&#39;</span>, <span class="ruby-number">4</span>],
    [[<span class="ruby-number">0x0924</span>, <span class="ruby-number">0x094D</span>, <span class="ruby-number">0x0930</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&#39;U*&#39;</span>), <span class="ruby-number">2</span>],
    [<span class="ruby-node">%w(cr lf)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(l l)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(l v)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(l lv)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(l lvt)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(lv v)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(lv t)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(v v)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(v t)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(lvt t)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(t t)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(n extend)</span>, <span class="ruby-number">1</span>],
    [<span class="ruby-node">%w(n n)</span>, <span class="ruby-number">2</span>],
    [<span class="ruby-node">%w(n cr lf n)</span>, <span class="ruby-number">3</span>],
    [<span class="ruby-node">%w(n l v t)</span>, <span class="ruby-number">2</span>]
  ].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">input</span>, <span class="ruby-identifier">expected_length</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-identifier">str</span> = <span class="ruby-identifier">string_from_classes</span>(<span class="ruby-identifier">input</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">str</span> = <span class="ruby-identifier">input</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected_length</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">str</span>).<span class="ruby-identifier">grapheme_length</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_simple_normalization">
            
              <b>test_simple_normalization</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_simple_normalization" name="method-i-test_simple_normalization" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_simple_normalization_source')" id="l_method-i-test_simple_normalization_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L582" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_simple_normalization_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 582</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_simple_normalization</span>
  <span class="ruby-identifier">comp_str</span> = [
    <span class="ruby-number">44</span>,  <span class="ruby-comment"># LATIN CAPITAL LETTER D</span>
    <span class="ruby-number">307</span>, <span class="ruby-comment"># COMBINING DOT ABOVE</span>
    <span class="ruby-number">328</span>, <span class="ruby-comment"># COMBINING OGONEK</span>
    <span class="ruby-number">323</span> <span class="ruby-comment"># COMBINING DOT BELOW</span>
  ].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;U*&quot;</span>)

  <span class="ruby-identifier">assert_equal_codepoints</span> <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">normalize</span>
  <span class="ruby-identifier">assert_equal_codepoints</span> [<span class="ruby-number">44</span>,<span class="ruby-number">105</span>,<span class="ruby-number">106</span>,<span class="ruby-number">328</span>,<span class="ruby-number">323</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;U*&quot;</span>), <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">comp_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:kc</span>).<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal_codepoints</span> [<span class="ruby-number">44</span>,<span class="ruby-number">307</span>,<span class="ruby-number">328</span>,<span class="ruby-number">323</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;U*&quot;</span>), <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">comp_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:c</span>).<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal_codepoints</span> [<span class="ruby-number">44</span>,<span class="ruby-number">307</span>,<span class="ruby-number">110</span>,<span class="ruby-number">780</span>,<span class="ruby-number">78</span>,<span class="ruby-number">769</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;U*&quot;</span>), <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">comp_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:d</span>).<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">assert_equal_codepoints</span> [<span class="ruby-number">44</span>,<span class="ruby-number">105</span>,<span class="ruby-number">106</span>,<span class="ruby-number">110</span>,<span class="ruby-number">780</span>,<span class="ruby-number">78</span>,<span class="ruby-number">769</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;U*&quot;</span>), <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">comp_str</span>).<span class="ruby-identifier">normalize</span>(<span class="ruby-value">:kd</span>).<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_swapcase_should_be_unicode_aware">
            
              <b>test_swapcase_should_be_unicode_aware</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_swapcase_should_be_unicode_aware" name="method-i-test_swapcase_should_be_unicode_aware" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_swapcase_should_be_unicode_aware_source')" id="l_method-i-test_swapcase_should_be_unicode_aware_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L494" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_swapcase_should_be_unicode_aware_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 494</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_swapcase_should_be_unicode_aware</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;аaéÜ\0f&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&quot;АAÉü\0F&quot;</span>).<span class="ruby-identifier">swapcase</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こにちわ&#39;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&#39;こにちわ&#39;</span>).<span class="ruby-identifier">swapcase</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_tidy_bytes_should_forcibly_tidy_bytes_if_specified">
            
              <b>test_tidy_bytes_should_forcibly_tidy_bytes_if_specified</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_tidy_bytes_should_forcibly_tidy_bytes_if_specified" name="method-i-test_tidy_bytes_should_forcibly_tidy_bytes_if_specified" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_tidy_bytes_should_forcibly_tidy_bytes_if_specified_source')" id="l_method-i-test_tidy_bytes_should_forcibly_tidy_bytes_if_specified_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L672" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_tidy_bytes_should_forcibly_tidy_bytes_if_specified_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 672</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_tidy_bytes_should_forcibly_tidy_bytes_if_specified</span>
  <span class="ruby-identifier">byte_string</span> = <span class="ruby-string">&quot;\xF0\xA5\xA4\xA4&quot;</span> <span class="ruby-comment"># valid as both CP-1252 and UTF-8, but with different interpretations.</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&quot;ð¥¤¤&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">byte_string</span>).<span class="ruby-identifier">tidy_bytes</span>
  <span class="ruby-comment"># Forcible conversion to UTF-8</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;ð¥¤¤&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">byte_string</span>).<span class="ruby-identifier">tidy_bytes</span>(<span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_tidy_bytes_should_tidy_bytes">
            
              <b>test_tidy_bytes_should_tidy_bytes</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_tidy_bytes_should_tidy_bytes" name="method-i-test_tidy_bytes_should_tidy_bytes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_tidy_bytes_should_tidy_bytes_source')" id="l_method-i-test_tidy_bytes_should_tidy_bytes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L628" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_tidy_bytes_should_tidy_bytes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 628</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_tidy_bytes_should_tidy_bytes</span>

  <span class="ruby-identifier">single_byte_cases</span> = {
    <span class="ruby-string">&quot;\x21&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;!&quot;</span>,   <span class="ruby-comment"># Valid ASCII byte, low</span>
    <span class="ruby-string">&quot;\x41&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;A&quot;</span>,   <span class="ruby-comment"># Valid ASCII byte, mid</span>
    <span class="ruby-string">&quot;\x7E&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;~&quot;</span>,   <span class="ruby-comment"># Valid ASCII byte, high</span>
    <span class="ruby-string">&quot;\x80&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;€&quot;</span>,   <span class="ruby-comment"># Continuation byte, low (cp125)</span>
    <span class="ruby-string">&quot;\x94&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;”&quot;</span>,   <span class="ruby-comment"># Continuation byte, mid (cp125)</span>
    <span class="ruby-string">&quot;\x9F&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Ÿ&quot;</span>,   <span class="ruby-comment"># Continuation byte, high (cp125)</span>
    <span class="ruby-string">&quot;\xC0&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;À&quot;</span>,   <span class="ruby-comment"># Overlong encoding, start of 2-byte sequence, but codepoint &lt; 128</span>
    <span class="ruby-string">&quot;\xC1&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Á&quot;</span>,   <span class="ruby-comment"># Overlong encoding, start of 2-byte sequence, but codepoint &lt; 128</span>
    <span class="ruby-string">&quot;\xC2&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Â&quot;</span>,   <span class="ruby-comment"># Start of 2-byte sequence, low</span>
    <span class="ruby-string">&quot;\xC8&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;È&quot;</span>,   <span class="ruby-comment"># Start of 2-byte sequence, mid</span>
    <span class="ruby-string">&quot;\xDF&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ß&quot;</span>,   <span class="ruby-comment"># Start of 2-byte sequence, high</span>
    <span class="ruby-string">&quot;\xE0&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;à&quot;</span>,   <span class="ruby-comment"># Start of 3-byte sequence, low</span>
    <span class="ruby-string">&quot;\xE8&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;è&quot;</span>,   <span class="ruby-comment"># Start of 3-byte sequence, mid</span>
    <span class="ruby-string">&quot;\xEF&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ï&quot;</span>,   <span class="ruby-comment"># Start of 3-byte sequence, high</span>
    <span class="ruby-string">&quot;\xF0&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ð&quot;</span>,   <span class="ruby-comment"># Start of 4-byte sequence</span>
    <span class="ruby-string">&quot;\xF1&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ñ&quot;</span>,   <span class="ruby-comment"># Unused byte</span>
    <span class="ruby-string">&quot;\xFF&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ÿ&quot;</span>,   <span class="ruby-comment"># Restricted byte</span>
    <span class="ruby-string">&quot;\x00&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;\x00&quot;</span> <span class="ruby-comment"># null char</span>
  }

  <span class="ruby-identifier">single_byte_cases</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">bad</span>, <span class="ruby-identifier">good</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">good</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">bad</span>).<span class="ruby-identifier">tidy_bytes</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;#{good}#{good}&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;#{bad}#{bad}&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;#{good}#{good}#{good}&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;#{bad}#{bad}#{bad}&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;#{good}a&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;#{bad}a&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;#{good}á&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;#{bad}á&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;a#{good}a&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;a#{bad}a&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;á#{good}á&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;á#{bad}á&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;a#{good}&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;a#{bad}&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;á#{good}&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-node">&quot;á#{bad}&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">byte_string</span> = <span class="ruby-string">&quot;\270\236\010\210\245&quot;</span>
  <span class="ruby-identifier">tidy_string</span> = [<span class="ruby-number">0xb8</span>, <span class="ruby-number">0x17e</span>, <span class="ruby-number">0x8</span>, <span class="ruby-number">0x2c6</span>, <span class="ruby-number">0xa5</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">&#39;U*&#39;</span>)
  <span class="ruby-identifier">assert_equal_codepoints</span> <span class="ruby-identifier">tidy_string</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">byte_string</span>).<span class="ruby-identifier">tidy_bytes</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">chars</span>(<span class="ruby-identifier">byte_string</span>).<span class="ruby-identifier">tidy_bytes</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&#39;U*&#39;</span>) }

  <span class="ruby-comment"># UTF-8 leading byte followed by too few continuation bytes</span>
  <span class="ruby-identifier">assert_equal_codepoints</span> <span class="ruby-string">&quot;\xc3\xb0\xc2\xa5\xc2\xa4\x21&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&quot;\xf0\xa5\xa4\x21&quot;</span>).<span class="ruby-identifier">tidy_bytes</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_titleize_should_be_unicode_aware">
            
              <b>test_titleize_should_be_unicode_aware</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_titleize_should_be_unicode_aware" name="method-i-test_titleize_should_be_unicode_aware" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_titleize_should_be_unicode_aware_source')" id="l_method-i-test_titleize_should_be_unicode_aware_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L508" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_titleize_should_be_unicode_aware_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 508</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_titleize_should_be_unicode_aware</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Él Que Se Enteró&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&quot;ÉL QUE SE ENTERÓ&quot;</span>).<span class="ruby-identifier">titleize</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Абвг Абвг&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&quot;аБвг аБвг&quot;</span>).<span class="ruby-identifier">titleize</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_titleize_should_not_affect_characters_that_do_not_case_fold">
            
              <b>test_titleize_should_not_affect_characters_that_do_not_case_fold</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_titleize_should_not_affect_characters_that_do_not_case_fold" name="method-i-test_titleize_should_not_affect_characters_that_do_not_case_fold" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_titleize_should_not_affect_characters_that_do_not_case_fold_source')" id="l_method-i-test_titleize_should_not_affect_characters_that_do_not_case_fold_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L513" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_titleize_should_not_affect_characters_that_do_not_case_fold_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 513</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_titleize_should_not_affect_characters_that_do_not_case_fold</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;日本語&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&quot;日本語&quot;</span>).<span class="ruby-identifier">titleize</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_upcase_should_be_unicode_aware">
            
              <b>test_upcase_should_be_unicode_aware</b>()
            
            <a href="../classes/MultibyteCharsExtrasTest.html#method-i-test_upcase_should_be_unicode_aware" name="method-i-test_upcase_should_be_unicode_aware" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_upcase_should_be_unicode_aware_source')" id="l_method-i-test_upcase_should_be_unicode_aware_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/db7b280be7a8e448da56b2380745ab54753b69fd/activesupport/test/multibyte_chars_test.rb#L484" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_upcase_should_be_unicode_aware_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activesupport/test/multibyte_chars_test.rb, line 484</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_upcase_should_be_unicode_aware</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;АБВГД\0F&quot;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&quot;аБвгд\0f&quot;</span>).<span class="ruby-identifier">upcase</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;こにちわ&#39;</span>, <span class="ruby-identifier">chars</span>(<span class="ruby-string">&#39;こにちわ&#39;</span>).<span class="ruby-identifier">upcase</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    