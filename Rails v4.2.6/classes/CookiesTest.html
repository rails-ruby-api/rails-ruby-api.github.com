<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>CookiesTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            CookiesTest 
            
                <span class="parent">&lt; 
                    
                    <a href="ActionController/TestCase.html">ActionController::TestCase</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/actionpack/test/dispatch/cookies_test_rb.html">actionpack/test/dispatch/cookies_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="CookiesTest/CustomSerializer.html">CookiesTest::CustomSerializer</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="CookiesTest/JSONWrapper.html">CookiesTest::JSONWrapper</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="CookiesTest/TestController.html">CookiesTest::TestController</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup">setup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message">test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature">test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_can_set_http_cookie_header">test_can_set_http_cookie_header</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_can_set_request_cookies">test_can_set_request_cookies</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option">test_cookie_with_all_domain_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_and_tld_length">test_cookie_with_all_domain_option_and_tld_length</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld">test_cookie_with_all_domain_option_using_a_non_standard_tld</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length">test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_australian_style_tld">test_cookie_with_all_domain_option_using_australian_style_tld</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_host_with_port">test_cookie_with_all_domain_option_using_host_with_port</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_host_with_port_and_tld_length">test_cookie_with_all_domain_option_using_host_with_port_and_tld_length</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_ipv4_address">test_cookie_with_all_domain_option_using_ipv4_address</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_ipv6_address">test_cookie_with_all_domain_option_using_ipv6_address</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_localhost">test_cookie_with_all_domain_option_using_localhost</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_all_domain_option_using_uk_style_tld">test_cookie_with_all_domain_option_using_uk_style_tld</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_several_preset_domains_using_one_of_these_domains">test_cookie_with_several_preset_domains_using_one_of_these_domains</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_several_preset_domains_using_other_domain">test_cookie_with_several_preset_domains_using_other_domain</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookie_with_several_preset_domains_using_shared_domain">test_cookie_with_several_preset_domains_using_shared_domain</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookies_can_be_cleared">test_cookies_can_be_cleared</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookies_hash_is_indifferent_access">test_cookies_hash_is_indifferent_access</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookies_persist_throughout_request">test_cookies_persist_throughout_request</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookies_precedence_over_http_cookie">test_cookies_precedence_over_http_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookies_precedence_over_request_cookies">test_cookies_precedence_over_request_cookies</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_cookies_retained_across_requests">test_cookies_retained_across_requests</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_and_set_cookie">test_delete_and_set_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_cookie_with_path">test_delete_cookie_with_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_unexisting_cookie">test_delete_unexisting_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleted_cookie_predicate">test_deleted_cookie_predicate</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleted_cookie_predicate_with_mismatching_options">test_deleted_cookie_predicate_with_mismatching_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_cookie_with_all_domain_option">test_deleting_cookie_with_all_domain_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_cookie_with_all_domain_option_and_tld_length">test_deleting_cookie_with_all_domain_option_and_tld_length</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains">test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deletings_cookie_with_several_preset_domains_using_other_domain">test_deletings_cookie_with_several_preset_domains_using_other_domain</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_each">test_each</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_cookie_using_custom_digest">test_encrypted_cookie_using_custom_digest</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_cookie_using_custom_serializer">test_encrypted_cookie_using_custom_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_cookie_using_default_serializer">test_encrypted_cookie_using_default_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json">test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value">test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_cookie_using_json_serializer">test_encrypted_cookie_using_json_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_cookie_using_marshal_serializer">test_encrypted_cookie_using_marshal_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set">test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_enumerable">test_enumerable</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_expiring_cookie">test_expiring_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_fetch">test_fetch</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_fetch_block">test_fetch_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_fetch_exists">test_fetch_exists</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_fetch_type_error">test_fetch_type_error</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_key_is_to_s">test_key_is_to_s</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_key_methods">test_key_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered">test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered">test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multiple_cookies">test_multiple_cookies</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_not_setting_cookie_with_secure">test_not_setting_cookie_with_secure</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_permanent_signed_cookie">test_permanent_signed_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_raise_data_overflow">test_raise_data_overflow</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_raises_argument_error_if_missing_secret">test_raises_argument_error_if_missing_secret</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_raises_argument_error_if_secret_is_probably_insecure">test_raises_argument_error_if_secret_is_probably_insecure</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_read_permanent_cookie">test_read_permanent_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_set_permanent_cookie">test_set_permanent_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_cookie">test_setting_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_cookie_for_fourteen_days">test_setting_cookie_for_fourteen_days</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_cookie_for_fourteen_days_with_symbols">test_setting_cookie_for_fourteen_days_with_symbols</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_cookie_with_http_only">test_setting_cookie_with_http_only</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_cookie_with_secure">test_setting_cookie_with_secure</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_cookie_with_secure_when_always_write_cookie_is_true">test_setting_cookie_with_secure_when_always_write_cookie_is_true</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it">test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_request_cookies_is_indifferent_access">test_setting_request_cookies_is_indifferent_access</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_test_cookie">test_setting_test_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_the_same_value_to_cookie">test_setting_the_same_value_to_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_the_same_value_to_permanent_cookie">test_setting_the_same_value_to_permanent_cookie</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_setting_with_escapable_characters">test_setting_with_escapable_characters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_custom_digest">test_signed_cookie_using_custom_digest</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_custom_serializer">test_signed_cookie_using_custom_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_default_digest">test_signed_cookie_using_default_digest</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_default_serializer">test_signed_cookie_using_default_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json">test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value">test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_json_serializer">test_signed_cookie_using_json_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_cookie_using_marshal_serializer">test_signed_cookie_using_marshal_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set">test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set">test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set">test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set">test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_tampered_cookies">test_tampered_cookies</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_wrapped_encrypted_cookie_using_json_serializer">test_wrapped_encrypted_cookie_using_json_serializer</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_wrapped_signed_cookie_using_json_serializer">test_wrapped_signed_cookie_using_json_serializer</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <b>setup</b>()
            
            <a href="../classes/CookiesTest.html#method-i-setup" name="method-i-setup" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L207" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>] = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">KeyGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>, <span class="ruby-identifier">iterations</span><span class="ruby-operator">:</span> <span class="ruby-number">2</span>)
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;www.nextangle.com&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message">
            
              <b>test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message" name="method-i-test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message_source')" id="l_method-i-test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L615" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 615</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_accessing_nonexistant_encrypted_cookie_should_not_raise_invalid_message</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_encrypted_cookie</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:non_existant_attribute</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature">
            
              <b>test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature" name="method-i-test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature_source')" id="l_method-i-test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L497" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 497</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_accessing_nonexistant_signed_cookie_should_not_raise_an_invalid_signature</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">signed</span>[<span class="ruby-value">:non_existant_attribute</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_can_set_http_cookie_header">
            
              <b>test_can_set_http_cookie_header</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_can_set_http_cookie_header" name="method-i-test_can_set_http_cookie_header" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_can_set_http_cookie_header_source')" id="l_method-i-test_can_set_http_cookie_header_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1085" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_can_set_http_cookie_header_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1085</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_can_set_http_cookie_header</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;HTTP_COOKIE&#39;</span>] = <span class="ruby-string">&#39;user_name=david&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;HTTP_COOKIE&#39;</span>] = <span class="ruby-string">&#39;user_name=andrew&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;andrew&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;andrew&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_can_set_request_cookies">
            
              <b>test_can_set_request_cookies</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_can_set_request_cookies" name="method-i-test_can_set_request_cookies" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_can_set_request_cookies_source')" id="l_method-i-test_can_set_request_cookies_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1101" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_can_set_request_cookies_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1101</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_can_set_request_cookies</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>] = <span class="ruby-string">&#39;david&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;andrew&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;andrew&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;andrew&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option">
            
              <b>test_cookie_with_all_domain_option</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option" name="method-i-test_cookie_with_all_domain_option" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_source')" id="l_method-i-test_cookie_with_all_domain_option_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L912" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 912</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.com; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_and_tld_length">
            
              <b>test_cookie_with_all_domain_option_and_tld_length</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_and_tld_length" name="method-i-test_cookie_with_all_domain_option_and_tld_length" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_and_tld_length_source')" id="l_method-i-test_cookie_with_all_domain_option_and_tld_length_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L974" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_and_tld_length_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 974</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_and_tld_length</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain_and_tld</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.com; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld">
            
              <b>test_cookie_with_all_domain_option_using_a_non_standard_tld</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld" name="method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_source')" id="l_method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L918" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 918</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_a_non_standard_tld</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;two.subdomains.nextangle.local&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.local; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length">
            
              <b>test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length" name="method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length_source')" id="l_method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L980" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 980</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_a_non_standard_tld_and_tld_length</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;two.subdomains.nextangle.local&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain_and_tld</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.local; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_australian_style_tld">
            
              <b>test_cookie_with_all_domain_option_using_australian_style_tld</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_australian_style_tld" name="method-i-test_cookie_with_all_domain_option_using_australian_style_tld" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_australian_style_tld_source')" id="l_method-i-test_cookie_with_all_domain_option_using_australian_style_tld_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L925" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_australian_style_tld_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 925</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_australian_style_tld</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;nextangle.com.au&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.com.au; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_host_with_port">
            
              <b>test_cookie_with_all_domain_option_using_host_with_port</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_host_with_port" name="method-i-test_cookie_with_all_domain_option_using_host_with_port" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_host_with_port_source')" id="l_method-i-test_cookie_with_all_domain_option_using_host_with_port_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L939" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_host_with_port_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 939</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_host_with_port</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;nextangle.local:3000&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.local; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_host_with_port_and_tld_length">
            
              <b>test_cookie_with_all_domain_option_using_host_with_port_and_tld_length</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_host_with_port_and_tld_length" name="method-i-test_cookie_with_all_domain_option_using_host_with_port_and_tld_length" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_host_with_port_and_tld_length_source')" id="l_method-i-test_cookie_with_all_domain_option_using_host_with_port_and_tld_length_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L987" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_host_with_port_and_tld_length_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 987</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_host_with_port_and_tld_length</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;nextangle.local:3000&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain_and_tld</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.local; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_ipv4_address">
            
              <b>test_cookie_with_all_domain_option_using_ipv4_address</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_ipv4_address" name="method-i-test_cookie_with_all_domain_option_using_ipv4_address" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_ipv4_address_source')" id="l_method-i-test_cookie_with_all_domain_option_using_ipv4_address_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L953" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_ipv4_address_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 953</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_ipv4_address</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;192.168.1.1&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_ipv6_address">
            
              <b>test_cookie_with_all_domain_option_using_ipv6_address</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_ipv6_address" name="method-i-test_cookie_with_all_domain_option_using_ipv6_address" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_ipv6_address_source')" id="l_method-i-test_cookie_with_all_domain_option_using_ipv6_address_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L960" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_ipv6_address_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 960</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_ipv6_address</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;2001:0db8:85a3:0000:0000:8a2e:0370:7334&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_localhost">
            
              <b>test_cookie_with_all_domain_option_using_localhost</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_localhost" name="method-i-test_cookie_with_all_domain_option_using_localhost" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_localhost_source')" id="l_method-i-test_cookie_with_all_domain_option_using_localhost_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L946" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_localhost_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 946</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_localhost</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;localhost&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_all_domain_option_using_uk_style_tld">
            
              <b>test_cookie_with_all_domain_option_using_uk_style_tld</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_all_domain_option_using_uk_style_tld" name="method-i-test_cookie_with_all_domain_option_using_uk_style_tld" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_all_domain_option_using_uk_style_tld_source')" id="l_method-i-test_cookie_with_all_domain_option_using_uk_style_tld_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L932" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_all_domain_option_using_uk_style_tld_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 932</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_all_domain_option_using_uk_style_tld</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;nextangle.co.uk&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.nextangle.co.uk; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_several_preset_domains_using_one_of_these_domains">
            
              <b>test_cookie_with_several_preset_domains_using_one_of_these_domains</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_several_preset_domains_using_one_of_these_domains" name="method-i-test_cookie_with_several_preset_domains_using_one_of_these_domains" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_several_preset_domains_using_one_of_these_domains_source')" id="l_method-i-test_cookie_with_several_preset_domains_using_one_of_these_domains_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1001" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_several_preset_domains_using_one_of_these_domains_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1001</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_several_preset_domains_using_one_of_these_domains</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;example1.com&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domains</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=example1.com; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_several_preset_domains_using_other_domain">
            
              <b>test_cookie_with_several_preset_domains_using_other_domain</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_several_preset_domains_using_other_domain" name="method-i-test_cookie_with_several_preset_domains_using_other_domain" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_several_preset_domains_using_other_domain_source')" id="l_method-i-test_cookie_with_several_preset_domains_using_other_domain_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1008" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_several_preset_domains_using_other_domain_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1008</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_several_preset_domains_using_other_domain</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;other-domain.com&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domains</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookie_with_several_preset_domains_using_shared_domain">
            
              <b>test_cookie_with_several_preset_domains_using_shared_domain</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookie_with_several_preset_domains_using_shared_domain" name="method-i-test_cookie_with_several_preset_domains_using_shared_domain" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookie_with_several_preset_domains_using_shared_domain_source')" id="l_method-i-test_cookie_with_several_preset_domains_using_shared_domain_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1015" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookie_with_several_preset_domains_using_shared_domain_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1015</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookie_with_several_preset_domains_using_shared_domain</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;example3.com&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_cookie_with_domains</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=rizwanreza; domain=.example3.com; path=/&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookies_can_be_cleared">
            
              <b>test_cookies_can_be_cleared</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookies_can_be_cleared" name="method-i-test_cookies_can_be_cleared" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookies_can_be_cleared_source')" id="l_method-i-test_cookies_can_be_cleared_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1073" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookies_can_be_cleared_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1073</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookies_can_be_cleared</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:symbol_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">get</span> <span class="ruby-value">:symbol_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookies_hash_is_indifferent_access">
            
              <b>test_cookies_hash_is_indifferent_access</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookies_hash_is_indifferent_access" name="method-i-test_cookies_hash_is_indifferent_access" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookies_hash_is_indifferent_access_source')" id="l_method-i-test_cookies_hash_is_indifferent_access_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1038" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookies_hash_is_indifferent_access_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1038</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookies_hash_is_indifferent_access</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:symbol_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">get</span> <span class="ruby-value">:string_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;dhh&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;dhh&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookies_persist_throughout_request">
            
              <b>test_cookies_persist_throughout_request</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookies_persist_throughout_request" name="method-i-test_cookies_persist_throughout_request" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookies_persist_throughout_request_source')" id="l_method-i-test_cookies_persist_throughout_request_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L376" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookies_persist_throughout_request_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 376</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookies_persist_throughout_request</span>
  <span class="ruby-identifier">response</span> = <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Set-Cookie&quot;</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp">/user_name=david/</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookies_precedence_over_http_cookie">
            
              <b>test_cookies_precedence_over_http_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookies_precedence_over_http_cookie" name="method-i-test_cookies_precedence_over_http_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookies_precedence_over_http_cookie_source')" id="l_method-i-test_cookies_precedence_over_http_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1117" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookies_precedence_over_http_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1117</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookies_precedence_over_http_cookie</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;HTTP_COOKIE&#39;</span>] = <span class="ruby-string">&#39;user_name=andrew&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookies_precedence_over_request_cookies">
            
              <b>test_cookies_precedence_over_request_cookies</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookies_precedence_over_request_cookies" name="method-i-test_cookies_precedence_over_request_cookies" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookies_precedence_over_request_cookies_source')" id="l_method-i-test_cookies_precedence_over_request_cookies_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1128" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookies_precedence_over_request_cookies_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1128</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookies_precedence_over_request_cookies</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>] = <span class="ruby-string">&#39;andrew&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;david&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_cookies_retained_across_requests">
            
              <b>test_cookies_retained_across_requests</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_cookies_retained_across_requests" name="method-i-test_cookies_retained_across_requests" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_cookies_retained_across_requests_source')" id="l_method-i-test_cookies_retained_across_requests_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1059" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_cookies_retained_across_requests_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1059</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_cookies_retained_across_requests</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:symbol_key</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/&quot;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Set-Cookie&quot;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]

  <span class="ruby-identifier">get</span> <span class="ruby-value">:noop</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Set-Cookie&quot;</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_and_set_cookie">
            
              <b>test_delete_and_set_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_delete_and_set_cookie" name="method-i-test_delete_and_set_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_and_set_cookie_source')" id="l_method-i-test_delete_and_set_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L631" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_delete_and_set_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 631</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_and_set_cookie</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:delete_and_set_cookie</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; expires=Mon, 10 Oct 2005 05:00:00 -0000&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_cookie_with_path">
            
              <b>test_delete_cookie_with_path</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_delete_cookie_with_path" name="method-i-test_delete_cookie_with_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_cookie_with_path_source')" id="l_method-i-test_delete_cookie_with_path_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L351" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_delete_cookie_with_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 351</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_cookie_with_path</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:delete_cookie_with_path</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=; path=/beaten; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_unexisting_cookie">
            
              <b>test_delete_unexisting_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_delete_unexisting_cookie" name="method-i-test_delete_unexisting_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_unexisting_cookie_source')" id="l_method-i-test_delete_unexisting_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L357" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_delete_unexisting_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 357</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_unexisting_cookie</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:delete_cookie</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleted_cookie_predicate">
            
              <b>test_deleted_cookie_predicate</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_deleted_cookie_predicate" name="method-i-test_deleted_cookie_predicate" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleted_cookie_predicate_source')" id="l_method-i-test_deleted_cookie_predicate_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L363" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deleted_cookie_predicate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 363</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleted_cookie_predicate</span>
  <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;user_name&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">deleted?</span>(<span class="ruby-string">&quot;user_name&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">deleted?</span>(<span class="ruby-string">&quot;another&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleted_cookie_predicate_with_mismatching_options">
            
              <b>test_deleted_cookie_predicate_with_mismatching_options</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_deleted_cookie_predicate_with_mismatching_options" name="method-i-test_deleted_cookie_predicate_with_mismatching_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleted_cookie_predicate_with_mismatching_options_source')" id="l_method-i-test_deleted_cookie_predicate_with_mismatching_options_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L370" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deleted_cookie_predicate_with_mismatching_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 370</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleted_cookie_predicate_with_mismatching_options</span>
  <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;user_name&quot;</span>, <span class="ruby-value">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;/path&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">deleted?</span>(<span class="ruby-string">&quot;user_name&quot;</span>, <span class="ruby-value">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;/different&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_cookie_with_all_domain_option">
            
              <b>test_deleting_cookie_with_all_domain_option</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_deleting_cookie_with_all_domain_option" name="method-i-test_deleting_cookie_with_all_domain_option" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_cookie_with_all_domain_option_source')" id="l_method-i-test_deleting_cookie_with_all_domain_option_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L967" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deleting_cookie_with_all_domain_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 967</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_cookie_with_all_domain_option</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:delete_cookie_with_domain</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=; domain=.nextangle.com; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_cookie_with_all_domain_option_and_tld_length">
            
              <b>test_deleting_cookie_with_all_domain_option_and_tld_length</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_deleting_cookie_with_all_domain_option_and_tld_length" name="method-i-test_deleting_cookie_with_all_domain_option_and_tld_length" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_cookie_with_all_domain_option_and_tld_length_source')" id="l_method-i-test_deleting_cookie_with_all_domain_option_and_tld_length_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L994" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deleting_cookie_with_all_domain_option_and_tld_length_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 994</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_cookie_with_all_domain_option_and_tld_length</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:delete_cookie_with_domain_and_tld</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=; domain=.nextangle.com; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains">
            
              <b>test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains" name="method-i-test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains_source')" id="l_method-i-test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1022" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1022</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deletings_cookie_with_several_preset_domains_using_one_of_these_domains</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;example2.com&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:delete_cookie_with_domains</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=; domain=example2.com; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deletings_cookie_with_several_preset_domains_using_other_domain">
            
              <b>test_deletings_cookie_with_several_preset_domains_using_other_domain</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_deletings_cookie_with_several_preset_domains_using_other_domain" name="method-i-test_deletings_cookie_with_several_preset_domains_using_other_domain" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deletings_cookie_with_several_preset_domains_using_other_domain_source')" id="l_method-i-test_deletings_cookie_with_several_preset_domains_using_other_domain_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1030" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deletings_cookie_with_several_preset_domains_using_other_domain_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1030</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deletings_cookie_with_several_preset_domains_using_other_domain</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span> = <span class="ruby-string">&quot;other-domain.com&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:delete_cookie_with_domains</span>
  <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_each">
            
              <b>test_each</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_each" name="method-i-test_each" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_each_source')" id="l_method-i-test_each_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L246" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_each_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_each</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>[<span class="ruby-string">&#39;foo&#39;</span>] = <span class="ruby-value">:bar</span>
  <span class="ruby-identifier">list</span> = []
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">list</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-value">:bar</span>]], <span class="ruby-identifier">list</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_cookie_using_custom_digest">
            
              <b>test_encrypted_cookie_using_custom_digest</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_cookie_using_custom_digest" name="method-i-test_encrypted_cookie_using_custom_digest" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_cookie_using_custom_digest_source')" id="l_method-i-test_encrypted_cookie_using_custom_digest_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L552" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_cookie_using_custom_digest_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 552</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_cookie_using_custom_digest</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_digest&quot;</span>] = <span class="ruby-string">&#39;SHA256&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_encrypted_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]

  <span class="ruby-identifier">sign_secret</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>].<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>])

  <span class="ruby-identifier">sha1_verifier</span>   = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span><span class="ruby-operator">::</span><span class="ruby-constant">NullSerializer</span>, <span class="ruby-identifier">digest</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;SHA1&#39;</span>)
  <span class="ruby-identifier">sha256_verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span><span class="ruby-operator">::</span><span class="ruby-constant">NullSerializer</span>, <span class="ruby-identifier">digest</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;SHA256&#39;</span>)

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidSignature</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">sha1_verifier</span>.<span class="ruby-identifier">verify</span>(<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">sha256_verifier</span>.<span class="ruby-identifier">verify</span>(<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>])
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_cookie_using_custom_serializer">
            
              <b>test_encrypted_cookie_using_custom_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_cookie_using_custom_serializer" name="method-i-test_encrypted_cookie_using_custom_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_cookie_using_custom_serializer_source')" id="l_method-i-test_encrypted_cookie_using_custom_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L545" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_cookie_using_custom_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 545</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_cookie_using_custom_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-constant">CustomSerializer</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_encrypted_cookie</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar was dumped and loaded&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_cookie_using_default_serializer">
            
              <b>test_encrypted_cookie_using_default_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_cookie_using_default_serializer" name="method-i-test_encrypted_cookie_using_default_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_cookie_using_default_serializer_source')" id="l_method-i-test_encrypted_cookie_using_default_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L502" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_cookie_using_default_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 502</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_cookie_using_default_serializer</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_encrypted_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">TypeError</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json">
            
              <b>test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json" name="method-i-test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json_source')" id="l_method-i-test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L573" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 573</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">encrypted_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>]
  <span class="ruby-identifier">encrypted_signed_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">encrypted_cookie_salt</span>)
  <span class="ruby-identifier">sign_secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">encrypted_signed_cookie_salt</span>)

  <span class="ruby-identifier">marshal_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">Marshal</span>).<span class="ruby-identifier">encrypt_and_sign</span>(<span class="ruby-string">&quot;bar&quot;</span>)
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;foo=#{marshal_value}&quot;</span>

  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>

  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]

  <span class="ruby-identifier">encryptor</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-identifier">encryptor</span>.<span class="ruby-identifier">decrypt_and_verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;foo&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value">
            
              <b>test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value" name="method-i-test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value_source')" id="l_method-i-test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L595" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 595</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_cookie_using_hybrid_serializer_can_read_from_json_dumped_value</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">encrypted_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>]
  <span class="ruby-identifier">encrypted_signed_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">encrypted_cookie_salt</span>)
  <span class="ruby-identifier">sign_secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">encrypted_signed_cookie_salt</span>)
  <span class="ruby-identifier">json_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>).<span class="ruby-identifier">encrypt_and_sign</span>(<span class="ruby-string">&quot;bar&quot;</span>)
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;foo=#{json_value}&quot;</span>

  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>

  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]

  <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;foo&quot;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_cookie_using_json_serializer">
            
              <b>test_encrypted_cookie_using_json_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_cookie_using_json_serializer" name="method-i-test_encrypted_cookie_using_json_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_cookie_using_json_serializer_source')" id="l_method-i-test_encrypted_cookie_using_json_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L523" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_cookie_using_json_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 523</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_cookie_using_json_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:json</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_encrypted_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-operator">::</span><span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ParserError</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_cookie_using_marshal_serializer">
            
              <b>test_encrypted_cookie_using_marshal_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_cookie_using_marshal_serializer" name="method-i-test_encrypted_cookie_using_marshal_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_cookie_using_marshal_serializer_source')" id="l_method-i-test_encrypted_cookie_using_marshal_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L512" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_cookie_using_marshal_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 512</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_cookie_using_marshal_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:marshal</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_encrypted_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">TypeError</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set">
            
              <b>test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set" name="method-i-test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set_source')" id="l_method-i-test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L722" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 722</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">EncryptedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L729" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 729</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">UpgradeLegacyEncryptedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_enumerable">
            
              <b>test_enumerable</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_enumerable" name="method-i-test_enumerable" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_enumerable_source')" id="l_method-i-test_enumerable_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L256" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_enumerable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 256</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_enumerable</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>[<span class="ruby-string">&#39;foo&#39;</span>] = <span class="ruby-value">:bar</span>
  <span class="ruby-identifier">actual</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_s</span>] }
  <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-string">&#39;bar&#39;</span>]], <span class="ruby-identifier">actual</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_expiring_cookie">
            
              <b>test_expiring_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_expiring_cookie" name="method-i-test_expiring_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_expiring_cookie_source')" id="l_method-i-test_expiring_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L344" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_expiring_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_expiring_cookie</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Joe&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:logout</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_fetch">
            
              <b>test_fetch</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_fetch" name="method-i-test_fetch" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_fetch_source')" id="l_method-i-test_fetch_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L216" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_fetch_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_fetch</span>
  <span class="ruby-identifier">x</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_not</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;zzzzzz&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">x</span>, <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;zzzzzz&#39;</span>, <span class="ruby-identifier">x</span>)
  <span class="ruby-identifier">assert_not</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;zzzzzz&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_fetch_block">
            
              <b>test_fetch_block</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_fetch_block" name="method-i-test_fetch_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_fetch_block_source')" id="l_method-i-test_fetch_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L229" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_fetch_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_fetch_block</span>
  <span class="ruby-identifier">x</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_not</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;zzzzzz&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">x</span>, <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;zzzzzz&#39;</span>) { <span class="ruby-identifier">x</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_fetch_exists">
            
              <b>test_fetch_exists</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_fetch_exists" name="method-i-test_fetch_exists" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_fetch_exists_source')" id="l_method-i-test_fetch_exists_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L223" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_fetch_exists_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_fetch_exists</span>
  <span class="ruby-identifier">x</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>[<span class="ruby-string">&#39;foo&#39;</span>] = <span class="ruby-string">&#39;bar&#39;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-identifier">x</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_fetch_type_error">
            
              <b>test_fetch_type_error</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_fetch_type_error" name="method-i-test_fetch_type_error" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_fetch_type_error_source')" id="l_method-i-test_fetch_type_error_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L240" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_fetch_type_error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 240</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_fetch_type_error</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">KeyError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:omglolwut</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_key_is_to_s">
            
              <b>test_key_is_to_s</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_key_is_to_s" name="method-i-test_key_is_to_s" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_key_is_to_s_source')" id="l_method-i-test_key_is_to_s_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L235" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_key_is_to_s_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 235</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_key_is_to_s</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>[<span class="ruby-string">&#39;foo&#39;</span>] = <span class="ruby-string">&#39;bar&#39;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:foo</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_key_methods">
            
              <b>test_key_methods</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_key_methods" name="method-i-test_key_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_key_methods_source')" id="l_method-i-test_key_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L262" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_key_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 262</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_key_methods</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:foo</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;foo&quot;</span>)

  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>[<span class="ruby-value">:foo</span>] = <span class="ruby-value">:bar</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:foo</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookie_jar</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;foo&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L830" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 830</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;4433796b79d99a7735553e316522acee&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;00646eb40062e1b1deff205a27cd30f9&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-string">&#39;bar&#39;</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;foo=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>])
  <span class="ruby-identifier">sign_secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">encryptor</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">encryptor</span>.<span class="ruby-identifier">decrypt_and_verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;foo&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L791" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 791</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_json_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:json</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;4433796b79d99a7735553e316522acee&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;00646eb40062e1b1deff205a27cd30f9&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-string">&#39;bar&#39;</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;foo=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>])
  <span class="ruby-identifier">sign_secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">encryptor</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">encryptor</span>.<span class="ruby-identifier">decrypt_and_verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;foo&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L773" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 773</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:json</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;user_id=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_signed_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">verifier</span>.<span class="ruby-identifier">verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;user_id&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L812" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 812</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_json_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;user_id=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_signed_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">verifier</span>.<span class="ruby-identifier">verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;user_id&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L869" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 869</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_marshal_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_hybrid_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;4433796b79d99a7735553e316522acee&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;00646eb40062e1b1deff205a27cd30f9&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-string">&#39;bar&#39;</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;foo=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>])
  <span class="ruby-identifier">sign_secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">encryptor</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">sign_secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">encryptor</span>.<span class="ruby-identifier">decrypt_and_verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;foo&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L851" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 851</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_marshal_signed_cookie_is_read_and_transparently_upgraded_by_signed_json_hybrid_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;user_id=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_signed_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">verifier</span>.<span class="ruby-identifier">verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;user_id&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L753" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 753</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_signed_cookie_is_read_and_transparently_encrypted_by_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;4433796b79d99a7735553e316522acee&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>] = <span class="ruby-string">&quot;00646eb40062e1b1deff205a27cd30f9&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-string">&#39;bar&#39;</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;foo=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_cookie_salt&quot;</span>])
  <span class="ruby-identifier">sign_secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.encrypted_signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">encryptor</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageEncryptor</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">sign_secret</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;bar&#39;</span>, <span class="ruby-identifier">encryptor</span>.<span class="ruby-identifier">decrypt_and_verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;foo&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L736" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 736</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_signed_cookie_is_read_and_transparently_upgraded_by_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>

  <span class="ruby-identifier">legacy_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>)

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;user_id=#{legacy_value}&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_signed_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>])
  <span class="ruby-identifier">verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">verifier</span>.<span class="ruby-identifier">verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;user_id&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered">
            
              <b>test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered" name="method-i-test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered_source')" id="l_method-i-test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L901" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 901</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_signed_cookie_is_treated_as_nil_by_encrypted_cookie_jar_if_tampered</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-string">&quot;foo=baz&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;foo&quot;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered">
            
              <b>test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered" name="method-i-test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered_source')" id="l_method-i-test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L890" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 890</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_legacy_signed_cookie_is_treated_as_nil_by_signed_cookie_jar_if_tampered</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-string">&quot;user_id=45&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_signed_cookie</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;user_id&quot;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multiple_cookies">
            
              <b>test_multiple_cookies</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_multiple_cookies" name="method-i-test_multiple_cookies" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multiple_cookies_source')" id="l_method-i-test_multiple_cookies_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L333" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_multiple_cookies_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 333</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multiple_cookies</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_multiple_cookies</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; expires=Mon, 10 Oct 2005 05:00:00 -0000\nlogin=XJ-122; path=/&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;login&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;XJ-122&quot;</span>, <span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_not_setting_cookie_with_secure">
            
              <b>test_not_setting_cookie_with_secure</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_not_setting_cookie_with_secure" name="method-i-test_not_setting_cookie_with_secure" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_not_setting_cookie_with_secure_source')" id="l_method-i-test_not_setting_cookie_with_secure_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L327" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_not_setting_cookie_with_secure_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 327</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_not_setting_cookie_with_secure</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate_with_secure</span>
  <span class="ruby-identifier">assert_not_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; secure&quot;</span>
  <span class="ruby-identifier">assert_not_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_permanent_signed_cookie">
            
              <b>test_permanent_signed_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_permanent_signed_cookie" name="method-i-test_permanent_signed_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_permanent_signed_cookie_source')" id="l_method-i-test_permanent_signed_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L625" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_permanent_signed_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 625</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_permanent_signed_cookie</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_permanent_signed_cookie</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-node">%r(#{20.years.from_now.utc.year})</span>, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Set-Cookie&quot;</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">100</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">signed</span>[<span class="ruby-value">:remember_me</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_raise_data_overflow">
            
              <b>test_raise_data_overflow</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_raise_data_overflow" name="method-i-test_raise_data_overflow" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_raise_data_overflow_source')" id="l_method-i-test_raise_data_overflow_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L638" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_raise_data_overflow_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 638</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_raise_data_overflow</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">CookieOverflow</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-value">:raise_data_overflow</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_raises_argument_error_if_missing_secret">
            
              <b>test_raises_argument_error_if_missing_secret</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_raises_argument_error_if_missing_secret" name="method-i-test_raises_argument_error_if_missing_secret" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_raises_argument_error_if_missing_secret_source')" id="l_method-i-test_raises_argument_error_if_missing_secret_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L651" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_raises_argument_error_if_missing_secret_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 651</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_raises_argument_error_if_missing_secret</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-keyword">nil</span>.<span class="ruby-identifier">inspect</span>) {
    <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>] = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">LegacyKeyGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  }

  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">inspect</span>) {
    <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>] = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">LegacyKeyGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;&quot;</span>)
    <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_raises_argument_error_if_secret_is_probably_insecure">
            
              <b>test_raises_argument_error_if_secret_is_probably_insecure</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_raises_argument_error_if_secret_is_probably_insecure" name="method-i-test_raises_argument_error_if_secret_is_probably_insecure" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_raises_argument_error_if_secret_is_probably_insecure_source')" id="l_method-i-test_raises_argument_error_if_secret_is_probably_insecure_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L663" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_raises_argument_error_if_secret_is_probably_insecure_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 663</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_raises_argument_error_if_secret_is_probably_insecure</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;password&quot;</span>.<span class="ruby-identifier">inspect</span>) {
    <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>] = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">LegacyKeyGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;password&quot;</span>)
    <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  }

  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;secret&quot;</span>.<span class="ruby-identifier">inspect</span>) {
    <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>] = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">LegacyKeyGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;secret&quot;</span>)
    <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  }

  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;12345678901234567890123456789&quot;</span>.<span class="ruby-identifier">inspect</span>) {
    <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>] = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">LegacyKeyGenerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;12345678901234567890123456789&quot;</span>)
    <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_read_permanent_cookie">
            
              <b>test_read_permanent_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_read_permanent_cookie" name="method-i-test_read_permanent_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_read_permanent_cookie_source')" id="l_method-i-test_read_permanent_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L387" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_read_permanent_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 387</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_read_permanent_cookie</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_permanent_cookie</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Jamie&#39;</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">permanent</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_set_permanent_cookie">
            
              <b>test_set_permanent_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_set_permanent_cookie" name="method-i-test_set_permanent_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_set_permanent_cookie_source')" id="l_method-i-test_set_permanent_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L381" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_set_permanent_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 381</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_set_permanent_cookie</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_permanent_cookie</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp">/Jamie/</span>, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Set-Cookie&quot;</span>])
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-node">%r(#{20.years.from_now.utc.year})</span>, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Set-Cookie&quot;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_cookie">
            
              <b>test_setting_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_cookie" name="method-i-test_setting_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_cookie_source')" id="l_method-i-test_setting_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L271" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_cookie</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_cookie_for_fourteen_days">
            
              <b>test_setting_cookie_for_fourteen_days</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_cookie_for_fourteen_days" name="method-i-test_setting_cookie_for_fourteen_days" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_cookie_for_fourteen_days_source')" id="l_method-i-test_setting_cookie_for_fourteen_days_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L295" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_cookie_for_fourteen_days_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_cookie_for_fourteen_days</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate_for_fourteen_days</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; expires=Mon, 10 Oct 2005 05:00:00 -0000&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_cookie_for_fourteen_days_with_symbols">
            
              <b>test_setting_cookie_for_fourteen_days_with_symbols</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_cookie_for_fourteen_days_with_symbols" name="method-i-test_setting_cookie_for_fourteen_days_with_symbols" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_cookie_for_fourteen_days_with_symbols_source')" id="l_method-i-test_setting_cookie_for_fourteen_days_with_symbols_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L301" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_cookie_for_fourteen_days_with_symbols_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 301</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_cookie_for_fourteen_days_with_symbols</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate_for_fourteen_days_with_symbols</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; expires=Mon, 10 Oct 2005 05:00:00 -0000&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_cookie_with_http_only">
            
              <b>test_setting_cookie_with_http_only</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_cookie_with_http_only" name="method-i-test_setting_cookie_with_http_only" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_cookie_with_http_only_source')" id="l_method-i-test_setting_cookie_with_http_only_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L307" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_cookie_with_http_only_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_cookie_with_http_only</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate_with_http_only</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; HttpOnly&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_cookie_with_secure">
            
              <b>test_setting_cookie_with_secure</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_cookie_with_secure" name="method-i-test_setting_cookie_with_secure" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_cookie_with_secure_source')" id="l_method-i-test_setting_cookie_with_secure_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L313" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_cookie_with_secure_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 313</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_cookie_with_secure</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;HTTPS&quot;</span>] = <span class="ruby-string">&quot;on&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate_with_secure</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; secure&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_cookie_with_secure_when_always_write_cookie_is_true">
            
              <b>test_setting_cookie_with_secure_when_always_write_cookie_is_true</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_cookie_with_secure_when_always_write_cookie_is_true" name="method-i-test_setting_cookie_with_secure_when_always_write_cookie_is_true" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_cookie_with_secure_when_always_write_cookie_is_true_source')" id="l_method-i-test_setting_cookie_with_secure_when_always_write_cookie_is_true_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L320" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_cookie_with_secure_when_always_write_cookie_is_true_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_cookie_with_secure_when_always_write_cookie_is_true</span>
  <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">CookieJar</span>.<span class="ruby-identifier">any_instance</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-value">:always_write_cookie</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate_with_secure</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;user_name=david; path=/; secure&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;user_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;david&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it">
            
              <b>test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it" name="method-i-test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it_source')" id="l_method-i-test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L620" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 620</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_invalid_encrypted_cookie_should_return_nil_when_accessing_it</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_invalid_encrypted_cookie</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:cookies</span>).<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:invalid_cookie</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_request_cookies_is_indifferent_access">
            
              <b>test_setting_request_cookies_is_indifferent_access</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_request_cookies_is_indifferent_access" name="method-i-test_setting_request_cookies_is_indifferent_access" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_request_cookies_is_indifferent_access_source')" id="l_method-i-test_setting_request_cookies_is_indifferent_access_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L1047" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_request_cookies_is_indifferent_access_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 1047</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_request_cookies_is_indifferent_access</span>
  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&quot;andrew&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:string_key_mock</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>]

  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_name&#39;</span>] = <span class="ruby-string">&quot;andrew&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:symbol_key_mock</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;david&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_test_cookie">
            
              <b>test_setting_test_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_test_cookie" name="method-i-test_setting_test_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_test_cookie_source')" id="l_method-i-test_setting_test_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L340" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_test_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 340</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_test_cookie</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">get</span> <span class="ruby-value">:access_frozen_cookies</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_the_same_value_to_cookie">
            
              <b>test_setting_the_same_value_to_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_the_same_value_to_cookie" name="method-i-test_setting_the_same_value_to_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_the_same_value_to_cookie_source')" id="l_method-i-test_setting_the_same_value_to_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L277" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_the_same_value_to_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_the_same_value_to_cookie</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;david&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:authenticate</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_the_same_value_to_permanent_cookie">
            
              <b>test_setting_the_same_value_to_permanent_cookie</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_the_same_value_to_permanent_cookie" name="method-i-test_setting_the_same_value_to_permanent_cookie" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_the_same_value_to_permanent_cookie_source')" id="l_method-i-test_setting_the_same_value_to_permanent_cookie_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L283" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_the_same_value_to_permanent_cookie_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 283</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_the_same_value_to_permanent_cookie</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_name</span>] = <span class="ruby-string">&#39;Jamie&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_permanent_cookie</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&#39;user_name&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Jamie&#39;</span>}, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_setting_with_escapable_characters">
            
              <b>test_setting_with_escapable_characters</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_setting_with_escapable_characters" name="method-i-test_setting_with_escapable_characters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_setting_with_escapable_characters_source')" id="l_method-i-test_setting_with_escapable_characters_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L289" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_setting_with_escapable_characters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 289</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_setting_with_escapable_characters</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_with_with_escapable_characters</span>
  <span class="ruby-identifier">assert_cookie_header</span> <span class="ruby-string">&quot;that+%26+guy=foo+%26+bar+%3D%3E+baz; path=/&quot;</span>
  <span class="ruby-identifier">assert_equal</span>({<span class="ruby-string">&quot;that &amp; guy&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;foo &amp; bar =&gt; baz&quot;</span>}, <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_custom_digest">
            
              <b>test_signed_cookie_using_custom_digest</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_custom_digest" name="method-i-test_signed_cookie_using_custom_digest" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_custom_digest_source')" id="l_method-i-test_signed_cookie_using_custom_digest_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L406" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_custom_digest_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 406</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_custom_digest</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_digest&quot;</span>] = <span class="ruby-string">&#39;SHA256&#39;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">signed_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">signed_cookie_salt</span>)

  <span class="ruby-identifier">verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">Marshal</span>, <span class="ruby-identifier">digest</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;SHA256&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">verifier</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>), <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_custom_serializer">
            
              <b>test_signed_cookie_using_custom_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_custom_serializer" name="method-i-test_signed_cookie_using_custom_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_custom_serializer_source')" id="l_method-i-test_signed_cookie_using_custom_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L452" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_custom_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 452</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_custom_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-constant">CustomSerializer</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;45 was dumped and loaded&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_default_digest">
            
              <b>test_signed_cookie_using_default_digest</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_default_digest" name="method-i-test_signed_cookie_using_default_digest" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_default_digest_source')" id="l_method-i-test_signed_cookie_using_default_digest_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L392" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_default_digest_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_default_digest</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">signed_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">signed_cookie_salt</span>)

  <span class="ruby-identifier">verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">Marshal</span>, <span class="ruby-identifier">digest</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;SHA1&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">verifier</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>), <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_default_serializer">
            
              <b>test_signed_cookie_using_default_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_default_serializer" name="method-i-test_signed_cookie_using_default_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_default_serializer_source')" id="l_method-i-test_signed_cookie_using_default_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L421" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_default_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 421</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_default_serializer</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json">
            
              <b>test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json" name="method-i-test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json_source')" id="l_method-i-test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L459" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 459</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_hybrid_serializer_can_migrate_marshal_dumped_value_to_json</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">signed_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">signed_cookie_salt</span>)

  <span class="ruby-identifier">marshal_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">Marshal</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>)
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;user_id=#{marshal_value}&quot;</span>

  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_signed_cookie</span>

  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">verifier</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">verifier</span>.<span class="ruby-identifier">verify</span>(<span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&#39;user_id&#39;</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value">
            
              <b>test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value" name="method-i-test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value_source')" id="l_method-i-test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L479" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 479</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_hybrid_serializer_can_read_from_json_dumped_value</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:hybrid</span>

  <span class="ruby-identifier">key_generator</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.key_generator&quot;</span>]
  <span class="ruby-identifier">signed_cookie_salt</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.signed_cookie_salt&quot;</span>]
  <span class="ruby-identifier">secret</span> = <span class="ruby-identifier">key_generator</span>.<span class="ruby-identifier">generate_key</span>(<span class="ruby-identifier">signed_cookie_salt</span>)
  <span class="ruby-identifier">json_value</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageVerifier</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">secret</span>, <span class="ruby-identifier">serializer</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>).<span class="ruby-identifier">generate</span>(<span class="ruby-number">45</span>)
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">headers</span>[<span class="ruby-string">&quot;Cookie&quot;</span>] = <span class="ruby-node">&quot;user_id=#{json_value}&quot;</span>

  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_signed_cookie</span>

  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]

  <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">cookies</span>[<span class="ruby-string">&quot;user_id&quot;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_json_serializer">
            
              <b>test_signed_cookie_using_json_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_json_serializer" name="method-i-test_signed_cookie_using_json_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_json_serializer_source')" id="l_method-i-test_signed_cookie_using_json_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L436" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_json_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 436</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_json_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:json</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_cookie_using_marshal_serializer">
            
              <b>test_signed_cookie_using_marshal_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_cookie_using_marshal_serializer" name="method-i-test_signed_cookie_using_marshal_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_cookie_using_marshal_serializer_source')" id="l_method-i-test_signed_cookie_using_marshal_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L428" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_cookie_using_marshal_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 428</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_cookie_using_marshal_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:marshal</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">45</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set">
            
              <b>test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set" name="method-i-test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set_source')" id="l_method-i-test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L708" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 708</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_or_encrypted_uses_encrypted_cookie_jar_if_only_secret_key_base_is_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">EncryptedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed_or_encrypted</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set">
            
              <b>test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set" name="method-i-test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set_source')" id="l_method-i-test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L701" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 701</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_or_encrypted_uses_signed_cookie_jar_if_only_secret_token_is_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">SignedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed_or_encrypted</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L715" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 715</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_or_encrypted_uses_upgrade_legacy_encrypted_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:get_encrypted_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">UpgradeLegacyEncryptedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed_or_encrypted</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set">
            
              <b>test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set" name="method-i-test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set_source')" id="l_method-i-test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L687" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 687</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_uses_signed_cookie_jar_if_only_secret_key_base_is_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">SignedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set">
            
              <b>test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set" name="method-i-test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set_source')" id="l_method-i-test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L680" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 680</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_uses_signed_cookie_jar_if_only_secret_token_is_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">SignedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set">
            
              <b>test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" name="method-i-test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source')" id="l_method-i-test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L694" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 694</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_signed_uses_upgrade_legacy_signed_cookie_jar_if_both_secret_token_and_secret_key_base_are_set</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_token&quot;</span>] = <span class="ruby-string">&quot;b3c631c314c0bbca50c1b2843150fe33&quot;</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.secret_key_base&quot;</span>] = <span class="ruby-string">&quot;c3b95688f35581fad38df788add315ff&quot;</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_signed_cookie</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">Cookies</span><span class="ruby-operator">::</span><span class="ruby-constant">UpgradeLegacySignedCookieJar</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_tampered_cookies">
            
              <b>test_tampered_cookies</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_tampered_cookies" name="method-i-test_tampered_cookies" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_tampered_cookies_source')" id="l_method-i-test_tampered_cookies_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L644" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_tampered_cookies_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 644</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_tampered_cookies</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-value">:tampered_cookies</span>
    <span class="ruby-identifier">assert_response</span> <span class="ruby-value">:success</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_wrapped_encrypted_cookie_using_json_serializer">
            
              <b>test_wrapped_encrypted_cookie_using_json_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_wrapped_encrypted_cookie_using_json_serializer" name="method-i-test_wrapped_encrypted_cookie_using_json_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_wrapped_encrypted_cookie_using_json_serializer_source')" id="l_method-i-test_wrapped_encrypted_cookie_using_json_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L534" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_wrapped_encrypted_cookie_using_json_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 534</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_wrapped_encrypted_cookie_using_json_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:json</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_wrapped_encrypted_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&#39;wrapped: bar&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-identifier">assert_raises</span> <span class="ruby-operator">::</span><span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ParserError</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:foo</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;wrapped: bar&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">encrypted</span>[<span class="ruby-value">:foo</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_wrapped_signed_cookie_using_json_serializer">
            
              <b>test_wrapped_signed_cookie_using_json_serializer</b>()
            
            <a href="../classes/CookiesTest.html#method-i-test_wrapped_signed_cookie_using_json_serializer" name="method-i-test_wrapped_signed_cookie_using_json_serializer" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_wrapped_signed_cookie_using_json_serializer_source')" id="l_method-i-test_wrapped_signed_cookie_using_json_serializer_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/03e660e768fdd05474471b5718d278c123a8d75c/actionpack/test/dispatch/cookies_test.rb#L444" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_wrapped_signed_cookie_using_json_serializer_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/test/dispatch/cookies_test.rb, line 444</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_wrapped_signed_cookie_using_json_serializer</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;action_dispatch.cookies_serializer&quot;</span>] = <span class="ruby-value">:json</span>
  <span class="ruby-identifier">get</span> <span class="ruby-value">:set_wrapped_signed_cookie</span>
  <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:cookies</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-string">&#39;wrapped: 45&#39;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value">:user_id</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;wrapped: 45&#39;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">signed</span>[<span class="ruby-value">:user_id</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    