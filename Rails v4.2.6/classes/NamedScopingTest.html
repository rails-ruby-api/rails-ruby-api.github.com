<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>NamedScopingTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            NamedScopingTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activerecord/test/cases/scoping/named_scoping_test_rb.html">activerecord/test/cases/scoping/named_scoping_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-pro">pro</a>,
              </li>
            
              
              <li>
                <a href="#method-c-pub">pub</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_active_records_have_scope_named__all__">test_active_records_have_scope_named__all__</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_active_records_have_scope_named__scoped__">test_active_records_have_scope_named__scoped__</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_any_should_call_proxy_found_if_using_a_block">test_any_should_call_proxy_found_if_using_a_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_any_should_not_fire_query_if_scope_loaded">test_any_should_not_fire_query_if_scope_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_any_should_not_load_results">test_any_should_not_load_results</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_chaining_applies_last_conditions_when_creating">test_chaining_applies_last_conditions_when_creating</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_chaining_combines_conditions_when_searching">test_chaining_combines_conditions_when_searching</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_chaining_with_duplicate_joins">test_chaining_with_duplicate_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delegates_finds_and_calculations_to_the_base_class">test_delegates_finds_and_calculations_to_the_base_class</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_eager_default_scope_relations_are_remove">test_eager_default_scope_relations_are_remove</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_should_not_load_results">test_empty_should_not_load_results</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_should_behave_like_select">test_find_all_should_behave_like_select</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_and_last_should_allow_integers_for_limit">test_first_and_last_should_allow_integers_for_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_and_last_should_not_use_query_when_results_are_loaded">test_first_and_last_should_not_use_query_when_results_are_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_found_items_are_cached">test_found_items_are_cached</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_many_associations_have_access_to_scopes">test_has_many_associations_have_access_to_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_many_through_associations_have_access_to_scopes">test_has_many_through_associations_have_access_to_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_implements_enumerable">test_implements_enumerable</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_index_on_scope">test_index_on_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_should_call_proxy_found_if_using_a_block">test_many_should_call_proxy_found_if_using_a_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_should_not_fire_query_if_scope_loaded">test_many_should_not_fire_query_if_scope_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_should_not_load_results">test_many_should_not_load_results</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_should_return_false_if_none_or_one">test_many_should_return_false_if_none_or_one</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_should_return_true_if_more_than_one">test_many_should_return_true_if_more_than_one</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_method_missing_priority_when_delegating">test_method_missing_priority_when_delegating</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_model_class_should_respond_to_any">test_model_class_should_respond_to_any</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_model_class_should_respond_to_many">test_model_class_should_respond_to_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_nested_scopes_queries_size">test_nested_scopes_queries_size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_procedural_scopes">test_procedural_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_procedural_scopes_returning_nil">test_procedural_scopes_returning_nil</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_rand_should_select_a_random_object_from_proxy">test_rand_should_select_a_random_object_from_proxy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reload_expires_cache_of_found_items">test_reload_expires_cache_of_found_items</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reserved_scope_names">test_reserved_scope_names</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scope_should_respond_to_own_methods_and_methods_of_the_proxy">test_scope_should_respond_to_own_methods_and_methods_of_the_proxy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scope_with_STI">test_scope_with_STI</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scope_with_object">test_scope_with_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_are_lazy_loaded_if_table_still_does_not_exist">test_scoped_are_lazy_loaded_if_table_still_does_not_exist</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_are_cached_on_associations">test_scopes_are_cached_on_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_are_composable">test_scopes_are_composable</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_are_reset_on_association_reload">test_scopes_are_reset_on_association_reload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_batch_finders">test_scopes_batch_finders</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_body_is_a_callable">test_scopes_body_is_a_callable</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_honor_current_scopes_from_when_defined">test_scopes_honor_current_scopes_from_when_defined</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_on_relations">test_scopes_on_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_to_get_newest">test_scopes_to_get_newest</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_with_arguments_are_cached_on_associations">test_scopes_with_arguments_are_cached_on_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified">test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scopes_with_string_name_can_be_composed">test_scopes_with_string_name_can_be_composed</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_build_new_on_top_of_scope">test_should_build_new_on_top_of_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_build_on_top_of_chained_scopes">test_should_build_on_top_of_chained_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_build_on_top_of_scope">test_should_build_on_top_of_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_create_on_top_of_scope">test_should_create_on_top_of_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_create_with_bang_on_top_of_scope">test_should_create_with_bang_on_top_of_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_not_duplicates_where_values">test_should_not_duplicates_where_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_use_where_in_query_for_scope">test_should_use_where_in_query_for_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_should_use_count_when_results_are_not_loaded">test_size_should_use_count_when_results_are_not_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_should_use_length_when_results_are_loaded">test_size_should_use_length_when_results_are_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_spaces_in_scope_names">test_spaces_in_scope_names</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_subclass_merges_scopes_properly">test_subclass_merges_scopes_properly</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_table_names_for_chaining_scopes_with_and_without_table_name_included">test_table_names_for_chaining_scopes_with_and_without_table_name_included</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-pub">
            
              <b>pub</b>()
            
            <a href="../classes/NamedScopingTest.html#method-c-pub" name="method-c-pub" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-pub_source')" id="l_method-c-pub_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L285" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-pub_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">pub</span>; <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
              
      <div class="sectiontitle">Class Protected methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-pro">
            
              <b>pro</b>()
            
            <a href="../classes/NamedScopingTest.html#method-c-pro" name="method-c-pro" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-pro_source')" id="l_method-c-pro_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L291" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-pro_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 291</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">pro</span>; <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-test_active_records_have_scope_named__all__">
            
              <b>test_active_records_have_scope_named__all__</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_active_records_have_scope_named__all__" name="method-i-test_active_records_have_scope_named__all__" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_active_records_have_scope_named__all___source')" id="l_method-i-test_active_records_have_scope_named__all___source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L143" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_active_records_have_scope_named__all___source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_active_records_have_scope_named__all__</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_active_records_have_scope_named__scoped__">
            
              <b>test_active_records_have_scope_named__scoped__</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_active_records_have_scope_named__scoped__" name="method-i-test_active_records_have_scope_named__scoped__" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_active_records_have_scope_named__scoped___source')" id="l_method-i-test_active_records_have_scope_named__scoped___source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L149" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_active_records_have_scope_named__scoped___source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_active_records_have_scope_named__scoped__</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;content LIKE &#39;%Have%&#39;&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scope</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">scope</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">where</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;content LIKE &#39;%Have%&#39;&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_any_should_call_proxy_found_if_using_a_block">
            
              <b>test_any_should_call_proxy_found_if_using_a_block</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_any_should_call_proxy_found_if_using_a_block" name="method-i-test_any_should_call_proxy_found_if_using_a_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_any_should_call_proxy_found_if_using_a_block_source')" id="l_method-i-test_any_should_call_proxy_found_if_using_a_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L188" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_any_should_call_proxy_found_if_using_a_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_any_should_call_proxy_found_if_using_a_block</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:empty?</span>).<span class="ruby-identifier">never</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-keyword">true</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_any_should_not_fire_query_if_scope_loaded">
            
              <b>test_any_should_not_fire_query_if_scope_loaded</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_any_should_not_fire_query_if_scope_loaded" name="method-i-test_any_should_not_fire_query_if_scope_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_any_should_not_fire_query_if_scope_loaded_source')" id="l_method-i-test_any_should_not_fire_query_if_scope_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L196" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_any_should_not_fire_query_if_scope_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_any_should_not_fire_query_if_scope_loaded</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_any_should_not_load_results">
            
              <b>test_any_should_not_load_results</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_any_should_not_load_results" name="method-i-test_any_should_not_load_results" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_any_should_not_load_results_source')" id="l_method-i-test_any_should_not_load_results_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L179" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_any_should_not_load_results_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_any_should_not_load_results</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span>    <span class="ruby-comment"># use count query</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment"># force load</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span>    <span class="ruby-comment"># use loaded (no query)</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_chaining_applies_last_conditions_when_creating">
            
              <b>test_chaining_applies_last_conditions_when_creating</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_chaining_applies_last_conditions_when_creating" name="method-i-test_chaining_applies_last_conditions_when_creating" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_chaining_applies_last_conditions_when_creating_source')" id="l_method-i-test_chaining_applies_last_conditions_when_creating_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L393" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_chaining_applies_last_conditions_when_creating_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 393</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_chaining_applies_last_conditions_when_creating</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>

  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>

  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>

  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_chaining_combines_conditions_when_searching">
            
              <b>test_chaining_combines_conditions_when_searching</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_chaining_combines_conditions_when_searching" name="method-i-test_chaining_combines_conditions_when_searching" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_chaining_combines_conditions_when_searching_source')" id="l_method-i-test_chaining_combines_conditions_when_searching_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L407" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_chaining_combines_conditions_when_searching_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 407</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_chaining_combines_conditions_when_searching</span>
  <span class="ruby-comment"># Normal hash conditions</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-comment"># Nested hash conditions with same keys</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_special_comments</span>.<span class="ruby-identifier">with_very_special_comments</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-comment"># Nested hash conditions with different keys</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-value">:sti_comments</span>)], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_special_comments</span>.<span class="ruby-identifier">with_post</span>(<span class="ruby-number">4</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">uniq</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_chaining_with_duplicate_joins">
            
              <b>test_chaining_with_duplicate_joins</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_chaining_with_duplicate_joins" name="method-i-test_chaining_with_duplicate_joins" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_chaining_with_duplicate_joins_source')" id="l_method-i-test_chaining_with_duplicate_joins_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L387" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_chaining_with_duplicate_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 387</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_chaining_with_duplicate_joins</span>
  <span class="ruby-identifier">join</span> = <span class="ruby-string">&quot;INNER JOIN comments ON comments.post_id = posts.id&quot;</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-identifier">join</span>).<span class="ruby-identifier">joins</span>(<span class="ruby-identifier">join</span>).<span class="ruby-identifier">where</span>(<span class="ruby-node">&quot;posts.id = #{post.id}&quot;</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delegates_finds_and_calculations_to_the_base_class">
            
              <b>test_delegates_finds_and_calculations_to_the_base_class</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_delegates_finds_and_calculations_to_the_base_class" name="method-i-test_delegates_finds_and_calculations_to_the_base_class" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delegates_finds_and_calculations_to_the_base_class_source')" id="l_method-i-test_delegates_finds_and_calculations_to_the_base_class_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L40" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_delegates_finds_and_calculations_to_the_base_class_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 40</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delegates_finds_and_calculations_to_the_base_class</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>,                <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">first</span>,                   <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>,                   <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">average</span>(<span class="ruby-value">:replies_count</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">average</span>(<span class="ruby-value">:replies_count</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_eager_default_scope_relations_are_remove">
            
              <b>test_eager_default_scope_relations_are_remove</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_eager_default_scope_relations_are_remove" name="method-i-test_eager_default_scope_relations_are_remove" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_eager_default_scope_relations_are_remove_source')" id="l_method-i-test_eager_default_scope_relations_are_remove_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L511" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_eager_default_scope_relations_are_remove_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 511</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_eager_default_scope_relations_are_remove</span>
  <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>)
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-string">&#39;posts&#39;</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:default_scope</span>, <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_should_not_load_results">
            
              <b>test_empty_should_not_load_results</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_empty_should_not_load_results" name="method-i-test_empty_should_not_load_results" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_should_not_load_results_source')" id="l_method-i-test_empty_should_not_load_results_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L170" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_empty_should_not_load_results_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_should_not_load_results</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">empty?</span>  <span class="ruby-comment"># use count query</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment"># force load</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">empty?</span>  <span class="ruby-comment"># use loaded (no query)</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_should_behave_like_select">
            
              <b>test_find_all_should_behave_like_select</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_find_all_should_behave_like_select" name="method-i-test_find_all_should_behave_like_select" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_should_behave_like_select_source')" id="l_method-i-test_find_all_should_behave_like_select_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L355" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_should_behave_like_select_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 355</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_should_behave_like_select</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:approved</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">find_all</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:approved</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_and_last_should_allow_integers_for_limit">
            
              <b>test_first_and_last_should_allow_integers_for_limit</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_first_and_last_should_allow_integers_for_limit" name="method-i-test_first_and_last_should_allow_integers_for_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_and_last_should_allow_integers_for_limit_source')" id="l_method-i-test_first_and_last_should_allow_integers_for_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L156" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_and_last_should_allow_integers_for_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_and_last_should_allow_integers_for_limit</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">first</span>(<span class="ruby-number">2</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">last</span>(<span class="ruby-number">2</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id&quot;</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">last</span>(<span class="ruby-number">2</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_and_last_should_not_use_query_when_results_are_loaded">
            
              <b>test_first_and_last_should_not_use_query_when_results_are_loaded</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_first_and_last_should_not_use_query_when_results_are_loaded" name="method-i-test_first_and_last_should_not_use_query_when_results_are_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_and_last_should_not_use_query_when_results_are_loaded_source')" id="l_method-i-test_first_and_last_should_not_use_query_when_results_are_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L161" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_and_last_should_not_use_query_when_results_are_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 161</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_and_last_should_not_use_query_when_results_are_loaded</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_found_items_are_cached">
            
              <b>test_found_items_are_cached</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_found_items_are_cached" name="method-i-test_found_items_are_cached" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_found_items_are_cached_source')" id="l_method-i-test_found_items_are_cached_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L22" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_found_items_are_cached_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_found_items_are_cached</span>
  <span class="ruby-identifier">all_posts</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">collect</span>
    <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">collect</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_many_associations_have_access_to_scopes">
            
              <b>test_has_many_associations_have_access_to_scopes</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_has_many_associations_have_access_to_scopes" name="method-i-test_has_many_associations_have_access_to_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_many_associations_have_access_to_scopes_source')" id="l_method-i-test_has_many_associations_have_access_to_scopes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L107" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_has_many_associations_have_access_to_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_many_associations_have_access_to_scopes</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">containing_the_letter_a</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Post</span>.<span class="ruby-identifier">containing_the_letter_a</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">containing_the_letter_a</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">containing_the_letter_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_many_through_associations_have_access_to_scopes">
            
              <b>test_has_many_through_associations_have_access_to_scopes</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_has_many_through_associations_have_access_to_scopes" name="method-i-test_has_many_through_associations_have_access_to_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_many_through_associations_have_access_to_scopes_source')" id="l_method-i-test_has_many_through_associations_have_access_to_scopes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L119" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_has_many_through_associations_have_access_to_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_many_through_associations_have_access_to_scopes</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">containing_the_letter_e</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">comments</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">containing_the_letter_e</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">comments</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">containing_the_letter_e</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">containing_the_letter_e</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_implements_enumerable">
            
              <b>test_implements_enumerable</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_implements_enumerable" name="method-i-test_implements_enumerable" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_implements_enumerable_source')" id="l_method-i-test_implements_enumerable_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L13" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_implements_enumerable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_implements_enumerable</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">first</span>,    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_index_on_scope">
            
              <b>test_index_on_scope</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_index_on_scope" name="method-i-test_index_on_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_index_on_scope_source')" id="l_method-i-test_index_on_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L448" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_index_on_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 448</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_index_on_scope</span>
  <span class="ruby-identifier">approved</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:second</span>), <span class="ruby-identifier">approved</span>[<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">approved</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_should_call_proxy_found_if_using_a_block">
            
              <b>test_many_should_call_proxy_found_if_using_a_block</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_many_should_call_proxy_found_if_using_a_block" name="method-i-test_many_should_call_proxy_found_if_using_a_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_should_call_proxy_found_if_using_a_block_source')" id="l_method-i-test_many_should_call_proxy_found_if_using_a_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L217" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_many_should_call_proxy_found_if_using_a_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_should_call_proxy_found_if_using_a_block</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:size</span>).<span class="ruby-identifier">never</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">many?</span> { <span class="ruby-keyword">true</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_should_not_fire_query_if_scope_loaded">
            
              <b>test_many_should_not_fire_query_if_scope_loaded</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_many_should_not_fire_query_if_scope_loaded" name="method-i-test_many_should_not_fire_query_if_scope_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_should_not_fire_query_if_scope_loaded_source')" id="l_method-i-test_many_should_not_fire_query_if_scope_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L225" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_many_should_not_fire_query_if_scope_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_should_not_fire_query_if_scope_loaded</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">many?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_should_not_load_results">
            
              <b>test_many_should_not_load_results</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_many_should_not_load_results" name="method-i-test_many_should_not_load_results" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_should_not_load_results_source')" id="l_method-i-test_many_should_not_load_results_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L208" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_many_should_not_load_results_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 208</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_should_not_load_results</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">many?</span>   <span class="ruby-comment"># use count query</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment"># force load</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">many?</span>   <span class="ruby-comment"># use loaded (no query)</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_should_return_false_if_none_or_one">
            
              <b>test_many_should_return_false_if_none_or_one</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_many_should_return_false_if_none_or_one" name="method-i-test_many_should_return_false_if_none_or_one" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_should_return_false_if_none_or_one_source')" id="l_method-i-test_many_should_return_false_if_none_or_one_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L231" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_many_should_return_false_if_none_or_one_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_should_return_false_if_none_or_one</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topics</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topics</span>.<span class="ruby-identifier">many?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_should_return_true_if_more_than_one">
            
              <b>test_many_should_return_true_if_more_than_one</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_many_should_return_true_if_more_than_one" name="method-i-test_many_should_return_true_if_more_than_one" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_should_return_true_if_more_than_one_source')" id="l_method-i-test_many_should_return_true_if_more_than_one_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L238" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_many_should_return_true_if_more_than_one_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_should_return_true_if_more_than_one</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">many?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_method_missing_priority_when_delegating">
            
              <b>test_method_missing_priority_when_delegating</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_method_missing_priority_when_delegating" name="method-i-test_method_missing_priority_when_delegating" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_method_missing_priority_when_delegating_source')" id="l_method-i-test_method_missing_priority_when_delegating_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L49" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_method_missing_priority_when_delegating_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_method_missing_priority_when_delegating</span>
  <span class="ruby-identifier">klazz</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-string">&quot;topics&quot;</span>
    <span class="ruby-identifier">scope</span> <span class="ruby-value">:since</span>, <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;written_on &gt;= ?&#39;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>.<span class="ruby-identifier">day</span>) }
    <span class="ruby-identifier">scope</span> <span class="ruby-value">:to</span>,    <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;written_on &lt;= ?&#39;</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>) }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">klazz</span>.<span class="ruby-identifier">to</span>.<span class="ruby-identifier">since</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-identifier">klazz</span>.<span class="ruby-identifier">since</span>.<span class="ruby-identifier">to</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_model_class_should_respond_to_any">
            
              <b>test_model_class_should_respond_to_any</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_model_class_should_respond_to_any" name="method-i-test_model_class_should_respond_to_any" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_model_class_should_respond_to_any_source')" id="l_method-i-test_model_class_should_respond_to_any_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L202" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_model_class_should_respond_to_any_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 202</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_model_class_should_respond_to_any</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">any?</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete_all</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">any?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_model_class_should_respond_to_many">
            
              <b>test_model_class_should_respond_to_many</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_model_class_should_respond_to_many" name="method-i-test_model_class_should_respond_to_many" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_model_class_should_respond_to_many_source')" id="l_method-i-test_model_class_should_respond_to_many_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L242" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_model_class_should_respond_to_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_model_class_should_respond_to_many</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete_all</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">many?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_nested_scopes_queries_size">
            
              <b>test_nested_scopes_queries_size</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_nested_scopes_queries_size" name="method-i-test_nested_scopes_queries_size" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_nested_scopes_queries_size_source')" id="l_method-i-test_nested_scopes_queries_size_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L454" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_nested_scopes_queries_size_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 454</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_nested_scopes_queries_size</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">by_lifo</span>.<span class="ruby-identifier">replied</span>.<span class="ruby-identifier">written_before</span>(<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_procedural_scopes">
            
              <b>test_procedural_scopes</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_procedural_scopes" name="method-i-test_procedural_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_procedural_scopes_source')" id="l_method-i-test_procedural_scopes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L86" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_procedural_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_procedural_scopes</span>
  <span class="ruby-identifier">topics_written_before_the_third</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;written_on &lt; ?&#39;</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-value">:third</span>).<span class="ruby-identifier">written_on</span>)
  <span class="ruby-identifier">topics_written_before_the_second</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;written_on &lt; ?&#39;</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-value">:second</span>).<span class="ruby-identifier">written_on</span>)
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">topics_written_before_the_second</span>, <span class="ruby-identifier">topics_written_before_the_third</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics_written_before_the_third</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">written_before</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-value">:third</span>).<span class="ruby-identifier">written_on</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics_written_before_the_second</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">written_before</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-value">:second</span>).<span class="ruby-identifier">written_on</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_procedural_scopes_returning_nil">
            
              <b>test_procedural_scopes_returning_nil</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_procedural_scopes_returning_nil" name="method-i-test_procedural_scopes_returning_nil" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_procedural_scopes_returning_nil_source')" id="l_method-i-test_procedural_scopes_returning_nil_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L95" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_procedural_scopes_returning_nil_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_procedural_scopes_returning_nil</span>
  <span class="ruby-identifier">all_topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">all_topics</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">written_before</span>(<span class="ruby-keyword">nil</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_rand_should_select_a_random_object_from_proxy">
            
              <b>test_rand_should_select_a_random_object_from_proxy</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_rand_should_select_a_random_object_from_proxy" name="method-i-test_rand_should_select_a_random_object_from_proxy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_rand_should_select_a_random_object_from_proxy_source')" id="l_method-i-test_rand_should_select_a_random_object_from_proxy_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L359" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_rand_should_select_a_random_object_from_proxy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 359</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_rand_should_select_a_random_object_from_proxy</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Topic</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">sample</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reload_expires_cache_of_found_items">
            
              <b>test_reload_expires_cache_of_found_items</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_reload_expires_cache_of_found_items" name="method-i-test_reload_expires_cache_of_found_items" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reload_expires_cache_of_found_items_source')" id="l_method-i-test_reload_expires_cache_of_found_items_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L31" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_reload_expires_cache_of_found_items_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 31</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reload_expires_cache_of_found_items</span>
  <span class="ruby-identifier">all_posts</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">new_post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">new_post</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">new_post</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reserved_scope_names">
            
              <b>test_reserved_scope_names</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_reserved_scope_names" name="method-i-test_reserved_scope_names" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reserved_scope_names_source')" id="l_method-i-test_reserved_scope_names_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L277" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_reserved_scope_names_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reserved_scope_names</span>
  <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-string">&quot;topics&quot;</span>

    <span class="ruby-identifier">scope</span> <span class="ruby-value">:approved</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>) }

    <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword ruby-title">self</span>
      <span class="ruby-identifier">public</span>
        <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">pub</span>; <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">private</span>
        <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">pri</span>; <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">protected</span>
        <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">pro</span>; <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">subklass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">klass</span>)

  <span class="ruby-identifier">conflicts</span> = [
    <span class="ruby-value">:create</span>,        <span class="ruby-comment"># public class method on AR::Base</span>
    <span class="ruby-value">:relation</span>,      <span class="ruby-comment"># private class method on AR::Base</span>
    <span class="ruby-value">:new</span>,           <span class="ruby-comment"># redefined class method on AR::Base</span>
    <span class="ruby-value">:all</span>,           <span class="ruby-comment"># a default scope</span>
    <span class="ruby-value">:public</span>,        <span class="ruby-comment"># some imporant methods on Module and Class</span>
    <span class="ruby-value">:protected</span>,
    <span class="ruby-value">:private</span>,
    <span class="ruby-value">:name</span>,
    <span class="ruby-value">:parent</span>,
    <span class="ruby-value">:superclass</span>
  ]

  <span class="ruby-identifier">non_conflicts</span> = [
    <span class="ruby-value">:find_by_title</span>, <span class="ruby-comment"># dynamic finder method</span>
    <span class="ruby-value">:approved</span>,      <span class="ruby-comment"># existing scope</span>
    <span class="ruby-value">:pub</span>,           <span class="ruby-comment"># existing public class method</span>
    <span class="ruby-value">:pri</span>,           <span class="ruby-comment"># existing private class method</span>
    <span class="ruby-value">:pro</span>,           <span class="ruby-comment"># existing protected class method</span>
    <span class="ruby-value">:open</span>,          <span class="ruby-comment"># a ::Kernel method</span>
  ]

  <span class="ruby-identifier">conflicts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;scope `#{name}` should not be allowed&quot;</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">scope</span> <span class="ruby-identifier">name</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span>{ <span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>) } }
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;scope `#{name}` should not be allowed&quot;</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">subklass</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">scope</span> <span class="ruby-identifier">name</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span>{ <span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>) } }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">non_conflicts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">silence_warnings</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">scope</span> <span class="ruby-identifier">name</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span>{ <span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>) } }
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">subklass</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">scope</span> <span class="ruby-identifier">name</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span>{ <span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>) } }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scope_should_respond_to_own_methods_and_methods_of_the_proxy">
            
              <b>test_scope_should_respond_to_own_methods_and_methods_of_the_proxy</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scope_should_respond_to_own_methods_and_methods_of_the_proxy" name="method-i-test_scope_should_respond_to_own_methods_and_methods_of_the_proxy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scope_should_respond_to_own_methods_and_methods_of_the_proxy_source')" id="l_method-i-test_scope_should_respond_to_own_methods_and_methods_of_the_proxy_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L58" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scope_should_respond_to_own_methods_and_methods_of_the_proxy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scope_should_respond_to_own_methods_and_methods_of_the_proxy</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:count</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:length</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scope_with_STI">
            
              <b>test_scope_with_STI</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scope_with_STI" name="method-i-test_scope_with_STI" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scope_with_STI_source')" id="l_method-i-test_scope_with_STI_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L114" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scope_with_STI_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scope_with_STI</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>,<span class="ruby-constant">Post</span>.<span class="ruby-identifier">containing_the_letter_a</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>,<span class="ruby-constant">SpecialPost</span>.<span class="ruby-identifier">containing_the_letter_a</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scope_with_object">
            
              <b>test_scope_with_object</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scope_with_object" name="method-i-test_scope_with_object" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scope_with_object_source')" id="l_method-i-test_scope_with_object_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L101" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scope_with_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scope_with_object</span>
  <span class="ruby-identifier">objects</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">with_object</span>
  <span class="ruby-identifier">assert_operator</span> <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">length</span>, <span class="ruby-value">:&gt;</span>, <span class="ruby-number">0</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">all?</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:approved?</span>), <span class="ruby-string">&#39;all objects should be approved&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_are_lazy_loaded_if_table_still_does_not_exist">
            
              <b>test_scoped_are_lazy_loaded_if_table_still_does_not_exist</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scoped_are_lazy_loaded_if_table_still_does_not_exist" name="method-i-test_scoped_are_lazy_loaded_if_table_still_does_not_exist" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_are_lazy_loaded_if_table_still_does_not_exist_source')" id="l_method-i-test_scoped_are_lazy_loaded_if_table_still_does_not_exist_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L505" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_are_lazy_loaded_if_table_still_does_not_exist_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 505</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_are_lazy_loaded_if_table_still_does_not_exist</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;models/without_table&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_are_cached_on_associations">
            
              <b>test_scopes_are_cached_on_associations</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_are_cached_on_associations" name="method-i-test_scopes_are_cached_on_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Note: these next two are kinda odd because they are essentially just
testing that the query cache works as it should, but they are here for
legacy reasons as they was previously a separate cache on association
proxies, and these show that that is not necessary.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_are_cached_on_associations_source')" id="l_method-i-test_scopes_are_cached_on_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L463" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_are_cached_on_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 463</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_are_cached_on_associations</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)

  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">cache</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">containing_the_letter_e</span>.<span class="ruby-identifier">to_a</span> }
    <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">containing_the_letter_e</span>.<span class="ruby-identifier">to_a</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_are_composable">
            
              <b>test_scopes_are_composable</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_are_composable" name="method-i-test_scopes_are_composable" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_are_composable_source')" id="l_method-i-test_scopes_are_composable_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L77" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_are_composable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_are_composable</span>
  <span class="ruby-identifier">assert_equal</span>((<span class="ruby-identifier">approved</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>}).<span class="ruby-identifier">to_a</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>)
  <span class="ruby-identifier">assert_equal</span>((<span class="ruby-identifier">replied</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;replies_count &gt; 0&#39;</span>).<span class="ruby-identifier">to_a</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">approved</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">replied</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">approved</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">replied</span>).<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">approved</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">replied</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">replied</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_are_reset_on_association_reload">
            
              <b>test_scopes_are_reset_on_association_reload</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_are_reset_on_association_reload" name="method-i-test_scopes_are_reset_on_association_reload" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_are_reset_on_association_reload_source')" id="l_method-i-test_scopes_are_reset_on_association_reload_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L495" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_are_reset_on_association_reload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 495</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_are_reset_on_association_reload</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)

  [<span class="ruby-value">:destroy_all</span>, <span class="ruby-value">:reset</span>, <span class="ruby-value">:delete_all</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">before</span> = <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">containing_the_letter_e</span>
    <span class="ruby-identifier">post</span>.<span class="ruby-identifier">association</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">before</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">containing_the_letter_e</span>.<span class="ruby-identifier">object_id</span>, <span class="ruby-node">&quot;CollectionAssociation##{method} should reset the named scopes cache&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_batch_finders">
            
              <b>test_scopes_batch_finders</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_batch_finders" name="method-i-test_scopes_batch_finders" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_batch_finders_source')" id="l_method-i-test_scopes_batch_finders_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L419" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_batch_finders_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 419</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_batch_finders</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">5</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">find_each</span>(<span class="ruby-value">:batch_size</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">approved?</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">find_in_batches</span>(<span class="ruby-value">:batch_size</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">group</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">approved?</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_body_is_a_callable">
            
              <b>test_scopes_body_is_a_callable</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_body_is_a_callable" name="method-i-test_scopes_body_is_a_callable" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_body_is_a_callable_source')" id="l_method-i-test_scopes_body_is_a_callable_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L136" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_body_is_a_callable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_body_is_a_callable</span>
  <span class="ruby-identifier">e</span> = <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Post</span>).<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">scope</span> <span class="ruby-value">:containing_the_letter_z</span>, <span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;body LIKE &#39;%z%&#39;&quot;</span>) }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The scope body needs to be callable.&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_honor_current_scopes_from_when_defined">
            
              <b>test_scopes_honor_current_scopes_from_when_defined</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_honor_current_scopes_from_when_defined" name="method-i-test_scopes_honor_current_scopes_from_when_defined" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_honor_current_scopes_from_when_defined_source')" id="l_method-i-test_scopes_honor_current_scopes_from_when_defined_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L126" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_honor_current_scopes_from_when_defined_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_honor_current_scopes_from_when_defined</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Post</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">5</span>).<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">5</span>).<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">5</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">5</span>)
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">top</span>(<span class="ruby-number">5</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">top</span>(<span class="ruby-number">5</span>)
  <span class="ruby-comment"># Oracle sometimes sorts differently if WHERE condition is changed</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">5</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">top</span>(<span class="ruby-number">5</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">5</span>), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">top</span>(<span class="ruby-number">5</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_on_relations">
            
              <b>test_scopes_on_relations</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_on_relations" name="method-i-test_scopes_on_relations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_on_relations_source')" id="l_method-i-test_scopes_on_relations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L439" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_on_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 439</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_on_relations</span>
  <span class="ruby-comment"># Topic.replied</span>
  <span class="ruby-identifier">approved_topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>), <span class="ruby-identifier">approved_topics</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">replied_approved_topics</span> = <span class="ruby-identifier">approved_topics</span>.<span class="ruby-identifier">replied</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:third</span>), <span class="ruby-identifier">replied_approved_topics</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_to_get_newest">
            
              <b>test_scopes_to_get_newest</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_to_get_newest" name="method-i-test_scopes_to_get_newest" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_to_get_newest_source')" id="l_method-i-test_scopes_to_get_newest_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L487" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_to_get_newest_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 487</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_to_get_newest</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)
  <span class="ruby-identifier">old_last_comment</span> = <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">newest</span>
  <span class="ruby-identifier">new_comment</span> = <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;My new comment&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">newest</span>
  <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">old_last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">newest</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_with_arguments_are_cached_on_associations">
            
              <b>test_scopes_with_arguments_are_cached_on_associations</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_with_arguments_are_cached_on_associations" name="method-i-test_scopes_with_arguments_are_cached_on_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_with_arguments_are_cached_on_associations_source')" id="l_method-i-test_scopes_with_arguments_are_cached_on_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L472" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_with_arguments_are_cached_on_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 472</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_with_arguments_are_cached_on_associations</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)

  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">cache</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">one</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span> }
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">one</span>.<span class="ruby-identifier">size</span>

    <span class="ruby-identifier">two</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">to_a</span> }
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">two</span>.<span class="ruby-identifier">size</span>

    <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span> }
    <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">limit_by</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">to_a</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified">
            
              <b>test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified" name="method-i-test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified_source')" id="l_method-i-test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L64" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>}).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>}).<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scopes_with_string_name_can_be_composed">
            
              <b>test_scopes_with_string_name_can_be_composed</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_scopes_with_string_name_can_be_composed" name="method-i-test_scopes_with_string_name_can_be_composed" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scopes_with_string_name_can_be_composed_source')" id="l_method-i-test_scopes_with_string_name_can_be_composed_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L71" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scopes_with_string_name_can_be_composed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scopes_with_string_name_can_be_composed</span>
  <span class="ruby-comment"># NOTE that scopes defined with a string as a name worked on their own</span>
  <span class="ruby-comment"># but when called on another scope the other scope was completely replaced</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>.<span class="ruby-identifier">approved</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>.<span class="ruby-identifier">approved_as_string</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_build_new_on_top_of_scope">
            
              <b>test_should_build_new_on_top_of_scope</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_should_build_new_on_top_of_scope" name="method-i-test_should_build_new_on_top_of_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_build_new_on_top_of_scope_source')" id="l_method-i-test_should_build_new_on_top_of_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L256" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_build_new_on_top_of_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 256</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_build_new_on_top_of_scope</span>
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_build_on_top_of_chained_scopes">
            
              <b>test_should_build_on_top_of_chained_scopes</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_should_build_on_top_of_chained_scopes" name="method-i-test_should_build_on_top_of_chained_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_build_on_top_of_chained_scopes_source')" id="l_method-i-test_should_build_on_top_of_chained_scopes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L271" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_build_on_top_of_chained_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_build_on_top_of_chained_scopes</span>
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">by_lifo</span>.<span class="ruby-identifier">build</span>({})
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;lifo&#39;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_build_on_top_of_scope">
            
              <b>test_should_build_on_top_of_scope</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_should_build_on_top_of_scope" name="method-i-test_should_build_on_top_of_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_build_on_top_of_scope_source')" id="l_method-i-test_should_build_on_top_of_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L251" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_build_on_top_of_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_build_on_top_of_scope</span>
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">build</span>({})
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_create_on_top_of_scope">
            
              <b>test_should_create_on_top_of_scope</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_should_create_on_top_of_scope" name="method-i-test_should_create_on_top_of_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_create_on_top_of_scope_source')" id="l_method-i-test_should_create_on_top_of_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L261" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_create_on_top_of_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 261</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_create_on_top_of_scope</span>
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">create</span>({})
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_create_with_bang_on_top_of_scope">
            
              <b>test_should_create_with_bang_on_top_of_scope</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_should_create_with_bang_on_top_of_scope" name="method-i-test_should_create_with_bang_on_top_of_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_create_with_bang_on_top_of_scope_source')" id="l_method-i-test_should_create_with_bang_on_top_of_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L266" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_create_with_bang_on_top_of_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 266</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_create_with_bang_on_top_of_scope</span>
  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">create!</span>({})
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_not_duplicates_where_values">
            
              <b>test_should_not_duplicates_where_values</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_should_not_duplicates_where_values" name="method-i-test_should_not_duplicates_where_values" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_not_duplicates_where_values_source')" id="l_method-i-test_should_not_duplicates_where_values_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L382" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_not_duplicates_where_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 382</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_not_duplicates_where_values</span>
  <span class="ruby-identifier">where_values</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;1=1&quot;</span>).<span class="ruby-identifier">scope_with_lambda</span>.<span class="ruby-identifier">where_values</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;1=1&quot;</span>], <span class="ruby-identifier">where_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_use_where_in_query_for_scope">
            
              <b>test_should_use_where_in_query_for_scope</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_should_use_where_in_query_for_scope" name="method-i-test_should_use_where_in_query_for_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_use_where_in_query_for_scope_source')" id="l_method-i-test_should_use_where_in_query_for_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L363" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_use_where_in_query_for_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 363</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_use_where_in_query_for_scope</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Jamis&#39;</span>).<span class="ruby-identifier">to_set</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">jamises</span>).<span class="ruby-identifier">to_set</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_should_use_count_when_results_are_not_loaded">
            
              <b>test_size_should_use_count_when_results_are_not_loaded</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_size_should_use_count_when_results_are_not_loaded" name="method-i-test_size_should_use_count_when_results_are_not_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_should_use_count_when_results_are_not_loaded_source')" id="l_method-i-test_size_should_use_count_when_results_are_not_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L367" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_size_should_use_count_when_results_are_not_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_should_use_count_when_results_are_not_loaded</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_sql</span>(<span class="ruby-regexp">/COUNT/i</span>) { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_should_use_length_when_results_are_loaded">
            
              <b>test_size_should_use_length_when_results_are_loaded</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_size_should_use_length_when_results_are_loaded" name="method-i-test_size_should_use_length_when_results_are_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_should_use_length_when_results_are_loaded_source')" id="l_method-i-test_size_should_use_length_when_results_are_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L374" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_size_should_use_length_when_results_are_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 374</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_should_use_length_when_results_are_loaded</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
  <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># use loaded (no query)</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_spaces_in_scope_names">
            
              <b>test_spaces_in_scope_names</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_spaces_in_scope_names" name="method-i-test_spaces_in_scope_names" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p><a href="Method.html">Method</a> delegation for scope names which look like
/<a href=“a-zA-Z_”>A</a><a href=“!?”>w*</a>?z/ has been done by evaluating
a string with a plain def statement. For scope names which contain spaces
this approach doesn&#39;t work.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_spaces_in_scope_names_source')" id="l_method-i-test_spaces_in_scope_names_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L345" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_spaces_in_scope_names_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 345</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_spaces_in_scope_names</span>
  <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-string">&quot;topics&quot;</span>
    <span class="ruby-identifier">scope</span> <span class="ruby-value">:&quot;title containing space&quot;</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;title LIKE &#39;% %&#39;&quot;</span>) }
    <span class="ruby-identifier">scope</span> <span class="ruby-value">:approved</span>, <span class="ruby-operator">-</span><span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">where</span>(<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>) }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:&quot;title containing space&quot;</span>), <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;title LIKE &#39;% %&#39;&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:&quot;title containing space&quot;</span>), <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;title LIKE &#39;% %&#39;&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_subclass_merges_scopes_properly">
            
              <b>test_subclass_merges_scopes_properly</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_subclass_merges_scopes_properly" name="method-i-test_subclass_merges_scopes_properly" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_subclass_merges_scopes_properly_source')" id="l_method-i-test_subclass_merges_scopes_properly_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L520" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_subclass_merges_scopes_properly_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 520</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_subclass_merges_scopes_properly</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">SpecialComment</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">body</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;go crazy&#39;</span>).<span class="ruby-identifier">created</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_table_names_for_chaining_scopes_with_and_without_table_name_included">
            
              <b>test_table_names_for_chaining_scopes_with_and_without_table_name_included</b>()
            
            <a href="../classes/NamedScopingTest.html#method-i-test_table_names_for_chaining_scopes_with_and_without_table_name_included" name="method-i-test_table_names_for_chaining_scopes_with_and_without_table_name_included" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_table_names_for_chaining_scopes_with_and_without_table_name_included_source')" id="l_method-i-test_table_names_for_chaining_scopes_with_and_without_table_name_included_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/9ae210ba091bc9f54de08da4be1540f0a9782771/activerecord/test/cases/scoping/named_scoping_test.rb#L433" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_table_names_for_chaining_scopes_with_and_without_table_name_included_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/scoping/named_scoping_test.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_table_names_for_chaining_scopes_with_and_without_table_name_included</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">for_first_post</span>.<span class="ruby-identifier">for_first_author</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    