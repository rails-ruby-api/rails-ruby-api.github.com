<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>TestHelpers::Generation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Module</span> 
            TestHelpers::Generation 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/railties/test/isolation/abstract_unit_rb.html">railties/test/isolation/abstract_unit.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="Generation/Bukkit.html">TestHelpers::Generation::Bukkit</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-add_to_config">add_to_config</a>,
              </li>
            
              
              <li>
                <a href="#method-i-add_to_env_config">add_to_env_config</a>,
              </li>
            
              
              <li>
                <a href="#method-i-add_to_top_of_config">add_to_top_of_config</a>,
              </li>
            
              
              <li>
                <a href="#method-i-app_file">app_file</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-boot_rails">boot_rails</a>,
              </li>
            
              
              <li>
                <a href="#method-i-build_app">build_app</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-controller">controller</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-engine">engine</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-gsub_app_file">gsub_app_file</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-make_basic_app">make_basic_app</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-remove_file">remove_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_from_config">remove_from_config</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-script">script</a>,
              </li>
            
              
              <li>
                <a href="#method-i-simple_controller">simple_controller</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-teardown_app">teardown_app</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-use_frameworks">use_frameworks</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-add_to_config">
            
              <b>add_to_config</b>(str)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-add_to_config" name="method-i-add_to_config" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_to_config_source')" id="l_method-i-add_to_config_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L246" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-add_to_config_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">add_to_config</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">environment</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-node">&quot;#{app_path}/config/application.rb&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">environment</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/(\n\s*end\s*end\s*)\Z/</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{app_path}/config/application.rb&quot;</span>, <span class="ruby-string">&#39;w&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">$`</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;\n#{str}\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-node">$1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-add_to_env_config">
            
              <b>add_to_env_config</b>(env, str)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-add_to_env_config" name="method-i-add_to_env_config" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_to_env_config_source')" id="l_method-i-add_to_env_config_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L255" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-add_to_env_config_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 255</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">add_to_env_config</span>(<span class="ruby-identifier">env</span>, <span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">environment</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-node">&quot;#{app_path}/config/environments/#{env}.rb&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">environment</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/(\n\s*end\s*)\Z/</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{app_path}/config/environments/#{env}.rb&quot;</span>, <span class="ruby-string">&#39;w&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">$`</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;\n#{str}\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-node">$1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-add_to_top_of_config">
            
              <b>add_to_top_of_config</b>(str)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-add_to_top_of_config" name="method-i-add_to_top_of_config" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_to_top_of_config_source')" id="l_method-i-add_to_top_of_config_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L237" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-add_to_top_of_config_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">add_to_top_of_config</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">environment</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-node">&quot;#{app_path}/config/application.rb&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">environment</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/(Rails::Application\s*)/</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{app_path}/config/application.rb&quot;</span>, <span class="ruby-string">&#39;w&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">$`</span> <span class="ruby-operator">+</span> <span class="ruby-node">$1</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;\n#{str}\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-node">$&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-app_file">
            
              <b>app_file</b>(path, contents, mode = &#39;w&#39;)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-app_file" name="method-i-app_file" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-app_file_source')" id="l_method-i-app_file_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L271" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-app_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">app_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">contents</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-string">&#39;w&#39;</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-node">&quot;#{app_path}/#{path}&quot;</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{app_path}/#{path}&quot;</span>, <span class="ruby-identifier">mode</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">contents</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-boot_rails">
            
              <b>boot_rails</b>()
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-boot_rails" name="method-i-boot_rails" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-boot_rails_source')" id="l_method-i-boot_rails_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L302" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-boot_rails_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">boot_rails</span>
  <span class="ruby-identifier">require</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;../../../../load_paths&#39;</span>, <span class="ruby-keyword">__FILE__</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-build_app">
            
              <b>build_app</b>(options = {})
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-build_app" name="method-i-build_app" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p><a href="../Build.html">Build</a> an application by invoking the generator
and going through the whole stack.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-build_app_source')" id="l_method-i-build_app_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L95" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-build_app_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">build_app</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-ivar">@prev_rails_env</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;RAILS_ENV&#39;</span>]
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;RAILS_ENV&#39;</span>]       =   <span class="ruby-string">&quot;development&quot;</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;SECRET_KEY_BASE&#39;</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">SecureRandom</span>.<span class="ruby-identifier">hex</span>(<span class="ruby-number">16</span>)

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">app_path</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span>(<span class="ruby-identifier">app_template_path</span>, <span class="ruby-identifier">app_path</span>)

  <span class="ruby-comment"># Delete the initializers unless requested</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:initializers</span>]
    <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{app_path}/config/initializers/*.rb&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">initializer</span><span class="ruby-operator">|</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">initializer</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">gemfile_path</span> = <span class="ruby-node">&quot;#{app_path}/Gemfile&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:gemfile</span>].<span class="ruby-identifier">blank?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">gemfile_path</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">gemfile_path</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">routes</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-node">&quot;#{app_path}/config/routes.rb&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">routes</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/(\n\s*end\s*)\Z/</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{app_path}/config/routes.rb&quot;</span>, <span class="ruby-string">&#39;w&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">$`</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\nmatch &#39;:controller(/:action(/:id))(.:format)&#39;, via: :all\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-node">$1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{app_path}/config/database.yml&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value">&lt;&lt;-YAML
    default: &amp;default
      adapter: sqlite3
      pool: 5
      timeout: 5000
    development:
      &lt;&lt;: *default
      database: db/development.sqlite3
    test:
      &lt;&lt;: *default
      database: db/test.sqlite3
    production:
      &lt;&lt;: *default
      database: db/production.sqlite3
    YAML</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">add_to_config</span> <span class="ruby-value">&lt;&lt;-RUBY
    config.eager_load = false
    config.session_store :cookie_store, key: &quot;_myapp_session&quot;
    config.active_support.deprecation = :log
    config.active_support.test_order = :random
    config.action_controller.allow_forgery_protection = false
    config.log_level = :info
  RUBY</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-controller">
            
              <b>controller</b>(name, contents)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-controller" name="method-i-controller" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-controller_source')" id="l_method-i-controller_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L288" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-controller_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 288</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">contents</span>)
  <span class="ruby-identifier">app_file</span>(<span class="ruby-node">&quot;app/controllers/#{name}_controller.rb&quot;</span>, <span class="ruby-identifier">contents</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-engine">
            
              <b>engine</b>(name)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-engine" name="method-i-engine" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-engine_source')" id="l_method-i-engine_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L214" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-engine_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">engine</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">dir</span> = <span class="ruby-node">&quot;#{app_path}/random/#{name}&quot;</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">dir</span>)

  <span class="ruby-identifier">app</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-node">&quot;#{app_path}/config/application.rb&quot;</span>)
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-number">2</span>, <span class="ruby-node">&quot;$:.unshift(\&quot;#{dir}/lib\&quot;)&quot;</span>)
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-number">3</span>, <span class="ruby-node">&quot;require #{name.inspect}&quot;</span>)

  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{app_path}/config/application.rb&quot;</span>, <span class="ruby-string">&#39;r+&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">app</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Bukkit</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dir</span>).<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">bukkit</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">bukkit</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-gsub_app_file">
            
              <b>gsub_app_file</b>(path, regexp, *args, &amp;block)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-gsub_app_file" name="method-i-gsub_app_file" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-gsub_app_file_source')" id="l_method-i-gsub_app_file_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L278" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-gsub_app_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">gsub_app_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">regexp</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-node">&quot;#{app_path}/#{path}&quot;</span>
  <span class="ruby-identifier">content</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">regexp</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&#39;wb&#39;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">content</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-make_basic_app">
            
              <b>make_basic_app</b>()
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-make_basic_app" name="method-i-make_basic_app" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Make a very basic app, without creating the whole directory structure. This
is faster and simpler than the method above.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-make_basic_app_source')" id="l_method-i-make_basic_app_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L156" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-make_basic_app_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">make_basic_app</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;rails&quot;</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;action_controller/railtie&quot;</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;action_view/railtie&quot;</span>

  <span class="ruby-identifier">app</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>)
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">eager_load</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">secrets</span>.<span class="ruby-identifier">secret_key_base</span> = <span class="ruby-string">&quot;3b7cd727ee24e8444053437c36cc66c4&quot;</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">session_store</span> <span class="ruby-value">:cookie_store</span>, <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;_myapp_session&quot;</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">active_support</span>.<span class="ruby-identifier">deprecation</span> = <span class="ruby-value">:log</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">active_support</span>.<span class="ruby-identifier">test_order</span> = <span class="ruby-value">:random</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">log_level</span> = <span class="ruby-value">:info</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">app</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">initialize!</span>

  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;omg#index&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rack/test&#39;</span>
  <span class="ruby-identifier">extend</span> <span class="ruby-operator">::</span><span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">Methods</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_file">
            
              <b>remove_file</b>(path)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-remove_file" name="method-i-remove_file" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_file_source')" id="l_method-i-remove_file_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L284" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-remove_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 284</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_file</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-node">&quot;#{app_path}/#{path}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_from_config">
            
              <b>remove_from_config</b>(str)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-remove_from_config" name="method-i-remove_from_config" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_from_config_source')" id="l_method-i-remove_from_config_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L264" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-remove_from_config_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_from_config</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">file</span> = <span class="ruby-node">&quot;#{app_path}/config/application.rb&quot;</span>
  <span class="ruby-identifier">contents</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">file</span>)
  <span class="ruby-identifier">contents</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/#{str}/</span>, <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">file</span>, <span class="ruby-string">&quot;w+&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">contents</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-script">
            
              <b>script</b>(script)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-script" name="method-i-script" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-script_source')" id="l_method-i-script_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L231" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-script_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">script</span>(<span class="ruby-identifier">script</span>)
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">app_path</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-node">%x`#{Gem.ruby} #{app_path}/bin/rails #{script}`</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-simple_controller">
            
              <b>simple_controller</b>()
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-simple_controller" name="method-i-simple_controller" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-simple_controller_source')" id="l_method-i-simple_controller_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L180" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-simple_controller_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">simple_controller</span>
  <span class="ruby-identifier">controller</span> <span class="ruby-value">:foo</span>, <span class="ruby-value">&lt;&lt;-RUBY
    class FooController &lt; ApplicationController
      def index
        render text: &quot;foo&quot;
      end
    end
  RUBY</span>

  <span class="ruby-identifier">app_file</span> <span class="ruby-string">&#39;config/routes.rb&#39;</span>, <span class="ruby-value">&lt;&lt;-RUBY
    Rails.application.routes.draw do
      get &#39;:controller(/:action)&#39;
    end
  RUBY</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-teardown_app">
            
              <b>teardown_app</b>()
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-teardown_app" name="method-i-teardown_app" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-teardown_app_source')" id="l_method-i-teardown_app_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L150" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-teardown_app_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">teardown_app</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;RAILS_ENV&#39;</span>] = <span class="ruby-ivar">@prev_rails_env</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@prev_rails_env</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-use_frameworks">
            
              <b>use_frameworks</b>(arr)
            
            <a href="../../classes/TestHelpers/Generation.html#method-i-use_frameworks" name="method-i-use_frameworks" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-use_frameworks_source')" id="l_method-i-use_frameworks_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/734930f628d087e8668b5be179913d0fdd1b53db/railties/test/isolation/abstract_unit.rb#L292" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-use_frameworks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/test/isolation/abstract_unit.rb, line 292</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">use_frameworks</span>(<span class="ruby-identifier">arr</span>)
  <span class="ruby-identifier">to_remove</span> = [<span class="ruby-value">:actionmailer</span>, <span class="ruby-value">:activerecord</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">arr</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">to_remove</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:activerecord</span>)
    <span class="ruby-identifier">remove_from_config</span> <span class="ruby-string">&#39;config.active_record.*&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">$:</span>.<span class="ruby-identifier">reject!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-node">%r&#39;/(#{to_remove.join(&#39;|&#39;)})/&#39;</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    