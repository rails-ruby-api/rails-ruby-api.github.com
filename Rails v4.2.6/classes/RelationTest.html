<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RelationTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            RelationTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activerecord/test/cases/relations_test_rb.html">activerecord/test/cases/relations_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="RelationTest/Mary.html">RelationTest::Mary</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-author">author</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-respond_to-3F">respond_to?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_anonymous_extension">test_anonymous_extension</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_any">test_any</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_having_references">test_automatically_added_having_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_order_references">test_automatically_added_order_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_reorder_references">test_automatically_added_reorder_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_where_not_references">test_automatically_added_where_not_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_automatically_added_where_references">test_automatically_added_where_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_bind_values">test_bind_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors">test_blank_like_arguments_to_query_methods_dont_raise_errors</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build">test_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count">test_count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_complex_chained_relations">test_count_complex_chained_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_explicit_columns">test_count_explicit_columns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_on_association_relation">test_count_on_association_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count_with_distinct">test_count_with_distinct</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create">test_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_bang">test_create_bang</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_order_with_scope_order">test_default_scope_order_with_scope_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_hash">test_default_scope_with_conditions_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scope_with_conditions_string">test_default_scope_with_conditions_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_default_scoping_finder_methods">test_default_scoping_finder_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all">test_delete_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all_loaded">test_delete_all_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_delete_all_with_unpermitted_relation_raises_error">test_delete_all_with_unpermitted_relation_raises_error</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_all">test_destroy_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_disable_implicit_join_references_is_deprecated">test_disable_implicit_join_references_is_deprecated</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_distinct">test_distinct</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_do_not_double_quote_string_id">test_do_not_double_quote_string_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_do_not_double_quote_string_id_with_array">test_do_not_double_quote_string_id_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_doesnt_add_having_values_if_options_are_blank">test_doesnt_add_having_values_if_options_are_blank</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_by_attributes">test_dynamic_find_by_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_by_attributes_bang">test_dynamic_find_by_attributes_bang</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_finder">test_dynamic_finder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_eager_association_loading_of_stis_with_multiple_references">test_eager_association_loading_of_stis_with_multiple_references</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty">test_empty</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_complex_chained_relations">test_empty_complex_chained_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_empty_with_zero_limit">test_empty_with_zero_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_except">test_except</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_exists">test_exists</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_exists_uses_existing_scope">test_exists_uses_existing_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_explicit_create_scope">test_explicit_create_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_twice_should_or_the_relation">test_find_all_using_where_twice_should_or_the_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation">test_find_all_using_where_with_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_and_alternate_primary_key">test_find_all_using_where_with_relation_and_alternate_primary_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_does_not_alter_select_values">test_find_all_using_where_with_relation_does_not_alter_select_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_with_bound_values">test_find_all_using_where_with_relation_with_bound_values</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_with_joins">test_find_all_using_where_with_relation_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery">test_find_all_using_where_with_relation_with_select_to_build_subquery</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_with_join">test_find_all_with_join</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_all_with_multiple_should_use_and">test_find_all_with_multiple_should_use_and</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_by_classname">test_find_by_classname</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_by_id_with_list_of_ar">test_find_by_id_with_list_of_ar</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_id">test_find_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_ids">test_find_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_empty_array">test_find_in_empty_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_on_hash_conditions">test_find_on_hash_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_create_by">test_find_or_create_by</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_create_by-21">test_find_or_create_by!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_create_by_with_create_with">test_find_or_create_by_with_create_with</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_or_initialize_by">test_find_or_initialize_by</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_included_associations">test_find_with_included_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_list_of_ar">test_find_with_list_of_ar</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_preloaded_associations">test_find_with_preloaded_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_readonly_option">test_find_with_readonly_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_last_with_arel_order">test_finding_last_with_arel_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_arel_order">test_finding_with_arel_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_asc_order_with_string">test_finding_with_asc_order_with_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_assoc_order">test_finding_with_assoc_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_assoc_order_by_aliased_attributes">test_finding_with_assoc_order_by_aliased_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_assoc_reorder_by_aliased_attributes">test_finding_with_assoc_reorder_by_aliased_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_complex_order">test_finding_with_complex_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_complex_order_and_limit">test_finding_with_complex_order_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_conditions">test_finding_with_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_cross_table_order_and_limit">test_finding_with_cross_table_order_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_desc_order_with_string">test_finding_with_desc_order_with_string</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_group">test_finding_with_group</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_hash_conditions_on_joined_table">test_finding_with_hash_conditions_on_joined_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order">test_finding_with_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_and_take">test_finding_with_order_and_take</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_by_aliased_attributes">test_finding_with_order_by_aliased_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_concatenated">test_finding_with_order_concatenated</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_order_limit_and_offset">test_finding_with_order_limit_and_offset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_reorder">test_finding_with_reorder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_reorder_by_aliased_attributes">test_finding_with_reorder_by_aliased_attributes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_reverted_assoc_order">test_finding_with_reverted_assoc_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_subquery">test_finding_with_subquery</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_subquery_with_binds">test_finding_with_subquery_with_binds</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_finding_with_subquery_without_select_does_not_change_the_select">test_finding_with_subquery_without_select_does_not_change_the_select</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create">test_first_or_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_invalid_block">test_first_or_create_bang_with_invalid_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_invalid_options">test_first_or_create_bang_with_invalid_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_no_parameters">test_first_or_create_bang_with_no_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_valid_block">test_first_or_create_bang_with_valid_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_bang_with_valid_options">test_first_or_create_bang_with_valid_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_array">test_first_or_create_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_block">test_first_or_create_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_invalid_array">test_first_or_create_with_invalid_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_no_parameters">test_first_or_create_with_no_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_create_with_valid_array">test_first_or_create_with_valid_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_initialize">test_first_or_initialize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_initialize_with_block">test_first_or_initialize_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_first_or_initialize_with_no_parameters">test_first_or_initialize_with_no_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_group_with_subquery_in_from_does_not_use_original_table_name">test_group_with_subquery_in_from_does_not_use_original_table_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_grouping_by_column_with_reserved_name">test_grouping_by_column_with_reserved_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_includes_with_select">test_includes_with_select</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_intersection_with_array">test_intersection_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_joins_with_nil_argument">test_joins_with_nil_argument</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_joins_with_string_array">test_joins_with_string_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_last">test_last</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loaded_all">test_loaded_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loaded_first">test_loaded_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loading_with_one_association">test_loading_with_one_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_loading_with_one_association_with_non_preload">test_loading_with_one_association_with_non_preload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many">test_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_many_with_limits">test_many_with_limits</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_merging_keeps_lhs_bind_parameters">test_merging_keeps_lhs_bind_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_merging_removes_rhs_bind_parameters">test_merging_removes_rhs_bind_parameters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_merging_reorders_bind_params">test_merging_reorders_bind_params</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multi_where_ands_queries">test_multi_where_ands_queries</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multiple_selects">test_multiple_selects</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_multivalue_where">test_multivalue_where</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_named_extension">test_named_extension</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_no_arguments_to_query_methods_raise_errors">test_no_arguments_to_query_methods_raise_errors</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none">test_none</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none_chainable">test_none_chainable</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none_chainable_to_existing_scope_extension_method">test_none_chainable_to_existing_scope_extension_method</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_none_chained_to_methods_firing_queries_straight_to_db">test_none_chained_to_methods_firing_queries_straight_to_db</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_average">test_null_relation_average</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_calculations_methods">test_null_relation_calculations_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_content_size_methods">test_null_relation_content_size_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_count">test_null_relation_count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_in_where_condition">test_null_relation_in_where_condition</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_maximum">test_null_relation_maximum</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_metadata_methods">test_null_relation_metadata_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_minimum">test_null_relation_minimum</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_size">test_null_relation_size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_sum">test_null_relation_sum</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_null_relation_where_values_hash">test_null_relation_where_values_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_only">test_only</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_by_relation_attribute">test_order_by_relation_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_using_scoping">test_order_using_scoping</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_with_hash_and_symbol_generates_the_same_sql">test_order_with_hash_and_symbol_generates_the_same_sql</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_order_with_reorder_nil_removes_the_order">test_order_with_reorder_nil_removes_the_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_ordering_with_extra_spaces">test_ordering_with_extra_spaces</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_preload_applies_to_all_chained_preloaded_scopes">test_preload_applies_to_all_chained_preloaded_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_preloading_with_associations_and_merges">test_preloading_with_associations_and_merges</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_preloading_with_associations_default_scopes_and_merges">test_preloading_with_associations_default_scopes_and_merges</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_presence">test_presence</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_primary_key">test_primary_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_raising_exception_on_invalid_hash_params">test_raising_exception_on_invalid_hash_params</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included">test_references_doesnt_trigger_eager_loading_if_reference_not_included</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_references_triggers_eager_loading">test_references_triggers_eager_loading</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_relation_join_method">test_relation_join_method</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reload">test_reload</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_class_methods_and_scopes">test_respond_to_class_methods_and_scopes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_delegates_to_relation">test_respond_to_delegates_to_relation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_respond_to_dynamic_finders">test_respond_to_dynamic_finders</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_reverse_order_with_reorder_nil_removes_the_order">test_reverse_order_with_reorder_nil_removes_the_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped">test_scoped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_all">test_scoped_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_build">test_scoped_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_first">test_scoped_first</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_responds_to_delegated_methods">test_scoped_responds_to_delegated_methods</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_argument_error">test_select_argument_error</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_takes_a_variable_list_of_args">test_select_takes_a_variable_list_of_args</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_takes_an_aliased_attribute">test_select_takes_an_aliased_attribute</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_with_aggregates">test_select_with_aggregates</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_with_block">test_select_with_block</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_select_with_subquery_in_from_does_not_use_original_table_name">test_select_with_subquery_in_from_does_not_use_original_table_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size">test_size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_with_limit">test_size_with_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_size_with_zero_limit">test_size_with_zero_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_support_upper_and_lower_case_directions">test_support_upper_and_lower_case_directions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_json">test_to_json</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_sql_on_eager_join">test_to_sql_on_eager_join</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_sql_on_scoped_proxy">test_to_sql_on_scoped_proxy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_xml">test_to_xml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_to_yaml">test_to_yaml</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_two_scopes_with_includes_should_not_drop_any_include">test_two_scopes_with_includes_should_not_drop_any_include</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_typecasting_where_with_array">test_typecasting_where_with_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unscope_removes_binds">test_unscope_removes_binds</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_unscoped_block_style">test_unscoped_block_style</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_blank_argument">test_update_all_with_blank_argument</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins">test_update_all_with_joins</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_limit">test_update_all_with_joins_and_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_limit_and_order">test_update_all_with_joins_and_limit_and_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_offset">test_update_all_with_joins_and_offset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_joins_and_offset_and_order">test_update_all_with_joins_and_offset_and_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_all_with_scope">test_update_all_with_scope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_where_with_ar_object">test_where_with_ar_object</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-author">
            
              <b>author</b>()
            
            <a href="../classes/RelationTest.html#method-i-author" name="method-i-author" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-author_source')" id="l_method-i-author_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1388" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-author_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1388</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">author</span>
  <span class="ruby-string">&#39;lifo&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-respond_to-3F">
            
              <b>respond_to?</b>(method, access = false)
            
            <a href="../classes/RelationTest.html#method-i-respond_to-3F" name="method-i-respond_to-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-respond_to-3F_source')" id="l_method-i-respond_to-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L501" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-respond_to-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 501</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">respond_to?</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">responds</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_anonymous_extension">
            
              <b>test_anonymous_extension</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_anonymous_extension" name="method-i-test_anonymous_extension" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_anonymous_extension_source')" id="l_method-i-test_anonymous_extension_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1386" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_anonymous_extension_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1386</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_anonymous_extension</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">extending</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">author</span>
      <span class="ruby-string">&#39;lifo&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">author</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_any">
            
              <b>test_any</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_any" name="method-i-test_any" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_any_source')" id="l_method-i-test_any_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1122" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_any_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1122</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_any</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-comment"># This test was failing when run on its own (as opposed to running the entire suite).</span>
  <span class="ruby-comment"># The second line in the assert_queries block was causing visit_Arel_Attributes_Attribute</span>
  <span class="ruby-comment"># in Arel::Visitors::ToSql to trigger a SHOW TABLES query. Running that line here causes</span>
  <span class="ruby-comment"># the SHOW TABLES result to be cached so we don&#39;t have to do it again in the block.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># This is obviously a rubbish fix but it&#39;s the best I can come up with for now...</span>
  <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">any?</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> <span class="ruby-comment"># Uses COUNT()</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>).<span class="ruby-identifier">any?</span>

    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span> }
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_having_references">
            
              <b>test_automatically_added_having_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_having_references" name="method-i-test_automatically_added_having_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_having_references_source')" id="l_method-i-test_automatically_added_having_references_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1551" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_automatically_added_having_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1551</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_having_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">having</span>(<span class="ruby-value">:comments</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Bla&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">having</span>(<span class="ruby-string">&#39;comments.body&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Bla&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_order_references">
            
              <b>test_automatically_added_order_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_order_references" name="method-i-test_automatically_added_order_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_order_references_source')" id="l_method-i-test_automatically_added_order_references_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1559" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_automatically_added_order_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1559</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_order_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body&#39;</span>, <span class="ruby-string">&#39;yaks.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>, <span class="ruby-string">&#39;yaks&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-comment"># Don&#39;t infer yaks, let&#39;s not go down that road again...</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body, yaks.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body asc&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;foo(comments.body)&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_reorder_references">
            
              <b>test_automatically_added_reorder_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_reorder_references" name="method-i-test_automatically_added_reorder_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_reorder_references_source')" id="l_method-i-test_automatically_added_reorder_references_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1577" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_automatically_added_reorder_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1577</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_reorder_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;comments.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(comments)</span>, <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;comments.body&#39;</span>, <span class="ruby-string">&#39;yaks.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(comments yaks)</span>, <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-comment"># Don&#39;t infer yaks, let&#39;s not go down that road again...</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;comments.body, yaks.body&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(comments)</span>, <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;comments.body asc&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(comments)</span>, <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;foo(comments.body)&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_where_not_references">
            
              <b>test_automatically_added_where_not_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_where_not_references" name="method-i-test_automatically_added_where_not_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_where_not_references_source')" id="l_method-i-test_automatically_added_where_not_references_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1543" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_automatically_added_where_not_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1543</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_where_not_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>.<span class="ruby-identifier">not</span>(<span class="ruby-identifier">comments</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">body</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Bla&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>.<span class="ruby-identifier">not</span>(<span class="ruby-string">&#39;comments.body&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Bla&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_automatically_added_where_references">
            
              <b>test_automatically_added_where_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_automatically_added_where_references" name="method-i-test_automatically_added_where_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_automatically_added_where_references_source')" id="l_method-i-test_automatically_added_where_references_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1535" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_automatically_added_where_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1535</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_automatically_added_where_references</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Bla&quot;</span> })
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;comments.body&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Bla&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments&#39;</span>], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_bind_values">
            
              <b>test_bind_values</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_bind_values" name="method-i-test_bind_values" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_bind_values_source')" id="l_method-i-test_bind_values_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L38" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_bind_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 38</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_bind_values</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind_values</span>

  <span class="ruby-identifier">relation2</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind</span> <span class="ruby-string">&#39;foo&#39;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ foo }</span>, <span class="ruby-identifier">relation2</span>.<span class="ruby-identifier">bind_values</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors">
            
              <b>test_blank_like_arguments_to_query_methods_dont_raise_errors</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors" name="method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors_source')" id="l_method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L482" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_blank_like_arguments_to_query_methods_dont_raise_errors_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 482</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_blank_like_arguments_to_query_methods_dont_raise_errors</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">references</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">includes</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">preload</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">group</span>([]) }
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">reorder</span>([]) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build">
            
              <b>test_build</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_build" name="method-i-test_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_source')" id="l_method-i-test_build_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1163" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1163</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Post</span>, <span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count">
            
              <b>test_count</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count" name="method-i-test_count" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_source')" id="l_method-i-test_count_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L991" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_count_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 991</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:all</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:id</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;comments_count &gt; 1&#39;</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>).<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_complex_chained_relations">
            
              <b>test_count_complex_chained_relations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count_complex_chained_relations" name="method-i-test_count_complex_chained_relations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_complex_chained_relations_source')" id="l_method-i-test_count_complex_chained_relations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1089" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_count_complex_chained_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1089</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_complex_chained_relations</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id is not null&#39;</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;author_id&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;comments_count &gt; 0&quot;</span>)

  <span class="ruby-identifier">expected</span> = { <span class="ruby-number">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">2</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_explicit_columns">
            
              <b>test_count_explicit_columns</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count_explicit_columns" name="method-i-test_count_explicit_columns" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_explicit_columns_source')" id="l_method-i-test_count_explicit_columns_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1031" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_count_explicit_columns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1031</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_explicit_columns</span>
  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">0</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id is not null&#39;</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">count</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">uniq</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id is not null&#39;</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">count</span>(<span class="ruby-string">&#39;id&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">&#39;comments_count&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_on_association_relation">
            
              <b>test_count_on_association_relation</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count_on_association_relation" name="method-i-test_count_on_association_relation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_on_association_relation_source')" id="l_method-i-test_count_on_association_relation_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1002" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_count_on_association_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1002</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_on_association_relation</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">another_author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">author_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">id</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">author_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">size</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">author_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">another_author</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">author_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">another_author</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count_with_distinct">
            
              <b>test_count_with_distinct</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_count_with_distinct" name="method-i-test_count_with_distinct" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_with_distinct_source')" id="l_method-i-test_count_with_distinct_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1013" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_count_with_distinct_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1013</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count_with_distinct</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">false</span>).<span class="ruby-identifier">count</span>(<span class="ruby-value">:comments_count</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:comments_count</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">false</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:comments_count</span>).<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create">
            
              <b>test_create</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_create" name="method-i-test_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_source')" id="l_method-i-test_create_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1178" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1178</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create</span>
  <span class="ruby-identifier">birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">sparrow</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">sparrow</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">sparrow</span>.<span class="ruby-identifier">persisted?</span>

  <span class="ruby-identifier">hen</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hen&#39;</span>).<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hen&#39;</span>, <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_bang">
            
              <b>test_create_bang</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_create_bang" name="method-i-test_create_bang" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_bang_source')" id="l_method-i-test_create_bang_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1190" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_create_bang_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1190</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_bang</span>
  <span class="ruby-identifier">birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">create!</span> }

  <span class="ruby-identifier">hen</span> = <span class="ruby-identifier">birds</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hen&#39;</span>).<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">hen</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hen&#39;</span>, <span class="ruby-identifier">hen</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_order_with_scope_order">
            
              <b>test_default_scope_order_with_scope_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scope_order_with_scope_order" name="method-i-test_default_scope_order_with_scope_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_order_with_scope_order_source')" id="l_method-i-test_default_scope_order_with_scope_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1407" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_default_scope_order_with_scope_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1407</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_order_with_scope_order</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;zyke&#39;</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;zyke&#39;</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_hash">
            
              <b>test_default_scope_with_conditions_hash</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scope_with_conditions_hash" name="method-i-test_default_scope_with_conditions_hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_hash_source')" id="l_method-i-test_default_scope_with_conditions_hash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L608" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 608</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_hash</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Jamis&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Jamis&#39;</span>, <span class="ruby-constant">DeveloperCalledJamis</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scope_with_conditions_string">
            
              <b>test_default_scope_with_conditions_string</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scope_with_conditions_string" name="method-i-test_default_scope_with_conditions_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scope_with_conditions_string_source')" id="l_method-i-test_default_scope_with_conditions_string_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L603" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_default_scope_with_conditions_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 603</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scope_with_conditions_string</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">create!</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_default_scoping_finder_methods">
            
              <b>test_default_scoping_finder_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_default_scoping_finder_methods" name="method-i-test_default_scoping_finder_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_default_scoping_finder_methods_source')" id="l_method-i-test_default_scoping_finder_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L613" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_default_scoping_finder_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 613</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_default_scoping_finder_methods</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-constant">DeveloperCalledDavid</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all">
            
              <b>test_delete_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_delete_all" name="method-i-test_delete_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_source')" id="l_method-i-test_delete_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L934" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_delete_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 934</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">&#39;Author.count&#39;</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">delete_all</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all_loaded">
            
              <b>test_delete_all_loaded</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_delete_all_loaded" name="method-i-test_delete_all_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_loaded_source')" id="l_method-i-test_delete_all_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L941" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_delete_all_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 941</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all_loaded</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)

  <span class="ruby-comment"># Force load</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">&#39;Author.count&#39;</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">delete_all</span> }

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_delete_all_with_unpermitted_relation_raises_error">
            
              <b>test_delete_all_with_unpermitted_relation_raises_error</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_delete_all_with_unpermitted_relation_raises_error" name="method-i-test_delete_all_with_unpermitted_relation_raises_error" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_delete_all_with_unpermitted_relation_raises_error_source')" id="l_method-i-test_delete_all_with_unpermitted_relation_raises_error_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L954" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_delete_all_with_unpermitted_relation_raises_error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 954</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_delete_all_with_unpermitted_relation_raises_error</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ActiveRecordError</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">10</span>).<span class="ruby-identifier">delete_all</span> }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ActiveRecordError</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">delete_all</span> }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ActiveRecordError</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:name</span>).<span class="ruby-identifier">delete_all</span> }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ActiveRecordError</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">having</span>(<span class="ruby-string">&#39;SUM(id) &lt; 3&#39;</span>).<span class="ruby-identifier">delete_all</span> }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ActiveRecordError</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">10</span>).<span class="ruby-identifier">delete_all</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_all">
            
              <b>test_destroy_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_destroy_all" name="method-i-test_destroy_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_all_source')" id="l_method-i-test_destroy_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L921" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_destroy_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 921</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_all</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)

  <span class="ruby-comment"># Force load</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_difference</span>(<span class="ruby-string">&#39;Author.count&#39;</span>, <span class="ruby-number">-1</span>) { <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">destroy_all</span> }

  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_disable_implicit_join_references_is_deprecated">
            
              <b>test_disable_implicit_join_references_is_deprecated</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_disable_implicit_join_references_is_deprecated" name="method-i-test_disable_implicit_join_references_is_deprecated" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_disable_implicit_join_references_is_deprecated_source')" id="l_method-i-test_disable_implicit_join_references_is_deprecated_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1441" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_disable_implicit_join_references_is_deprecated_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1441</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_disable_implicit_join_references_is_deprecated</span>
  <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">disable_implicit_join_references</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_distinct">
            
              <b>test_distinct</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_distinct" name="method-i-test_distinct" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_distinct_source')" id="l_method-i-test_distinct_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1493" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_distinct_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1493</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_distinct</span>
  <span class="ruby-identifier">tag1</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Foo&#39;</span>)
  <span class="ruby-identifier">tag2</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Foo&#39;</span>)

  <span class="ruby-identifier">query</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:name</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">tag1</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">tag2</span>.<span class="ruby-identifier">id</span>])

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>, <span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_sql</span>(<span class="ruby-regexp">/DISTINCT/</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">distinct</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_sql</span>(<span class="ruby-regexp">/DISTINCT/</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">uniq</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>, <span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">false</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Foo&#39;</span>, <span class="ruby-string">&#39;Foo&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">uniq</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">uniq</span>(<span class="ruby-keyword">false</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_do_not_double_quote_string_id">
            
              <b>test_do_not_double_quote_string_id</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_do_not_double_quote_string_id" name="method-i-test_do_not_double_quote_string_id" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_do_not_double_quote_string_id_source')" id="l_method-i-test_do_not_double_quote_string_id_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L26" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_do_not_double_quote_string_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_do_not_double_quote_string_id</span>
  <span class="ruby-identifier">van</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">van</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">van</span>.<span class="ruby-identifier">id</span>, <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">van</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">minivan_id</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_do_not_double_quote_string_id_with_array">
            
              <b>test_do_not_double_quote_string_id_with_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_do_not_double_quote_string_id_with_array" name="method-i-test_do_not_double_quote_string_id_with_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_do_not_double_quote_string_id_with_array_source')" id="l_method-i-test_do_not_double_quote_string_id_with_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L32" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_do_not_double_quote_string_id_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_do_not_double_quote_string_id_with_array</span>
  <span class="ruby-identifier">van</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">van</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">van</span>, <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">van</span>]).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_doesnt_add_having_values_if_options_are_blank">
            
              <b>test_doesnt_add_having_values_if_options_are_blank</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_doesnt_add_having_values_if_options_are_blank" name="method-i-test_doesnt_add_having_values_if_options_are_blank" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_doesnt_add_having_values_if_options_are_blank_source')" id="l_method-i-test_doesnt_add_having_values_if_options_are_blank_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1512" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_doesnt_add_having_values_if_options_are_blank_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1512</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_doesnt_add_having_values_if_options_are_blank</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">having</span>(<span class="ruby-string">&#39;&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">having_values</span>

  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">having</span>([])
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">having_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_by_attributes">
            
              <b>test_dynamic_find_by_attributes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_dynamic_find_by_attributes" name="method-i-test_dynamic_find_by_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_by_attributes_source')" id="l_method-i-test_dynamic_find_by_attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L706" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_find_by_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 706</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_by_attributes</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">expected_taggings</span> = <span class="ruby-identifier">taggings</span>(<span class="ruby-value">:welcome_general</span>, <span class="ruby-value">:thinking_general</span>)

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected_taggings</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">distinct</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span> }
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected_taggings</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_by_id_and_name</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find_by_id_and_name!</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_by_attributes_bang">
            
              <b>test_dynamic_find_by_attributes_bang</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_dynamic_find_by_attributes_bang" name="method-i-test_dynamic_find_by_attributes_bang" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_by_attributes_bang_source')" id="l_method-i-test_dynamic_find_by_attributes_bang_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L721" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_find_by_attributes_bang_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 721</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_by_attributes_bang</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">find_by_id!</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;David&quot;</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">find_by_id_and_name!</span>(<span class="ruby-number">20</span>, <span class="ruby-string">&#39;invalid&#39;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_finder">
            
              <b>test_dynamic_finder</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_dynamic_finder" name="method-i-test_dynamic_finder" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_finder_source')" id="l_method-i-test_dynamic_finder_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L58" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_finder_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_finder</span>
  <span class="ruby-identifier">x</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;author_id = ?&#39;</span>, <span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:find_by_id</span>), <span class="ruby-string">&#39;@klass should handle dynamic finders&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_eager_association_loading_of_stis_with_multiple_references">
            
              <b>test_eager_association_loading_of_stis_with_multiple_references</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_eager_association_loading_of_stis_with_multiple_references" name="method-i-test_eager_association_loading_of_stis_with_multiple_references" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_eager_association_loading_of_stis_with_multiple_references_source')" id="l_method-i-test_eager_association_loading_of_stis_with_multiple_references_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L534" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_eager_association_loading_of_stis_with_multiple_references_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 534</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_eager_association_loading_of_stis_with_multiple_references</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:posts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:special_comments</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:post</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value">:special_comments</span>, <span class="ruby-value">:very_special_comment</span> ] } }).
    <span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.body, very_special_comments_posts.body&#39;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id = 4&#39;</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)], <span class="ruby-identifier">authors</span>
  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">special_comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">special_comments</span>
    <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">special_comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">very_special_comment</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty">
            
              <b>test_empty</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_empty" name="method-i-test_empty" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_source')" id="l_method-i-test_empty_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1096" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_empty_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1096</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">no_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">empty?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_complex_chained_relations">
            
              <b>test_empty_complex_chained_relations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_empty_complex_chained_relations" name="method-i-test_empty_complex_chained_relations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_complex_chained_relations_source')" id="l_method-i-test_empty_complex_chained_relations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1111" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_empty_complex_chained_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1111</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_complex_chained_relations</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;comments_count&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;id is not null&quot;</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;author_id&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;comments_count &gt; 0&quot;</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">no_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">no_posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_empty_with_zero_limit">
            
              <b>test_empty_with_zero_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_empty_with_zero_limit" name="method-i-test_empty_with_zero_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_empty_with_zero_limit_source')" id="l_method-i-test_empty_with_zero_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1082" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_empty_with_zero_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1082</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_empty_with_zero_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)

  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_except">
            
              <b>test_except</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_except" name="method-i-test_except" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_except_source')" id="l_method-i-test_except_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1364" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_except_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1364</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_except</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">author_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:order</span>, <span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-identifier">author_posts</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">all_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:where</span>, <span class="ruby-value">:order</span>, <span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>, <span class="ruby-identifier">all_posts</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_exists">
            
              <b>test_exists</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_exists" name="method-i-test_exists" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_exists_source')" id="l_method-i-test_exists_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L896" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_exists_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 896</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_exists</span>
  <span class="ruby-identifier">davids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-string">&quot;42&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-number">42</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">davids</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">davids</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">id</span>)

  <span class="ruby-identifier">fake</span>  = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;fake author&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">fake</span>.<span class="ruby-identifier">exists?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">fake</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_exists_uses_existing_scope">
            
              <b>test_exists_uses_existing_scope</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_exists_uses_existing_scope" name="method-i-test_exists_uses_existing_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_exists_uses_existing_scope_source')" id="l_method-i-test_exists_uses_existing_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L910" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_exists_uses_existing_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 910</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_exists_uses_existing_scope</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:posts</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;David&quot;</span>, <span class="ruby-identifier">posts</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span> })
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_explicit_create_scope">
            
              <b>test_explicit_create_scope</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_explicit_create_scope" name="method-i-test_explicit_create_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_explicit_create_scope_source')" id="l_method-i-test_explicit_create_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1356" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_explicit_create_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1356</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_explicit_create_scope</span>
  <span class="ruby-identifier">hens</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hen&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;hen&#39;</span>, <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">hens</span> = <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;cock&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;cock&#39;</span>, <span class="ruby-identifier">hens</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_twice_should_or_the_relation">
            
              <b>test_find_all_using_where_twice_should_or_the_relation</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_twice_should_or_the_relation" name="method-i-test_find_all_using_where_twice_should_or_the_relation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_twice_should_or_the_relation_source')" id="l_method-i-test_find_all_using_where_twice_should_or_the_relation_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L781" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_twice_should_or_the_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 781</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_twice_should_or_the_relation</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Santiago&#39;</span>)
  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation">
            
              <b>test_find_all_using_where_with_relation</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation" name="method-i-test_find_all_using_where_with_relation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_source')" id="l_method-i-test_find_all_using_where_with_relation_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L816" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 816</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-comment"># switching the lines below would succeed in current rails</span>
  <span class="ruby-comment"># assert_queries(2) {</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id in (?)&#39;</span>, <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">david</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id in (:author_ids)&#39;</span>, <span class="ruby-identifier">author_ids</span><span class="ruby-operator">:</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">david</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key">
            
              <b>test_find_all_using_where_with_relation_and_alternate_primary_key</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_and_alternate_primary_key" name="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source')" id="l_method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L856" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_and_alternate_primary_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 856</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_and_alternate_primary_key</span>
  <span class="ruby-identifier">cool_first</span> = <span class="ruby-identifier">minivans</span>(<span class="ruby-value">:cool_first</span>)
  <span class="ruby-comment"># switching the lines below would succeed in current rails</span>
  <span class="ruby-comment"># assert_queries(2) {</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:minivan_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Minivan</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cool_first</span>.<span class="ruby-identifier">name</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">cool_first</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values">
            
              <b>test_find_all_using_where_with_relation_does_not_alter_select_values</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_does_not_alter_select_values" name="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source')" id="l_method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L866" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_does_not_alter_select_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 866</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_does_not_alter_select_values</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)

  <span class="ruby-identifier">subquery</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subquery</span>)
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">subquery</span>.<span class="ruby-identifier">select_values</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_with_bound_values">
            
              <b>test_find_all_using_where_with_relation_with_bound_values</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_with_bound_values" name="method-i-test_find_all_using_where_with_relation_with_bound_values" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_with_bound_values_source')" id="l_method-i-test_find_all_using_where_with_relation_with_bound_values_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L836" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_with_bound_values_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 836</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_with_bound_values</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">davids_posts</span> = <span class="ruby-identifier">david</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:id</span>))
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">davids_posts</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id in (?)&#39;</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:id</span>))
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">davids_posts</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-string">&#39;should process Relation as bind variables&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;id in (:post_ids)&#39;</span>, <span class="ruby-identifier">post_ids</span><span class="ruby-operator">:</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:id</span>))
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">davids_posts</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-string">&#39;should process Relation as named bind variables&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_with_joins">
            
              <b>test_find_all_using_where_with_relation_with_joins</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_with_joins" name="method-i-test_find_all_using_where_with_relation_with_joins" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_with_joins_source')" id="l_method-i-test_find_all_using_where_with_relation_with_joins_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L879" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 879</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_with_joins</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:posts</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery">
            
              <b>test_find_all_using_where_with_relation_with_select_to_build_subquery</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery" name="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source')" id="l_method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L888" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_using_where_with_relation_with_select_to_build_subquery_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 888</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_using_where_with_relation_with_select_to_build_subquery</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) {
    <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:name</span>))
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">david</span>], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_with_join">
            
              <b>test_find_all_with_join</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_with_join" name="method-i-test_find_all_with_join" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_with_join_source')" id="l_method-i-test_find_all_with_join_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L451" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_with_join_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 451</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_with_join</span>
  <span class="ruby-identifier">developers_on_project_one</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-string">&#39;LEFT JOIN developers_projects ON developers.id = developers_projects.developer_id&#39;</span>).
    <span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;project_id=1&#39;</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">developer_names</span> = <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;Jamis&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_all_with_multiple_should_use_and">
            
              <b>test_find_all_with_multiple_should_use_and</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_all_with_multiple_should_use_and" name="method-i-test_find_all_with_multiple_should_use_and" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_all_with_multiple_should_use_and_source')" id="l_method-i-test_find_all_with_multiple_should_use_and_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L797" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_all_with_multiple_should_use_and_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 797</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_all_with_multiple_should_use_and</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">relation</span> = [
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span> },
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Santiago&#39;</span> },
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;tenderlove&#39;</span> },
  ].<span class="ruby-identifier">inject</span>(<span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">param</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_by_classname">
            
              <b>test_find_by_classname</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_by_classname" name="method-i-test_find_by_classname" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_by_classname_source')" id="l_method-i-test_find_by_classname_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L770" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_by_classname_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 770</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_by_classname</span>
  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Mary</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Mary</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_by_id_with_list_of_ar">
            
              <b>test_find_by_id_with_list_of_ar</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_by_id_with_list_of_ar" name="method-i-test_find_by_id_with_list_of_ar" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_by_id_with_list_of_ar_source')" id="l_method-i-test_find_by_id_with_list_of_ar_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L775" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_by_id_with_list_of_ar_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 775</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_by_id_with_list_of_ar</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find_by_id</span>([<span class="ruby-identifier">author</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">authors</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_id">
            
              <b>test_find_id</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_id" name="method-i-test_find_id" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_id_source')" id="l_method-i-test_find_id_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L728" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 728</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_id</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;David&#39;</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;lifo&#39;</span>).<span class="ruby-identifier">find</span>(<span class="ruby-string">&#39;42&#39;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_ids">
            
              <b>test_find_ids</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_ids" name="method-i-test_find_ids" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_ids_source')" id="l_method-i-test_find_ids_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L737" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 737</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_ids</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>)

  <span class="ruby-identifier">results</span> = <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">results</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">results</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;David&#39;</span>, <span class="ruby-identifier">results</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Mary&#39;</span>, <span class="ruby-identifier">results</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">results</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>([<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-value">:mary</span>).<span class="ruby-identifier">id</span>])

  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;lifo&#39;</span>).<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-string">&#39;42&#39;</span>) }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">find</span>([<span class="ruby-string">&#39;42&#39;</span>, <span class="ruby-number">43</span>]) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_empty_array">
            
              <b>test_find_in_empty_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_in_empty_array" name="method-i-test_find_in_empty_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_empty_array_source')" id="l_method-i-test_find_in_empty_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L751" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_in_empty_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 751</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_empty_array</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> [])
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">blank?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_on_hash_conditions">
            
              <b>test_find_on_hash_conditions</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_on_hash_conditions" name="method-i-test_find_on_hash_conditions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_on_hash_conditions_source')" id="l_method-i-test_find_on_hash_conditions_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L461" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_on_hash_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 461</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_on_hash_conditions</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>({ <span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> }).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_create_by">
            
              <b>test_find_or_create_by</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_create_by" name="method-i-test_find_or_create_by" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_create_by_source')" id="l_method-i-test_find_or_create_by_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1323" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_or_create_by_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1323</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_create_by</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)

  <span class="ruby-identifier">bird</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bird</span>, <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_create_by-21">
            
              <b>test_find_or_create_by!</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_create_by-21" name="method-i-test_find_or_create_by-21" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_create_by-21_source')" id="l_method-i-test_find_or_create_by-21_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1342" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_or_create_by-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1342</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_create_by!</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_create_by!</span>(<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;green&#39;</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_create_by_with_create_with">
            
              <b>test_find_or_create_by_with_create_with</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_create_by_with_create_with" name="method-i-test_find_or_create_by_with_create_with" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_create_by_with_create_with_source')" id="l_method-i-test_find_or_create_by_with_create_with_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1332" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_or_create_by_with_create_with_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1332</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_create_by_with_create_with</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)

  <span class="ruby-identifier">bird</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">color</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bird</span>, <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">create_with</span>(<span class="ruby-identifier">color</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;blue&#39;</span>).<span class="ruby-identifier">find_or_create_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_or_initialize_by">
            
              <b>test_find_or_initialize_by</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_or_initialize_by" name="method-i-test_find_or_initialize_by" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_or_initialize_by_source')" id="l_method-i-test_find_or_initialize_by_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1346" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_or_initialize_by_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1346</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_or_initialize_by</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)

  <span class="ruby-identifier">bird</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_initialize_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">save!</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bird</span>, <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">find_or_initialize_by</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;bob&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_included_associations">
            
              <b>test_find_with_included_associations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_included_associations" name="method-i-test_find_with_included_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_included_associations_source')" id="l_method-i-test_find_with_included_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L580" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_with_included_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 580</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_included_associations</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:author</span>, <span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_list_of_ar">
            
              <b>test_find_with_list_of_ar</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_list_of_ar" name="method-i-test_find_with_list_of_ar" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_list_of_ar_source')" id="l_method-i-test_find_with_list_of_ar_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L762" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_with_list_of_ar_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 762</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_list_of_ar</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>([<span class="ruby-identifier">author</span>.<span class="ruby-identifier">id</span>])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_preloaded_associations">
            
              <b>test_find_with_preloaded_associations</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_preloaded_associations" name="method-i-test_find_with_preloaded_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_preloaded_associations_source')" id="l_method-i-test_find_with_preloaded_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L545" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_with_preloaded_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 545</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_preloaded_associations</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:author</span>, <span class="ruby-value">:comments</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_readonly_option">
            
              <b>test_find_with_readonly_option</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_find_with_readonly_option" name="method-i-test_find_with_readonly_option" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_readonly_option_source')" id="l_method-i-test_find_with_readonly_option_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L529" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_with_readonly_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 529</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_readonly_option</span>
  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">readonly</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_last_with_arel_order">
            
              <b>test_finding_last_with_arel_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_last_with_arel_order" name="method-i-test_finding_last_with_arel_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_last_with_arel_order_source')" id="l_method-i-test_finding_last_with_arel_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L239" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_last_with_arel_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 239</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_last_with_arel_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">asc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_arel_order">
            
              <b>test_finding_with_arel_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_arel_order" name="method-i-test_finding_with_arel_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_arel_order_source')" id="l_method-i-test_finding_with_arel_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L188" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_arel_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_arel_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">asc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_asc_order_with_string">
            
              <b>test_finding_with_asc_order_with_string</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_asc_order_with_string" name="method-i-test_finding_with_asc_order_with_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_asc_order_with_string_source')" id="l_method-i-test_finding_with_asc_order_with_string_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L216" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_asc_order_with_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_asc_order_with_string</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;asc&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:second</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:third</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>)], <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_assoc_order">
            
              <b>test_finding_with_assoc_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_assoc_order" name="method-i-test_finding_with_assoc_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_assoc_order_source')" id="l_method-i-test_finding_with_assoc_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L194" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_assoc_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 194</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_assoc_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:desc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_assoc_order_by_aliased_attributes">
            
              <b>test_finding_with_assoc_order_by_aliased_attributes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_assoc_order_by_aliased_attributes" name="method-i-test_finding_with_assoc_order_by_aliased_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_assoc_order_by_aliased_attributes_source')" id="l_method-i-test_finding_with_assoc_order_by_aliased_attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L256" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_assoc_order_by_aliased_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 256</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_assoc_order_by_aliased_attributes</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">heading</span><span class="ruby-operator">:</span> <span class="ruby-value">:desc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:third</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_assoc_reorder_by_aliased_attributes">
            
              <b>test_finding_with_assoc_reorder_by_aliased_attributes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_assoc_reorder_by_aliased_attributes" name="method-i-test_finding_with_assoc_reorder_by_aliased_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_assoc_reorder_by_aliased_attributes_source')" id="l_method-i-test_finding_with_assoc_reorder_by_aliased_attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L274" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_assoc_reorder_by_aliased_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 274</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_assoc_reorder_by_aliased_attributes</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;author_name&#39;</span>).<span class="ruby-identifier">reorder</span>(<span class="ruby-identifier">heading</span><span class="ruby-operator">:</span> <span class="ruby-value">:desc</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:third</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_complex_order">
            
              <b>test_finding_with_complex_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_complex_order" name="method-i-test_finding_with_complex_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_complex_order_source')" id="l_method-i-test_finding_with_complex_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L299" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_complex_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 299</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_complex_order</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">references</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;REPLACE(&#39;abc&#39;, taggings.taggable_type, taggings.taggable_type)&quot;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_complex_order_and_limit">
            
              <b>test_finding_with_complex_order_and_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_complex_order_and_limit" name="method-i-test_finding_with_complex_order_and_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_complex_order_and_limit_source')" id="l_method-i-test_finding_with_complex_order_and_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L294" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_complex_order_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_complex_order_and_limit</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">references</span>(<span class="ruby-value">:taggings</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;REPLACE(&#39;abc&#39;, taggings.taggable_type, taggings.taggable_type)&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_conditions">
            
              <b>test_finding_with_conditions</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_conditions" name="method-i-test_finding_with_conditions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_conditions_source')" id="l_method-i-test_finding_with_conditions_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L176" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_conditions</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&quot;David&quot;</span>], <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Mary&#39;</span>],  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>([<span class="ruby-string">&quot;name = ?&quot;</span>, <span class="ruby-string">&#39;Mary&#39;</span>]).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;Mary&#39;</span>],  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;name = ?&quot;</span>, <span class="ruby-string">&#39;Mary&#39;</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_cross_table_order_and_limit">
            
              <b>test_finding_with_cross_table_order_and_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_cross_table_order_and_limit" name="method-i-test_finding_with_cross_table_order_and_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_cross_table_order_and_limit_source')" id="l_method-i-test_finding_with_cross_table_order_and_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L287" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_cross_table_order_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_cross_table_order_and_limit</span>
  <span class="ruby-identifier">tags</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:taggings</span>).
            <span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;tags.name asc&quot;</span>, <span class="ruby-string">&quot;taggings.taggable_id asc&quot;</span>, <span class="ruby-string">&quot;REPLACE(&#39;abc&#39;, taggings.taggable_type, taggings.taggable_type)&quot;</span>).
            <span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_desc_order_with_string">
            
              <b>test_finding_with_desc_order_with_string</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_desc_order_with_string" name="method-i-test_finding_with_desc_order_with_string" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_desc_order_with_string_source')" id="l_method-i-test_finding_with_desc_order_with_string_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L210" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_desc_order_with_string_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_desc_order_with_string</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;desc&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:third</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:second</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>)], <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_group">
            
              <b>test_finding_with_group</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_group" name="method-i-test_finding_with_group" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_group_source')" id="l_method-i-test_finding_with_group_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L315" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_group_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 315</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_group</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">group</span>(<span class="ruby-string">&quot;salary&quot;</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;salary&quot;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:salary</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_hash_conditions_on_joined_table">
            
              <b>test_finding_with_hash_conditions_on_joined_table</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_hash_conditions_on_joined_table" name="method-i-test_finding_with_hash_conditions_on_joined_table" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_hash_conditions_on_joined_table_source')" id="l_method-i-test_finding_with_hash_conditions_on_joined_table_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L445" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_hash_conditions_on_joined_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 445</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_hash_conditions_on_joined_table</span>
  <span class="ruby-identifier">firms</span> = <span class="ruby-constant">DependentFirm</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:account</span>).<span class="ruby-identifier">where</span>({<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;RailsCore&#39;</span>, <span class="ruby-value">:accounts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:credit_limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">55</span><span class="ruby-operator">..</span><span class="ruby-number">60</span> }}).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">companies</span>(<span class="ruby-value">:rails_core</span>), <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order">
            
              <b>test_finding_with_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order" name="method-i-test_finding_with_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_source')" id="l_method-i-test_finding_with_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L182" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_and_take">
            
              <b>test_finding_with_order_and_take</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order_and_take" name="method-i-test_finding_with_order_and_take" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_and_take_source')" id="l_method-i-test_finding_with_order_and_take_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L280" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_order_and_take_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 280</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_and_take</span>
  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:first</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_by_aliased_attributes">
            
              <b>test_finding_with_order_by_aliased_attributes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order_by_aliased_attributes" name="method-i-test_finding_with_order_by_aliased_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_by_aliased_attributes_source')" id="l_method-i-test_finding_with_order_by_aliased_attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L250" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_order_by_aliased_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 250</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_by_aliased_attributes</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:heading</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_concatenated">
            
              <b>test_finding_with_order_concatenated</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order_concatenated" name="method-i-test_finding_with_order_concatenated" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_concatenated_source')" id="l_method-i-test_finding_with_order_concatenated_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L244" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_order_concatenated_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 244</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_concatenated</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;author_name&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;title&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fourth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_order_limit_and_offset">
            
              <b>test_finding_with_order_limit_and_offset</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_order_limit_and_offset" name="method-i-test_finding_with_order_limit_and_offset" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_order_limit_and_offset_source')" id="l_method-i-test_finding_with_order_limit_and_offset_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L304" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_order_limit_and_offset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 304</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_order_limit_and_offset</span>
  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:second</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">2</span>).<span class="ruby-identifier">offset</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">entrants</span>(<span class="ruby-value">:third</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_reorder">
            
              <b>test_finding_with_reorder</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_reorder" name="method-i-test_finding_with_reorder" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_reorder_source')" id="l_method-i-test_finding_with_reorder_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L262" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_reorder_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 262</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_reorder</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;author_name&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;title&#39;</span>).<span class="ruby-identifier">reorder</span>(<span class="ruby-string">&#39;id&#39;</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">topics_titles</span> = <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;The First Topic&#39;</span>, <span class="ruby-string">&#39;The Second Topic of the day&#39;</span>, <span class="ruby-string">&#39;The Third Topic of the day&#39;</span>, <span class="ruby-string">&#39;The Fourth Topic of the day&#39;</span>, <span class="ruby-string">&#39;The Fifth Topic of the day&#39;</span>], <span class="ruby-identifier">topics_titles</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_reorder_by_aliased_attributes">
            
              <b>test_finding_with_reorder_by_aliased_attributes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_reorder_by_aliased_attributes" name="method-i-test_finding_with_reorder_by_aliased_attributes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_reorder_by_aliased_attributes_source')" id="l_method-i-test_finding_with_reorder_by_aliased_attributes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L268" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_reorder_by_aliased_attributes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 268</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_reorder_by_aliased_attributes</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;author_name&#39;</span>).<span class="ruby-identifier">reorder</span>(<span class="ruby-value">:heading</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_reverted_assoc_order">
            
              <b>test_finding_with_reverted_assoc_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_reverted_assoc_order" name="method-i-test_finding_with_reverted_assoc_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_reverted_assoc_order_source')" id="l_method-i-test_finding_with_reverted_assoc_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L200" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_reverted_assoc_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_reverted_assoc_order</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:asc</span>).<span class="ruby-identifier">reverse_order</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-value">:fifth</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_subquery">
            
              <b>test_finding_with_subquery</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_subquery" name="method-i-test_finding_with_subquery" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_subquery_source')" id="l_method-i-test_finding_with_subquery_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L143" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_subquery_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_subquery</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;subquery.*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;a.*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>, <span class="ruby-value">:a</span>).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_subquery_with_binds">
            
              <b>test_finding_with_subquery_with_binds</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_subquery_with_binds" name="method-i-test_finding_with_subquery_with_binds" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_subquery_with_binds_source')" id="l_method-i-test_finding_with_subquery_with_binds_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L150" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_subquery_with_binds_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_subquery_with_binds</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;subquery.*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;a.*&#39;</span>).<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>, <span class="ruby-value">:a</span>).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_finding_with_subquery_without_select_does_not_change_the_select">
            
              <b>test_finding_with_subquery_without_select_does_not_change_the_select</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_finding_with_subquery_without_select_does_not_change_the_select" name="method-i-test_finding_with_subquery_without_select_does_not_change_the_select" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_finding_with_subquery_without_select_does_not_change_the_select_source')" id="l_method-i-test_finding_with_subquery_without_select_does_not_change_the_select_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L157" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_finding_with_subquery_without_select_does_not_change_the_select_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 157</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_finding_with_subquery_without_select_does_not_change_the_select</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">approved</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create">
            
              <b>test_first_or_create</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create" name="method-i-test_first_or_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_source')" id="l_method-i-test_first_or_create_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1201" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1201</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">same_parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_invalid_block">
            
              <b>test_first_or_create_bang_with_invalid_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_invalid_block" name="method-i-test_first_or_create_bang_with_invalid_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_invalid_block_source')" id="l_method-i-test_first_or_create_bang_with_invalid_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1274" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_invalid_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1274</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_invalid_block</span>
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">pirate_id</span> = <span class="ruby-number">1</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_invalid_options">
            
              <b>test_first_or_create_bang_with_invalid_options</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_invalid_options" name="method-i-test_first_or_create_bang_with_invalid_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_invalid_options_source')" id="l_method-i-test_first_or_create_bang_with_invalid_options_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1255" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_invalid_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1255</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_invalid_options</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>(<span class="ruby-value">:pirate_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_no_parameters">
            
              <b>test_first_or_create_bang_with_no_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_no_parameters" name="method-i-test_first_or_create_bang_with_no_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_no_parameters_source')" id="l_method-i-test_first_or_create_bang_with_no_parameters_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1259" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_no_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1259</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_no_parameters</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_valid_block">
            
              <b>test_first_or_create_bang_with_valid_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_valid_block" name="method-i-test_first_or_create_bang_with_valid_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_valid_block_source')" id="l_method-i-test_first_or_create_bang_with_valid_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1263" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_valid_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1263</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_valid_block</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parrot&#39;</span> }
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parakeet&#39;</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_bang_with_valid_options">
            
              <b>test_first_or_create_bang_with_valid_options</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_bang_with_valid_options" name="method-i-test_first_or_create_bang_with_valid_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_bang_with_valid_options_source')" id="l_method-i-test_first_or_create_bang_with_valid_options_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1242" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_bang_with_valid_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1242</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_bang_with_valid_options</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">same_parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_array">
            
              <b>test_first_or_create_with_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_array" name="method-i-test_first_or_create_with_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_array_source')" id="l_method-i-test_first_or_create_with_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1232" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1232</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_array</span>
  <span class="ruby-identifier">several_green_birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">several_green_birds</span>
  <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span> }

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hummingbird&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;macaw&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_block">
            
              <b>test_first_or_create_with_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_block" name="method-i-test_first_or_create_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_block_source')" id="l_method-i-test_first_or_create_with_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1221" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1221</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_block</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parrot&#39;</span> }
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parakeet&#39;</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">parrot</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_invalid_array">
            
              <b>test_first_or_create_with_invalid_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_invalid_array" name="method-i-test_first_or_create_with_invalid_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_invalid_array_source')" id="l_method-i-test_first_or_create_with_invalid_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1290" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_invalid_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1290</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_invalid_array</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>([ {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>}, {<span class="ruby-value">:pirate_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>} ]) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_no_parameters">
            
              <b>test_first_or_create_with_no_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_no_parameters" name="method-i-test_first_or_create_with_no_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_no_parameters_source')" id="l_method-i-test_first_or_create_with_no_parameters_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1214" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_no_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1214</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_no_parameters</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_create_with_valid_array">
            
              <b>test_first_or_create_with_valid_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_create_with_valid_array" name="method-i-test_first_or_create_with_valid_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_create_with_valid_array_source')" id="l_method-i-test_first_or_create_with_valid_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1280" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_create_with_valid_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1280</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_create_with_valid_array</span>
  <span class="ruby-identifier">several_green_birds</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parakeet&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">several_green_birds</span>
  <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">persisted?</span> }

  <span class="ruby-identifier">same_parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_create!</span>([{<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hummingbird&#39;</span>}, {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;macaw&#39;</span>}])
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">same_parrot</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">several_green_birds</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">same_parrot</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_initialize">
            
              <b>test_first_or_initialize</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_initialize" name="method-i-test_first_or_initialize" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_initialize_source')" id="l_method-i-test_first_or_initialize_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1294" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_initialize_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1294</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_initialize</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_initialize</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;parrot&#39;</span>)
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_initialize_with_block">
            
              <b>test_first_or_initialize_with_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_initialize_with_block" name="method-i-test_first_or_initialize_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_initialize_with_block_source')" id="l_method-i-test_first_or_initialize_with_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1313" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_initialize_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1313</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_initialize_with_block</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_initialize</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">bird</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bird</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;parrot&#39;</span> }
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;parrot&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_first_or_initialize_with_no_parameters">
            
              <b>test_first_or_initialize_with_no_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_first_or_initialize_with_no_parameters" name="method-i-test_first_or_initialize_with_no_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_first_or_initialize_with_no_parameters_source')" id="l_method-i-test_first_or_initialize_with_no_parameters_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1304" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_first_or_initialize_with_no_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1304</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_first_or_initialize_with_no_parameters</span>
  <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;green&#39;</span>).<span class="ruby-identifier">first_or_initialize</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Bird</span>, <span class="ruby-identifier">parrot</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;green&#39;</span>, <span class="ruby-identifier">parrot</span>.<span class="ruby-identifier">color</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_group_with_subquery_in_from_does_not_use_original_table_name">
            
              <b>test_group_with_subquery_in_from_does_not_use_original_table_name</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_group_with_subquery_in_from_does_not_use_original_table_name" name="method-i-test_group_with_subquery_in_from_does_not_use_original_table_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_group_with_subquery_in_from_does_not_use_original_table_name_source')" id="l_method-i-test_group_with_subquery_in_from_does_not_use_original_table_name_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L170" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_group_with_subquery_in_from_does_not_use_original_table_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_group_with_subquery_in_from_does_not_use_original_table_name</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:type</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;COUNT(post_id) AS post_count,type&#39;</span>)
  <span class="ruby-identifier">subquery</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">group</span>(<span class="ruby-string">&#39;type&#39;</span>).<span class="ruby-identifier">average</span>(<span class="ruby-string">&quot;post_count&quot;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">relation</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:post_count</span>).<span class="ruby-identifier">sort</span>,<span class="ruby-identifier">subquery</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">sort</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_grouping_by_column_with_reserved_name">
            
              <b>test_grouping_by_column_with_reserved_name</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_grouping_by_column_with_reserved_name" name="method-i-test_grouping_by_column_with_reserved_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_grouping_by_column_with_reserved_name_source')" id="l_method-i-test_grouping_by_column_with_reserved_name_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1520" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_grouping_by_column_with_reserved_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1520</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_grouping_by_column_with_reserved_name</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Possession</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:where</span>).<span class="ruby-identifier">group</span>(<span class="ruby-value">:where</span>).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_includes_with_select">
            
              <b>test_includes_with_select</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_includes_with_select" name="method-i-test_includes_with_select" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_includes_with_select_source')" id="l_method-i-test_includes_with_select_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L618" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_includes_with_select_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 618</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_includes_with_select</span>
  <span class="ruby-identifier">query</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count AS ranking&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;ranking&#39;</span>).<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>)
    .<span class="ruby-identifier">where</span>(<span class="ruby-identifier">comments</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-number">1</span> })

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;comments_count AS ranking&#39;</span>], <span class="ruby-identifier">query</span>.<span class="ruby-identifier">select_values</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">query</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_intersection_with_array">
            
              <b>test_intersection_with_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_intersection_with_array" name="method-i-test_intersection_with_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_intersection_with_array_source')" id="l_method-i-test_intersection_with_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1429" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_intersection_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1429</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_intersection_with_array</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;David&quot;</span>)
  <span class="ruby-identifier">rails_author</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">rails_author</span>], [<span class="ruby-identifier">rails_author</span>] <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">relation</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">rails_author</span>], <span class="ruby-identifier">relation</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">rails_author</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_joins_with_nil_argument">
            
              <b>test_joins_with_nil_argument</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_joins_with_nil_argument" name="method-i-test_joins_with_nil_argument" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_joins_with_nil_argument_source')" id="l_method-i-test_joins_with_nil_argument_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L441" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_joins_with_nil_argument_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 441</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_joins_with_nil_argument</span>
  <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">DependentFirm</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-keyword">nil</span>).<span class="ruby-identifier">first</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_joins_with_string_array">
            
              <b>test_joins_with_string_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_joins_with_string_array" name="method-i-test_joins_with_string_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_joins_with_string_array_source')" id="l_method-i-test_joins_with_string_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L465" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_joins_with_string_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 465</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_joins_with_string_array</span>
  <span class="ruby-identifier">person_with_reader_and_post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">joins</span>([
      <span class="ruby-string">&quot;INNER JOIN categorizations ON categorizations.post_id = posts.id&quot;</span>,
      <span class="ruby-string">&quot;INNER JOIN categories ON categories.id = categorizations.category_id AND categories.type = &#39;SpecialCategory&#39;&quot;</span>
    ]
  ).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">person_with_reader_and_post</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_last">
            
              <b>test_last</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_last" name="method-i-test_last" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_last_source')" id="l_method-i-test_last_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L916" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_last_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 916</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_last</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:bob</span>), <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loaded_all">
            
              <b>test_loaded_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loaded_all" name="method-i-test_loaded_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loaded_all_source')" id="l_method-i-test_loaded_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L95" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_loaded_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loaded_all</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loaded_first">
            
              <b>test_loaded_first</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loaded_first" name="method-i-test_loaded_first" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loaded_first_source')" id="l_method-i-test_loaded_first_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L115" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_loaded_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loaded_first</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loading_with_one_association">
            
              <b>test_loading_with_one_association</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loading_with_one_association" name="method-i-test_loading_with_one_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loading_with_one_association_source')" id="l_method-i-test_loading_with_one_association_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L671" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_loading_with_one_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 671</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loading_with_one_association</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>))

  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;posts.title = &#39;Welcome to the weblog&#39;&quot;</span>).<span class="ruby-identifier">preload</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>))

  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:last_comment</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_loading_with_one_association_with_non_preload">
            
              <b>test_loading_with_one_association_with_non_preload</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_loading_with_one_association_with_non_preload" name="method-i-test_loading_with_one_association_with_non_preload" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_loading_with_one_association_with_non_preload_source')" id="l_method-i-test_loading_with_one_association_with_non_preload_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L700" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_loading_with_one_association_with_non_preload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 700</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_loading_with_one_association_with_non_preload</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id DESC&#39;</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many">
            
              <b>test_many</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_many" name="method-i-test_many" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_source')" id="l_method-i-test_many_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1144" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1144</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">2</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> <span class="ruby-comment"># Uses COUNT()</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span> }
    <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">2</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_many_with_limits">
            
              <b>test_many_with_limits</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_many_with_limits" name="method-i-test_many_with_limits" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_many_with_limits_source')" id="l_method-i-test_many_with_limits_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1156" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_many_with_limits_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1156</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_many_with_limits</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">many?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_merging_keeps_lhs_bind_parameters">
            
              <b>test_merging_keeps_lhs_bind_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_merging_keeps_lhs_bind_parameters" name="method-i-test_merging_keeps_lhs_bind_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_merging_keeps_lhs_bind_parameters_source')" id="l_method-i-test_merging_keeps_lhs_bind_parameters_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1789" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_merging_keeps_lhs_bind_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1789</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_merging_keeps_lhs_bind_parameters</span>
  <span class="ruby-identifier">column</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">columns_hash</span>[<span class="ruby-string">&#39;id&#39;</span>]
  <span class="ruby-identifier">binds</span> = [[<span class="ruby-identifier">column</span>, <span class="ruby-number">20</span>]]

  <span class="ruby-identifier">right</span>  = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-number">20</span>)
  <span class="ruby-identifier">left</span>   = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-number">10</span>)

  <span class="ruby-identifier">merged</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">right</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">binds</span>, <span class="ruby-identifier">merged</span>.<span class="ruby-identifier">bind_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_merging_removes_rhs_bind_parameters">
            
              <b>test_merging_removes_rhs_bind_parameters</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_merging_removes_rhs_bind_parameters" name="method-i-test_merging_removes_rhs_bind_parameters" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_merging_removes_rhs_bind_parameters_source')" id="l_method-i-test_merging_removes_rhs_bind_parameters_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1781" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_merging_removes_rhs_bind_parameters_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1781</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_merging_removes_rhs_bind_parameters</span>
  <span class="ruby-identifier">left</span>  = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-number">20</span>)
  <span class="ruby-identifier">right</span>   = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> [<span class="ruby-number">1</span>,<span class="ruby-number">2</span>,<span class="ruby-number">3</span>,<span class="ruby-number">4</span>])

  <span class="ruby-identifier">merged</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">right</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">merged</span>.<span class="ruby-identifier">bind_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_merging_reorders_bind_params">
            
              <b>test_merging_reorders_bind_params</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_merging_reorders_bind_params" name="method-i-test_merging_reorders_bind_params" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_merging_reorders_bind_params_source')" id="l_method-i-test_merging_reorders_bind_params_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1800" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_merging_reorders_bind_params_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1800</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_merging_reorders_bind_params</span>
  <span class="ruby-identifier">post</span>  = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">right</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">left</span>  = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>)

  <span class="ruby-identifier">merged</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">right</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">post</span>, <span class="ruby-identifier">merged</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multi_where_ands_queries">
            
              <b>test_multi_where_ands_queries</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_multi_where_ands_queries" name="method-i-test_multi_where_ands_queries" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multi_where_ands_queries_source')" id="l_method-i-test_multi_where_ands_queries_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L790" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_multi_where_ands_queries_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 790</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multi_where_ands_queries</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">unscoped</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Santiago&#39;</span>).<span class="ruby-identifier">to_sql</span>
  <span class="ruby-identifier">assert_match</span>(<span class="ruby-string">&#39;AND&#39;</span>, <span class="ruby-identifier">sql</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multiple_selects">
            
              <b>test_multiple_selects</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_multiple_selects" name="method-i-test_multiple_selects" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multiple_selects_source')" id="l_method-i-test_multiple_selects_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1044" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_multiple_selects_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1044</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multiple_selects</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;comments_count&#39;</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;title&#39;</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;id ASC&quot;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Welcome to the weblog&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments_count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_multivalue_where">
            
              <b>test_multivalue_where</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_multivalue_where" name="method-i-test_multivalue_where" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_multivalue_where_source')" id="l_method-i-test_multivalue_where_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L63" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_multivalue_where_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_multivalue_where</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;author_id = ? AND id = ?&#39;</span>, <span class="ruby-number">1</span>, <span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_named_extension">
            
              <b>test_named_extension</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_named_extension" name="method-i-test_named_extension" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_named_extension_source')" id="l_method-i-test_named_extension_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1397" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_named_extension_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1397</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_named_extension</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">extending</span>(<span class="ruby-constant">Post</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedExtension</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;lifo&quot;</span>, <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">author</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_no_arguments_to_query_methods_raise_errors">
            
              <b>test_no_arguments_to_query_methods_raise_errors</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_no_arguments_to_query_methods_raise_errors" name="method-i-test_no_arguments_to_query_methods_raise_errors" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_no_arguments_to_query_methods_raise_errors_source')" id="l_method-i-test_no_arguments_to_query_methods_raise_errors_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L474" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_no_arguments_to_query_methods_raise_errors_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 474</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_no_arguments_to_query_methods_raise_errors</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">references</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">includes</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">preload</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">group</span>() }
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">reorder</span>() }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none">
            
              <b>test_none</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none" name="method-i-test_none" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_source')" id="l_method-i-test_none_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L326" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_none_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 326</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none</span>
  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">none</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none_chainable">
            
              <b>test_none_chainable</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none_chainable" name="method-i-test_none_chainable" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_chainable_source')" id="l_method-i-test_none_chainable_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L333" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_none_chainable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 333</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none_chainable</span>
  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none_chainable_to_existing_scope_extension_method">
            
              <b>test_none_chainable_to_existing_scope_extension_method</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none_chainable_to_existing_scope_extension_method" name="method-i-test_none_chainable_to_existing_scope_extension_method" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_chainable_to_existing_scope_extension_method_source')" id="l_method-i-test_none_chainable_to_existing_scope_extension_method_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L339" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_none_chainable_to_existing_scope_extension_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 339</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none_chainable_to_existing_scope_extension_method</span>
  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">anonymous_extension</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">one</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_none_chained_to_methods_firing_queries_straight_to_db">
            
              <b>test_none_chained_to_methods_firing_queries_straight_to_db</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_none_chained_to_methods_firing_queries_straight_to_db" name="method-i-test_none_chained_to_methods_firing_queries_straight_to_db" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_none_chained_to_methods_firing_queries_straight_to_db_source')" id="l_method-i-test_none_chained_to_methods_firing_queries_straight_to_db_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L345" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_none_chained_to_methods_firing_queries_straight_to_db_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 345</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_none_chained_to_methods_firing_queries_straight_to_db</span>
  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [],    <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-value">:id</span>, <span class="ruby-value">:name</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">delete_all</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-number">1</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-number">1</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_average">
            
              <b>test_null_relation_average</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_average" name="method-i-test_null_relation_average" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_average_source')" id="l_method-i-test_null_relation_average_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L409" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_average_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_average</span>
  <span class="ruby-identifier">ac</span> = <span class="ruby-constant">Aircraft</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:car_id</span>).<span class="ruby-identifier">average</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">average</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:car_id</span>).<span class="ruby-identifier">average</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">average</span>(<span class="ruby-value">:id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_calculations_methods">
            
              <b>test_null_relation_calculations_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_calculations_methods" name="method-i-test_null_relation_calculations_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_calculations_methods_source')" id="l_method-i-test_null_relation_calculations_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L365" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_calculations_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 365</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_calculations_methods</span>
  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">count</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">calculate</span>(<span class="ruby-value">:count</span>, <span class="ruby-keyword">nil</span>, {})
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">nil</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">calculate</span>(<span class="ruby-value">:average</span>, <span class="ruby-string">&#39;salary&#39;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_content_size_methods">
            
              <b>test_null_relation_content_size_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_content_size_methods" name="method-i-test_null_relation_content_size_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_content_size_methods_source')" id="l_method-i-test_null_relation_content_size_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L355" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_content_size_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 355</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_content_size_methods</span>
  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>,     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">count</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">true</span>,  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_count">
            
              <b>test_null_relation_count</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_count" name="method-i-test_null_relation_count" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_count_source')" id="l_method-i-test_null_relation_count_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L391" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_count_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 391</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_count</span>
  <span class="ruby-identifier">ac</span> = <span class="ruby-constant">Aircraft</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-number">0</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-number">0</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_in_where_condition">
            
              <b>test_null_relation_in_where_condition</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_in_where_condition" name="method-i-test_null_relation_in_where_condition" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_in_where_condition_source')" id="l_method-i-test_null_relation_in_where_condition_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L436" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_in_where_condition_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 436</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_in_where_condition</span>
  <span class="ruby-identifier">assert_operator</span> <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">count</span>, <span class="ruby-value">:&gt;</span>, <span class="ruby-number">0</span> <span class="ruby-comment"># precondition, make sure there are comments.</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">post_id</span><span class="ruby-operator">:</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">none</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_maximum">
            
              <b>test_null_relation_maximum</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_maximum" name="method-i-test_null_relation_maximum" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_maximum_source')" id="l_method-i-test_null_relation_maximum_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L427" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_maximum_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 427</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_maximum</span>
  <span class="ruby-identifier">ac</span> = <span class="ruby-constant">Aircraft</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:car_id</span>).<span class="ruby-identifier">maximum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">maximum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:car_id</span>).<span class="ruby-identifier">maximum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">maximum</span>(<span class="ruby-value">:id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_metadata_methods">
            
              <b>test_null_relation_metadata_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_metadata_methods" name="method-i-test_null_relation_metadata_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_metadata_methods_source')" id="l_method-i-test_null_relation_metadata_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L373" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_metadata_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 373</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_metadata_methods</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">to_sql</span>
  <span class="ruby-identifier">assert_equal</span>({}, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">where_values_hash</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_minimum">
            
              <b>test_null_relation_minimum</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_minimum" name="method-i-test_null_relation_minimum" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_minimum_source')" id="l_method-i-test_null_relation_minimum_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L418" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_minimum_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 418</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_minimum</span>
  <span class="ruby-identifier">ac</span> = <span class="ruby-constant">Aircraft</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:car_id</span>).<span class="ruby-identifier">minimum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">minimum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:car_id</span>).<span class="ruby-identifier">minimum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">minimum</span>(<span class="ruby-value">:id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_size">
            
              <b>test_null_relation_size</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_size" name="method-i-test_null_relation_size" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_size_source')" id="l_method-i-test_null_relation_size_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L400" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_size_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 400</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_size</span>
  <span class="ruby-identifier">ac</span> = <span class="ruby-constant">Aircraft</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-number">0</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-number">0</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_sum">
            
              <b>test_null_relation_sum</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_sum" name="method-i-test_null_relation_sum" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_sum_source')" id="l_method-i-test_null_relation_sum_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L382" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_sum_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 382</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_sum</span>
  <span class="ruby-identifier">ac</span> = <span class="ruby-constant">Aircraft</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">sum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-number">0</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">sum</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span>        <span class="ruby-number">0</span>, <span class="ruby-identifier">ac</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_null_relation_where_values_hash">
            
              <b>test_null_relation_where_values_hash</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_null_relation_where_values_hash" name="method-i-test_null_relation_where_values_hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_null_relation_where_values_hash_source')" id="l_method-i-test_null_relation_where_values_hash_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L378" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_null_relation_where_values_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 378</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_null_relation_where_values_hash</span>
  <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-string">&#39;salary&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">100_000</span> }, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">none</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">salary</span><span class="ruby-operator">:</span> <span class="ruby-number">100_000</span>).<span class="ruby-identifier">where_values_hash</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_only">
            
              <b>test_only</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_only" name="method-i-test_only" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_only_source')" id="l_method-i-test_only_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1375" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_only_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1375</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_only</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>)], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">author_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">only</span>(<span class="ruby-value">:where</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>, <span class="ruby-identifier">author_posts</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">all_posts</span> = <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">only</span>(<span class="ruby-value">:limit</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_by_relation_attribute">
            
              <b>test_order_by_relation_attribute</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_order_by_relation_attribute" name="method-i-test_order_by_relation_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_by_relation_attribute_source')" id="l_method-i-test_order_by_relation_attribute_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1403" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_order_by_relation_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1403</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_by_relation_attribute</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-constant">Post</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-value">:title</span>]).<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;title&quot;</span>).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_using_scoping">
            
              <b>test_order_using_scoping</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_order_using_scoping" name="method-i-test_order_using_scoping" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_using_scoping_source')" id="l_method-i-test_order_using_scoping_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1412" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_order_using_scoping_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1412</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_using_scoping</span>
  <span class="ruby-identifier">car1</span> = <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC&#39;</span>).<span class="ruby-identifier">scoping</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">order</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;id asc&#39;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;zyke&#39;</span>, <span class="ruby-identifier">car1</span>.<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">car2</span> = <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC&#39;</span>).<span class="ruby-identifier">scoping</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">order</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;id asc&#39;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;zyke&#39;</span>, <span class="ruby-identifier">car2</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_with_hash_and_symbol_generates_the_same_sql">
            
              <b>test_order_with_hash_and_symbol_generates_the_same_sql</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_order_with_hash_and_symbol_generates_the_same_sql" name="method-i-test_order_with_hash_and_symbol_generates_the_same_sql" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_with_hash_and_symbol_generates_the_same_sql_source')" id="l_method-i-test_order_with_hash_and_symbol_generates_the_same_sql_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L206" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_order_with_hash_and_symbol_generates_the_same_sql_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_with_hash_and_symbol_generates_the_same_sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:asc</span>).<span class="ruby-identifier">to_sql</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_order_with_reorder_nil_removes_the_order">
            
              <b>test_order_with_reorder_nil_removes_the_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_order_with_reorder_nil_removes_the_order" name="method-i-test_order_with_reorder_nil_removes_the_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_order_with_reorder_nil_removes_the_order_source')" id="l_method-i-test_order_with_reorder_nil_removes_the_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1595" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_order_with_reorder_nil_removes_the_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1595</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_order_with_reorder_nil_removes_the_order</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:title</span>).<span class="ruby-identifier">reorder</span>(<span class="ruby-keyword">nil</span>)

  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">order_values</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_ordering_with_extra_spaces">
            
              <b>test_ordering_with_extra_spaces</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_ordering_with_extra_spaces" name="method-i-test_ordering_with_extra_spaces" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_ordering_with_extra_spaces_source')" id="l_method-i-test_ordering_with_extra_spaces_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1447" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_ordering_with_extra_spaces_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1447</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_ordering_with_extra_spaces</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-value">:david</span>), <span class="ruby-constant">Author</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id DESC , name DESC&#39;</span>).<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_preload_applies_to_all_chained_preloaded_scopes">
            
              <b>test_preload_applies_to_all_chained_preloaded_scopes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_preload_applies_to_all_chained_preloaded_scopes" name="method-i-test_preload_applies_to_all_chained_preloaded_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_preload_applies_to_all_chained_preloaded_scopes_source')" id="l_method-i-test_preload_applies_to_all_chained_preloaded_scopes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L573" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_preload_applies_to_all_chained_preloaded_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 573</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_preload_applies_to_all_chained_preloaded_scopes</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">3</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_comments</span>.<span class="ruby-identifier">with_tags</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_preloading_with_associations_and_merges">
            
              <b>test_preloading_with_associations_and_merges</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_preloading_with_associations_and_merges" name="method-i-test_preloading_with_associations_and_merges" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_preloading_with_associations_and_merges_source')" id="l_method-i-test_preloading_with_associations_and_merges_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L626" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_preloading_with_associations_and_merges_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 626</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_preloading_with_associations_and_merges</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">create!</span> <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Uhuu&#39;</span>, <span class="ruby-identifier">body</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;body&#39;</span>
  <span class="ruby-identifier">reader</span> = <span class="ruby-constant">Reader</span>.<span class="ruby-identifier">create!</span> <span class="ruby-identifier">post_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">person_id</span><span class="ruby-operator">:</span> <span class="ruby-number">1</span>
  <span class="ruby-identifier">comment</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">create!</span> <span class="ruby-identifier">post_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">body</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;body&#39;</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">comment</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:readers</span>)

  <span class="ruby-identifier">post_rel</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:readers</span>).<span class="ruby-identifier">joins</span>(<span class="ruby-value">:readers</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Uhuu&#39;</span>)
  <span class="ruby-identifier">result_comment</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">post_rel</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">result_comment</span>

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">post</span>, <span class="ruby-identifier">result_comment</span>.<span class="ruby-identifier">post</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">reader</span>], <span class="ruby-identifier">result_comment</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">readers</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">post_rel</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:readers</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Uhuu&#39;</span>)
  <span class="ruby-identifier">result_comment</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">post_rel</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">result_comment</span>

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">post</span>, <span class="ruby-identifier">result_comment</span>.<span class="ruby-identifier">post</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">reader</span>], <span class="ruby-identifier">result_comment</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">readers</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_preloading_with_associations_default_scopes_and_merges">
            
              <b>test_preloading_with_associations_default_scopes_and_merges</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_preloading_with_associations_default_scopes_and_merges" name="method-i-test_preloading_with_associations_default_scopes_and_merges" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_preloading_with_associations_default_scopes_and_merges_source')" id="l_method-i-test_preloading_with_associations_default_scopes_and_merges_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L652" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_preloading_with_associations_default_scopes_and_merges_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 652</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_preloading_with_associations_default_scopes_and_merges</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">create!</span> <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Uhuu&#39;</span>, <span class="ruby-identifier">body</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;body&#39;</span>
  <span class="ruby-identifier">reader</span> = <span class="ruby-constant">Reader</span>.<span class="ruby-identifier">create!</span> <span class="ruby-identifier">post_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">person_id</span><span class="ruby-operator">:</span> <span class="ruby-number">1</span>

  <span class="ruby-identifier">post_rel</span> = <span class="ruby-constant">PostWithPreloadDefaultScope</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:readers</span>).<span class="ruby-identifier">joins</span>(<span class="ruby-value">:readers</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Uhuu&#39;</span>)
  <span class="ruby-identifier">result_post</span> = <span class="ruby-constant">PostWithPreloadDefaultScope</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">post_rel</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">reader</span>], <span class="ruby-identifier">result_post</span>.<span class="ruby-identifier">readers</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">post_rel</span> = <span class="ruby-constant">PostWithIncludesDefaultScope</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:readers</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Uhuu&#39;</span>)
  <span class="ruby-identifier">result_post</span> = <span class="ruby-constant">PostWithIncludesDefaultScope</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">post_rel</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">reader</span>], <span class="ruby-identifier">result_post</span>.<span class="ruby-identifier">readers</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_presence">
            
              <b>test_presence</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_presence" name="method-i-test_presence" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_presence_source')" id="l_method-i-test_presence_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1607" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_presence_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1607</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_presence</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-comment"># the first query is triggered because there are no topics yet.</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">present?</span> }

  <span class="ruby-comment"># checking if there are topics is used before you actually display them,</span>
  <span class="ruby-comment"># thus it shouldn&#39;t invoke an extra count query.</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">present?</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topics</span>.<span class="ruby-identifier">blank?</span> }

  <span class="ruby-comment"># shows count of topics and loops after loading the query should not trigger extra queries either.</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">length</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">each</span> }

  <span class="ruby-comment"># count always trigger the COUNT query.</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">count</span> }

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_primary_key">
            
              <b>test_primary_key</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_primary_key" name="method-i-test_primary_key" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_primary_key_source')" id="l_method-i-test_primary_key_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1437" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_primary_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1437</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_primary_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;id&quot;</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">primary_key</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_raising_exception_on_invalid_hash_params">
            
              <b>test_raising_exception_on_invalid_hash_params</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_raising_exception_on_invalid_hash_params" name="method-i-test_raising_exception_on_invalid_hash_params" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_raising_exception_on_invalid_hash_params_source')" id="l_method-i-test_raising_exception_on_invalid_hash_params_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L234" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_raising_exception_on_invalid_hash_params_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_raising_exception_on_invalid_hash_params</span>
  <span class="ruby-identifier">e</span> = <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:name</span>, <span class="ruby-string">&quot;id DESC&quot;</span>, <span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">:asfsdf</span>) }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Direction &quot;asfsdf&quot; is invalid. Valid directions are: [:asc, :desc, :ASC, :DESC, &quot;asc&quot;, &quot;desc&quot;, &quot;ASC&quot;, &quot;DESC&quot;]&#39;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included">
            
              <b>test_references_doesnt_trigger_eager_loading_if_reference_not_included</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included" name="method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included_source')" id="l_method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1530" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_references_doesnt_trigger_eager_loading_if_reference_not_included_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1530</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_references_doesnt_trigger_eager_loading_if_reference_not_included</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">references</span>(<span class="ruby-value">:comments</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scope</span>.<span class="ruby-identifier">eager_loading?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_references_triggers_eager_loading">
            
              <b>test_references_triggers_eager_loading</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_references_triggers_eager_loading" name="method-i-test_references_triggers_eager_loading" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_references_triggers_eager_loading_source')" id="l_method-i-test_references_triggers_eager_loading_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1524" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_references_triggers_eager_loading_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1524</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_references_triggers_eager_loading</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:comments</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scope</span>.<span class="ruby-identifier">eager_loading?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">references</span>(<span class="ruby-value">:comments</span>).<span class="ruby-identifier">eager_loading?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_relation_join_method">
            
              <b>test_relation_join_method</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_relation_join_method" name="method-i-test_relation_join_method" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_relation_join_method_source')" id="l_method-i-test_relation_join_method_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1809" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_relation_join_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1809</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_relation_join_method</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Thank you for the welcome,Thank you again for the welcome&#39;</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;,&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reload">
            
              <b>test_reload</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_reload" name="method-i-test_reload" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reload_source')" id="l_method-i-test_reload_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L126" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_reload_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reload</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">original_size</span> = <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create!</span> <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;fake&#39;</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> }
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_size</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_class_methods_and_scopes">
            
              <b>test_respond_to_class_methods_and_scopes</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_respond_to_class_methods_and_scopes" name="method-i-test_respond_to_class_methods_and_scopes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_class_methods_and_scopes_source')" id="l_method-i-test_respond_to_class_methods_and_scopes_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L525" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_respond_to_class_methods_and_scopes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 525</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_class_methods_and_scopes</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:by_lifo</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_delegates_to_relation">
            
              <b>test_respond_to_delegates_to_relation</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_respond_to_delegates_to_relation" name="method-i-test_respond_to_delegates_to_relation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_delegates_to_relation_source')" id="l_method-i-test_respond_to_delegates_to_relation_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L498" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_respond_to_delegates_to_relation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 498</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_delegates_to_relation</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">fake_arel</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:responds</span>) {
    <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">respond_to?</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">responds</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">method</span>, <span class="ruby-identifier">access</span>]
    <span class="ruby-keyword">end</span>
  }.<span class="ruby-identifier">new</span> []

  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">attr_accessor</span> <span class="ruby-value">:arel</span> })
  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">arel</span> = <span class="ruby-identifier">fake_arel</span>

  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:matching_attributes</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">false</span>], <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span> = []
  <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">:matching_attributes</span>, <span class="ruby-keyword">true</span>], <span class="ruby-identifier">fake_arel</span>.<span class="ruby-identifier">responds</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_respond_to_dynamic_finders">
            
              <b>test_respond_to_dynamic_finders</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_respond_to_dynamic_finders" name="method-i-test_respond_to_dynamic_finders" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_respond_to_dynamic_finders_source')" id="l_method-i-test_respond_to_dynamic_finders_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L517" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_respond_to_dynamic_finders_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 517</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_respond_to_dynamic_finders</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  [<span class="ruby-string">&quot;find_by_title&quot;</span>, <span class="ruby-string">&quot;find_by_title_and_author_name&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">relation</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;Topic.all should respond to #{method.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_reverse_order_with_reorder_nil_removes_the_order">
            
              <b>test_reverse_order_with_reorder_nil_removes_the_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_reverse_order_with_reorder_nil_removes_the_order" name="method-i-test_reverse_order_with_reorder_nil_removes_the_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_reverse_order_with_reorder_nil_removes_the_order_source')" id="l_method-i-test_reverse_order_with_reorder_nil_removes_the_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1601" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_reverse_order_with_reorder_nil_removes_the_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1601</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_reverse_order_with_reorder_nil_removes_the_order</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">:title</span>).<span class="ruby-identifier">reverse_order</span>.<span class="ruby-identifier">reorder</span>(<span class="ruby-keyword">nil</span>)

  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">order_values</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped">
            
              <b>test_scoped</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped" name="method-i-test_scoped" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_source')" id="l_method-i-test_scoped_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L68" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Relation</span>, <span class="ruby-identifier">topics</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_all">
            
              <b>test_scoped_all</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_all" name="method-i-test_scoped_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_all_source')" id="l_method-i-test_scoped_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L89" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_all</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Array</span>, <span class="ruby-identifier">topics</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_build">
            
              <b>test_scoped_build</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_build" name="method-i-test_scoped_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_build_source')" id="l_method-i-test_scoped_build_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1170" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1170</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_build</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;You told a lie&#39;</span>)

  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Post</span>, <span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;You told a lie&#39;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_first">
            
              <b>test_scoped_first</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_first" name="method-i-test_scoped_first" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_first_source')" id="l_method-i-test_scoped_first_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L105" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_first_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_first</span>
  <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;id ASC&#39;</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-number">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_responds_to_delegated_methods">
            
              <b>test_scoped_responds_to_delegated_methods</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_scoped_responds_to_delegated_methods" name="method-i-test_scoped_responds_to_delegated_methods" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_responds_to_delegated_methods_source')" id="l_method-i-test_scoped_responds_to_delegated_methods_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L490" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_responds_to_delegated_methods_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 490</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_responds_to_delegated_methods</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>

  [<span class="ruby-string">&quot;map&quot;</span>, <span class="ruby-string">&quot;uniq&quot;</span>, <span class="ruby-string">&quot;sort&quot;</span>, <span class="ruby-string">&quot;insert&quot;</span>, <span class="ruby-string">&quot;delete&quot;</span>, <span class="ruby-string">&quot;update&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">relation</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;Topic.all should respond to #{method.inspect}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_argument_error">
            
              <b>test_select_argument_error</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_argument_error" name="method-i-test_select_argument_error" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_argument_error_source')" id="l_method-i-test_select_argument_error_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L987" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_select_argument_error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 987</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_argument_error</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">select</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_takes_a_variable_list_of_args">
            
              <b>test_select_takes_a_variable_list_of_args</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_takes_a_variable_list_of_args" name="method-i-test_select_takes_a_variable_list_of_args" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_takes_a_variable_list_of_args_source')" id="l_method-i-test_select_takes_a_variable_list_of_args_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L972" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_select_takes_a_variable_list_of_args_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 972</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_takes_a_variable_list_of_args</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)

  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:name</span>, <span class="ruby-value">:salary</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">salary</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">salary</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_takes_an_aliased_attribute">
            
              <b>test_select_takes_an_aliased_attribute</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_takes_an_aliased_attribute" name="method-i-test_select_takes_an_aliased_attribute" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_takes_an_aliased_attribute_source')" id="l_method-i-test_select_takes_an_aliased_attribute_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L980" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_select_takes_an_aliased_attribute_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 980</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_takes_an_aliased_attribute</span>
  <span class="ruby-identifier">first</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-value">:first</span>)

  <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">select</span>(<span class="ruby-value">:heading</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">first</span>.<span class="ruby-identifier">heading</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">heading</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_with_aggregates">
            
              <b>test_select_with_aggregates</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_with_aggregates" name="method-i-test_select_with_aggregates" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_with_aggregates_source')" id="l_method-i-test_select_with_aggregates_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L962" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_select_with_aggregates_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 962</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_with_aggregates</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:title</span>, <span class="ruby-value">:body</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value">:all</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">any?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">many?</span>
  <span class="ruby-identifier">assert_not</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_with_block">
            
              <b>test_select_with_block</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_with_block" name="method-i-test_select_with_block" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_with_block_source')" id="l_method-i-test_select_with_block_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L321" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_select_with_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_with_block</span>
  <span class="ruby-identifier">even_ids</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">%</span> <span class="ruby-number">2</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span> }.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">2</span>, <span class="ruby-number">4</span>, <span class="ruby-number">6</span>, <span class="ruby-number">8</span>, <span class="ruby-number">10</span>], <span class="ruby-identifier">even_ids</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_select_with_subquery_in_from_does_not_use_original_table_name">
            
              <b>test_select_with_subquery_in_from_does_not_use_original_table_name</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_select_with_subquery_in_from_does_not_use_original_table_name" name="method-i-test_select_with_subquery_in_from_does_not_use_original_table_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_select_with_subquery_in_from_does_not_use_original_table_name_source')" id="l_method-i-test_select_with_subquery_in_from_does_not_use_original_table_name_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L164" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_select_with_subquery_in_from_does_not_use_original_table_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 164</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_select_with_subquery_in_from_does_not_use_original_table_name</span>
  <span class="ruby-identifier">relation</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">:type</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;COUNT(post_id) AS post_count, type&#39;</span>)
  <span class="ruby-identifier">subquery</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">relation</span>).<span class="ruby-identifier">select</span>(<span class="ruby-string">&#39;type&#39;</span>,<span class="ruby-string">&#39;post_count&#39;</span>)
  <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">relation</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:post_count</span>).<span class="ruby-identifier">sort</span>,<span class="ruby-identifier">subquery</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:post_count</span>).<span class="ruby-identifier">sort</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size">
            
              <b>test_size</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_size" name="method-i-test_size" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_source')" id="l_method-i-test_size_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1050" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_size_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1050</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">11</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_with_limit">
            
              <b>test_size_with_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_size_with_limit" name="method-i-test_size_with_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_with_limit_source')" id="l_method-i-test_size_with_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1061" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_size_with_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1061</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_with_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">10</span>)

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">10</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">best_posts</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:comments_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">9</span>, <span class="ruby-identifier">best_posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_size_with_zero_limit">
            
              <b>test_size_with_zero_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_size_with_zero_limit" name="method-i-test_size_with_zero_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_size_with_zero_limit_source')" id="l_method-i-test_size_with_zero_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1072" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_size_with_zero_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1072</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_size_with_zero_limit</span>
  <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">0</span>)

  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force load</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_support_upper_and_lower_case_directions">
            
              <b>test_support_upper_and_lower_case_directions</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_support_upper_and_lower_case_directions" name="method-i-test_support_upper_and_lower_case_directions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_support_upper_and_lower_case_directions_source')" id="l_method-i-test_support_upper_and_lower_case_directions_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L222" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_support_upper_and_lower_case_directions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_support_upper_and_lower_case_directions</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ASC&quot;</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-string">&quot;ASC&quot;</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;asc&quot;</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-string">&quot;ASC&quot;</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">:ASC</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-string">&quot;ASC&quot;</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">:asc</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-string">&quot;ASC&quot;</span>

  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;DESC&quot;</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-string">&quot;DESC&quot;</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;desc&quot;</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-string">&quot;DESC&quot;</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">:DESC</span>).<span class="ruby-identifier">to_sql</span>, <span class="ruby-string">&quot;DESC&quot;</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">order</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">:desc</span>).<span class="ruby-identifier">to_sql</span>,<span class="ruby-string">&quot;DESC&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_json">
            
              <b>test_to_json</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_json" name="method-i-test_to_json" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_json_source')" id="l_method-i-test_to_json_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L74" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_to_json_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_json</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_json</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">to_json</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_sql_on_eager_join">
            
              <b>test_to_sql_on_eager_join</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_sql_on_eager_join" name="method-i-test_to_sql_on_eager_join" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_sql_on_eager_join_source')" id="l_method-i-test_to_sql_on_eager_join_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L686" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_to_sql_on_eager_join_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 686</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_sql_on_eager_join</span>
  <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">assert_sql</span> {
    <span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id DESC&#39;</span>).<span class="ruby-identifier">to_a</span>
  }.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">actual</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">eager_load</span>(<span class="ruby-value">:last_comment</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id DESC&#39;</span>).<span class="ruby-identifier">to_sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">actual</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_sql_on_scoped_proxy">
            
              <b>test_to_sql_on_scoped_proxy</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_sql_on_scoped_proxy" name="method-i-test_to_sql_on_scoped_proxy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_sql_on_scoped_proxy_source')" id="l_method-i-test_to_sql_on_scoped_proxy_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L694" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_to_sql_on_scoped_proxy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 694</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_sql_on_scoped_proxy</span>
  <span class="ruby-identifier">auth</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;1=1&quot;</span>).<span class="ruby-identifier">written_by</span>(<span class="ruby-identifier">auth</span>)
  <span class="ruby-identifier">assert_not</span> <span class="ruby-identifier">auth</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">to_sql</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;1=1&quot;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_xml">
            
              <b>test_to_xml</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_xml" name="method-i-test_to_xml" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_xml_source')" id="l_method-i-test_to_xml_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L84" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_to_xml_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_xml</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_xml</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">to_xml</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_to_yaml">
            
              <b>test_to_yaml</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_to_yaml" name="method-i-test_to_yaml" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_to_yaml_source')" id="l_method-i-test_to_yaml_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L79" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_to_yaml_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_to_yaml</span>
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_yaml</span> }
  <span class="ruby-identifier">assert_nothing_raised</span>  { <span class="ruby-constant">Bird</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">to_yaml</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_two_scopes_with_includes_should_not_drop_any_include">
            
              <b>test_two_scopes_with_includes_should_not_drop_any_include</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_two_scopes_with_includes_should_not_drop_any_include" name="method-i-test_two_scopes_with_includes_should_not_drop_any_include" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_two_scopes_with_includes_should_not_drop_any_include_source')" id="l_method-i-test_two_scopes_with_includes_should_not_drop_any_include_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L47" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_two_scopes_with_includes_should_not_drop_any_include_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 47</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_two_scopes_with_includes_should_not_drop_any_include</span>
  <span class="ruby-comment"># heat habtm cache</span>
  <span class="ruby-identifier">car</span> = <span class="ruby-constant">Car</span>.<span class="ruby-identifier">incl_engines</span>.<span class="ruby-identifier">incl_tyres</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">car</span>.<span class="ruby-identifier">tyres</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">car</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">length</span>

  <span class="ruby-identifier">car</span> = <span class="ruby-constant">Car</span>.<span class="ruby-identifier">incl_engines</span>.<span class="ruby-identifier">incl_tyres</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">car</span>.<span class="ruby-identifier">tyres</span>.<span class="ruby-identifier">length</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">car</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">length</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_typecasting_where_with_array">
            
              <b>test_typecasting_where_with_array</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_typecasting_where_with_array" name="method-i-test_typecasting_where_with_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_typecasting_where_with_array_source')" id="l_method-i-test_typecasting_where_with_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L809" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_typecasting_where_with_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 809</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_typecasting_where_with_array</span>
  <span class="ruby-identifier">ids</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-value">:id</span>)
  <span class="ruby-identifier">slugs</span> = <span class="ruby-identifier">ids</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{id}-as-a-slug&quot;</span> }

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>, <span class="ruby-constant">Author</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">slugs</span>).<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unscope_removes_binds">
            
              <b>test_unscope_removes_binds</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_unscope_removes_binds" name="method-i-test_unscope_removes_binds" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unscope_removes_binds_source')" id="l_method-i-test_unscope_removes_binds_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1772" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_unscope_removes_binds_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1772</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unscope_removes_binds</span>
  <span class="ruby-identifier">left</span>  = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">BindParam</span>.<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">column</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">columns_hash</span>[<span class="ruby-string">&#39;id&#39;</span>]
  <span class="ruby-identifier">left</span>.<span class="ruby-identifier">bind_values</span> <span class="ruby-operator">+=</span> [[<span class="ruby-identifier">column</span>, <span class="ruby-number">20</span>]]

  <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">unscope</span>(<span class="ruby-identifier">where</span><span class="ruby-operator">:</span> <span class="ruby-value">:id</span>)
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">bind_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_unscoped_block_style">
            
              <b>test_unscoped_block_style</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_unscoped_block_style" name="method-i-test_unscoped_block_style" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_unscoped_block_style_source')" id="l_method-i-test_unscoped_block_style_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1424" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_unscoped_block_style_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1424</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_unscoped_block_style</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">CoolCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;honda&#39;</span>, <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-constant">FastCar</span>.<span class="ruby-identifier">order_using_new_style</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>}
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_blank_argument">
            
              <b>test_update_all_with_blank_argument</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_blank_argument" name="method-i-test_update_all_with_blank_argument" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_blank_argument_source')" id="l_method-i-test_update_all_with_blank_argument_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1451" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_all_with_blank_argument_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1451</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_blank_argument</span>
  <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">update_all</span>({}) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins">
            
              <b>test_update_all_with_joins</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins" name="method-i-test_update_all_with_joins" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_source')" id="l_method-i-test_update_all_with_joins_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1455" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1455</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">count</span>    = <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">count</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_limit">
            
              <b>test_update_all_with_joins_and_limit</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_limit" name="method-i-test_update_all_with_joins_and_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_limit_source')" id="l_method-i-test_update_all_with_joins_and_limit_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1463" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_limit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1463</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_limit</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_limit_and_order">
            
              <b>test_update_all_with_joins_and_limit_and_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_limit_and_order" name="method-i-test_update_all_with_joins_and_limit_and_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_limit_and_order_source')" id="l_method-i-test_update_all_with_joins_and_limit_and_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1468" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_limit_and_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1468</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_limit_and_order</span>
  <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;comments.id&#39;</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>),  <span class="ruby-identifier">comments</span>(<span class="ruby-value">:more_greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_offset">
            
              <b>test_update_all_with_joins_and_offset</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_offset" name="method-i-test_update_all_with_joins_and_offset" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_offset_source')" id="l_method-i-test_update_all_with_joins_and_offset_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1475" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_offset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1475</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_offset</span>
  <span class="ruby-identifier">all_comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">count</span>        = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">comments</span>     = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_joins_and_offset_and_order">
            
              <b>test_update_all_with_joins_and_offset_and_order</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_joins_and_offset_and_order" name="method-i-test_update_all_with_joins_and_offset_and_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_joins_and_offset_and_order_source')" id="l_method-i-test_update_all_with_joins_and_offset_and_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1483" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_all_with_joins_and_offset_and_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1483</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_joins_and_offset_and_order</span>
  <span class="ruby-identifier">all_comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">joins</span>(<span class="ruby-value">:post</span>).<span class="ruby-identifier">where</span>(<span class="ruby-string">&#39;posts.id&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>).<span class="ruby-identifier">id</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;posts.id&#39;</span>, <span class="ruby-string">&#39;comments.id&#39;</span>)
  <span class="ruby-identifier">count</span>        = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">comments</span>     = <span class="ruby-identifier">all_comments</span>.<span class="ruby-identifier">offset</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:thinking</span>), <span class="ruby-identifier">comments</span>(<span class="ruby-value">:more_greetings</span>).<span class="ruby-identifier">post</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-value">:welcome</span>),  <span class="ruby-identifier">comments</span>(<span class="ruby-value">:greetings</span>).<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_all_with_scope">
            
              <b>test_update_all_with_scope</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_update_all_with_scope" name="method-i-test_update_all_with_scope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_all_with_scope_source')" id="l_method-i-test_update_all_with_scope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L1023" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_all_with_scope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 1023</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_all_with_scope</span>
  <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">tagged_with</span>(<span class="ruby-identifier">tag</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">update_all</span> <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;rofl&quot;</span>
  <span class="ruby-identifier">list</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">tagged_with</span>(<span class="ruby-identifier">tag</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_operator</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>, <span class="ruby-value">:&gt;</span>, <span class="ruby-number">0</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">post</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;rofl&#39;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_where_with_ar_object">
            
              <b>test_where_with_ar_object</b>()
            
            <a href="../classes/RelationTest.html#method-i-test_where_with_ar_object" name="method-i-test_where_with_ar_object" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_where_with_ar_object_source')" id="l_method-i-test_where_with_ar_object_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/10ff0ccf4fa50a3ebd4fa57c1d1a1dc6676ced39/activerecord/test/cases/relations_test.rb#L756" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_where_with_ar_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/relations_test.rb, line 756</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_where_with_ar_object</span>
  <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">authors</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">author</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">authors</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    