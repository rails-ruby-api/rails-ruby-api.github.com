<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>HasAndBelongsToManyAssociationsTest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            HasAndBelongsToManyAssociationsTest 
            
                <span class="parent">&lt; 
                    
                    ActiveRecord::TestCase
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test_rb.html">activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup_data_for_habtm_case">setup_data_for_habtm_case</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-test_adding_a_collection">test_adding_a_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_from_the_project">test_adding_from_the_project</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_from_the_project_fixed_timestamp">test_adding_from_the_project_fixed_timestamp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_multiple">test_adding_multiple</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_single">test_adding_single</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_adding_type_mismatch">test_adding_type_mismatch</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_alternate_database">test_alternate_database</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_assign_ids">test_assign_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_assign_ids_ignoring_blanks">test_assign_ids_ignoring_blanks</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class">test_association_proxy_transaction_method_starts_transaction_in_association_class</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_association_with_extend_option">test_association_with_extend_option</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create">test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update">test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_associations_with_conditions">test_associations_with_conditions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses">test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause">test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build">test_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_build_by_new_record">test_build_by_new_record</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_caching_of_columns">test_caching_of_columns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_consider_type">test_consider_type</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_count">test_count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create">test_create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_create_by_new_record">test_create_by_new_record</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_creation_respects_hash_condition">test_creation_respects_hash_condition</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_custom_join_table">test_custom_join_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting">test_deleting</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_all">test_deleting_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_deleting_array">test_deleting_array</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_all">test_destroy_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroy_associations_destroys_multiple_associations">test_destroy_associations_destroys_multiple_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroying">test_destroying</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destroying_many">test_destroying_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_destruction_does_not_error_without_primary_key">test_destruction_does_not_error_without_primary_key</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_all_should_respect_readonly_access">test_dynamic_find_all_should_respect_readonly_access</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_should_respect_association_include">test_dynamic_find_should_respect_association_include</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_dynamic_find_should_respect_association_order">test_dynamic_find_should_respect_association_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_grouped">test_find_grouped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_association">test_find_in_association</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_in_association_with_options">test_find_in_association_with_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_scoped_grouped">test_find_scoped_grouped</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_scoped_grouped_having">test_find_scoped_grouped_having</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_should_append_to_association_order">test_find_should_append_to_association_order</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_find_with_merged_options">test_find_with_merged_options</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_get_ids">test_get_ids</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_get_ids_for_loaded_associations">test_get_ids_for_loaded_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_get_ids_for_unloaded_associations_does_not_load_them">test_get_ids_for_unloaded_associations_does_not_load_them</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_adding_before_save">test_habtm_adding_before_save</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_collection_size_from_build">test_habtm_collection_size_from_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_collection_size_from_params">test_habtm_collection_size_from_params</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_respects_select">test_habtm_respects_select</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_respects_select_query_method">test_habtm_respects_select_query_method</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_saving_multiple_relationships">test_habtm_saving_multiple_relationships</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_scope_can_unscope">test_habtm_scope_can_unscope</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_selects_all_columns_by_default">test_habtm_selects_all_columns_by_default</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_unique_order_preserved">test_habtm_unique_order_preserved</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_habtm_with_reflection_using_class_name_and_fixtures">test_habtm_with_reflection_using_class_name_and_fixtures</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_and_belongs_to_many">test_has_and_belongs_to_many</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_and_belongs_to_many_associations_on_new_records_use_null_relations">test_has_and_belongs_to_many_associations_on_new_records_use_null_relations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model">test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model">test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_has_many_through_polymorphic_has_manys_works">test_has_many_through_polymorphic_has_manys_works</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_checks_if_record_exists_if_target_not_loaded">test_include_checks_if_record_exists_if_target_not_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build">test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping">test_include_returns_false_for_non_matching_record_to_verify_scoping</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_include_uses_array_include_after_loaded">test_include_uses_array_include_after_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_join_table_alias">test_join_table_alias</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_join_with_group">test_join_with_group</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_marshal_dump">test_marshal_dump</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_new_aliased_to_build">test_new_aliased_to_build</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_new_with_values_in_collection">test_new_with_values_in_collection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_preloaded_associations_size">test_preloaded_associations_size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_proper_usage_of_primary_keys_and_join_table">test_proper_usage_of_primary_keys_and_join_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_redefine_habtm">test_redefine_habtm</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_removing_associations_on_destroy">test_removing_associations_on_destroy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_on_new_object">test_replace_on_new_object</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_with_less">test_replace_with_less</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_replace_with_new">test_replace_with_new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records">test_scoped_find_on_through_association_doesnt_return_read_only_records</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_should_property_quote_string_primary_keys">test_should_property_quote_string_primary_keys</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_symbol_join_table">test_symbol_join_table</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_symbols_as_keys">test_symbols_as_keys</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq_after_the_fact">test_uniq_after_the_fact</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq_before_the_fact">test_uniq_before_the_fact</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq_option_prevents_duplicate_push">test_uniq_option_prevents_duplicate_push</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_uniq_when_association_already_loaded">test_uniq_when_association_already_loaded</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_update_attributes_after_push_without_duplicate_join_table_rows">test_update_attributes_after_push_without_duplicate_join_table_rows</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_updating_attributes_on_non_rich_associations">test_updating_attributes_on_non_rich_associations</a>,
              </li>
            
              
              <li>
                <a href="#method-i-test_with_symbol_class_name">test_with_symbol_class_name</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-setup_data_for_habtm_case">
            
              <b>setup_data_for_habtm_case</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-setup_data_for_habtm_case" name="method-i-setup_data_for_habtm_case" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_data_for_habtm_case_source')" id="l_method-i-setup_data_for_habtm_case_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L111" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-setup_data_for_habtm_case_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_data_for_habtm_case</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span>(<span class="ruby-string">&#39;delete from countries_treaties&#39;</span>)

  <span class="ruby-identifier">country</span> = <span class="ruby-constant">Country</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;India&#39;</span>)
  <span class="ruby-identifier">country</span>.<span class="ruby-identifier">country_id</span> = <span class="ruby-string">&#39;c1&#39;</span>
  <span class="ruby-identifier">country</span>.<span class="ruby-identifier">save!</span>

  <span class="ruby-identifier">treaty</span> = <span class="ruby-constant">Treaty</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;peace&#39;</span>)
  <span class="ruby-identifier">treaty</span>.<span class="ruby-identifier">treaty_id</span> = <span class="ruby-string">&#39;t1&#39;</span>
  <span class="ruby-identifier">country</span>.<span class="ruby-identifier">treaties</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">treaty</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_a_collection">
            
              <b>test_adding_a_collection</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_adding_a_collection" name="method-i-test_adding_a_collection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_a_collection_source')" id="l_method-i-test_adding_a_collection_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L220" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_adding_a_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_a_collection</span>
  <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Aredridel&quot;</span>)
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)])
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_from_the_project">
            
              <b>test_adding_from_the_project</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_adding_from_the_project" name="method-i-test_adding_from_the_project" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_from_the_project_source')" id="l_method-i-test_adding_from_the_project_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L181" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_adding_from_the_project_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 181</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_from_the_project</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_from_the_project_fixed_timestamp">
            
              <b>test_adding_from_the_project_fixed_timestamp</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_adding_from_the_project_fixed_timestamp" name="method-i-test_adding_from_the_project_fixed_timestamp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_from_the_project_fixed_timestamp_source')" id="l_method-i-test_adding_from_the_project_fixed_timestamp_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L195" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_adding_from_the_project_fixed_timestamp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 195</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_from_the_project_fixed_timestamp</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">updated_at</span> = <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">updated_at</span>

  <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">updated_at</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">updated_at</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_multiple">
            
              <b>test_adding_multiple</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_adding_multiple" name="method-i-test_adding_multiple" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_multiple_source')" id="l_method-i-test_adding_multiple_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L211" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_adding_multiple_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_multiple</span>
  <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Aredridel&quot;</span>)
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>))
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_single">
            
              <b>test_adding_single</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_adding_single" name="method-i-test_adding_single" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_single_source')" id="l_method-i-test_adding_single_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L161" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_adding_single_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 161</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_single</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment"># causing the collection to load</span>
  <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">action_controller</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_adding_type_mismatch">
            
              <b>test_adding_type_mismatch</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_adding_type_mismatch" name="method-i-test_adding_type_mismatch" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_adding_type_mismatch_source')" id="l_method-i-test_adding_type_mismatch_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L175" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_adding_type_mismatch_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 175</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_adding_type_mismatch</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">2</span>)
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">nil</span> }
  <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-number">1</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_alternate_database">
            
              <b>test_alternate_database</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_alternate_database" name="method-i-test_alternate_database" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_alternate_database_source')" id="l_method-i-test_alternate_database_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L932" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_alternate_database_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 932</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_alternate_database</span>
  <span class="ruby-identifier">professor</span> = <span class="ruby-constant">Professor</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Plum&quot;</span>)
  <span class="ruby-identifier">course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Forensics&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">professor</span>.<span class="ruby-identifier">courses</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">professor</span>.<span class="ruby-identifier">courses</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">course</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">professor</span>.<span class="ruby-identifier">courses</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_assign_ids">
            
              <b>test_assign_ids</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_assign_ids" name="method-i-test_assign_ids" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_assign_ids_source')" id="l_method-i-test_assign_ids_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L754" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_assign_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 754</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_assign_ids</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Joe&quot;</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>)].<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_assign_ids_ignoring_blanks">
            
              <b>test_assign_ids_ignoring_blanks</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_assign_ids_ignoring_blanks" name="method-i-test_assign_ids_ignoring_blanks" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_assign_ids_ignoring_blanks_source')" id="l_method-i-test_assign_ids_ignoring_blanks_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L763" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_assign_ids_ignoring_blanks_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 763</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_assign_ids_ignoring_blanks</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Joe&quot;</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">id</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">id</span>, <span class="ruby-string">&#39;&#39;</span>]
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>)].<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class">
            
              <b>test_association_proxy_transaction_method_starts_transaction_in_association_class</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class" name="method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class_source')" id="l_method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L807" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_association_proxy_transaction_method_starts_transaction_in_association_class_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 807</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_association_proxy_transaction_method_starts_transaction_in_association_class</span>
  <span class="ruby-constant">Post</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-value">:transaction</span>)
  <span class="ruby-constant">Category</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># nothing</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_association_with_extend_option">
            
              <b>test_association_with_extend_option</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_association_with_extend_option" name="method-i-test_association_with_extend_option" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_association_with_extend_option_source')" id="l_method-i-test_association_with_extend_option_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L601" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_association_with_extend_option_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 601</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_association_with_extend_option</span>
  <span class="ruby-identifier">eponine</span> = <span class="ruby-constant">DeveloperWithExtendOption</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Eponine&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;sns&#39;</span>, <span class="ruby-identifier">eponine</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">category</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create">
            
              <b>test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create" name="method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create_source')" id="l_method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L866" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 866</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_create</span>
  <span class="ruby-identifier">rich_person</span> = <span class="ruby-constant">RichPerson</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-identifier">treasure</span> = <span class="ruby-constant">Treasure</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">treasure</span>.<span class="ruby-identifier">rich_people</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">rich_person</span>
  <span class="ruby-identifier">treasure</span>.<span class="ruby-identifier">valid?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">treasure</span>.<span class="ruby-identifier">rich_people</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">rich_person</span>.<span class="ruby-identifier">first_name</span>, <span class="ruby-string">&#39;should not run associated person validation on create when validate: false&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update">
            
              <b>test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update" name="method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update_source')" id="l_method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L877" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 877</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_association_with_validate_false_does_not_run_associated_validation_callbacks_on_update</span>
  <span class="ruby-identifier">rich_person</span> = <span class="ruby-constant">RichPerson</span>.<span class="ruby-identifier">create!</span>
  <span class="ruby-identifier">person_first_name</span> = <span class="ruby-identifier">rich_person</span>.<span class="ruby-identifier">first_name</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">person_first_name</span>

  <span class="ruby-identifier">treasure</span> = <span class="ruby-constant">Treasure</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">treasure</span>.<span class="ruby-identifier">rich_people</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">rich_person</span>
  <span class="ruby-identifier">treasure</span>.<span class="ruby-identifier">valid?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">treasure</span>.<span class="ruby-identifier">rich_people</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">person_first_name</span>, <span class="ruby-identifier">rich_person</span>.<span class="ruby-identifier">first_name</span>, <span class="ruby-string">&#39;should not run associated person validation on update when validate: false&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_associations_with_conditions">
            
              <b>test_associations_with_conditions</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_associations_with_conditions" name="method-i-test_associations_with_conditions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_associations_with_conditions_source')" id="l_method-i-test_associations_with_conditions_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L503" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_associations_with_conditions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 503</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_associations_with_conditions</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david_with_hash_conditions</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david_with_hash_conditions</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>)

  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:reload</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses">
            
              <b>test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses" name="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses_source')" id="l_method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L834" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 834</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attributes_are_being_set_when_initialized_from_habm_association_with_multiple_where_clauses</span>
  <span class="ruby-identifier">new_developer</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcelo&quot;</span>).<span class="ruby-identifier">where</span>(<span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">90_000</span>).<span class="ruby-identifier">build</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;Marcelo&quot;</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">salary</span>, <span class="ruby-number">90_000</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause">
            
              <b>test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause" name="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause_source')" id="l_method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L829" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 829</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_attributes_are_being_set_when_initialized_from_habm_association_with_where_clause</span>
  <span class="ruby-identifier">new_developer</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcelo&quot;</span>).<span class="ruby-identifier">build</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;Marcelo&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build">
            
              <b>test_build</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_build" name="method-i-test_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_source')" id="l_method-i-test_build_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L281" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 281</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) { <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>) }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_build_by_new_record">
            
              <b>test_build_by_new_record</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_build_by_new_record" name="method-i-test_build_by_new_record" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_build_by_new_record_source')" id="l_method-i-test_build_by_new_record_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L311" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_build_by_new_record_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 311</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_build_by_new_record</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcel&quot;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">75000</span>)
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Make bed&quot;</span>)
  <span class="ruby-identifier">proj2</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Lie in it&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;Marcel&quot;</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_caching_of_columns">
            
              <b>test_caching_of_columns</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_caching_of_columns" name="method-i-test_caching_of_columns" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_caching_of_columns_source')" id="l_method-i-test_caching_of_columns_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L814" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_caching_of_columns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 814</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_caching_of_columns</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-comment"># clear cache possibly created by other tests</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reset_column_information</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">:any</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }

  <span class="ruby-comment">## and again to verify that reset_column_information clears the cache correctly</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reset_column_information</span>

  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">:any</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }
  <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_consider_type">
            
              <b>test_consider_type</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_consider_type" name="method-i-test_consider_type" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_consider_type_source')" id="l_method-i-test_consider_type_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L628" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_consider_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 628</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_consider_type</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">special_project</span> = <span class="ruby-constant">SpecialProject</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Special Project&quot;</span>)

  <span class="ruby-identifier">other_project</span> = <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">special_project</span>
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">special_project</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">special_project</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">other_project</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_count">
            
              <b>test_count</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_count" name="method-i-test_count" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_count_source')" id="l_method-i-test_count_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L802" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_count_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 802</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_count</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create">
            
              <b>test_create</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_create" name="method-i-test_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_source')" id="l_method-i-test_create_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L324" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 324</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_create_by_new_record">
            
              <b>test_create_by_new_record</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_create_by_new_record" name="method-i-test_create_by_new_record" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_create_by_new_record_source')" id="l_method-i-test_create_by_new_record_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L336" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_create_by_new_record_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 336</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_create_by_new_record</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Marcel&quot;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">75000</span>)
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Make bed&quot;</span>)
  <span class="ruby-identifier">proj2</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Lie in it&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;Marcel&quot;</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_creation_respects_hash_condition">
            
              <b>test_creation_respects_hash_condition</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_creation_respects_hash_condition" name="method-i-test_creation_respects_hash_condition" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_creation_respects_hash_condition_source')" id="l_method-i-test_creation_respects_hash_condition_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L349" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_creation_respects_hash_condition_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 349</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_creation_respects_hash_condition</span>
  <span class="ruby-comment"># in Oracle &#39;&#39; is saved as null therefore need to save &#39; &#39; in not null column</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-value">:general</span>).<span class="ruby-identifier">post_with_conditions</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39; &#39;</span>)

  <span class="ruby-identifier">assert</span>        <span class="ruby-identifier">post</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span>  <span class="ruby-string">&#39;Yet Another Testing Title&#39;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>

  <span class="ruby-comment"># in Oracle &#39;&#39; is saved as null therefore need to save &#39; &#39; in not null column</span>
  <span class="ruby-identifier">another_post</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-value">:general</span>).<span class="ruby-identifier">post_with_conditions</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39; &#39;</span>)

  <span class="ruby-identifier">assert</span>        <span class="ruby-identifier">another_post</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span>  <span class="ruby-string">&#39;Yet Another Testing Title&#39;</span>, <span class="ruby-identifier">another_post</span>.<span class="ruby-identifier">title</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_custom_join_table">
            
              <b>test_custom_join_table</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_custom_join_table" name="method-i-test_custom_join_table" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_custom_join_table_source')" id="l_method-i-test_custom_join_table_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L890" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_custom_join_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 890</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_custom_join_table</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;edges&#39;</span>, <span class="ruby-constant">Vertex</span>.<span class="ruby-identifier">reflect_on_association</span>(<span class="ruby-value">:sources</span>).<span class="ruby-identifier">join_table</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting">
            
              <b>test_deleting</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_deleting" name="method-i-test_deleting" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_source')" id="l_method-i-test_deleting_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L395" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deleting_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">active_record</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_all">
            
              <b>test_deleting_all</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_deleting_all" name="method-i-test_deleting_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_all_source')" id="l_method-i-test_deleting_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L417" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deleting_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_all</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_deleting_array">
            
              <b>test_deleting_array</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_deleting_array" name="method-i-test_deleting_array" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_deleting_array_source')" id="l_method-i-test_deleting_array_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L409" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_deleting_array_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_deleting_array</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_all">
            
              <b>test_destroy_all</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_destroy_all" name="method-i-test_destroy_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_all_source')" id="l_method-i-test_destroy_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L467" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_destroy_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 467</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_all</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Project.count&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy_all</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM developers_projects WHERE developer_id = #{david.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroy_associations_destroys_multiple_associations">
            
              <b>test_destroy_associations_destroys_multiple_associations</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_destroy_associations_destroys_multiple_associations" name="method-i-test_destroy_associations_destroys_multiple_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroy_associations_destroys_multiple_associations_source')" id="l_method-i-test_destroy_associations_destroys_multiple_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L483" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_destroy_associations_destroys_multiple_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 483</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroy_associations_destroys_multiple_associations</span>
  <span class="ruby-identifier">george</span> = <span class="ruby-identifier">parrots</span>(<span class="ruby-value">:george</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">george</span>.<span class="ruby-identifier">pirates</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">george</span>.<span class="ruby-identifier">treasures</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Pirate.count&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Treasure.count&quot;</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">george</span>.<span class="ruby-identifier">destroy_associations</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Parrot</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM parrots_pirates WHERE parrot_id = #{george.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">george</span>.<span class="ruby-identifier">pirates</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Parrot</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM parrots_treasures WHERE parrot_id = #{george.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">george</span>.<span class="ruby-identifier">treasures</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroying">
            
              <b>test_destroying</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_destroying" name="method-i-test_destroying" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroying_source')" id="l_method-i-test_destroying_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L433" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_destroying_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroying</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Project.count&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">project</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM developers_projects WHERE developer_id = #{david.id} AND project_id = #{project.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destroying_many">
            
              <b>test_destroying_many</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_destroying_many" name="method-i-test_destroying_many" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destroying_many_source')" id="l_method-i-test_destroying_many_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L451" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_destroying_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 451</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destroying_many</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">projects</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">to_a</span>

  <span class="ruby-identifier">assert_no_difference</span> <span class="ruby-string">&quot;Project.count&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">projects</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_records</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SELECT * FROM developers_projects WHERE developer_id = #{david.id}&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">join_records</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_destruction_does_not_error_without_primary_key">
            
              <b>test_destruction_does_not_error_without_primary_key</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_destruction_does_not_error_without_primary_key" name="method-i-test_destruction_does_not_error_without_primary_key" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_destruction_does_not_error_without_primary_key_source')" id="l_method-i-test_destruction_does_not_error_without_primary_key_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L846" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_destruction_does_not_error_without_primary_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 846</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_destruction_does_not_error_without_primary_key</span>
  <span class="ruby-identifier">redbeard</span> = <span class="ruby-identifier">pirates</span>(<span class="ruby-value">:redbeard</span>)
  <span class="ruby-identifier">george</span> = <span class="ruby-identifier">parrots</span>(<span class="ruby-value">:george</span>)
  <span class="ruby-identifier">redbeard</span>.<span class="ruby-identifier">parrots</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">george</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">george</span>.<span class="ruby-identifier">pirates</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-constant">Pirate</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:parrots</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">parrot</span><span class="ruby-operator">:</span> <span class="ruby-identifier">redbeard</span>.<span class="ruby-identifier">parrot</span>).<span class="ruby-identifier">find</span>(<span class="ruby-identifier">redbeard</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">destroy</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">george</span>.<span class="ruby-identifier">pirates</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Pirate</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">redbeard</span>.<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_all_should_respect_readonly_access">
            
              <b>test_dynamic_find_all_should_respect_readonly_access</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_dynamic_find_all_should_respect_readonly_access" name="method-i-test_dynamic_find_all_should_respect_readonly_access" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_all_should_respect_readonly_access_source')" id="l_method-i-test_dynamic_find_all_should_respect_readonly_access_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L577" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_find_all_should_respect_readonly_access_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 577</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_all_should_respect_readonly_access</span>
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">readonly_developers</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ReadOnlyRecord</span>) { <span class="ruby-identifier">d</span>.<span class="ruby-identifier">save!</span>  } <span class="ruby-keyword">if</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">valid?</span>}
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">readonly_developers</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_should_respect_association_include">
            
              <b>test_dynamic_find_should_respect_association_include</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_dynamic_find_should_respect_association_include" name="method-i-test_dynamic_find_should_respect_association_include" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_should_respect_association_include_source')" id="l_method-i-test_dynamic_find_should_respect_association_include_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L796" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_find_should_respect_association_include_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 796</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_should_respect_association_include</span>
  <span class="ruby-comment"># SQL error in sort clause if :include is not included</span>
  <span class="ruby-comment"># due to Unknown column &#39;authors.id&#39;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">Category</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">posts_with_authors_sorted_by_author_id</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-string">&#39;Welcome to the weblog&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_dynamic_find_should_respect_association_order">
            
              <b>test_dynamic_find_should_respect_association_order</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_dynamic_find_should_respect_association_order" name="method-i-test_dynamic_find_should_respect_association_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_dynamic_find_should_respect_association_order_source')" id="l_method-i-test_dynamic_find_should_respect_association_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L564" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_dynamic_find_should_respect_association_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 564</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_dynamic_find_should_respect_association_order</span>
  <span class="ruby-comment"># Developers are ordered &#39;name DESC, id DESC&#39;</span>
  <span class="ruby-identifier">high_id_jamis</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Jamis&#39;</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;name = &#39;Jamis&#39;&quot;</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&#39;Jamis&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_grouped">
            
              <b>test_find_grouped</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_find_grouped" name="method-i-test_find_grouped" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_grouped_source')" id="l_method-i-test_find_grouped_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L716" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_grouped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 716</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_grouped</span>
  <span class="ruby-identifier">all_posts_from_category1</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;category_id = 1&quot;</span>, <span class="ruby-value">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:categories</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">grouped_posts_of_category1</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;category_id = 1&quot;</span>, <span class="ruby-value">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;author_id&quot;</span>, <span class="ruby-value">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;count(posts.id) as posts_count&#39;</span>, <span class="ruby-value">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:categories</span>).<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">all_posts_from_category1</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">grouped_posts_of_category1</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_association">
            
              <b>test_find_in_association</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_find_in_association" name="method-i-test_find_in_association" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_association_source')" id="l_method-i-test_find_in_association_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L516" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_in_association_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 516</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_association</span>
  <span class="ruby-comment"># Using sql</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-string">&quot;SQL find&quot;</span>

  <span class="ruby-comment"># Using ruby</span>
  <span class="ruby-identifier">active_record</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-string">&quot;Ruby find&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_in_association_with_options">
            
              <b>test_find_in_association_with_options</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_find_in_association_with_options" name="method-i-test_find_in_association_with_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_in_association_with_options_source')" id="l_method-i-test_find_in_association_with_options_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L594" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_in_association_with_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 594</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_in_association_with_options</span>
  <span class="ruby-identifier">developers</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;salary &lt; 10000&quot;</span>).<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_scoped_grouped">
            
              <b>test_find_scoped_grouped</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_find_scoped_grouped" name="method-i-test_find_scoped_grouped" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_scoped_grouped_source')" id="l_method-i-test_find_scoped_grouped_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L723" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_scoped_grouped_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 723</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_scoped_grouped</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">5</span>, <span class="ruby-identifier">categories</span>(<span class="ruby-value">:general</span>).<span class="ruby-identifier">posts_grouped_by_title</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">posts_grouped_by_title</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_scoped_grouped_having">
            
              <b>test_find_scoped_grouped_having</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_find_scoped_grouped_having" name="method-i-test_find_scoped_grouped_having" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_scoped_grouped_having_source')" id="l_method-i-test_find_scoped_grouped_having_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L728" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_scoped_grouped_having_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 728</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_scoped_grouped_having</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">well_payed_salary_groups</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">well_payed_salary_groups</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">salary</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">10000</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_should_append_to_association_order">
            
              <b>test_find_should_append_to_association_order</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_find_should_append_to_association_order" name="method-i-test_find_should_append_to_association_order" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_should_append_to_association_order_source')" id="l_method-i-test_find_should_append_to_association_order_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L572" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_should_append_to_association_order_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 572</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_should_append_to_association_order</span>
  <span class="ruby-identifier">ordered_developers</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">order</span>(<span class="ruby-string">&#39;projects.id&#39;</span>)
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;developers.name desc, developers.id desc&#39;</span>, <span class="ruby-string">&#39;projects.id&#39;</span>], <span class="ruby-identifier">ordered_developers</span>.<span class="ruby-identifier">order_values</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_find_with_merged_options">
            
              <b>test_find_with_merged_options</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_find_with_merged_options" name="method-i-test_find_with_merged_options" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_find_with_merged_options_source')" id="l_method-i-test_find_with_merged_options_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L558" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_find_with_merged_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 558</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_find_with_merged_options</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-keyword">nil</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_get_ids">
            
              <b>test_get_ids</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_get_ids" name="method-i-test_get_ids" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_get_ids_source')" id="l_method-i-test_get_ids_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L733" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_get_ids_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 733</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_get_ids</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">id</span>], <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>).<span class="ruby-identifier">project_ids</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_get_ids_for_loaded_associations">
            
              <b>test_get_ids_for_loaded_associations</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_get_ids_for_loaded_associations" name="method-i-test_get_ids_for_loaded_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_get_ids_for_loaded_associations_source')" id="l_method-i-test_get_ids_for_loaded_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L738" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_get_ids_for_loaded_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 738</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_get_ids_for_loaded_associations</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">0</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_get_ids_for_unloaded_associations_does_not_load_them">
            
              <b>test_get_ids_for_unloaded_associations_does_not_load_them</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_get_ids_for_unloaded_associations_does_not_load_them" name="method-i-test_get_ids_for_unloaded_associations_does_not_load_them" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_get_ids_for_unloaded_associations_does_not_load_them_source')" id="l_method-i-test_get_ids_for_unloaded_associations_does_not_load_them_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L747" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_get_ids_for_unloaded_associations_does_not_load_them_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 747</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_get_ids_for_unloaded_associations_does_not_load_them</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:action_controller</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_adding_before_save">
            
              <b>test_habtm_adding_before_save</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_adding_before_save" name="method-i-test_habtm_adding_before_save" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_adding_before_save_source')" id="l_method-i-test_habtm_adding_before_save_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L229" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_adding_before_save_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_adding_before_save</span>
  <span class="ruby-identifier">no_of_devels</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">no_of_projects</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Aredridel&quot;</span>)
  <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>), <span class="ruby-identifier">p</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>)])
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">p</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_devels</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_projects</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>, <span class="ruby-constant">Project</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_collection_size_from_build">
            
              <b>test_habtm_collection_size_from_build</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_collection_size_from_build" name="method-i-test_habtm_collection_size_from_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_collection_size_from_build_source')" id="l_method-i-test_habtm_collection_size_from_build_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L263" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_collection_size_from_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_collection_size_from_build</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Fred Wu&quot;</span>)
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Project</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Grimetime&quot;</span>)
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_collection_size_from_params">
            
              <b>test_habtm_collection_size_from_params</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_collection_size_from_params" name="method-i-test_habtm_collection_size_from_params" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_collection_size_from_params_source')" id="l_method-i-test_habtm_collection_size_from_params_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L271" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_collection_size_from_params_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_collection_size_from_params</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>({
    <span class="ruby-identifier">projects_attributes</span><span class="ruby-operator">:</span> {
      <span class="ruby-string">&#39;0&#39;</span> =<span class="ruby-operator">&gt;</span> {}
    }
  })

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_respects_select">
            
              <b>test_habtm_respects_select</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_respects_select" name="method-i-test_habtm_respects_select" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_respects_select_source')" id="l_method-i-test_habtm_respects_select_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L667" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_respects_select_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 667</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_respects_select</span>
  <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">select_testing_posts</span>(<span class="ruby-keyword">true</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">o</span>, <span class="ruby-value">:correctness_marker</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">select_testing_posts</span>.<span class="ruby-identifier">first</span>, <span class="ruby-value">:correctness_marker</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_respects_select_query_method">
            
              <b>test_habtm_respects_select_query_method</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_respects_select_query_method" name="method-i-test_habtm_respects_select_query_method" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_respects_select_query_method_source')" id="l_method-i-test_habtm_respects_select_query_method_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L678" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_respects_select_query_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 678</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_respects_select_query_method</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-string">&#39;id&#39;</span>], <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">select</span>(<span class="ruby-value">:id</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_saving_multiple_relationships">
            
              <b>test_habtm_saving_multiple_relationships</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_saving_multiple_relationships" name="method-i-test_habtm_saving_multiple_relationships" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_saving_multiple_relationships_source')" id="l_method-i-test_habtm_saving_multiple_relationships_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L244" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_saving_multiple_relationships_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 244</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_saving_multiple_relationships</span>
  <span class="ruby-identifier">new_project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Grimetime&quot;</span>)
  <span class="ruby-identifier">amount_of_developers</span> = <span class="ruby-number">4</span>
  <span class="ruby-identifier">developers</span> = (<span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">amount_of_developers</span>).<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;JME #{i}&quot;</span>) }.<span class="ruby-identifier">reverse</span>

  <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developer_ids</span> = [<span class="ruby-identifier">developers</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">id</span>, <span class="ruby-identifier">developers</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">id</span>]
  <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers_with_callback_ids</span> = [<span class="ruby-identifier">developers</span>[<span class="ruby-number">2</span>].<span class="ruby-identifier">id</span>, <span class="ruby-identifier">developers</span>[<span class="ruby-number">3</span>].<span class="ruby-identifier">id</span>]
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">save</span>

  <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">amount_of_developers</span>, <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>, <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_scope_can_unscope">
            
              <b>test_habtm_scope_can_unscope</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_scope_can_unscope" name="method-i-test_habtm_scope_can_unscope" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_scope_can_unscope_source')" id="l_method-i-test_habtm_scope_can_unscope_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L942" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_scope_can_unscope_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 942</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_scope_can_unscope</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">ProjectUnscopingDavidDefaultScope</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">save!</span>

  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">LazyBlockDeveloperCalledDavid</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Not David&quot;</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save!</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developer</span>

  <span class="ruby-identifier">projects</span> = <span class="ruby-constant">ProjectUnscopingDavidDefaultScope</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:developers</span>).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_selects_all_columns_by_default">
            
              <b>test_habtm_selects_all_columns_by_default</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_selects_all_columns_by_default" name="method-i-test_habtm_selects_all_columns_by_default" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_selects_all_columns_by_default_source')" id="l_method-i-test_habtm_selects_all_columns_by_default_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L674" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_selects_all_columns_by_default_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 674</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_selects_all_columns_by_default</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Project</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_unique_order_preserved">
            
              <b>test_habtm_unique_order_preserved</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_unique_order_preserved" name="method-i-test_habtm_unique_order_preserved" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_unique_order_preserved_source')" id="l_method-i-test_habtm_unique_order_preserved_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L258" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_unique_order_preserved_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_unique_order_preserved</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>, <span class="ruby-value">:jamis</span>, <span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">non_unique_developers</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:poor_jamis</span>, <span class="ruby-value">:jamis</span>, <span class="ruby-value">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_habtm_with_reflection_using_class_name_and_fixtures">
            
              <b>test_habtm_with_reflection_using_class_name_and_fixtures</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_habtm_with_reflection_using_class_name_and_fixtures" name="method-i-test_habtm_with_reflection_using_class_name_and_fixtures" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_habtm_with_reflection_using_class_name_and_fixtures_source')" id="l_method-i-test_habtm_with_reflection_using_class_name_and_fixtures_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L918" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_habtm_with_reflection_using_class_name_and_fixtures_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 918</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_habtm_with_reflection_using_class_name_and_fixtures</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">_reflections</span>[<span class="ruby-string">&#39;shared_computers&#39;</span>]
  <span class="ruby-comment"># Checking the fixture for named association is important here, because it&#39;s the only way</span>
  <span class="ruby-comment"># we&#39;ve been able to reproduce this bug</span>
  <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;../../../fixtures/developers.yml&quot;</span>, <span class="ruby-keyword">__FILE__</span>)).<span class="ruby-identifier">index</span>(<span class="ruby-string">&quot;shared_computers&quot;</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>).<span class="ruby-identifier">shared_computers</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">computers</span>(<span class="ruby-value">:laptop</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_and_belongs_to_many">
            
              <b>test_has_and_belongs_to_many</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_has_and_belongs_to_many" name="method-i-test_has_and_belongs_to_many" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_and_belongs_to_many_source')" id="l_method-i-test_has_and_belongs_to_many_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L149" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_has_and_belongs_to_many_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_and_belongs_to_many</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">david</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_and_belongs_to_many_associations_on_new_records_use_null_relations">
            
              <b>test_has_and_belongs_to_many_associations_on_new_records_use_null_relations</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_has_and_belongs_to_many_associations_on_new_records_use_null_relations" name="method-i-test_has_and_belongs_to_many_associations_on_new_records_use_null_relations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_and_belongs_to_many_associations_on_new_records_use_null_relations_source')" id="l_method-i-test_has_and_belongs_to_many_associations_on_new_records_use_null_relations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L856" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_has_and_belongs_to_many_associations_on_new_records_use_null_relations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 856</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_and_belongs_to_many_associations_on_new_records_use_null_relations</span>
  <span class="ruby-identifier">projects</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">projects</span>
  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">projects</span>
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">projects</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;omg&#39;</span>)
    <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">projects</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-value">:title</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">0</span>, <span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model">
            
              <b>test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model" name="method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model_source')" id="l_method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L894" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 894</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_namespaced_model</span>
  <span class="ruby-identifier">magazine</span> = <span class="ruby-constant">Publisher</span><span class="ruby-operator">::</span><span class="ruby-constant">Magazine</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">article</span> = <span class="ruby-constant">Publisher</span><span class="ruby-operator">::</span><span class="ruby-constant">Article</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">magazine</span>.<span class="ruby-identifier">articles</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">article</span>
  <span class="ruby-identifier">magazine</span>.<span class="ruby-identifier">save</span>

  <span class="ruby-identifier">assert_includes</span> <span class="ruby-identifier">magazine</span>.<span class="ruby-identifier">articles</span>, <span class="ruby-identifier">article</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model">
            
              <b>test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model" name="method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model_source')" id="l_method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L903" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 903</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_and_belongs_to_many_in_a_namespaced_model_pointing_to_a_non_namespaced_model</span>
  <span class="ruby-identifier">article</span> = <span class="ruby-constant">Publisher</span><span class="ruby-operator">::</span><span class="ruby-constant">Article</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">article</span>.<span class="ruby-identifier">tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tag</span>
  <span class="ruby-identifier">article</span>.<span class="ruby-identifier">save</span>

  <span class="ruby-identifier">assert_includes</span> <span class="ruby-identifier">article</span>.<span class="ruby-identifier">tags</span>, <span class="ruby-identifier">tag</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_has_many_through_polymorphic_has_manys_works">
            
              <b>test_has_many_through_polymorphic_has_manys_works</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_has_many_through_polymorphic_has_manys_works" name="method-i-test_has_many_through_polymorphic_has_manys_works" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_has_many_through_polymorphic_has_manys_works_source')" id="l_method-i-test_has_many_through_polymorphic_has_manys_works_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L780" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_has_many_through_polymorphic_has_manys_works_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 780</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_has_many_through_polymorphic_has_manys_works</span>
  <span class="ruby-identifier">assert_equal</span> [<span class="ruby-number">10</span>, <span class="ruby-number">20</span>].<span class="ruby-identifier">to_set</span>, <span class="ruby-identifier">pirates</span>(<span class="ruby-value">:redbeard</span>).<span class="ruby-identifier">treasure_estimates</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:price</span>).<span class="ruby-identifier">to_set</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_checks_if_record_exists_if_target_not_loaded">
            
              <b>test_include_checks_if_record_exists_if_target_not_loaded</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_include_checks_if_record_exists_if_target_not_loaded" name="method-i-test_include_checks_if_record_exists_if_target_not_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_checks_if_record_exists_if_target_not_loaded_source')" id="l_method-i-test_include_checks_if_record_exists_if_target_not_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L538" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_include_checks_if_record_exists_if_target_not_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 538</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_checks_if_record_exists_if_target_not_loaded</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
  <span class="ruby-identifier">assert_queries</span>(<span class="ruby-number">1</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build">
            
              <b>test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build" name="method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build_source')" id="l_method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L840" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 840</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_method_in_has_and_belongs_to_many_association_should_return_true_for_instance_added_with_build</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">build</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping">
            
              <b>test_include_returns_false_for_non_matching_record_to_verify_scoping</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping" name="method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping_source')" id="l_method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L550" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_include_returns_false_for_non_matching_record_to_verify_scoping_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 550</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_returns_false_for_non_matching_record_to_verify_scoping</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">create</span> <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Bryan&quot;</span>, <span class="ruby-value">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-number">50_000</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_include_uses_array_include_after_loaded">
            
              <b>test_include_uses_array_include_after_loaded</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_include_uses_array_include_after_loaded" name="method-i-test_include_uses_array_include_after_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_include_uses_array_include_after_loaded_source')" id="l_method-i-test_include_uses_array_include_after_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L526" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_include_uses_array_include_after_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 526</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_include_uses_array_include_after_loaded</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">load_target</span>

  <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_join_table_alias">
            
              <b>test_join_table_alias</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_join_table_alias" name="method-i-test_join_table_alias" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_join_table_alias_source')" id="l_method-i-test_join_table_alias_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L682" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_join_table_alias_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 682</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_join_table_alias</span>
  <span class="ruby-comment"># FIXME: `references` has no impact on the aliases generated for the join</span>
  <span class="ruby-comment"># query.  The fact that we pass `:developers_projects_join` to `references`</span>
  <span class="ruby-comment"># and that the SQL string contains `developers_projects_join` is merely a</span>
  <span class="ruby-comment"># coincidence.</span>
  <span class="ruby-identifier">assert_equal</span>(
    <span class="ruby-number">3</span>,
    <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">references</span>(<span class="ruby-value">:developers_projects_join</span>).<span class="ruby-identifier">merge</span>(
      <span class="ruby-value">:includes</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:projects</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:developers</span>},
      <span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;projects_developers_projects_join.joined_on IS NOT NULL&#39;</span>
    ).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  )
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_join_with_group">
            
              <b>test_join_with_group</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_join_with_group" name="method-i-test_join_with_group" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_join_with_group_source')" id="l_method-i-test_join_with_group_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L696" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_join_with_group_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 696</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_join_with_group</span>
  <span class="ruby-comment"># FIXME: `references` has no impact on the aliases generated for the join</span>
  <span class="ruby-comment"># query.  The fact that we pass `:developers_projects_join` to `references`</span>
  <span class="ruby-comment"># and that the SQL string contains `developers_projects_join` is merely a</span>
  <span class="ruby-comment"># coincidence.</span>
  <span class="ruby-identifier">group</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span>, <span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;developers.#{c.name}&quot;</span>
    <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;developers_projects_2.#{c.name}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Project</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">group</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;projects.#{c.name}&quot;</span> }

  <span class="ruby-identifier">assert_equal</span>(
    <span class="ruby-number">3</span>,
    <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">references</span>(<span class="ruby-value">:developers_projects_join</span>).<span class="ruby-identifier">merge</span>(
      <span class="ruby-value">:includes</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:projects</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:developers</span>}, <span class="ruby-value">:where</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;projects_developers_projects_join.joined_on IS NOT NULL&#39;</span>,
      <span class="ruby-value">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;,&quot;</span>)
    ).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
  )
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_marshal_dump">
            
              <b>test_marshal_dump</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_marshal_dump" name="method-i-test_marshal_dump" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_marshal_dump_source')" id="l_method-i-test_marshal_dump_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L123" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_marshal_dump_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_marshal_dump</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span> <span class="ruby-value">:welcome</span>
  <span class="ruby-identifier">preloaded</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:categories</span>).<span class="ruby-identifier">find</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">preloaded</span>, <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">load</span>(<span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span>(<span class="ruby-identifier">preloaded</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_new_aliased_to_build">
            
              <b>test_new_aliased_to_build</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_new_aliased_to_build" name="method-i-test_new_aliased_to_build" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_new_aliased_to_build_source')" id="l_method-i-test_new_aliased_to_build_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L296" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_new_aliased_to_build_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_new_aliased_to_build</span>
  <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">assert_no_queries</span>(<span class="ruby-identifier">ignore_none</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) { <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Projekt&quot;</span>) }
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj</span>.<span class="ruby-identifier">persisted?</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment"># prove join table is updated</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_new_with_values_in_collection">
            
              <b>test_new_with_values_in_collection</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_new_with_values_in_collection" name="method-i-test_new_with_values_in_collection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_new_with_values_in_collection_source')" id="l_method-i-test_new_with_values_in_collection_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L582" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_new_with_values_in_collection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 582</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_new_with_values_in_collection</span>
  <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">DeveloperForProjectWithAfterCreateHook</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&#39;Jamis&#39;</span>)
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">DeveloperForProjectWithAfterCreateHook</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">ProjectWithAfterCreateHook</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Cooking with Bertie&quot;</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">save!</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">reload</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">jamis</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">david</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_preloaded_associations_size">
            
              <b>test_preloaded_associations_size</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_preloaded_associations_size" name="method-i-test_preloaded_associations_size" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_preloaded_associations_size_source')" id="l_method-i-test_preloaded_associations_size_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L954" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_preloaded_associations_size_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 954</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_preloaded_associations_size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Project</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">size</span>,
    <span class="ruby-constant">Project</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:salaried_developers</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Project</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:salaried_developers</span>).<span class="ruby-identifier">references</span>(<span class="ruby-value">:salaried_developers</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">size</span>,
    <span class="ruby-constant">Project</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-value">:salaried_developers</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-comment"># Nested HATBM</span>
  <span class="ruby-identifier">first_project</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">preloaded_first_project</span> =
    <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">preload</span>(<span class="ruby-identifier">projects</span><span class="ruby-operator">:</span> <span class="ruby-value">:salaried_developers</span>).
      <span class="ruby-identifier">first</span>.
      <span class="ruby-identifier">projects</span>.
      <span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">first_project</span>.<span class="ruby-identifier">id</span> }

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">preloaded_first_project</span>.<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">loaded?</span>, <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">first_project</span>.<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">preloaded_first_project</span>.<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_proper_usage_of_primary_keys_and_join_table">
            
              <b>test_proper_usage_of_primary_keys_and_join_table</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_proper_usage_of_primary_keys_and_join_table" name="method-i-test_proper_usage_of_primary_keys_and_join_table" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_proper_usage_of_primary_keys_and_join_table_source')" id="l_method-i-test_proper_usage_of_primary_keys_and_join_table_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L139" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_proper_usage_of_primary_keys_and_join_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 139</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_proper_usage_of_primary_keys_and_join_table</span>
  <span class="ruby-identifier">setup_data_for_habtm_case</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;country_id&#39;</span>, <span class="ruby-constant">Country</span>.<span class="ruby-identifier">primary_key</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;treaty_id&#39;</span>, <span class="ruby-constant">Treaty</span>.<span class="ruby-identifier">primary_key</span>

  <span class="ruby-identifier">country</span> = <span class="ruby-constant">Country</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">country</span>.<span class="ruby-identifier">treaties</span>.<span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_redefine_habtm">
            
              <b>test_redefine_habtm</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_redefine_habtm" name="method-i-test_redefine_habtm" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_redefine_habtm_source')" id="l_method-i-test_redefine_habtm_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L912" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_redefine_habtm_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 912</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_redefine_habtm</span>
  <span class="ruby-identifier">child</span> = <span class="ruby-constant">SubDeveloper</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Aredridel&quot;</span>)
  <span class="ruby-identifier">child</span>.<span class="ruby-identifier">special_projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">SpecialProject</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Special Project&quot;</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">save</span>, <span class="ruby-string">&#39;child object should be saved&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_removing_associations_on_destroy">
            
              <b>test_removing_associations_on_destroy</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_removing_associations_on_destroy" name="method-i-test_removing_associations_on_destroy" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_removing_associations_on_destroy_source')" id="l_method-i-test_removing_associations_on_destroy_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L425" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_removing_associations_on_destroy_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 425</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_removing_associations_on_destroy</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-constant">DeveloperWithBeforeDestroyRaise</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">destroy</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">DeveloperWithBeforeDestroyRaise</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-string">&quot;SELECT * FROM developers_projects WHERE developer_id = 1&quot;</span>).<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_on_new_object">
            
              <b>test_replace_on_new_object</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_replace_on_new_object" name="method-i-test_replace_on_new_object" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_on_new_object_source')" id="l_method-i-test_replace_on_new_object_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L621" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_replace_on_new_object_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 621</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_on_new_object</span>
  <span class="ruby-identifier">new_developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Matz&quot;</span>)
  <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ActionWebSearch&quot;</span>)]
  <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_with_less">
            
              <b>test_replace_with_less</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_replace_with_less" name="method-i-test_replace_with_less" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_with_less_source')" id="l_method-i-test_replace_with_less_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L606" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_replace_with_less_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 606</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_with_less</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>)]
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_replace_with_new">
            
              <b>test_replace_with_new</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_replace_with_new" name="method-i-test_replace_with_new" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_replace_with_new_source')" id="l_method-i-test_replace_with_new_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L613" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_replace_with_new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 613</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_replace_with_new</span>
  <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-value">:action_controller</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;ActionWebSearch&quot;</span>)]
  <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records">
            
              <b>test_scoped_find_on_through_association_doesnt_return_read_only_records</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records" name="method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records_source')" id="l_method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L772" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_scoped_find_on_through_association_doesnt_return_read_only_records_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 772</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_scoped_find_on_through_association_doesnt_return_read_only_records</span>
  <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-number">1</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-string">&quot;General&quot;</span>)

  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">save!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_should_property_quote_string_primary_keys">
            
              <b>test_should_property_quote_string_primary_keys</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_should_property_quote_string_primary_keys" name="method-i-test_should_property_quote_string_primary_keys" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_should_property_quote_string_primary_keys_source')" id="l_method-i-test_should_property_quote_string_primary_keys_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L129" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_should_property_quote_string_primary_keys_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_should_property_quote_string_primary_keys</span>
  <span class="ruby-identifier">setup_data_for_habtm_case</span>

  <span class="ruby-identifier">con</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>
  <span class="ruby-identifier">sql</span> = <span class="ruby-string">&#39;select * from countries_treaties&#39;</span>
  <span class="ruby-identifier">record</span> = <span class="ruby-identifier">con</span>.<span class="ruby-identifier">select_rows</span>(<span class="ruby-identifier">sql</span>).<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;c1&#39;</span>, <span class="ruby-identifier">record</span>[<span class="ruby-number">0</span>]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;t1&#39;</span>, <span class="ruby-identifier">record</span>[<span class="ruby-number">1</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_symbol_join_table">
            
              <b>test_symbol_join_table</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_symbol_join_table" name="method-i-test_symbol_join_table" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_symbol_join_table_source')" id="l_method-i-test_symbol_join_table_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L641" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_symbol_join_table_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 641</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_symbol_join_table</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">sp</span> = <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">sym_special_projects</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;omg&quot;</span>)
  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">assert_includes</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">sym_special_projects</span>, <span class="ruby-identifier">sp</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_symbols_as_keys">
            
              <b>test_symbols_as_keys</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_symbols_as_keys" name="method-i-test_symbols_as_keys" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_symbols_as_keys_source')" id="l_method-i-test_symbols_as_keys_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L784" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_symbols_as_keys_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 784</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_symbols_as_keys</span>
  <span class="ruby-identifier">developer</span> = <span class="ruby-constant">DeveloperWithSymbolsForKeys</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;David&#39;</span>)
  <span class="ruby-identifier">project</span> = <span class="ruby-constant">ProjectWithSymbolsForKeys</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Rails Testing&#39;</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developer</span>
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">save!</span>

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developer</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">project</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq_after_the_fact">
            
              <b>test_uniq_after_the_fact</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_uniq_after_the_fact" name="method-i-test_uniq_after_the_fact" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_after_the_fact_source')" id="l_method-i-test_uniq_after_the_fact_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L363" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_uniq_after_the_fact_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 363</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq_after_the_fact</span>
  <span class="ruby-identifier">dev</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">distinct</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq_before_the_fact">
            
              <b>test_uniq_before_the_fact</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_uniq_before_the_fact" name="method-i-test_uniq_before_the_fact" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_before_the_fact_source')" id="l_method-i-test_uniq_before_the_fact_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L372" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_uniq_before_the_fact_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 372</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq_before_the_fact</span>
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>).<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>, <span class="ruby-value">:reload</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq_option_prevents_duplicate_push">
            
              <b>test_uniq_option_prevents_duplicate_push</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_uniq_option_prevents_duplicate_push" name="method-i-test_uniq_option_prevents_duplicate_push" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_option_prevents_duplicate_push_source')" id="l_method-i-test_uniq_option_prevents_duplicate_push_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L378" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_uniq_option_prevents_duplicate_push_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 378</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq_option_prevents_duplicate_push</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>

  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>)
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_uniq_when_association_already_loaded">
            
              <b>test_uniq_when_association_already_loaded</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_uniq_when_association_already_loaded" name="method-i-test_uniq_when_association_already_loaded" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_uniq_when_association_already_loaded_source')" id="l_method-i-test_uniq_when_association_already_loaded_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L389" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_uniq_when_association_already_loaded_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 389</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_uniq_when_association_already_loaded</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-value">:active_record</span>)
  <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-value">:jamis</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-value">:david</span>) ]
  <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">3</span>, <span class="ruby-constant">Project</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">:developers</span>).<span class="ruby-identifier">find</span>(<span class="ruby-identifier">project</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_update_attributes_after_push_without_duplicate_join_table_rows">
            
              <b>test_update_attributes_after_push_without_duplicate_join_table_rows</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_update_attributes_after_push_without_duplicate_join_table_rows" name="method-i-test_update_attributes_after_push_without_duplicate_join_table_rows" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_update_attributes_after_push_without_duplicate_join_table_rows_source')" id="l_method-i-test_update_attributes_after_push_without_duplicate_join_table_rows_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L648" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_update_attributes_after_push_without_duplicate_join_table_rows_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 648</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_update_attributes_after_push_without_duplicate_join_table_rows</span>
    <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Kano&quot;</span>)
    <span class="ruby-identifier">project</span> = <span class="ruby-constant">SpecialProject</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Special Project&quot;</span>)
    <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">project</span>
    <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">update_columns</span>(<span class="ruby-string">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Bruza&quot;</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-number">1</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-string">&quot;      SELECT count(*) FROM developers_projects
      WHERE project_id = #{project.id}
      AND developer_id = #{developer.id}
&quot;</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_updating_attributes_on_non_rich_associations">
            
              <b>test_updating_attributes_on_non_rich_associations</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_updating_attributes_on_non_rich_associations" name="method-i-test_updating_attributes_on_non_rich_associations" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_updating_attributes_on_non_rich_associations_source')" id="l_method-i-test_updating_attributes_on_non_rich_associations_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L661" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_updating_attributes_on_non_rich_associations_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_updating_attributes_on_non_rich_associations</span>
  <span class="ruby-identifier">welcome</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-value">:technology</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">welcome</span>.<span class="ruby-identifier">title</span> = <span class="ruby-string">&quot;Something else&quot;</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">welcome</span>.<span class="ruby-identifier">save!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-test_with_symbol_class_name">
            
              <b>test_with_symbol_class_name</b>()
            
            <a href="../classes/HasAndBelongsToManyAssociationsTest.html#method-i-test_with_symbol_class_name" name="method-i-test_with_symbol_class_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-test_with_symbol_class_name_source')" id="l_method-i-test_with_symbol_class_name_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/ec77ed710153d8b604f6b1508fe6f8993f36aa87/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb#L926" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-test_with_symbol_class_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 926</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">test_with_symbol_class_name</span>
  <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">DeveloperWithSymbolClassName</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    