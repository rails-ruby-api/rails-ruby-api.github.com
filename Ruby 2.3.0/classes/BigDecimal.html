<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>BigDecimal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            BigDecimal 
            
                <span class="parent">&lt; 
                    
                    <a href="Numeric.html">Numeric</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/ext/bigdecimal/bigdecimal_c.html">ext/bigdecimal/bigdecimal.c</a></li>
            
            <li><a href="../files/ext/bigdecimal/lib/bigdecimal/util_rb.html">ext/bigdecimal/lib/bigdecimal/util.rb</a></li>
            
            <li><a href="../files/ext/json/lib/json/add/bigdecimal_rb.html">ext/json/lib/json/add/bigdecimal.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="BigDecimal.html">BigDecimal</a> provides arbitrary-precision
floating point decimal arithmetic.</p>

<h2 id="class-BigDecimal-label-Introduction">Introduction</h2>

<p>Ruby provides built-in support for arbitrary precision integer arithmetic.</p>

<p>For example:</p>

<pre><code>42**13  #=&gt;   1265437718438866624512
</code></pre>

<p><a href="BigDecimal.html">BigDecimal</a> provides similar support for very
large or very accurate floating point numbers.</p>

<p>Decimal arithmetic is also useful for general calculation, because it
provides the correct answers people expectâ€“whereas normal binary floating
point arithmetic often introduces subtle errors because of the conversion
between base 10 and base 2.</p>

<p>For example, try:</p>

<pre><code>sum = 0
10_000.times do
  sum = sum + 0.0001
end
print sum #=&gt; 0.9999999999999062
</code></pre>

<p>and contrast with the output from:</p>

<pre><code>require &#39;bigdecimal&#39;

sum = BigDecimal.new(&quot;0&quot;)
10_000.times do
  sum = sum + BigDecimal.new(&quot;0.0001&quot;)
end
print sum #=&gt; 0.1E1
</code></pre>

<p>Similarly:</p>

<pre><code>(BigDecimal.new(&quot;1.2&quot;) - BigDecimal(&quot;1.0&quot;)) == BigDecimal(&quot;0.2&quot;) #=&gt; true

(1.2 - 1.0) == 0.2 #=&gt; false
</code></pre>

<h2 id="class-BigDecimal-label-Special+features+of+accurate+decimal+arithmetic">Special features of accurate decimal arithmetic</h2>

<p>Because <a href="BigDecimal.html">BigDecimal</a> is more accurate than
normal binary floating point arithmetic, it requires some special values.</p>

<h3 id="class-BigDecimal-label-Infinity">Infinity</h3>

<p><a href="BigDecimal.html">BigDecimal</a> sometimes needs to return
infinity, for example if you divide a value by zero.</p>

<pre><code>BigDecimal.new(&quot;1.0&quot;) / BigDecimal.new(&quot;0.0&quot;)  #=&gt; Infinity
BigDecimal.new(&quot;-1.0&quot;) / BigDecimal.new(&quot;0.0&quot;)  #=&gt; -Infinity
</code></pre>

<p>You can represent infinite numbers to <a
href="BigDecimal.html">BigDecimal</a> using the strings
<code>&#39;Infinity&#39;</code>, <code>&#39;+Infinity&#39;</code> and
<code>&#39;-Infinity&#39;</code> (case-sensitive)</p>

<h3 id="class-BigDecimal-label-Not+a+Number">Not a Number</h3>

<p>When a computation results in an undefined value, the special value
<code>NaN</code> (for &#39;not a number&#39;) is returned.</p>

<p>Example:</p>

<pre><code>BigDecimal.new(&quot;0.0&quot;) / BigDecimal.new(&quot;0.0&quot;) #=&gt; NaN
</code></pre>

<p>You can also create undefined values.</p>

<p>NaN is never considered to be the same as any other value, even NaN itself:</p>

<pre><code>n = BigDecimal.new(&#39;NaN&#39;)
n == 0.0 #=&gt; false
n == n #=&gt; false
</code></pre>

<h3 id="class-BigDecimal-label-Positive+and+negative+zero">Positive and negative zero</h3>

<p>If a computation results in a value which is too small to be represented as
a <a href="BigDecimal.html">BigDecimal</a> within the currently specified
limits of precision, zero must be returned.</p>

<p>If the value which is too small to be represented is negative, a <a
href="BigDecimal.html">BigDecimal</a> value of negative zero is returned.</p>

<pre><code>BigDecimal.new(&quot;1.0&quot;) / BigDecimal.new(&quot;-Infinity&quot;) #=&gt; -0.0
</code></pre>

<p>If the value is positive, a value of positive zero is returned.</p>

<pre><code>BigDecimal.new(&quot;1.0&quot;) / BigDecimal.new(&quot;Infinity&quot;) #=&gt; 0.0
</code></pre>

<p>(See <a href="BigDecimal.html#method-c-mode">::mode</a> for how to specify
limits of precision.)</p>

<p>Note that <code>-0.0</code> and <code>0.0</code> are considered to be the
same for the purposes of comparison.</p>

<p>Note also that in mathematics, there is no particular concept of negative
or positive zero; true mathematical zero has no sign.</p>

<h2 id="class-BigDecimal-label-License">License</h2>

<p>Copyright (C) 2002 by Shigeo Kobayashi &lt;shigeo@tinyforest.gr.jp&gt;.</p>

<p>You may distribute under the terms of either the GNU General Public License
or the Artistic License, as specified in the <a
href="../files/README_md.html">README</a> file of the <a
href="BigDecimal.html">BigDecimal</a> distribution.</p>

<p>Maintained by mrkn &lt;mrkn@mrkn.jp&gt; and ruby-core members.</p>

<p>Documented by zzak &lt;zachary@zacharyscott.net&gt;, mathew
&lt;meta@pobox.com&gt;, and many other contributors.</p>

<p><a href="BigDecimal.html">BigDecimal</a> extends the native <a
href="Numeric.html">Numeric</a> class to provide the <a
href="BigDecimal.html#method-i-to_digits">to_digits</a> and <a
href="BigDecimal.html#method-i-to_d">to_d</a> methods.</p>

<p>When you require <a href="BigDecimal.html">BigDecimal</a> in your
application, this method will be available on <a
href="BigDecimal.html">BigDecimal</a> objects.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-25">%</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2A">*</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2A-2A">**</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2B">+</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2B-40">+@</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2D">-</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2D-40">-@</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2F">/</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3C">&lt;</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3C-3D">&lt;=</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3C-3D-3E">&lt;=&gt;</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3D-3D">==</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3D-3D-3D">===</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3E">&gt;</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3E-3D">&gt;=</a>,
              </li>
            
              
              <li>
                <a href="#method-i-_dump">_dump</a>,
              </li>
            
              
              <li>
                <a href="#method-c-_load">_load</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-abs">abs</a>,
              </li>
            
              
              <li>
                <a href="#method-i-add">add</a>,
              </li>
            
              
              <li>
                <a href="#method-i-as_json">as_json</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-ceil">ceil</a>,
              </li>
            
              
              <li>
                <a href="#method-i-coerce">coerce</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-div">div</a>,
              </li>
            
              
              <li>
                <a href="#method-i-divmod">divmod</a>,
              </li>
            
              
              <li>
                <a href="#method-c-double_fig">double_fig</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-eql-3F">eql?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-exponent">exponent</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-finite-3F">finite?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-fix">fix</a>,
              </li>
            
              
              <li>
                <a href="#method-i-floor">floor</a>,
              </li>
            
              
              <li>
                <a href="#method-i-frac">frac</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-hash">hash</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-infinite-3F">infinite?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-inspect">inspect</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>J</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-json_create">json_create</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-limit">limit</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-mode">mode</a>,
              </li>
            
              
              <li>
                <a href="#method-i-modulo">modulo</a>,
              </li>
            
              
              <li>
                <a href="#method-i-mult">mult</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-nan-3F">nan?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-nonzero-3F">nonzero?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-power">power</a>,
              </li>
            
              
              <li>
                <a href="#method-i-precs">precs</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>Q</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-quo">quo</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-remainder">remainder</a>,
              </li>
            
              
              <li>
                <a href="#method-i-round">round</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-save_exception_mode">save_exception_mode</a>,
              </li>
            
              
              <li>
                <a href="#method-c-save_limit">save_limit</a>,
              </li>
            
              
              <li>
                <a href="#method-c-save_rounding_mode">save_rounding_mode</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sign">sign</a>,
              </li>
            
              
              <li>
                <a href="#method-i-split">split</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sqrt">sqrt</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sub">sub</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-to_d">to_d</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_digits">to_digits</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_f">to_f</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_i">to_i</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_int">to_int</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_json">to_json</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_r">to_r</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_s">to_s</a>,
              </li>
            
              
              <li>
                <a href="#method-i-truncate">truncate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-ver">ver</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>Z</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-zero-3F">zero?</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">BASE</td>
            <td>=</td>
            <td class="attr-value">INT2FIX((SIGNED_VALUE)VpBaseVal())</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Base value used in internal calculations.  On a 32 bit system, <a
href="BigDecimal.html#BASE">BASE</a> is 10000, indicating that calculation
is done in groups of 4 digits. (If it were larger, BASE**2 wouldn&#39;t fit
in 32 bits, so you couldn&#39;t guarantee that two groups could always be
multiplied together without overflow.)</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EXCEPTION_ALL</td>
            <td>=</td>
            <td class="attr-value">0xff</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Determines whether overflow, underflow or zero divide result in an
exception being thrown. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EXCEPTION_NaN</td>
            <td>=</td>
            <td class="attr-value">0x02</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Determines what happens when the result of a computation is not a number
(NaN). See <a href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EXCEPTION_INFINITY</td>
            <td>=</td>
            <td class="attr-value">0x01</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Determines what happens when the result of a computation is infinity.  See
<a href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EXCEPTION_UNDERFLOW</td>
            <td>=</td>
            <td class="attr-value">0x04</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Determines what happens when the result of a computation is an underflow (a
result too small to be represented). See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EXCEPTION_OVERFLOW</td>
            <td>=</td>
            <td class="attr-value">0x01</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Determines what happens when the result of a computation is an overflow (a
result too large to be represented). See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EXCEPTION_ZERODIVIDE</td>
            <td>=</td>
            <td class="attr-value">0x01</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Determines what happens when a division by zero is performed. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_MODE</td>
            <td>=</td>
            <td class="attr-value">0x100</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Determines what happens when a result must be rounded in order to fit in
the appropriate number of significant digits. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_UP</td>
            <td>=</td>
            <td class="attr-value">1</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that values should be rounded away from zero. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_DOWN</td>
            <td>=</td>
            <td class="attr-value">2</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that values should be rounded towards zero. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_HALF_UP</td>
            <td>=</td>
            <td class="attr-value">3</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that digits &gt;= 5 should be rounded up, others rounded down.
See <a href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_HALF_DOWN</td>
            <td>=</td>
            <td class="attr-value">4</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that digits &gt;= 6 should be rounded up, others rounded down.
See <a href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_CEILING</td>
            <td>=</td>
            <td class="attr-value">5</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Round towards +Infinity. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_FLOOR</td>
            <td>=</td>
            <td class="attr-value">6</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Round towards -Infinity. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ROUND_HALF_EVEN</td>
            <td>=</td>
            <td class="attr-value">7</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Round towards the even neighbor. See <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SIGN_NaN</td>
            <td>=</td>
            <td class="attr-value">0</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that a value is not a number. See <a
href="BigDecimal.html#method-i-sign">#sign</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SIGN_POSITIVE_ZERO</td>
            <td>=</td>
            <td class="attr-value">1</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that a value is +0. See <a
href="BigDecimal.html#method-i-sign">#sign</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SIGN_NEGATIVE_ZERO</td>
            <td>=</td>
            <td class="attr-value">-1</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that a value is -0. See <a
href="BigDecimal.html#method-i-sign">#sign</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SIGN_POSITIVE_FINITE</td>
            <td>=</td>
            <td class="attr-value">2</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that a value is positive and finite. See <a
href="BigDecimal.html#method-i-sign">#sign</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SIGN_NEGATIVE_FINITE</td>
            <td>=</td>
            <td class="attr-value">-2</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that a value is negative and finite. See <a
href="BigDecimal.html#method-i-sign">#sign</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SIGN_POSITIVE_INFINITE</td>
            <td>=</td>
            <td class="attr-value">3</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that a value is positive and infinite. See <a
href="BigDecimal.html#method-i-sign">#sign</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SIGN_NEGATIVE_INFINITE</td>
            <td>=</td>
            <td class="attr-value">-3</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Indicates that a value is negative and infinite. See <a
href="BigDecimal.html#method-i-sign">#sign</a>.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">INFINITY</td>
            <td>=</td>
            <td class="attr-value">BigDecimal_global_new(1, &amp;arg, rb_cBigDecimal)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>Positive infinity value.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">NAN</td>
            <td>=</td>
            <td class="attr-value">BigDecimal_global_new(1, &amp;arg, rb_cBigDecimal)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>&#39;Not a Number&#39; value.</p></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-_load">
            
              <b>_load</b>(p1)
            
            <a href="../classes/BigDecimal.html#method-c-_load" name="method-c-_load" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Internal method used to provide marshalling support. See the <a
href="Marshal.html">Marshal</a> module.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-_load_source')" id="l_method-c-_load_source">show</a>
                
              </p>
              <div id="method-c-_load_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_load(VALUE self, VALUE str)
{
    ENTER(2);
    Real *pv;
    unsigned char *pch;
    unsigned char ch;
    unsigned long m=0;

    SafeStringValue(str);
    pch = (unsigned char *)RSTRING_PTR(str);
    /* First get max prec */
    while((*pch) != (unsigned char)&#39;\0&#39; &amp;&amp; (ch = *pch++) != (unsigned char)&#39;:&#39;) {
        if(!ISDIGIT(ch)) {
            rb_raise(rb_eTypeError, &quot;load failed: invalid character in the marshaled string&quot;);
        }
        m = m*10 + (unsigned long)(ch-&#39;0&#39;);
    }
    if (m &gt; VpBaseFig()) m -= VpBaseFig();
    GUARD_OBJ(pv, VpNewRbClass(m, (char *)pch, self));
    m /= VpBaseFig();
    if (m &amp;&amp; pv-&gt;MaxPrec &gt; m) {
        pv-&gt;MaxPrec = m+1;
    }
    return ToValue(pv);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-double_fig">
            
              <b>BigDecimal.double_fig
</b>
            
            <a href="../classes/BigDecimal.html#method-c-double_fig" name="method-c-double_fig" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>The <a href="BigDecimal.html#method-c-double_fig">::double_fig</a> class
method returns the number of digits a <a href="Float.html">Float</a> number
is allowed to have. The result depends upon the CPU and OS in use.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-double_fig_source')" id="l_method-c-double_fig_source">show</a>
                
              </p>
              <div id="method-c-double_fig_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_double_fig(VALUE self)
{
    return INT2FIX(VpDblFig());
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-json_create">
            
              <b>json_create</b>(object)
            
            <a href="../classes/BigDecimal.html#method-c-json_create" name="method-c-json_create" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Import a <a href="JSON.html">JSON</a> Marshalled object.</p>

<p>method used for <a href="JSON.html">JSON</a> marshalling support.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-json_create_source')" id="l_method-c-json_create_source">show</a>
                
              </p>
              <div id="method-c-json_create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/json/lib/json/add/bigdecimal.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">json_create</span>(<span class="ruby-identifier">object</span>)
  <span class="ruby-constant">BigDecimal</span>.<span class="ruby-identifier">_load</span> <span class="ruby-identifier">object</span>[<span class="ruby-string">&#39;b&#39;</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-limit">
            
              <b>BigDecimal.limit(digits)
</b>
            
            <a href="../classes/BigDecimal.html#method-c-limit" name="method-c-limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Limit the number of significant digits in newly created <a
href="BigDecimal.html">BigDecimal</a> numbers to the specified value.
Rounding is performed as necessary, as specified by <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>

<p>A limit of 0, the default, means no upper limit.</p>

<p>The limit specified by this method takes less priority over any limit
specified to instance methods such as ceil, floor, truncate, or round.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-limit_source')" id="l_method-c-limit_source">show</a>
                
              </p>
              <div id="method-c-limit_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_limit(int argc, VALUE *argv, VALUE self)
{
    VALUE  nFig;
    VALUE  nCur = INT2NUM(VpGetPrecLimit());

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;nFig) == 1) {
        int nf;
        if (NIL_P(nFig)) return nCur;
        Check_Type(nFig, T_FIXNUM);
        nf = FIX2INT(nFig);
        if (nf &lt; 0) {
            rb_raise(rb_eArgError, &quot;argument must be positive&quot;);
        }
        VpSetPrecLimit(nf);
    }
    return nCur;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-mode">
            
              <b>BigDecimal.mode(mode, value)
</b>
            
            <a href="../classes/BigDecimal.html#method-c-mode" name="method-c-mode" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Controls handling of arithmetic exceptions and rounding. If no value is
supplied, the current value is returned.</p>

<p>Six values of the mode parameter control the handling of arithmetic
exceptions:</p>

<p>BigDecimal::EXCEPTION_NaN BigDecimal::EXCEPTION_INFINITY
BigDecimal::EXCEPTION_UNDERFLOW BigDecimal::EXCEPTION_OVERFLOW
BigDecimal::EXCEPTION_ZERODIVIDE BigDecimal::EXCEPTION_ALL</p>

<p>For each mode parameter above, if the value set is false, computation
continues after an arithmetic exception of the appropriate type. When
computation continues, results are as follows:</p>
<dl class="rdoc-list note-list"><dt><a href="BigDecimal.html#EXCEPTION_NaN">EXCEPTION_NaN</a>
<dd>
<p>NaN</p>
</dd><dt><a href="BigDecimal.html#EXCEPTION_INFINITY">EXCEPTION_INFINITY</a>
<dd>
<p>+Infinity or -Infinity</p>
</dd><dt><a href="BigDecimal.html#EXCEPTION_UNDERFLOW">EXCEPTION_UNDERFLOW</a>
<dd>
<p>0</p>
</dd><dt><a href="BigDecimal.html#EXCEPTION_OVERFLOW">EXCEPTION_OVERFLOW</a>
<dd>
<p>+Infinity or -Infinity</p>
</dd><dt><a href="BigDecimal.html#EXCEPTION_ZERODIVIDE">EXCEPTION_ZERODIVIDE</a>
<dd>
<p>+Infinity or -Infinity</p>
</dd></dl>

<p>One value of the mode parameter controls the rounding of numeric values:
BigDecimal::ROUND_MODE. The values it can take are:</p>
<dl class="rdoc-list note-list"><dt><a href="BigDecimal.html#ROUND_UP">ROUND_UP</a>, :up
<dd>
<p>round away from zero</p>
</dd><dt><a href="BigDecimal.html#ROUND_DOWN">ROUND_DOWN</a>, :down, :truncate
<dd>
<p>round towards zero (truncate)</p>
</dd><dt><a href="BigDecimal.html#ROUND_HALF_UP">ROUND_HALF_UP</a>, :half_up, :default
<dd>
<p>round towards the nearest neighbor, unless both neighbors are equidistant,
in which case round away from zero. (default)</p>
</dd><dt><a href="BigDecimal.html#ROUND_HALF_DOWN">ROUND_HALF_DOWN</a>, :half_down
<dd>
<p>round towards the nearest neighbor, unless both neighbors are equidistant,
in which case round towards zero.</p>
</dd><dt><a href="BigDecimal.html#ROUND_HALF_EVEN">ROUND_HALF_EVEN</a>, :half_even, :banker
<dd>
<p>round towards the nearest neighbor, unless both neighbors are equidistant,
in which case round towards the even neighbor (Banker&#39;s rounding)</p>
</dd><dt><a href="BigDecimal.html#ROUND_CEILING">ROUND_CEILING</a>, :ceiling, :ceil
<dd>
<p>round towards positive infinity (ceil)</p>
</dd><dt><a href="BigDecimal.html#ROUND_FLOOR">ROUND_FLOOR</a>, :floor
<dd>
<p>round towards negative infinity (floor)</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-mode_source')" id="l_method-c-mode_source">show</a>
                
              </p>
              <div id="method-c-mode_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_mode(int argc, VALUE *argv, VALUE self)
{
    VALUE which;
    VALUE val;
    unsigned long f,fo;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;which, &amp;val);
    Check_Type(which, T_FIXNUM);
    f = (unsigned long)FIX2INT(which);

    if (f &amp; VP_EXCEPTION_ALL) {
        /* Exception mode setting */
        fo = VpGetException();
        if (val == Qnil) return INT2FIX(fo);
        if (val != Qfalse &amp;&amp; val!=Qtrue) {
            rb_raise(rb_eArgError, &quot;second argument must be true or false&quot;);
            return Qnil; /* Not reached */
        }
        if (f &amp; VP_EXCEPTION_INFINITY) {
            VpSetException((unsigned short)((val == Qtrue) ? (fo | VP_EXCEPTION_INFINITY) :
                        (fo &amp; (~VP_EXCEPTION_INFINITY))));
        }
        fo = VpGetException();
        if (f &amp; VP_EXCEPTION_NaN) {
            VpSetException((unsigned short)((val == Qtrue) ? (fo | VP_EXCEPTION_NaN) :
                        (fo &amp; (~VP_EXCEPTION_NaN))));
        }
        fo = VpGetException();
        if (f &amp; VP_EXCEPTION_UNDERFLOW) {
            VpSetException((unsigned short)((val == Qtrue) ? (fo | VP_EXCEPTION_UNDERFLOW) :
                        (fo &amp; (~VP_EXCEPTION_UNDERFLOW))));
        }
        fo = VpGetException();
        if(f &amp; VP_EXCEPTION_ZERODIVIDE) {
            VpSetException((unsigned short)((val == Qtrue) ? (fo | VP_EXCEPTION_ZERODIVIDE) :
                        (fo &amp; (~VP_EXCEPTION_ZERODIVIDE))));
        }
        fo = VpGetException();
        return INT2FIX(fo);
    }
    if (VP_ROUND_MODE == f) {
        /* Rounding mode setting */
        unsigned short sw;
        fo = VpGetRoundMode();
        if (NIL_P(val)) return INT2FIX(fo);
        sw = check_rounding_mode(val);
        fo = VpSetRoundMode(sw);
        return INT2FIX(fo);
    }
    rb_raise(rb_eTypeError, &quot;first argument for BigDecimal#mode invalid&quot;);
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new(initial, digits)
</b>
            
            <a href="../classes/BigDecimal.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Create a new <a href="BigDecimal.html">BigDecimal</a> object.</p>
<dl class="rdoc-list note-list"><dt>initial
<dd>
<p>The initial value, as an <a href="Integer.html">Integer</a>, a <a
href="Float.html">Float</a>, a <a href="Rational.html">Rational</a>, a <a
href="BigDecimal.html">BigDecimal</a>, or a String.</p>

<p>If it is a String, spaces are ignored and unrecognized characters terminate
the value.</p>
</dd><dt>digits
<dd>
<p>The number of significant digits, as a <a href="Fixnum.html">Fixnum</a>. If
omitted or 0, the number of significant digits is determined from the
initial value.</p>
</dd></dl>

<p>The actual number of significant digits used in computation is usually
larger than the specified number.</p>

<h4 id="method-c-new-label-Exceptions">Exceptions</h4>
<dl class="rdoc-list note-list"><dt><a href="TypeError.html">TypeError</a>
<dd>
<p>If the <code>initial</code> type is neither <a
href="Fixnum.html">Fixnum</a>, <a href="Bignum.html">Bignum</a>, <a
href="Float.html">Float</a>, <a href="Rational.html">Rational</a>, nor <a
href="BigDecimal.html">BigDecimal</a>, this exception is raised.</p>
</dd><dt><a href="TypeError.html">TypeError</a>
<dd>
<p>If the <code>digits</code> is not a <a href="Fixnum.html">Fixnum</a>, this
exception is raised.</p>
</dd><dt><a href="ArgumentError.html">ArgumentError</a>
<dd>
<p>If <code>initial</code> is a <a href="Float.html">Float</a>, and the
<code>digits</code> is larger than Float::DIG + 1, this exception is
raised.</p>
</dd><dt><a href="ArgumentError.html">ArgumentError</a>
<dd>
<p>If the <code>initial</code> is a <a href="Float.html">Float</a> or <a
href="Rational.html">Rational</a>, and the <code>digits</code> value is
omitted, this exception is raised.</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_initialize(int argc, VALUE *argv, VALUE self)
{
    ENTER(1);
    Real *pv = rb_check_typeddata(self, &amp;BigDecimal_data_type);
    Real *x;

    GUARD_OBJ(x, BigDecimal_new(argc, argv));
    if (ToValue(x)) {
        pv = VpCopy(pv, x);
    }
    else {
        VpFree(pv);
        pv = x;
    }
    DATA_PTR(self) = pv;
    pv-&gt;obj = self;
    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-save_exception_mode">
            
              <b>BigDecimal.save_exception_mode { ... }
</b>
            
            <a href="../classes/BigDecimal.html#method-c-save_exception_mode" name="method-c-save_exception_mode" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Execute the provided block, but preserve the exception mode</p>

<pre><code>BigDecimal.save_exception_mode do
  BigDecimal.mode(BigDecimal::EXCEPTION_OVERFLOW, false)
  BigDecimal.mode(BigDecimal::EXCEPTION_NaN, false)

  BigDecimal.new(BigDecimal(&#39;Infinity&#39;))
  BigDecimal.new(BigDecimal(&#39;-Infinity&#39;))
  BigDecimal(BigDecimal.new(&#39;NaN&#39;))
end
</code></pre>

<p>For use with the BigDecimal::EXCEPTION_*</p>

<p>See <a href="BigDecimal.html#method-c-mode">::mode</a></p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-save_exception_mode_source')" id="l_method-c-save_exception_mode_source">show</a>
                
              </p>
              <div id="method-c-save_exception_mode_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_save_exception_mode(VALUE self)
{
    unsigned short const exception_mode = VpGetException();
    int state;
    VALUE ret = rb_protect(rb_yield, Qnil, &amp;state);
    VpSetException(exception_mode);
    if (state) rb_jump_tag(state);
    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-save_limit">
            
              <b>BigDecimal.save_limit { ... }
</b>
            
            <a href="../classes/BigDecimal.html#method-c-save_limit" name="method-c-save_limit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Execute the provided block, but preserve the precision limit</p>

<pre><code>BigDecimal.limit(100)
puts BigDecimal.limit
BigDecimal.save_limit do
    BigDecimal.limit(200)
    puts BigDecimal.limit
end
puts BigDecimal.limit
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-save_limit_source')" id="l_method-c-save_limit_source">show</a>
                
              </p>
              <div id="method-c-save_limit_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_save_limit(VALUE self)
{
    size_t const limit = VpGetPrecLimit();
    int state;
    VALUE ret = rb_protect(rb_yield, Qnil, &amp;state);
    VpSetPrecLimit(limit);
    if (state) rb_jump_tag(state);
    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-save_rounding_mode">
            
              <b>BigDecimal.save_rounding_mode { ... }
</b>
            
            <a href="../classes/BigDecimal.html#method-c-save_rounding_mode" name="method-c-save_rounding_mode" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Execute the provided block, but preserve the rounding mode</p>

<pre><code>BigDecimal.save_rounding_mode do
  BigDecimal.mode(BigDecimal::ROUND_MODE, :up)
  puts BigDecimal.mode(BigDecimal::ROUND_MODE)
end
</code></pre>

<p>For use with the BigDecimal::ROUND_*</p>

<p>See <a href="BigDecimal.html#method-c-mode">::mode</a></p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-save_rounding_mode_source')" id="l_method-c-save_rounding_mode_source">show</a>
                
              </p>
              <div id="method-c-save_rounding_mode_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_save_rounding_mode(VALUE self)
{
    unsigned short const round_mode = VpGetRoundMode();
    int state;
    VALUE ret = rb_protect(rb_yield, Qnil, &amp;state);
    VpSetRoundMode(round_mode);
    if (state) rb_jump_tag(state);
    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-ver">
            
              <b>ver</b>()
            
            <a href="../classes/BigDecimal.html#method-c-ver" name="method-c-ver" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the <a href="BigDecimal.html">BigDecimal</a> version number.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-ver_source')" id="l_method-c-ver_source">show</a>
                
              </p>
              <div id="method-c-ver_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_version(VALUE self)
{
    /*
     * 1.0.0: Ruby 1.8.0
     * 1.0.1: Ruby 1.8.1
     * 1.1.0: Ruby 1.9.3
    */
    return rb_str_new2(&quot;1.1.0&quot;);
}</pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-25">
            
              <b>a % b</b>
            
            <a href="../classes/BigDecimal.html#method-i-25" name="method-i-25" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the modulus from dividing by b.</p>

<p>See <a href="BigDecimal.html#method-i-divmod">#divmod</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-25_source')" id="l_method-i-25_source">show</a>
                
              </p>
              <div id="method-i-25_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_mod(VALUE self, VALUE r) </pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-2A">
            
              <b>mult(value, digits)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-2A" name="method-i-2A" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Multiply by the specified value.</p>

<p>e.g.</p>

<pre><code>c = a.mult(b,n)
c = a * b
</code></pre>
<dl class="rdoc-list note-list"><dt>digits
<dd>
<p>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-2A_source')" id="l_method-i-2A_source">show</a>
                
              </p>
              <div id="method-i-2A_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_mult(VALUE self, VALUE r)
{
    ENTER(5);
    Real *c, *a, *b;
    size_t mx;

    GUARD_OBJ(a, GetVpValue(self, 1));
    if (RB_TYPE_P(r, T_FLOAT)) {
        b = GetVpValueWithPrec(r, DBL_DIG+1, 1);
    }
    else if (RB_TYPE_P(r, T_RATIONAL)) {
        b = GetVpValueWithPrec(r, a-&gt;Prec*VpBaseFig(), 1);
    }
    else {
        b = GetVpValue(r,0);
    }

    if (!b) return DoSomeOne(self, r, &#39;*&#39;);
    SAVE(b);

    mx = a-&gt;Prec + b-&gt;Prec;
    GUARD_OBJ(c, VpCreateRbObject(mx *(VpBaseFig() + 1), &quot;0&quot;));
    VpMult(c, a, b);
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-2A-2A">
            
              <b>a ** n  &rarr; bigdecimal
</b>
            
            <a href="../classes/BigDecimal.html#method-i-2A-2A" name="method-i-2A-2A" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the value raised to the power of n.</p>

<p>See <a href="BigDecimal.html#method-i-power">#power</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-2A-2A_source')" id="l_method-i-2A-2A_source">show</a>
                
              </p>
              <div id="method-i-2A-2A_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_power_op(VALUE self, VALUE exp)
{
    return BigDecimal_power(1, &amp;exp, self);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-2B">
            
              <b>add(value, digits)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-2B" name="method-i-2B" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Add the specified value.</p>

<p>e.g.</p>

<pre><code>c = a.add(b,n)
c = a + b
</code></pre>
<dl class="rdoc-list note-list"><dt>digits
<dd>
<p>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-2B_source')" id="l_method-i-2B_source">show</a>
                
              </p>
              <div id="method-i-2B_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_add(VALUE self, VALUE r)
{
    ENTER(5);
    Real *c, *a, *b;
    size_t mx;

    GUARD_OBJ(a, GetVpValue(self, 1));
    if (RB_TYPE_P(r, T_FLOAT)) {
        b = GetVpValueWithPrec(r, DBL_DIG+1, 1);
    }
    else if (RB_TYPE_P(r, T_RATIONAL)) {
        b = GetVpValueWithPrec(r, a-&gt;Prec*VpBaseFig(), 1);
    }
    else {
        b = GetVpValue(r, 0);
    }

    if (!b) return DoSomeOne(self,r,&#39;+&#39;);
    SAVE(b);

    if (VpIsNaN(b)) return b-&gt;obj;
    if (VpIsNaN(a)) return a-&gt;obj;

    mx = GetAddSubPrec(a, b);
    if (mx == (size_t)-1L) {
        GUARD_OBJ(c,VpCreateRbObject(VpBaseFig() + 1, &quot;0&quot;));
        VpAddSub(c, a, b, 1);
    }
    else {
        GUARD_OBJ(c, VpCreateRbObject(mx * (VpBaseFig() + 1), &quot;0&quot;));
        if(!mx) {
            VpSetInf(c, VpGetSign(a));
        }
        else {
            VpAddSub(c, a, b, 1);
        }
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-2B-40">
            
              <b>+@
</b>
            
            <a href="../classes/BigDecimal.html#method-i-2B-40" name="method-i-2B-40" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return self.</p>

<p>e.g.</p>

<pre><code>b = +a  # b == a
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-2B-40_source')" id="l_method-i-2B-40_source">show</a>
                
              </p>
              <div id="method-i-2B-40_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_uplus(VALUE self)
{
    return self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-2D">
            
              <b>a - b   &rarr; bigdecimal
</b>
            
            <a href="../classes/BigDecimal.html#method-i-2D" name="method-i-2D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Subtract the specified value.</p>

<p>e.g.</p>

<pre><code>c = a - b
</code></pre>

<p>The precision of the result value depends on the type of <code>b</code>.</p>

<p>If <code>b</code> is a <a href="Float.html">Float</a>, the precision of the
result is Float::DIG+1.</p>

<p>If <code>b</code> is a <a href="BigDecimal.html">BigDecimal</a>, the
precision of the result is <code>b</code>&#39;s precision of internal
representation from platform. So, it&#39;s return value is platform
dependent.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-2D_source')" id="l_method-i-2D_source">show</a>
                
              </p>
              <div id="method-i-2D_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_sub(VALUE self, VALUE r)
{
    ENTER(5);
    Real *c, *a, *b;
    size_t mx;

    GUARD_OBJ(a, GetVpValue(self,1));
    if (RB_TYPE_P(r, T_FLOAT)) {
        b = GetVpValueWithPrec(r, DBL_DIG+1, 1);
    }
    else if (RB_TYPE_P(r, T_RATIONAL)) {
        b = GetVpValueWithPrec(r, a-&gt;Prec*VpBaseFig(), 1);
    }
    else {
        b = GetVpValue(r,0);
    }

    if (!b) return DoSomeOne(self,r,&#39;-&#39;);
    SAVE(b);

    if (VpIsNaN(b)) return b-&gt;obj;
    if (VpIsNaN(a)) return a-&gt;obj;

    mx = GetAddSubPrec(a,b);
    if (mx == (size_t)-1L) {
        GUARD_OBJ(c,VpCreateRbObject(VpBaseFig() + 1, &quot;0&quot;));
        VpAddSub(c, a, b, -1);
    }
    else {
        GUARD_OBJ(c,VpCreateRbObject(mx *(VpBaseFig() + 1), &quot;0&quot;));
        if (!mx) {
            VpSetInf(c,VpGetSign(a));
        }
        else {
            VpAddSub(c, a, b, -1);
        }
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-2D-40">
            
              <b>-@
</b>
            
            <a href="../classes/BigDecimal.html#method-i-2D-40" name="method-i-2D-40" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return the negation of self.</p>

<p>e.g.</p>

<pre><code>b = -a
b == a * -1
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-2D-40_source')" id="l_method-i-2D-40_source">show</a>
                
              </p>
              <div id="method-i-2D-40_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_neg(VALUE self)
{
    ENTER(5);
    Real *c, *a;
    GUARD_OBJ(a, GetVpValue(self, 1));
    GUARD_OBJ(c, VpCreateRbObject(a-&gt;Prec *(VpBaseFig() + 1), &quot;0&quot;));
    VpAsgn(c, a, -1);
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-2F">
            
              <b>div(value, digits)
quo(value)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-2F" name="method-i-2F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Divide by the specified value.</p>

<p>e.g.</p>

<pre><code>c = a.div(b,n)
</code></pre>
<dl class="rdoc-list note-list"><dt>digits
<dd>
<p>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
</dd></dl>

<p>If digits is 0, the result is the same as the / operator. If not, the
result is an integer <a href="BigDecimal.html">BigDecimal</a>, by analogy
with <a href="Numeric.html#method-i-div">Numeric#div</a>.</p>

<p>The alias quo is provided since <code>div(value, 0)</code> is the same as
computing the quotient; see <a
href="BigDecimal.html#method-i-divmod">#divmod</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-2F_source')" id="l_method-i-2F_source">show</a>
                
              </p>
              <div id="method-i-2F_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_div(VALUE self, VALUE r)
/* For c = self/r: with round operation */
{
    ENTER(5);
    Real *c=NULL, *res=NULL, *div = NULL;
    r = BigDecimal_divide(&amp;c, &amp;res, &amp;div, self, r);
    if (!NIL_P(r)) return r; /* coerced by other */
    SAVE(c); SAVE(res); SAVE(div);
    /* a/b = c + r/b */
    /* c xxxxx
       r 00000yyyyy  ==&gt; (y/b)*BASE &gt;= HALF_BASE
     */
    /* Round */
    if (VpHasVal(div)) { /* frac[0] must be zero for NaN,INF,Zero */
        VpInternalRound(c, 0, c-&gt;frac[c-&gt;Prec-1], (BDIGIT)(VpBaseVal() * (BDIGIT_DBL)res-&gt;frac[0] / div-&gt;frac[0]));
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-3C">
            
              <b>a < b
</b>
            
            <a href="../classes/BigDecimal.html#method-i-3C" name="method-i-3C" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns true if a is less than b.</p>

<p>Values may be coerced to perform the comparison (see ==, <a
href="BigDecimal.html#method-i-coerce">#coerce</a>).</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-3C_source')" id="l_method-i-3C_source">show</a>
                
              </p>
              <div id="method-i-3C_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_lt(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;&lt;&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-3C-3D">
            
              <b>a <= b
</b>
            
            <a href="../classes/BigDecimal.html#method-i-3C-3D" name="method-i-3C-3D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns true if a is less than or equal to b.</p>

<p>Values may be coerced to perform the comparison (see ==, <a
href="BigDecimal.html#method-i-coerce">#coerce</a>).</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-3C-3D_source')" id="l_method-i-3C-3D_source">show</a>
                
              </p>
              <div id="method-i-3C-3D_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_le(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;L&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-3C-3D-3E">
            
              <b>&lt;=&gt;</b>(p1)
            
            <a href="../classes/BigDecimal.html#method-i-3C-3D-3E" name="method-i-3C-3D-3E" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>The comparison operator. a &lt;=&gt; b is 0 if a == b, 1 if a &gt; b, -1 if
a &lt; b.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-3C-3D-3E_source')" id="l_method-i-3C-3D-3E_source">show</a>
                
              </p>
              <div id="method-i-3C-3D-3E_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_comp(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;*&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-3D-3D">
            
              <b>==</b>(p1)
            
            <a href="../classes/BigDecimal.html#method-i-3D-3D" name="method-i-3D-3D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Tests for value equality; returns true if the values are equal.</p>

<p>The == and === operators and the eql? method have the same implementation
for <a href="BigDecimal.html">BigDecimal</a>.</p>

<p>Values may be coerced to perform the comparison:</p>

<pre><code>BigDecimal.new(&#39;1.0&#39;) == 1.0  -&gt; true</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-3D-3D_source')" id="l_method-i-3D-3D_source">show</a>
                
              </p>
              <div id="method-i-3D-3D_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_eq(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;=&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-3D-3D-3D">
            
              <b>===</b>(p1)
            
            <a href="../classes/BigDecimal.html#method-i-3D-3D-3D" name="method-i-3D-3D-3D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Tests for value equality; returns true if the values are equal.</p>

<p>The == and === operators and the eql? method have the same implementation
for <a href="BigDecimal.html">BigDecimal</a>.</p>

<p>Values may be coerced to perform the comparison:</p>

<pre><code>BigDecimal.new(&#39;1.0&#39;) == 1.0  -&gt; true</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-3D-3D-3D_source')" id="l_method-i-3D-3D-3D_source">show</a>
                
              </p>
              <div id="method-i-3D-3D-3D_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_eq(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;=&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-3E">
            
              <b>a > b
</b>
            
            <a href="../classes/BigDecimal.html#method-i-3E" name="method-i-3E" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns true if a is greater than b.</p>

<p>Values may be coerced to perform the comparison (see ==, <a
href="BigDecimal.html#method-i-coerce">#coerce</a>).</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-3E_source')" id="l_method-i-3E_source">show</a>
                
              </p>
              <div id="method-i-3E_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_gt(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;&gt;&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-3E-3D">
            
              <b>a >= b
</b>
            
            <a href="../classes/BigDecimal.html#method-i-3E-3D" name="method-i-3E-3D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns true if a is greater than or equal to b.</p>

<p>Values may be coerced to perform the comparison (see ==, <a
href="BigDecimal.html#method-i-coerce">#coerce</a>)</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-3E-3D_source')" id="l_method-i-3E-3D_source">show</a>
                
              </p>
              <div id="method-i-3E-3D_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_ge(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;G&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-_dump">
            
              <b>_dump
</b>
            
            <a href="../classes/BigDecimal.html#method-i-_dump" name="method-i-_dump" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p><a href="Method.html">Method</a> used to provide marshalling support.</p>

<pre><code>inf = BigDecimal.new(&#39;Infinity&#39;)
  #=&gt; #&lt;BigDecimal:1e16fa8,&#39;Infinity&#39;,9(9)&gt;
BigDecimal._load(inf._dump)
  #=&gt; #&lt;BigDecimal:1df8dc8,&#39;Infinity&#39;,9(9)&gt;
</code></pre>

<p>See the <a href="Marshal.html">Marshal</a> module.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-_dump_source')" id="l_method-i-_dump_source">show</a>
                
              </p>
              <div id="method-i-_dump_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_dump(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *vp;
    char *psz;
    VALUE dummy;
    volatile VALUE dump;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;dummy);
    GUARD_OBJ(vp,GetVpValue(self, 1));
    dump = rb_str_new(0, VpNumOfChars(vp, &quot;E&quot;)+50);
    psz = RSTRING_PTR(dump);
    sprintf(psz, &quot;%&quot;PRIuSIZE&quot;:&quot;, VpMaxPrec(vp)*VpBaseFig());
    VpToString(vp, psz+strlen(psz), 0, 0);
    rb_str_resize(dump, strlen(psz));
    return dump;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-abs">
            
              <b>abs</b>()
            
            <a href="../classes/BigDecimal.html#method-i-abs" name="method-i-abs" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the absolute value, as a <a href="BigDecimal.html">BigDecimal</a>.</p>

<pre><code>BigDecimal(&#39;5&#39;).abs #=&gt; 5
BigDecimal(&#39;-3&#39;).abs #=&gt; 3
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-abs_source')" id="l_method-i-abs_source">show</a>
                
              </p>
              <div id="method-i-abs_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_abs(VALUE self)
{
    ENTER(5);
    Real *c, *a;
    size_t mx;

    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpAsgn(c, a, 1);
    VpChangeSign(c, 1);
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-add">
            
              <b>add(value, digits)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-add" name="method-i-add" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <pre><code>+</code></pre>

<p>Add the specified value.</p>

<p>e.g.</p>

<pre><code>c = a.add(b,n)
c = a + b
</code></pre>
<dl class="rdoc-list note-list"><dt>digits
<dd>
<p>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_source')" id="l_method-i-add_source">show</a>
                
              </p>
              <div id="method-i-add_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_add2(VALUE self, VALUE b, VALUE n)
{
    ENTER(2);
    Real *cv;
    SIGNED_VALUE mx = GetPositiveInt(n);
    if (mx == 0) return BigDecimal_add(self, b);
    else {
        size_t pl = VpSetPrecLimit(0);
        VALUE   c = BigDecimal_add(self, b);
        VpSetPrecLimit(pl);
        GUARD_OBJ(cv, GetVpValue(c, 1));
        VpLeftRound(cv, VpGetRoundMode(), mx);
        return ToValue(cv);
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-as_json">
            
              <b>as_json</b>(*)
            
            <a href="../classes/BigDecimal.html#method-i-as_json" name="method-i-as_json" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p><a href="Marshal.html">Marshal</a> the object to <a
href="JSON.html">JSON</a>.</p>

<p>method used for <a href="JSON.html">JSON</a> marshalling support.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-as_json_source')" id="l_method-i-as_json_source">show</a>
                
              </p>
              <div id="method-i-as_json_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/json/lib/json/add/bigdecimal.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">as_json</span>(<span class="ruby-operator">*</span>)
  {
    <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">create_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>,
    <span class="ruby-string">&#39;b&#39;</span>            =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">_dump</span>,
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-ceil">
            
              <b>ceil(n)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-ceil" name="method-i-ceil" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return the smallest integer greater than or equal to the value, as a <a
href="BigDecimal.html">BigDecimal</a>.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).ceil #=&gt; 4
BigDecimal(&#39;-9.1&#39;).ceil #=&gt; -9
</code></pre>

<p>If n is specified and positive, the fractional part of the result has no
more than that many digits.</p>

<p>If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).ceil(3) #=&gt; 3.142
BigDecimal(&#39;13345.234&#39;).ceil(-2) #=&gt; 13400.0
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-ceil_source')" id="l_method-i-ceil_source">show</a>
                
              </p>
              <div id="method-i-ceil_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_ceil(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *c, *a;
    int iLoc;
    VALUE vLoc;
    size_t mx, pl = VpSetPrecLimit(0);

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;vLoc) == 0) {
        iLoc = 0;
    } else {
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
    }

    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec * (VpBaseFig() + 1);
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c, a, VP_ROUND_CEIL, iLoc);
    if (argc == 0) {
        return BigDecimal_to_i(ToValue(c));
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-coerce">
            
              <b>coerce</b>(p1)
            
            <a href="../classes/BigDecimal.html#method-i-coerce" name="method-i-coerce" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>The coerce method provides support for Ruby type coercion. It is not
enabled by default.</p>

<p>This means that binary operations like + * / or - can often be performed on
a <a href="BigDecimal.html">BigDecimal</a> and an object of another type,
if the other object can be coerced into a <a
href="BigDecimal.html">BigDecimal</a> value.</p>

<p>e.g.</p>

<pre><code>a = BigDecimal.new(&quot;1.0&quot;)
b = a / 2.0 #=&gt; 0.5
</code></pre>

<p>Note that coercing a String to a <a href="BigDecimal.html">BigDecimal</a>
is not supported by default; it requires a special compile-time option when
building Ruby.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-coerce_source')" id="l_method-i-coerce_source">show</a>
                
              </p>
              <div id="method-i-coerce_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_coerce(VALUE self, VALUE other)
{
    ENTER(2);
    VALUE obj;
    Real *b;

    if (RB_TYPE_P(other, T_FLOAT)) {
        GUARD_OBJ(b, GetVpValueWithPrec(other, DBL_DIG+1, 1));
        obj = rb_assoc_new(ToValue(b), self);
    }
    else {
        if (RB_TYPE_P(other, T_RATIONAL)) {
            Real* pv = DATA_PTR(self);
            GUARD_OBJ(b, GetVpValueWithPrec(other, pv-&gt;Prec*VpBaseFig(), 1));
        }
        else {
            GUARD_OBJ(b, GetVpValue(other, 1));
        }
        obj = rb_assoc_new(b-&gt;obj, self);
    }

    return obj;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-div">
            
              <b>div</b>(p1, p2 = v2)
            
            <a href="../classes/BigDecimal.html#method-i-div" name="method-i-div" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-div_source')" id="l_method-i-div_source">show</a>
                
              </p>
              <div id="method-i-div_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_div3(int argc, VALUE *argv, VALUE self)
{
    VALUE b,n;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;b, &amp;n);

    return BigDecimal_div2(self, b, n);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-divmod">
            
              <b>divmod(value)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-divmod" name="method-i-divmod" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Divides by the specified value, and returns the quotient and modulus as <a
href="BigDecimal.html">BigDecimal</a> numbers. The quotient is rounded
towards negative infinity.</p>

<p>For example:</p>

<pre><code>require &#39;bigdecimal&#39;

a = BigDecimal.new(&quot;42&quot;)
b = BigDecimal.new(&quot;9&quot;)

q, m = a.divmod(b)

c = q * b + m

a == c  #=&gt; true
</code></pre>

<p>The quotient q is (a/b).floor, and the modulus is the amount that must be
added to q * b to get a.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-divmod_source')" id="l_method-i-divmod_source">show</a>
                
              </p>
              <div id="method-i-divmod_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_divmod(VALUE self, VALUE r)
{
    ENTER(5);
    Real *div = NULL, *mod = NULL;

    if (BigDecimal_DoDivmod(self, r, &amp;div, &amp;mod)) {
        SAVE(div); SAVE(mod);
        return rb_assoc_new(ToValue(div), ToValue(mod));
    }
    return DoSomeOne(self,r,rb_intern(&quot;divmod&quot;));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-eql-3F">
            
              <b>eql?</b>(p1)
            
            <a href="../classes/BigDecimal.html#method-i-eql-3F" name="method-i-eql-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Tests for value equality; returns true if the values are equal.</p>

<p>The == and === operators and the eql? method have the same implementation
for <a href="BigDecimal.html">BigDecimal</a>.</p>

<p>Values may be coerced to perform the comparison:</p>

<pre><code>BigDecimal.new(&#39;1.0&#39;) == 1.0  -&gt; true</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-eql-3F_source')" id="l_method-i-eql-3F_source">show</a>
                
              </p>
              <div id="method-i-eql-3F_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_eq(VALUE self, VALUE r)
{
    return BigDecimalCmp(self, r, &#39;=&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-exponent">
            
              <b>exponent</b>()
            
            <a href="../classes/BigDecimal.html#method-i-exponent" name="method-i-exponent" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the exponent of the <a href="BigDecimal.html">BigDecimal</a>
number, as an <a href="Integer.html">Integer</a>.</p>

<p>If the number can be represented as 0.xxxxxx*10**n where xxxxxx is a string
of digits with no leading zeros, then n is the exponent.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-exponent_source')" id="l_method-i-exponent_source">show</a>
                
              </p>
              <div id="method-i-exponent_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_exponent(VALUE self)
{
    ssize_t e = VpExponent10(GetVpValue(self, 1));
    return INT2NUM(e);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-finite-3F">
            
              <b>finite?</b>()
            
            <a href="../classes/BigDecimal.html#method-i-finite-3F" name="method-i-finite-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns True if the value is finite (not NaN or infinite).</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-finite-3F_source')" id="l_method-i-finite-3F_source">show</a>
                
              </p>
              <div id="method-i-finite-3F_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_IsFinite(VALUE self)
{
    Real *p = GetVpValue(self, 1);
    if (VpIsNaN(p)) return Qfalse;
    if (VpIsInf(p)) return Qfalse;
    return Qtrue;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-fix">
            
              <b>fix</b>()
            
            <a href="../classes/BigDecimal.html#method-i-fix" name="method-i-fix" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return the integer part of the number, as a <a
href="BigDecimal.html">BigDecimal</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-fix_source')" id="l_method-i-fix_source">show</a>
                
              </p>
              <div id="method-i-fix_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_fix(VALUE self)
{
    ENTER(5);
    Real *c, *a;
    size_t mx;

    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec *(VpBaseFig() + 1);
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpActiveRound(c, a, VP_ROUND_DOWN, 0); /* 0: round off */
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-floor">
            
              <b>floor(n)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-floor" name="method-i-floor" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return the largest integer less than or equal to the value, as a <a
href="BigDecimal.html">BigDecimal</a>.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).floor #=&gt; 3
BigDecimal(&#39;-9.1&#39;).floor #=&gt; -10
</code></pre>

<p>If n is specified and positive, the fractional part of the result has no
more than that many digits.</p>

<p>If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).floor(3) #=&gt; 3.141
BigDecimal(&#39;13345.234&#39;).floor(-2) #=&gt; 13300.0
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-floor_source')" id="l_method-i-floor_source">show</a>
                
              </p>
              <div id="method-i-floor_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_floor(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *c, *a;
    int iLoc;
    VALUE vLoc;
    size_t mx, pl = VpSetPrecLimit(0);

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;vLoc)==0) {
        iLoc = 0;
    }
    else {
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
    }

    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec * (VpBaseFig() + 1);
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c, a, VP_ROUND_FLOOR, iLoc);
#ifdef BIGDECIMAL_DEBUG
    VPrint(stderr, &quot;floor: c=%\n&quot;, c);
#endif
    if (argc == 0) {
        return BigDecimal_to_i(ToValue(c));
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-frac">
            
              <b>frac</b>()
            
            <a href="../classes/BigDecimal.html#method-i-frac" name="method-i-frac" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Return the fractional part of the number, as a <a
href="BigDecimal.html">BigDecimal</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-frac_source')" id="l_method-i-frac_source">show</a>
                
              </p>
              <div id="method-i-frac_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_frac(VALUE self)
{
    ENTER(5);
    Real *c, *a;
    size_t mx;

    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec * (VpBaseFig() + 1);
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpFrac(c, a);
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-hash">
            
              <b>hash
</b>
            
            <a href="../classes/BigDecimal.html#method-i-hash" name="method-i-hash" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Creates a hash for this <a href="BigDecimal.html">BigDecimal</a>.</p>

<p>Two BigDecimals with equal sign, fractional part and exponent have the same
hash.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-hash_source')" id="l_method-i-hash_source">show</a>
                
              </p>
              <div id="method-i-hash_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_hash(VALUE self)
{
    ENTER(1);
    Real *p;
    st_index_t hash;

    GUARD_OBJ(p, GetVpValue(self, 1));
    hash = (st_index_t)p-&gt;sign;
    /* hash!=2: the case for 0(1),NaN(0) or +-Infinity(3) is sign itself */
    if(hash == 2 || hash == (st_index_t)-2) {
        hash ^= rb_memhash(p-&gt;frac, sizeof(BDIGIT)*p-&gt;Prec);
        hash += p-&gt;exponent;
    }
    return INT2FIX(hash);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-infinite-3F">
            
              <b>infinite?</b>()
            
            <a href="../classes/BigDecimal.html#method-i-infinite-3F" name="method-i-infinite-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns nil, -1, or +1 depending on whether the value is finite, -Infinity,
or +Infinity.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-infinite-3F_source')" id="l_method-i-infinite-3F_source">show</a>
                
              </p>
              <div id="method-i-infinite-3F_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_IsInfinite(VALUE self)
{
    Real *p = GetVpValue(self, 1);
    if (VpIsPosInf(p)) return INT2FIX(1);
    if (VpIsNegInf(p)) return INT2FIX(-1);
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-inspect">
            
              <b>inspect</b>()
            
            <a href="../classes/BigDecimal.html#method-i-inspect" name="method-i-inspect" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns debugging information about the value as a string of
comma-separated values in angle brackets with a leading #:</p>

<pre><code>BigDecimal.new(&quot;1234.5678&quot;).inspect
  #=&gt; &quot;#&lt;BigDecimal:b7ea1130,&#39;0.12345678E4&#39;,8(12)&gt;&quot;
</code></pre>

<p>The first part is the address, the second is the value as a string, and the
final part ss(mm) is the current number of significant digits and the
maximum number of significant digits, respectively.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-inspect_source')" id="l_method-i-inspect_source">show</a>
                
              </p>
              <div id="method-i-inspect_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_inspect(VALUE self)
{
    ENTER(5);
    Real *vp;
    volatile VALUE obj;
    size_t nc;
    char *psz, *tmp;

    GUARD_OBJ(vp, GetVpValue(self, 1));
    nc = VpNumOfChars(vp, &quot;E&quot;);
    nc += (nc + 9) / 10;

    obj = rb_str_new(0, nc+256);
    psz = RSTRING_PTR(obj);
    sprintf(psz, &quot;#&lt;BigDecimal:%&quot;PRIxVALUE&quot;,&#39;&quot;, self);
    tmp = psz + strlen(psz);
    VpToString(vp, tmp, 10, 0);
    tmp += strlen(tmp);
    sprintf(tmp, &quot;&#39;,%&quot;PRIuSIZE&quot;(%&quot;PRIuSIZE&quot;)&gt;&quot;, VpPrec(vp)*VpBaseFig(), VpMaxPrec(vp)*VpBaseFig());
    rb_str_resize(obj, strlen(psz));
    return obj;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-modulo">
            
              <b>a.modulo(b)</b>
            
            <a href="../classes/BigDecimal.html#method-i-modulo" name="method-i-modulo" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the modulus from dividing by b.</p>

<p>See <a href="BigDecimal.html#method-i-divmod">#divmod</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-modulo_source')" id="l_method-i-modulo_source">show</a>
                
              </p>
              <div id="method-i-modulo_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_mod(VALUE self, VALUE r) </pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-mult">
            
              <b>mult(value, digits)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-mult" name="method-i-mult" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Multiply by the specified value.</p>

<p>e.g.</p>

<pre><code>c = a.mult(b,n)
c = a * b
</code></pre>
<dl class="rdoc-list note-list"><dt>digits
<dd>
<p>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-mult_source')" id="l_method-i-mult_source">show</a>
                
              </p>
              <div id="method-i-mult_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_mult2(VALUE self, VALUE b, VALUE n)
{
    ENTER(2);
    Real *cv;
    SIGNED_VALUE mx = GetPositiveInt(n);
    if (mx == 0) return BigDecimal_mult(self, b);
    else {
        size_t pl = VpSetPrecLimit(0);
        VALUE   c = BigDecimal_mult(self, b);
        VpSetPrecLimit(pl);
        GUARD_OBJ(cv, GetVpValue(c, 1));
        VpLeftRound(cv, VpGetRoundMode(), mx);
        return ToValue(cv);
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-nan-3F">
            
              <b>nan?</b>()
            
            <a href="../classes/BigDecimal.html#method-i-nan-3F" name="method-i-nan-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns True if the value is Not a Number.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-nan-3F_source')" id="l_method-i-nan-3F_source">show</a>
                
              </p>
              <div id="method-i-nan-3F_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_IsNaN(VALUE self)
{
    Real *p = GetVpValue(self, 1);
    if (VpIsNaN(p))  return Qtrue;
    return Qfalse;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-nonzero-3F">
            
              <b>nonzero?</b>()
            
            <a href="../classes/BigDecimal.html#method-i-nonzero-3F" name="method-i-nonzero-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns self if the value is non-zero, nil otherwise.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-nonzero-3F_source')" id="l_method-i-nonzero-3F_source">show</a>
                
              </p>
              <div id="method-i-nonzero-3F_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_nonzero(VALUE self)
{
    Real *a = GetVpValue(self, 1);
    return VpIsZero(a) ? Qnil : self;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-power">
            
              <b>power(n)
power(n, prec)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-power" name="method-i-power" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the value raised to the power of n.</p>

<p>Note that n must be an <a href="Integer.html">Integer</a>.</p>

<p>Also available as the operator **.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-power_source')" id="l_method-i-power_source">show</a>
                
              </p>
              <div id="method-i-power_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_power(int argc, VALUE*argv, VALUE self)
{
    ENTER(5);
    VALUE vexp, prec;
    Real* exp = NULL;
    Real *x, *y;
    ssize_t mp, ma, n;
    SIGNED_VALUE int_exp;
    double d;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;vexp, &amp;prec);

    GUARD_OBJ(x, GetVpValue(self, 1));
    n = NIL_P(prec) ? (ssize_t)(x-&gt;Prec*VpBaseFig()) : NUM2SSIZET(prec);

    if (VpIsNaN(x)) {
        y = VpCreateRbObject(n, &quot;0#&quot;);
        RB_GC_GUARD(y-&gt;obj);
        VpSetNaN(y);
        return ToValue(y);
    }

  retry:
    switch (TYPE(vexp)) {
      case T_FIXNUM:
        break;

      case T_BIGNUM:
        break;

      case T_FLOAT:
        d = RFLOAT_VALUE(vexp);
        if (d == round(d)) {
            if (FIXABLE(d)) {
                vexp = LONG2FIX((long)d);
            }
            else {
                vexp = rb_dbl2big(d);
            }
            goto retry;
        }
        exp = GetVpValueWithPrec(vexp, DBL_DIG+1, 1);
        break;

      case T_RATIONAL:
        if (is_zero(rb_rational_num(vexp))) {
            if (is_positive(vexp)) {
                vexp = INT2FIX(0);
                goto retry;
            }
        }
        else if (is_one(rb_rational_den(vexp))) {
            vexp = rb_rational_num(vexp);
            goto retry;
        }
        exp = GetVpValueWithPrec(vexp, n, 1);
        break;

      case T_DATA:
        if (is_kind_of_BigDecimal(vexp)) {
            VALUE zero = INT2FIX(0);
            VALUE rounded = BigDecimal_round(1, &amp;zero, vexp);
            if (RTEST(BigDecimal_eq(vexp, rounded))) {
                vexp = BigDecimal_to_i(vexp);
                goto retry;
            }
            exp = DATA_PTR(vexp);
            break;
        }
        /* fall through */
      default:
        rb_raise(rb_eTypeError,
                 &quot;wrong argument type %&quot;PRIsVALUE&quot; (expected scalar Numeric)&quot;,
                 RB_OBJ_CLASSNAME(vexp));
    }

    if (VpIsZero(x)) {
        if (is_negative(vexp)) {
            y = VpCreateRbObject(n, &quot;#0&quot;);
            RB_GC_GUARD(y-&gt;obj);
            if (VpGetSign(x) &lt; 0) {
                if (is_integer(vexp)) {
                    if (is_even(vexp)) {
                        /* (-0) ** (-even_integer)  -&gt; Infinity */
                        VpSetPosInf(y);
                    }
                    else {
                        /* (-0) ** (-odd_integer)  -&gt; -Infinity */
                        VpSetNegInf(y);
                    }
                }
                else {
                    /* (-0) ** (-non_integer)  -&gt; Infinity */
                    VpSetPosInf(y);
                }
            }
            else {
                /* (+0) ** (-num)  -&gt; Infinity */
                VpSetPosInf(y);
            }
            return ToValue(y);
        }
        else if (is_zero(vexp)) {
            return ToValue(VpCreateRbObject(n, &quot;1&quot;));
        }
        else {
            return ToValue(VpCreateRbObject(n, &quot;0&quot;));
        }
    }

    if (is_zero(vexp)) {
        return ToValue(VpCreateRbObject(n, &quot;1&quot;));
    }
    else if (is_one(vexp)) {
        return self;
    }

    if (VpIsInf(x)) {
        if (is_negative(vexp)) {
            if (VpGetSign(x) &lt; 0) {
                if (is_integer(vexp)) {
                    if (is_even(vexp)) {
                        /* (-Infinity) ** (-even_integer) -&gt; +0 */
                        return ToValue(VpCreateRbObject(n, &quot;0&quot;));
                    }
                    else {
                        /* (-Infinity) ** (-odd_integer) -&gt; -0 */
                        return ToValue(VpCreateRbObject(n, &quot;-0&quot;));
                    }
                }
                else {
                    /* (-Infinity) ** (-non_integer) -&gt; -0 */
                    return ToValue(VpCreateRbObject(n, &quot;-0&quot;));
                }
            }
            else {
                return ToValue(VpCreateRbObject(n, &quot;0&quot;));
            }
        }
        else {
            y = VpCreateRbObject(n, &quot;0#&quot;);
            if (VpGetSign(x) &lt; 0) {
                if (is_integer(vexp)) {
                    if (is_even(vexp)) {
                        VpSetPosInf(y);
                    }
                    else {
                        VpSetNegInf(y);
                    }
                }
                else {
                    /* TODO: support complex */
                    rb_raise(rb_eMathDomainError,
                             &quot;a non-integral exponent for a negative base&quot;);
                }
            }
            else {
                VpSetPosInf(y);
            }
            return ToValue(y);
        }
    }

    if (exp != NULL) {
        return rmpd_power_by_big_decimal(x, exp, n);
    }
    else if (RB_TYPE_P(vexp, T_BIGNUM)) {
        VALUE abs_value = BigDecimal_abs(self);
        if (is_one(abs_value)) {
            return ToValue(VpCreateRbObject(n, &quot;1&quot;));
        }
        else if (RTEST(rb_funcall(abs_value, &#39;&lt;&#39;, 1, INT2FIX(1)))) {
            if (is_negative(vexp)) {
                y = VpCreateRbObject(n, &quot;0#&quot;);
                if (is_even(vexp)) {
                    VpSetInf(y, VpGetSign(x));
                }
                else {
                    VpSetInf(y, -VpGetSign(x));
                }
                return ToValue(y);
            }
            else if (VpGetSign(x) &lt; 0 &amp;&amp; is_even(vexp)) {
                return ToValue(VpCreateRbObject(n, &quot;-0&quot;));
            }
            else {
                return ToValue(VpCreateRbObject(n, &quot;0&quot;));
            }
        }
        else {
            if (is_positive(vexp)) {
                y = VpCreateRbObject(n, &quot;0#&quot;);
                if (is_even(vexp)) {
                    VpSetInf(y, VpGetSign(x));
                }
                else {
                    VpSetInf(y, -VpGetSign(x));
                }
                return ToValue(y);
            }
            else if (VpGetSign(x) &lt; 0 &amp;&amp; is_even(vexp)) {
                return ToValue(VpCreateRbObject(n, &quot;-0&quot;));
            }
            else {
                return ToValue(VpCreateRbObject(n, &quot;0&quot;));
            }
        }
    }

    int_exp = FIX2LONG(vexp);
    ma = int_exp;
    if (ma &lt;  0) ma = -ma;
    if (ma == 0) ma = 1;

    if (VpIsDef(x)) {
        mp = x-&gt;Prec * (VpBaseFig() + 1);
        GUARD_OBJ(y, VpCreateRbObject(mp * (ma + 1), &quot;0&quot;));
    }
    else {
        GUARD_OBJ(y, VpCreateRbObject(1, &quot;0&quot;));
    }
    VpPower(y, x, int_exp);
    if (!NIL_P(prec) &amp;&amp; VpIsDef(y)) {
        VpMidRound(y, VpGetRoundMode(), n);
    }
    return ToValue(y);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-precs">
            
              <b>precs
</b>
            
            <a href="../classes/BigDecimal.html#method-i-precs" name="method-i-precs" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns an Array of two <a href="Integer.html">Integer</a> values.</p>

<p>The first value is the current number of significant digits in the <a
href="BigDecimal.html">BigDecimal</a>. The second value is the maximum
number of significant digits for the <a
href="BigDecimal.html">BigDecimal</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-precs_source')" id="l_method-i-precs_source">show</a>
                
              </p>
              <div id="method-i-precs_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_prec(VALUE self)
{
    ENTER(1);
    Real *p;
    VALUE obj;

    GUARD_OBJ(p, GetVpValue(self, 1));
    obj = rb_assoc_new(INT2NUM(p-&gt;Prec*VpBaseFig()),
                       INT2NUM(p-&gt;MaxPrec*VpBaseFig()));
    return obj;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-quo">
            
              <b>quo(value)</b>
            
            <a href="../classes/BigDecimal.html#method-i-quo" name="method-i-quo" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Divide by the specified value.</p>

<p>e.g.</p>

<pre><code>c = a.div(b,n)
</code></pre>
<dl class="rdoc-list note-list"><dt>digits
<dd>
<p>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
</dd></dl>

<p>If digits is 0, the result is the same as the / operator. If not, the
result is an integer <a href="BigDecimal.html">BigDecimal</a>, by analogy
with <a href="Numeric.html#method-i-div">Numeric#div</a>.</p>

<p>The alias quo is provided since <code>div(value, 0)</code> is the same as
computing the quotient; see <a
href="BigDecimal.html#method-i-divmod">#divmod</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-quo_source')" id="l_method-i-quo_source">show</a>
                
              </p>
              <div id="method-i-quo_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_div(VALUE self, VALUE r)
/* For c = self/r: with round operation */
{
    ENTER(5);
    Real *c=NULL, *res=NULL, *div = NULL;
    r = BigDecimal_divide(&amp;c, &amp;res, &amp;div, self, r);
    if (!NIL_P(r)) return r; /* coerced by other */
    SAVE(c); SAVE(res); SAVE(div);
    /* a/b = c + r/b */
    /* c xxxxx
       r 00000yyyyy  ==&gt; (y/b)*BASE &gt;= HALF_BASE
     */
    /* Round */
    if (VpHasVal(div)) { /* frac[0] must be zero for NaN,INF,Zero */
        VpInternalRound(c, 0, c-&gt;frac[c-&gt;Prec-1], (BDIGIT)(VpBaseVal() * (BDIGIT_DBL)res-&gt;frac[0] / div-&gt;frac[0]));
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remainder">
            
              <b>remainder(value)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-remainder" name="method-i-remainder" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the remainder from dividing by the value.</p>

<p>x.remainder(y) means x-y*(x/y).truncate</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remainder_source')" id="l_method-i-remainder_source">show</a>
                
              </p>
              <div id="method-i-remainder_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_remainder(VALUE self, VALUE r) /* remainder */
{
    VALUE  f;
    Real  *d, *rv = 0;
    f = BigDecimal_divremain(self, r, &amp;d, &amp;rv);
    if (!NIL_P(f)) return f;
    return ToValue(rv);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-round">
            
              <b>round(n, mode)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-round" name="method-i-round" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Round to the nearest integer (by default), returning the result as a <a
href="BigDecimal.html">BigDecimal</a>.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).round #=&gt; 3
BigDecimal(&#39;8.7&#39;).round #=&gt; 9
BigDecimal(&#39;-9.9&#39;).round #=&gt; -10
</code></pre>

<p>If n is specified and positive, the fractional part of the result has no
more than that many digits.</p>

<p>If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).round(3) #=&gt; 3.142
BigDecimal(&#39;13345.234&#39;).round(-2) #=&gt; 13300.0
</code></pre>

<p>The value of the optional mode argument can be used to determine how
rounding is performed; see <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-round_source')" id="l_method-i-round_source">show</a>
                
              </p>
              <div id="method-i-round_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_round(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real   *c, *a;
    int    iLoc = 0;
    VALUE  vLoc;
    VALUE  vRound;
    size_t mx, pl;

    unsigned short sw = VpGetRoundMode();

    switch (rb_scan_args(argc, argv, &quot;02&quot;, &amp;vLoc, &amp;vRound)) {
      case 0:
        iLoc = 0;
        break;
      case 1:
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
        break;
      case 2:
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
        sw = check_rounding_mode(vRound);
        break;
      default:
        break;
    }

    pl = VpSetPrecLimit(0);
    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec * (VpBaseFig() + 1);
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c, a, sw, iLoc);
    if (argc == 0) {
        return BigDecimal_to_i(ToValue(c));
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-sign">
            
              <b>sign</b>()
            
            <a href="../classes/BigDecimal.html#method-i-sign" name="method-i-sign" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the sign of the value.</p>

<p>Returns a positive value if &gt; 0, a negative value if &lt; 0, and a zero
if == 0.</p>

<p>The specific value returned indicates the type and sign of the <a
href="BigDecimal.html">BigDecimal</a>, as follows:</p>
<dl class="rdoc-list note-list"><dt>BigDecimal::SIGN_NaN
<dd>
<p>value is Not a Number</p>
</dd><dt>BigDecimal::SIGN_POSITIVE_ZERO
<dd>
<p>value is +0</p>
</dd><dt>BigDecimal::SIGN_NEGATIVE_ZERO
<dd>
<p>value is -0</p>
</dd><dt>BigDecimal::SIGN_POSITIVE_INFINITE
<dd>
<p>value is +Infinity</p>
</dd><dt>BigDecimal::SIGN_NEGATIVE_INFINITE
<dd>
<p>value is -Infinity</p>
</dd><dt>BigDecimal::SIGN_POSITIVE_FINITE
<dd>
<p>value is positive</p>
</dd><dt>BigDecimal::SIGN_NEGATIVE_FINITE
<dd>
<p>value is negative</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-sign_source')" id="l_method-i-sign_source">show</a>
                
              </p>
              <div id="method-i-sign_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_sign(VALUE self)
{ /* sign */
    int s = GetVpValue(self, 1)-&gt;sign;
    return INT2FIX(s);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-split">
            
              <b>split</b>()
            
            <a href="../classes/BigDecimal.html#method-i-split" name="method-i-split" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Splits a <a href="BigDecimal.html">BigDecimal</a> number into four parts,
returned as an array of values.</p>

<p>The first value represents the sign of the <a
href="BigDecimal.html">BigDecimal</a>, and is -1 or 1, or 0 if the <a
href="BigDecimal.html">BigDecimal</a> is Not a Number.</p>

<p>The second value is a string representing the significant digits of the <a
href="BigDecimal.html">BigDecimal</a>, with no leading zeros.</p>

<p>The third value is the base used for arithmetic (currently always 10) as an
<a href="Integer.html">Integer</a>.</p>

<p>The fourth value is an <a href="Integer.html">Integer</a> exponent.</p>

<p>If the <a href="BigDecimal.html">BigDecimal</a> can be represented as
0.xxxxxx*10**n, then xxxxxx is the string of significant digits with no
leading zeros, and n is the exponent.</p>

<p>From these values, you can translate a <a
href="BigDecimal.html">BigDecimal</a> to a float as follows:</p>

<pre><code>sign, significant_digits, base, exponent = a.split
f = sign * &quot;0.#{significant_digits}&quot;.to_f * (base ** exponent)
</code></pre>

<p>(Note that the <a href="BigDecimal.html#method-i-to_f">#to_f</a> method is
provided as a more convenient way to translate a <a
href="BigDecimal.html">BigDecimal</a> to a <a href="Float.html">Float</a>.)</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-split_source')" id="l_method-i-split_source">show</a>
                
              </p>
              <div id="method-i-split_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_split(VALUE self)
{
    ENTER(5);
    Real *vp;
    VALUE obj,str;
    ssize_t e, s;
    char *psz1;

    GUARD_OBJ(vp, GetVpValue(self, 1));
    str = rb_str_new(0, VpNumOfChars(vp, &quot;E&quot;));
    psz1 = RSTRING_PTR(str);
    VpSzMantissa(vp, psz1);
    s = 1;
    if(psz1[0] == &#39;-&#39;) {
        size_t len = strlen(psz1 + 1);

        memmove(psz1, psz1 + 1, len);
        psz1[len] = &#39;\0&#39;;
        s = -1;
    }
    if (psz1[0] == &#39;N&#39;) s = 0; /* NaN */
    e = VpExponent10(vp);
    obj = rb_ary_new2(4);
    rb_ary_push(obj, INT2FIX(s));
    rb_ary_push(obj, str);
    rb_str_resize(str, strlen(psz1));
    rb_ary_push(obj, INT2FIX(10));
    rb_ary_push(obj, INT2NUM(e));
    return obj;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-sqrt">
            
              <b>sqrt(n)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-sqrt" name="method-i-sqrt" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the square root of the value.</p>

<p>Result has at least n significant digits.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-sqrt_source')" id="l_method-i-sqrt_source">show</a>
                
              </p>
              <div id="method-i-sqrt_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_sqrt(VALUE self, VALUE nFig)
{
    ENTER(5);
    Real *c, *a;
    size_t mx, n;

    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec * (VpBaseFig() + 1);

    n = GetPositiveInt(nFig) + VpDblFig() + BASE_FIG;
    if (mx &lt;= n) mx = n;
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpSqrt(c, a);
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-sub">
            
              <b>sub(value, digits)  &rarr; bigdecimal
</b>
            
            <a href="../classes/BigDecimal.html#method-i-sub" name="method-i-sub" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Subtract the specified value.</p>

<p>e.g.</p>

<pre><code>c = a.sub(b,n)
</code></pre>
<dl class="rdoc-list note-list"><dt>digits
<dd>
<p>If specified and less than the number of significant digits of the result,
the result is rounded to that number of digits, according to <a
href="BigDecimal.html#method-c-mode">::mode</a>.</p>
</dd></dl>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-sub_source')" id="l_method-i-sub_source">show</a>
                
              </p>
              <div id="method-i-sub_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_sub2(VALUE self, VALUE b, VALUE n)
{
    ENTER(2);
    Real *cv;
    SIGNED_VALUE mx = GetPositiveInt(n);
    if (mx == 0) return BigDecimal_sub(self, b);
    else {
        size_t pl = VpSetPrecLimit(0);
        VALUE   c = BigDecimal_sub(self, b);
        VpSetPrecLimit(pl);
        GUARD_OBJ(cv, GetVpValue(c, 1));
        VpLeftRound(cv, VpGetRoundMode(), mx);
        return ToValue(cv);
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_d">
            
              <b>a.to_d &rarr; bigdecimal
</b>
            
            <a href="../classes/BigDecimal.html#method-i-to_d" name="method-i-to_d" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns self.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_d_source')" id="l_method-i-to_d_source">show</a>
                
              </p>
              <div id="method-i-to_d_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/bigdecimal/lib/bigdecimal/util.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_d</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_digits">
            
              <b>a.to_digits &rarr; string
</b>
            
            <a href="../classes/BigDecimal.html#method-i-to_digits" name="method-i-to_digits" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts a <a href="BigDecimal.html">BigDecimal</a> to a String of the form
â€œnnnnnn.mmmâ€. This method is deprecated; use <a
href="BigDecimal.html#method-i-to_s">#to_s</a>(â€œFâ€) instead.</p>

<pre><code>require &#39;bigdecimal&#39;
require &#39;bigdecimal/util&#39;

d = BigDecimal.new(&quot;3.14&quot;)
d.to_digits
# =&gt; &quot;3.14&quot;
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_digits_source')" id="l_method-i-to_digits_source">show</a>
                
              </p>
              <div id="method-i-to_digits_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/bigdecimal/lib/bigdecimal/util.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_digits</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">nan?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">infinite?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">zero?</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">i</span>       = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-identifier">_</span>,<span class="ruby-identifier">f</span>,<span class="ruby-identifier">_</span>,<span class="ruby-identifier">z</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">frac</span>.<span class="ruby-identifier">split</span>
    <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.&quot;</span> <span class="ruby-operator">+</span> (<span class="ruby-string">&quot;0&quot;</span><span class="ruby-operator">*</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">z</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">f</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_f">
            
              <b>to_f</b>()
            
            <a href="../classes/BigDecimal.html#method-i-to_f" name="method-i-to_f" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns a new <a href="Float.html">Float</a> object having approximately
the same value as the <a href="BigDecimal.html">BigDecimal</a> number.
Normal accuracy limits and built-in errors of binary <a
href="Float.html">Float</a> arithmetic apply.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_f_source')" id="l_method-i-to_f_source">show</a>
                
              </p>
              <div id="method-i-to_f_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_to_f(VALUE self)
{
    ENTER(1);
    Real *p;
    double d;
    SIGNED_VALUE e;
    char *buf;
    volatile VALUE str;

    GUARD_OBJ(p, GetVpValue(self, 1));
    if (VpVtoD(&amp;d, &amp;e, p) != 1)
        return rb_float_new(d);
    if (e &gt; (SIGNED_VALUE)(DBL_MAX_10_EXP+BASE_FIG))
        goto overflow;
    if (e &lt; (SIGNED_VALUE)(DBL_MIN_10_EXP-BASE_FIG))
        goto underflow;

    str = rb_str_new(0, VpNumOfChars(p, &quot;E&quot;));
    buf = RSTRING_PTR(str);
    VpToString(p, buf, 0, 0);
    errno = 0;
    d = strtod(buf, 0);
    if (errno == ERANGE) {
        if (d == 0.0) goto underflow;
        if (fabs(d) &gt;= HUGE_VAL) goto overflow;
    }
    return rb_float_new(d);

overflow:
    VpException(VP_EXCEPTION_OVERFLOW, &quot;BigDecimal to Float conversion&quot;, 0);
    if (p-&gt;sign &gt;= 0)
        return rb_float_new(VpGetDoublePosInf());
    else
        return rb_float_new(VpGetDoubleNegInf());

underflow:
    VpException(VP_EXCEPTION_UNDERFLOW, &quot;BigDecimal to Float conversion&quot;, 0);
    if (p-&gt;sign &gt;= 0)
        return rb_float_new(0.0);
    else
        return rb_float_new(-0.0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_i">
            
              <b>to_i</b>()
            
            <a href="../classes/BigDecimal.html#method-i-to_i" name="method-i-to_i" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the value as an integer (Fixnum or <a
href="Bignum.html">Bignum</a>).</p>

<p>If the BigNumber is infinity or NaN, raises <a
href="FloatDomainError.html">FloatDomainError</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_i_source')" id="l_method-i-to_i_source">show</a>
                
              </p>
              <div id="method-i-to_i_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_to_i(VALUE self)
{
    ENTER(5);
    ssize_t e, nf;
    Real *p;

    GUARD_OBJ(p, GetVpValue(self, 1));
    BigDecimal_check_num(p);

    e = VpExponent10(p);
    if (e &lt;= 0) return INT2FIX(0);
    nf = VpBaseFig();
    if (e &lt;= nf) {
        return LONG2NUM((long)(VpGetSign(p) * (BDIGIT_DBL_SIGNED)p-&gt;frac[0]));
    }
    else {
        VALUE a = BigDecimal_split(self);
        VALUE digits = RARRAY_AREF(a, 1);
        VALUE numerator = rb_funcall(digits, rb_intern(&quot;to_i&quot;), 0);
        VALUE ret;
        ssize_t dpower = e - (ssize_t)RSTRING_LEN(digits);

        if (VpGetSign(p) &lt; 0) {
            numerator = rb_funcall(numerator, &#39;*&#39;, 1, INT2FIX(-1));
        }
        if (dpower &lt; 0) {
            ret = rb_funcall(numerator, rb_intern(&quot;div&quot;), 1,
                              rb_funcall(INT2FIX(10), rb_intern(&quot;**&quot;), 1,
                                         INT2FIX(-dpower)));
        }
        else {
            ret = rb_funcall(numerator, &#39;*&#39;, 1,
                             rb_funcall(INT2FIX(10), rb_intern(&quot;**&quot;), 1,
                                        INT2FIX(dpower)));
        }
        if (RB_TYPE_P(ret, T_FLOAT)) {
            rb_raise(rb_eFloatDomainError, &quot;Infinity&quot;);
        }
        return ret;
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_int">
            
              <b>to_int</b>()
            
            <a href="../classes/BigDecimal.html#method-i-to_int" name="method-i-to_int" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the value as an integer (Fixnum or <a
href="Bignum.html">Bignum</a>).</p>

<p>If the BigNumber is infinity or NaN, raises <a
href="FloatDomainError.html">FloatDomainError</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_int_source')" id="l_method-i-to_int_source">show</a>
                
              </p>
              <div id="method-i-to_int_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_to_i(VALUE self)
{
    ENTER(5);
    ssize_t e, nf;
    Real *p;

    GUARD_OBJ(p, GetVpValue(self, 1));
    BigDecimal_check_num(p);

    e = VpExponent10(p);
    if (e &lt;= 0) return INT2FIX(0);
    nf = VpBaseFig();
    if (e &lt;= nf) {
        return LONG2NUM((long)(VpGetSign(p) * (BDIGIT_DBL_SIGNED)p-&gt;frac[0]));
    }
    else {
        VALUE a = BigDecimal_split(self);
        VALUE digits = RARRAY_AREF(a, 1);
        VALUE numerator = rb_funcall(digits, rb_intern(&quot;to_i&quot;), 0);
        VALUE ret;
        ssize_t dpower = e - (ssize_t)RSTRING_LEN(digits);

        if (VpGetSign(p) &lt; 0) {
            numerator = rb_funcall(numerator, &#39;*&#39;, 1, INT2FIX(-1));
        }
        if (dpower &lt; 0) {
            ret = rb_funcall(numerator, rb_intern(&quot;div&quot;), 1,
                              rb_funcall(INT2FIX(10), rb_intern(&quot;**&quot;), 1,
                                         INT2FIX(-dpower)));
        }
        else {
            ret = rb_funcall(numerator, &#39;*&#39;, 1,
                             rb_funcall(INT2FIX(10), rb_intern(&quot;**&quot;), 1,
                                        INT2FIX(dpower)));
        }
        if (RB_TYPE_P(ret, T_FLOAT)) {
            rb_raise(rb_eFloatDomainError, &quot;Infinity&quot;);
        }
        return ret;
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_json">
            
              <b>to_json</b>(*)
            
            <a href="../classes/BigDecimal.html#method-i-to_json" name="method-i-to_json" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>return the <a href="JSON.html">JSON</a> value</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_json_source')" id="l_method-i-to_json_source">show</a>
                
              </p>
              <div id="method-i-to_json_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ext/json/lib/json/add/bigdecimal.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_json</span>(<span class="ruby-operator">*</span>)
  <span class="ruby-identifier">as_json</span>.<span class="ruby-identifier">to_json</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_r">
            
              <b>to_r</b>()
            
            <a href="../classes/BigDecimal.html#method-i-to_r" name="method-i-to_r" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts a <a href="BigDecimal.html">BigDecimal</a> to a <a
href="Rational.html">Rational</a>.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_r_source')" id="l_method-i-to_r_source">show</a>
                
              </p>
              <div id="method-i-to_r_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_to_r(VALUE self)
{
    Real *p;
    ssize_t sign, power, denomi_power;
    VALUE a, digits, numerator;

    p = GetVpValue(self, 1);
    BigDecimal_check_num(p);

    sign = VpGetSign(p);
    power = VpExponent10(p);
    a = BigDecimal_split(self);
    digits = RARRAY_AREF(a, 1);
    denomi_power = power - RSTRING_LEN(digits);
    numerator = rb_funcall(digits, rb_intern(&quot;to_i&quot;), 0);

    if (sign &lt; 0) {
        numerator = rb_funcall(numerator, &#39;*&#39;, 1, INT2FIX(-1));
    }
    if (denomi_power &lt; 0) {
        return rb_Rational(numerator,
                           rb_funcall(INT2FIX(10), rb_intern(&quot;**&quot;), 1,
                                      INT2FIX(-denomi_power)));
    }
    else {
        return rb_Rational1(rb_funcall(numerator, &#39;*&#39;, 1,
                                       rb_funcall(INT2FIX(10), rb_intern(&quot;**&quot;), 1,
                                                  INT2FIX(denomi_power))));
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_s">
            
              <b>to_s(s)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-to_s" name="method-i-to_s" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Converts the value to a string.</p>

<p>The default format looks like  0.xxxxEnn.</p>

<p>The optional parameter s consists of either an integer; or an optional
&#39;+&#39; or &#39; &#39;, followed by an optional number, followed by an
optional &#39;E&#39; or &#39;F&#39;.</p>

<p>If there is a &#39;+&#39; at the start of s, positive values are returned
with a leading &#39;+&#39;.</p>

<p>A space at the start of s returns positive values with a leading space.</p>

<p>If s contains a number, a space is inserted after each group of that many
fractional digits.</p>

<p>If s ends with an &#39;E&#39;, engineering notation (0.xxxxEnn) is used.</p>

<p>If s ends with an &#39;F&#39;, conventional floating point notation is
used.</p>

<p>Examples:</p>

<pre><code>BigDecimal.new(&#39;-123.45678901234567890&#39;).to_s(&#39;5F&#39;)
  #=&gt; &#39;-123.45678 90123 45678 9&#39;

BigDecimal.new(&#39;123.45678901234567890&#39;).to_s(&#39;+8F&#39;)
  #=&gt; &#39;+123.45678901 23456789&#39;

BigDecimal.new(&#39;123.45678901234567890&#39;).to_s(&#39; F&#39;)
  #=&gt; &#39; 123.4567890123456789&#39;
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-to_s_source')" id="l_method-i-to_s_source">show</a>
                
              </p>
              <div id="method-i-to_s_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_to_s(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    int   fmt = 0;   /* 0:E format */
    int   fPlus = 0; /* =0:default,=1: set &#39; &#39; before digits ,set &#39;+&#39; before digits. */
    Real  *vp;
    volatile VALUE str;
    char  *psz;
    char   ch;
    size_t nc, mc = 0;
    VALUE  f;

    GUARD_OBJ(vp, GetVpValue(self, 1));

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;f) == 1) {
        if (RB_TYPE_P(f, T_STRING)) {
            SafeStringValue(f);
            psz = RSTRING_PTR(f);
            if (*psz == &#39; &#39;) {
                fPlus = 1;
                psz++;
            }
            else if (*psz == &#39;+&#39;) {
                fPlus = 2;
                psz++;
            }
            while ((ch = *psz++) != 0) {
                if (ISSPACE(ch)) {
                    continue;
                }
                if (!ISDIGIT(ch)) {
                    if (ch == &#39;F&#39; || ch == &#39;f&#39;) {
                        fmt = 1; /* F format */
                    }
                    break;
                }
                mc = mc*10 + ch - &#39;0&#39;;
            }
        }
        else {
            mc = (size_t)GetPositiveInt(f);
        }
    }
    if (fmt) {
        nc = VpNumOfChars(vp, &quot;F&quot;);
    }
    else {
        nc = VpNumOfChars(vp, &quot;E&quot;);
    }
    if (mc &gt; 0) {
        nc += (nc + mc - 1) / mc + 1;
    }

    str = rb_str_new(0, nc);
    psz = RSTRING_PTR(str);

    if (fmt) {
        VpToFString(vp, psz, mc, fPlus);
    }
    else {
        VpToString (vp, psz, mc, fPlus);
    }
    rb_str_resize(str, strlen(psz));
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-truncate">
            
              <b>truncate(n)
</b>
            
            <a href="../classes/BigDecimal.html#method-i-truncate" name="method-i-truncate" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Truncate to the nearest integer (by default), returning the result as a <a
href="BigDecimal.html">BigDecimal</a>.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).truncate #=&gt; 3
BigDecimal(&#39;8.7&#39;).truncate #=&gt; 8
BigDecimal(&#39;-9.9&#39;).truncate #=&gt; -9
</code></pre>

<p>If n is specified and positive, the fractional part of the result has no
more than that many digits.</p>

<p>If n is specified and negative, at least that many digits to the left of
the decimal point will be 0 in the result.</p>

<pre><code>BigDecimal(&#39;3.14159&#39;).truncate(3) #=&gt; 3.141
BigDecimal(&#39;13345.234&#39;).truncate(-2) #=&gt; 13300.0
</code></pre>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-truncate_source')" id="l_method-i-truncate_source">show</a>
                
              </p>
              <div id="method-i-truncate_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_truncate(int argc, VALUE *argv, VALUE self)
{
    ENTER(5);
    Real *c, *a;
    int iLoc;
    VALUE vLoc;
    size_t mx, pl = VpSetPrecLimit(0);

    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;vLoc) == 0) {
        iLoc = 0;
    }
    else {
        Check_Type(vLoc, T_FIXNUM);
        iLoc = FIX2INT(vLoc);
    }

    GUARD_OBJ(a, GetVpValue(self, 1));
    mx = a-&gt;Prec * (VpBaseFig() + 1);
    GUARD_OBJ(c, VpCreateRbObject(mx, &quot;0&quot;));
    VpSetPrecLimit(pl);
    VpActiveRound(c, a, VP_ROUND_DOWN, iLoc); /* 0: truncate */
    if (argc == 0) {
        return BigDecimal_to_i(ToValue(c));
    }
    return ToValue(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-zero-3F">
            
              <b>zero?</b>()
            
            <a href="../classes/BigDecimal.html#method-i-zero-3F" name="method-i-zero-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns True if the value is zero.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-zero-3F_source')" id="l_method-i-zero-3F_source">show</a>
                
              </p>
              <div id="method-i-zero-3F_source" class="dyn-source">
                <pre>static VALUE
BigDecimal_zero(VALUE self)
{
    Real *a = GetVpValue(self, 1);
    return VpIsZero(a) ? Qtrue : Qfalse;
}</pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    